(function() { var f;function g(b){function c(c){var e=b;if(c)for(var h=0;h<c.length;h++)e=e.replace("$"+(h+1),c[h]);return e}c.toString=function(){k.error("Attempt to treat enum as string:",b);return""};return c}
var m=m?m:{},aa=g("Pandora One - Listen to Pandora with No Ads, Higher Quality Audio, and More"),ba=g("Pandora Radio - Listen to Free Internet Radio, Find New Music"),ca=g("Could not create your account at this time. Please try again later."),da=g("Invalid email."),ea=g("An account already exists with that email address."),ha=g("Your password should be at least 6 characters."),ia=g("Your password may contain only letters, numbers, and punctuation."),ja=g("The provided password was incorrect. Please re-enter your password."),
la=g("Please enter a valid birth year."),ma=g("Please enter a valid birth day."),na=g("Please provide month and day of your birth."),oa=g("We're sorry, you must be at least 13 years old to register."),pa=g("Invalid ZIP code"),qa=g("Invalid postal code"),ta=g("You must agree to the terms of service to continue."),ua=g("Please specify your gender."),va=g("Is this correct?"),wa=g("This is the email you'll use to log in:"),xa=g("Yes"),ya=g("No"),za=g("Please enter an email address"),Aa=g("Invalid Email"),
Ba=g("Please enter a password."),Ca=g("Please enter an email address and password"),Da=g("Your password may contain only letters, numbers, and punctuation."),Ea=g("Your password should be at least 6 characters."),Fa=g("The two passwords provided were different, please try again"),Ga=g("Your password has been changed"),Ha=g("Reset password"),Ia=g(""),Ja=g("To reset your password, please sign out."),La=g("Sign Out"),Ma=g("Cancel"),Na=g("Your Pandora account has been deleted"),Pa=g("MALE"),Qa=g("FEMALE"),
Ra=g("Create Station"),Sa=g("Enter an artist, song, or genre to create a station"),Ta=g("Top Hit"),Ua=g("Songs"),Va=g("Artists"),Wa=g("Composers"),Xa=g("Genres"),Ya=g("Brand Stations"),Za=g("Stations"),$a=g("Artist Stations"),ab=g("Your PIN must be at least 2 characters long."),bb=g("Your PIN has been emailed to you."),cb=g("Your credit card was removed from storage."),db=g("Settings have not yet been saved."),eb=g("Settings have been saved."),fb={},gb=g("Congratulations! Your Pandora One upgrade has been extended. Your new expiration date is $1"),
hb=g("Congratulations, you have been upgraded to Pandora One."),ib=g("Your gift code was entered incorrectly"),jb=g("Your email was entered incorrectly"),lb=g("Your password was entered incorrectly"),mb=g("Welcome to your Pandora One Free Trial!"),nb=g("Your free trial is already in progress."),ob=g("You are already using Pandora One."),pb=g("Your account is not eligible for a trial."),qb=g("You must register before starting a trial of Pandora One."),rb=g("Your account has already had a trial."),
sb=g("Invalid sponsor $1"),tb=g("Too many trials underway - try again tomorrow."),ub=g("Unknown reason."),vb=g("We've encountered an error.  Sorry, it's our fault.  Please click 'reload' to continue listening."),wb=g("Unfortunately our music licenses force us to limit the number of tracks you may skip each hour. If you want to hear something else, try creating another station starting with a different artist or track."),zb=g("Unfortunately our music licenses force us to limit the number of tracks you may skip each hour. If you want to hear something else, try creating another station starting with a different artist or track."),
Ab=g("Unfortunately our music licenses force us to limit the number of tracks you may skip each hour. If you want to hear something else, try creating another station starting with a different artist or track."),Bb=g("Unfortunately our music licenses force us to limit the number of tracks you may skip each hour. If you want to hear something else, try creating another station starting with a different artist or track."),Cb=g("Sorry about that.  When this track is over, we'll never play it again on this station."),
Db=g("ERROR: Your browser cannot play audio - please upgrade to Flash 10 or higher"),Eb=g("ERROR: Your Explicit Content Filter could not be saved because the PIN you entered is invalid."),Fb=g("Sorry, I couldn't send the email: $1"),Hb=g("You must enter one or more valid email addresses"),Ib=g("You may not include email addresses or HTML content in your message"),Jb=g("Error: unable to move track to another station"),Kb=g("Error while redeeming gift code: "),Lb=g("Error while registering: "),Mb=g("Sorry, I had a problem while saving your credit card and was unable to upgrade your account."),
Nb=g("Sorry, we are unable to upgrade your account at this time. Please confirm that the data you provided is accurate and try again. If you experience multiple declines please contact your credit card company."),Ob=g("A payment is already in progress. Please retry in a few minutes."),Pb=g("Sorry, we are unable to upgrade your account at this time. We are working on the problem now. Please try again later."),Qb=g("An error prevented this operation: $1"),Rb=g("You must upgrade to Pandora One to use the Pandora desktop application"),
Sb=g("I'm sorry, you may only create up to 10 stations.  Register now and create up to 100 stations."),Tb=g("I'm sorry, you may only create up to 100 stations"),Ub=g("Want Thumbprint Radio? We need to know you a little bit better. Keep creating stations and thumbing up songs you love, and we\u2019ll let you know when it\u2019s ready!"),Vb=g("Sorry, we couldn't create this station. Please try again."),Xb=g("We cannot accept your comment at this time. Please try again later."),Yb=g("We cannot report the comment at this time. Please try again later."),
Zb=g("We're having unexpected technical difficulties. Our engineers are scrambling to fix things. Please try again later."),$b=g("We're sorry, but we can't find any more music to play on your station right now. Try switching stations."),ac=g("This exclusive station is no longer available. Please select a different station."),bc=g("This exclusive station has finished playing."),cc=g("Pandora One's high quality audio requires an internet connection speed of 192 kbps. Your audio has been changed to normal quality. (You can change this back using 'Audio Quality' on the Pandora One menu)"),
dc=g("Your internet connection is slow, causing the music to pause during playback. Pandora requires at least 64 kbps to stream."),ec=g("This feature is temporarily unavailable"),fc=g("Please log in or register before creating a station"),gc=g("We're sorry, we could not play music on this station.  Please try another station."),hc=g("We're sorry, this Facebook account is being used by another Pandora account. For assistance, please visit our <a href='http://help.pandora.com/customer/portal/articles/765766' target='_blank'>help page</a> or <a href='http://help.pandora.com/customer/portal/emails/new' target='_blank'>email us</a>"),
ic=g("Sorry, we could not start the free trial via PayPal. Please try again, or select another payment option."),jc=g("Sorry, we could not complete the payment via PayPal. No charges have been made. Please try again, or select another payment option."),kc=g("Sorry, the payment was declined by PayPal. Please correct the issue with PayPal and try again, or select another payment option."),lc=g("The requested track does not exist on this station."),mc=g("Your advertiser account owns this station, and it is already in your station list."),
nc=g("Sorry, a problem occurred with your reward. Please try again."),oc=g("Sorry, we could not redeem the gift with the PayPal information provided. Please try again, or select another payment option."),qc=g("You are unable to delete this station from the station list. As the station owner, you must delete the station directly from the station management system where the station was created."),rc=g("Sorry, this artist audio message is no longer available."),sc=g("Private Profile"),tc=g("Public Profile"),
uc=g("This is your space to write something about yourself"),vc=g("Ok, we'll put it on the shelf for a while."),wc=g('Successfully emailed "$1"'),xc=g("Thanks for sharing. You just posted to $1"),yc=g('We deleted your station "$1".'),zc=g("You like this station"),Ac=g("Like this station"),Bc=g("Shared Station"),Cc=g("Would you like to make this station your own station?"),Dc=g("When you like a track while listening to a shared station, you become the owner of the station. Once you own the station, changes made by the original creator of the station will no longer apply."),
Ec=g("When you rename a shared station, you become the owner of the station. Once you own the station, changes made by the original creator of the station will no longer apply."),Fc=g("Make this my station"),Gc=g("Keep this as a shared station"),Hc=g("You like this "),Ic=g("Like this "),Jc=g("Are you sure?"),Kc=g("Pandora"),Lc=g("Undo like"),Mc=g("yes"),Nc=g("no"),Oc=g("We have updated the Pandora site. Click 'reload' to use the latest version."),Pc=g("Please take a moment to <a href='#' class='toastItemReload'>click here</a> and reload your station."),
Qc=g("Type in artist, track, or composer"),Rc=g("Add variety to this station"),Sc=g("Type in the name of another artist, track or composer and we'll add music with similar musical qualities to this station."),Tc=g("I'm sorry I can't find \"$1\" in the Music Genome Project."),Uc=g("Lyrics"),Vc=g("Lyrics not available"),Wc=g("About"),Xc=g("Similar Artists"),Yc=g("Similar Composers"),Zc=g("About This Track"),$c=g("More Tracks"),ad=g("You must agree to the Pandora One terms."),bd=g("Enter a valid security code."),
cd=g("Select a subscription frequency"),dd=g("Enter a valid card number."),ed=g("Your card has expired."),fd=g("Enter name as it appears on card."),gd=g("We're sorry, we couldn't authorize the card."),hd=g("Connecting..."),id=g("Thank you! Your Pandora One payment is complete. Enjoy the music!"),jd=g("Thank you! Your Pandora for Business payment is complete. Enjoy the music!"),kd=g("Thank you! Your $0.99 payment is complete. Enjoy the music!"),ld=g("Could not convert to Pandora for Business."),md=
g("You need to be a subscriber to convert to Pandora for Business."),nd=g("You have already converted to Pandora for Business once.");m.u={};m.u.nn=g("ANONYMOUS");m.u.rn=g("CANCELLED");m.u.gg=g("COMPLIMENTARY");m.u.dB=g("FREE");m.u.un=g("EXPIRED_SUBSCRIBER");m.u.hu=g("REGISTERED");m.u.ou=g("SUSPENDED");m.u.Bc=g("SUBSCRIBER");m.u.vu=g("VENDOR_BILLED_COMPLIMENTARY");m.u.xu=g("VENDOR_BILLED_SUBSCRIBER");m.u.fu=g("PAY_TO_PLAY");m.u.fg=g("BUSINESS");m.pa={};m.pa.XA=g("COMPLIMENTARY_PERIOD_EXPIRED");m.pa.wu=g("VENDOR_BILLED_COMPLIMENTARY_PERIOD_EXPIRED");m.pa.iB=g("INITIAL_SETTLEMENT_DECLINED");m.pa.Hn=g("RENEWAL_SETTLEMENT_DECLINED");m.pa.N_=g("SUBSCRIPTION_EXPIRED_WITHOUT_RENEWAL");m.pa.Ln=g("VENDOR_BILLED_SUBSCRIPTION_TIMED_OUT");m.pa.UB=g("SPONSORED_COMPLIMENTARY_PERIOD_EXPIRED");m.pa.GU=g("GIFT_PERIOD_EXPIRED");m.pa.HB=g("MULTI_DAY_PASS_EXPIRED");m.pa.VA=g("BUSINESS_EXPIRED");m.d={};m.d.QQ=g("ADDRESS_IMPORT_SERVICE_DISABLED");m.d.RQ=g("ADDRESS_IMPORT_SERVICE_UNKNOWN");m.d.Je=g("AUTH_INVALID_USERNAME_PASSWORD");m.d.$Q=g("AUTH_MISSING_USERNAME_PASSWORD");m.d.SA=g("AUTH_INVALID_TOKEN");m.d.Xt=g("INVALID_PASSWORD_RESET_TOKEN");m.d.bR=g("AUTH_WEB_LOGIN_NOT_ALLOWED");m.d.ZQ=g("AUTH_ADMIN_LOGIN_NOT_ALLOWED");m.d.UR=g("CREDIT_CARD_NO_RECORD_FOUND");m.d.CS=g("EMAIL_MALFORMED_ADDRESS");m.d.DS=g("EMAIL_NO_SUBJECT");m.d.BS=g("EMAIL_CONTENT_TOO_LONG");m.d.PS=g("EXPLICIT_PIN_MALFORMED");
m.d.LS=g("EXPLICIT_CONTENT_FILTER_NOT_ENABLED");m.d.QS=g("EXPLICIT_PIN_NOT_SET");m.d.MS=g("EXPLICIT_PIN_ALREADY_SET");m.d.NS=g("EXPLICIT_PIN_INCORRECT");m.d.Zt=g("LISTENER_ACCOUNT_IN_USE");m.d.$t=g("LISTENER_DUPLICATE_USERNAME");m.d.au=g("LISTENER_MALFORMED_USERNAME");m.d.dZ=g("LISTENER_MISSING_EMAIL");m.d.cu=g("LISTENER_SUSPENDED");m.d.YB=g("STATION_DOES_NOT_EXIST");m.d.G_=g("STATION_ALREADY_EXISTS");m.d.A_=g("SEED_INVALID");m.d.XB=g("STATION_CODE_INVALID");m.d.I_=g("STATION_HAS_NO_MORE_CONTENT");
m.d.n_=g("QUICKMIX_NOT_PLAYABLE");m.d.m_=g("QUICKMIX_NEEDS_MORE_STATIONS");m.d.XQ=g("ARTIST_MUSICID_INVALID");m.d.C_=g("SONG_MUSICID_INVALID");m.d.B_=g("SONG_IDENTITY_INVALID");m.d.Fn=g("LISTENER_INVALID_PASSWORD");m.d.jk=g("LISTENER_NOT_AUTHORIZED");m.d.O1=g("VENDOR_NOT_AUTHORIZED");m.d.Gn=g("LISTENER_PASSWORD_TOO_SHORT");m.d.eZ=g("LISTENER_NOT_FOUND");m.d.gu=g("PLAYLIST_END");m.d.YA=g("CREDIT_CARD_DECLINED_AUTHORIZATION");m.d.ZA=g("CREDIT_CARD_DECLINED_PAYMENT");m.d.WR=g("CREDIT_CARD_NUMBER_NOT_SET");
m.d.YR=g("CREDIT_CARD_NUMBER_TOO_SHORT");m.d.XR=g("CREDIT_CARD_NUMBER_TOO_LONG");m.d.VR=g("CREDIT_CARD_NUMBER_BAD_CHECKSUM");m.d.QR=g("CREDIT_CARD_EXPIRATION_DATE_IN_THE_PAST");m.d.PR=g("CREDIT_CARD_COMPANY_NOT_SET");m.d.TR=g("CREDIT_CARD_NAME_NOT_SET");m.d.bS=g("CREDIT_CARD_ZIPCODE_NOT_SET");m.d.$R=g("CREDIT_CARD_SECURITY_CODE_MALFORMED");m.d.RR=g("CREDIT_CARD_EXPMONTH_OUT_OF_RANGE");m.d.SR=g("CREDIT_CARD_EXPYEAR_OUT_OF_RANGE");m.d.aS=g("CREDIT_CARD_VOID_FAILED");m.d.ZR=g("CREDIT_CARD_PAYMENT_VOIDED");
m.d.WZ=g("PREVIEW_INVALID_CODE");m.d.VZ=g("PREVIEW_EXPIRED_CODE");m.d.JB=g("OUT_OF_SYNC");m.d.lZ=g("MAX_RESULTS_OUT_OF_RANGE");m.d.M1=g("VENDOR_ALIAS_IS_BLANK");m.d.N1=g("VENDOR_ALIAS_IS_INVALID");m.d.L1=g("VENDOR_ALIAS_HASH_IS_INVALID");m.d.K1=g("VENDOR_ALIAS_ALREADY_IN_USE");m.d.aR=g("AUTH_TOKEN_TYPE_NOT_ALLOWED");m.d.bV=g("INVALID_VENDOR");m.d.TQ=g("ANONYMOUS_VENDOR_ALIAS_NOT_ALLOWED");m.d.bu=g("LISTENER_STATE_NOT_ALLOWED");m.d.BB=g("MAINTENANCE_MODE");m.d.OB=g("READONLY_MODE");m.d.hB=g("INCOMPATIBLE_VERSION");
m.d.bZ=g("LISTENER_BANNED_FROM_POSTING");m.d.IR=g("COMMENT_IS_EMPTY");m.d.JR=g("COMMENT_IS_EMPTY_AFTER_CLEAN");m.d.KR=g("COMMENT_IS_SPAM");m.d.LR=g("COMMENT_IS_TOO_LONG");m.d.FS=g("EXCESSIVE_NOTE_POSTING");m.d.GS=g("EXCESSIVE_NOTE_REPORTING");m.d.HR=g("COMMENT_DELETED");m.d.JZ=g("PARAMETER_TYPE_MISMATCH");m.d.IZ=g("PARAMETER_MISSING");m.d.KZ=g("PARAMETER_VALUE_INVALID");m.d.nS=g("DUPLICATE_ARTIST_BOOKMARK");m.d.qS=g("DUPLICATE_SONG_BOOKMARK");m.d.oS=g("DUPLICATE_FRIEND_BOOKMARK");m.d.pS=g("DUPLICATE_SEED_BOOKMARK");
m.d.HS=g("EXCESSIVE_USER_QUICK_BOOKMARKING");m.d.fZ=g("LISTENER_NOT_LOGGED_IN");m.d.o_=g("REMOVING_TOO_MANY_SEEDS");m.d.mS=g("DEVICE_NOT_FOUND");m.d.jS=g("DEVICE_CODE_INVALID");m.d.lS=g("DEVICE_DUPLICATE_DEVICECODE");m.d.E_=g("STATE_TRANSITION_NOT_ALLOWED");m.d.XZ=g("PRIVATE_PROFILE");m.d.e2=g("WEB_ACTIVATION_CODE_INVALID");m.d.iS=g("DEVICE_ALREADY_ASSOCIATED_TO_ACCOUNT");m.d.dC=g("USER_ALREADY_USED_TRIAL");m.d.aV=g("INVALID_MOBILE_CLIENT_VERSION");m.d.ZU=g("INVALID_MOBILE_CLIENT_APPLICATION_TYPE");
m.d.$U=g("INVALID_MOBILE_CLIENT_HANDSET");m.d.MQ=g("ACCOUNT_ALREADY_ACTIVATED");m.d.$Y=g("LICENSING_RESTRICTIONS");m.d.pn=g("BIRTH_YEAR_INVALID");m.d.qn=g("BIRTH_YEAR_TOO_YOUNG");m.d.On=g("ZIP_CODE_INVALID");m.d.wn=g("GENDER_INVALID");m.d.NR=g("COUNTRY_CODE_INVALID");m.d.PQ=g("ADDRESS_BOOK_IMPORTER_ERROR");m.d.OQ=g("ADDRESS_BOOK_AUTHENTICATION_ERROR");m.d.AS=g("EMAIL_CONTENT_INVALID");m.d.zS=g("EMAIL_ADDRESS_INVALID");m.d.DZ=g("NO_VALID_EMAIL_ADDRESSES");m.d.VQ=g("API_CALL_NOT_ALLOWED");m.d.LZ=g("PASSWORD_NOT_ALLOWED_FOR_SHARED_DEVICE");
m.d.YU=g("INVALID_AD_TOKEN");m.d.kS=g("DEVICE_DISABLED");m.d.SQ=g("AD_COOKIE_NOT_FOUND");m.d.qB=g("INVALID_SPONSOR");m.d.aB=g("DAILY_TRIAL_LIMIT_REACHED");m.d.fU=g("FEATURE_TEMPORARILY_UNAVAILABLE");m.d.pB=g("INVALID_FACEBOOK_ACCOUNT_ASSOCIATION");m.d.O_=g("SUBSCRIPTION_NOT_RENEWABLE");m.d.mk=g("SUBSCRIPTION_DISABLED");m.d.xn=g("GIFT_CODE_INVALID");m.d.yn=g("GIFT_CODE_REDEEMED");m.d.DU=g("GIFT_CODE_REDEEMED_BY_LISTENER");m.d.eB=g("GIFT_CODE_REDEMPTION_ATTEMPTS_EXCEEDED");m.d.fB=g("GIFT_REQUIRES_PAYMENT_INFO");
m.d.EU=g("GIFT_DUPLICATE");m.d.FU=g("GIFT_DURATION_INVALID");m.d.Tt=g("GIFT_INELIGIBLE");m.d.HU=g("GIFT_SERVICE_UNAVAILABLE");m.d.TU=g("INTEGRATION_PARTNER_UNAVAILABLE");m.d.QB=g("SERVICE_UNAVAILABLE");m.d.ES=g("EXCESSIVE_ACTIVITY");m.d.hS=g("DAILY_SKIP_LIMIT_REACHED");m.d.Ot=g("CONTENT_HAS_EXPIRED");m.d.MZ=g("PAYPAL_INVALID_TOKEN");m.d.NZ=g("PAYPAL_PAYMENT_ALREADY_PAID");m.d.TZ=g("PAYPAL_PAYMENT_NOT_CONFIRMED");m.d.RZ=g("PAYPAL_PAYMENT_INVALID_STATE");m.d.QZ=g("PAYPAL_PAYMENT_FAILED_TRY_LATER");
m.d.PZ=g("PAYPAL_PAYMENT_FAILED");m.d.OZ=g("PAYPAL_PAYMENT_DECLINED");m.d.SZ=g("PAYPAL_PAYMENT_NOT_COMPLETED");m.d.WQ=g("API_UNSUPPORTED_FUNCTIONALITY");m.d.b1=g("TOO_MANY_STATION_IDS");m.d.LB=g("PAYMENT_IN_PROGRESS");m.d.J1=g("VALUE_EXCHANGE_BAD_OFFER_NAME");m.d.zR=g("BAD_A_LA_CARTE_RECEIPT");m.d.AR=g("BAD_A_LA_CARTE_SKU");m.d.IU=g("GIFT_SUBSCRIBER_CANT_CONVERT_TO_BUSINESS");m.d.zB=g("LISTENER_ALREADY_CONVERTED_TO_BUSINESS_ONCE");m.d.CR=g("BUSINESS_SUBSCRIPTIONS_UNAVAILABLE");m.d.lU=g("FRIEND_LIMIT_EXCEEDED");
m.d.sZ=g("MIP_NO_ARTIST_PERMISSIONS");m.d.rZ=g("MIP_NOT_OWNER");m.d.qZ=g("MIP_INVALID_INPUT");m.d.pZ=g("MIP_FEATURE_DISABLED");m.d.tZ=g("MIP_NO_AVAILABLE_INVENTORY");m.d.oZ=g("MIP_CTA_URL_INVALID");m.d.nZ=g("MIP_CTA_BLACKLISTED");m.d.ZB=g("THUMBPRINT_RADIO_NOT_ELIGIBLE");m.d.cZ=g("LISTENER_INCORRECT_PASSWORD");m.Cc={};m.Cc.f1=g("TRANSFORM_CONFIRM");m.Cc.e1=g("TRANSFORM_AUTOMATIC");m.Cc.Me=g("TRANSFORM_NOT_ALLOWED");m.Le={};m.Le.mP=g("song");m.Le.Jc=g("album");m.Le.dE=g("artist");m.Le.g=g("station");m.Le.D2=g("genrestation");m.Ud={};m.Ud.qu=g("TIMEOUT_CREDIT");m.Ud.uZ=g("MONTHLY_LISTENING");m.Ud.Jn=g("SPONSORED_LISTENING");m.Kb={};m.Kb.PA=g("AUDIO_IMPRESSION");m.Kb.RA=g("AUDIO_TILE_IMPRESSION");m.Kb.kU=g("FOLLOW_ON_IMPRESSION");m.Kb.SB=g("SKIP");m.Kb.QA=g("AUDIO_TILE_CLICK");m.Kb.jU=g("FOLLOW_ON_CLICK");m.Kb.H_=g("STATION_CREATE");m.Kb.YQ=g("AUDIO_IMPRESSION_UNIQUE");function od(b){var c=typeof b;if("object"==c)if(b){if(b instanceof Array||!(b instanceof Object)&&"[object Array]"==Object.prototype.toString.call(b)||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if(!(b instanceof Object||"[object Function]"!=Object.prototype.toString.call(b)&&("undefined"==typeof b.call||"undefined"==typeof b.propertyIsEnumerable||b.propertyIsEnumerable("call"))))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof b.call)return"object";return c}function pd(b){return"string"==typeof b}function qd(b){return"number"==typeof b}function rd(b){b=od(b);return"object"==b||"array"==b||"function"==b}Math.floor(2147483648*Math.random()).toString(36);var sd=Date.now||function(){return+new Date};function td(b,c){function d(){}d.prototype=c.prototype;b.HP=c.prototype;b.prototype=new d;b.prototype.constructor=b};m=m?m:{};function ud(){};function vd(b){this.body=b}td(vd,ud);function wd(b){this.ub=b}td(wd,ud);function n(b){return b.ub[0]}function xd(b){this.message=b;this.cg=Qb([b])}td(xd,ud);function yd(b){xd.call(this,b)}td(yd,xd);function zd(b){xd.call(this,b)}td(zd,yd);function Ad(b,c,d){xd.call(this,b);this.url=c;this.xml=d}td(Ad,zd);function Bd(b,c){xd.call(this,b);this.code=c}td(Bd,yd);function Cd(){return Math.floor(Dd()/1E3)}function Dd(){return(new Date).getTime()}function Ed(b,c,d,e){if(d)return"/img/no_photo_180_fb.png";b=null==b?null:b.LG?b.za:b.fbId?b.fbId:b.fbid?b.fbid:b.attr?b.attr("fbid"):null;return null!=b&&0<b&&!e?"http://graph.facebook.com/v2.2/"+b+"/picture?type="+(c?"square":"large"):"/img/no_photo_180.png"}function Fd(b){return b.replace(/<\/?[^>]+(>|$)|\"/g,"")}function Gd(b){return b.substring(0,b.indexOf("'s Thumbprint Radio"))};function Hd(b){var c="",d,e,h,l,p,q,u=0;b=b.replace(/\r\n/g,"\n");e="";for(h=0;h<b.length;h++)l=b.charCodeAt(h),128>l?e+=String.fromCharCode(l):(127<l&&2048>l?e+=String.fromCharCode(l>>6|192):(e+=String.fromCharCode(l>>12|224),e+=String.fromCharCode(l>>6&63|128)),e+=String.fromCharCode(l&63|128));for(b=e;u<b.length;)d=b.charCodeAt(u++),e=b.charCodeAt(u++),h=b.charCodeAt(u++),l=d>>2,d=(d&3)<<4|e>>4,p=(e&15)<<2|h>>6,q=h&63,isNaN(e)?p=q=64:isNaN(h)&&(q=64),c=c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_ ".charAt(l)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_ ".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_ ".charAt(p)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_ ".charAt(q),c=c.replace(/\s+$/,"");return c};var Id=[0,0,192,224,240,248,252],Jd=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,
2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,5,5,5,5],Kd=[0,12416,925824,63447168,4194836608,2181570688];function Ld(){}
function Md(){return[[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,
3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,
1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,
1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,
2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,
4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971E4,1235738493,
2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,
935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,
70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,
1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,
1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,
3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,
1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,
3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,
3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,
3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,
4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,
3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,
3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,
3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409E3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,
2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,
266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,
29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]]}function Nd(){var b=Md();null==b&&(b=Md());var c=b[0],d=b[1],e=b[2],h=b[3],b=b[4],l=new Ld;Od(l,c,d,e,h,b);for(var p=Pd(Qd("Ba-qrf5@t%pf/;u^")),q=0,u=0;18>u;++u){for(var y=0,E=0;4>E;++E)y=y<<8|p[q],q+=1,q>=p.length&&(q=0);c[u]^=y}p=[0,0];for(u=0;18>u;u+=2)l.zp(p,0),c[u]=p[0],c[u+1]=p[1];for(u=0;4>u;u++)for(c=[d,e,h,b][u],q=0;256>q;q+=2)l.zp(p,0),c[q]=p[0],c[q+1]=p[1];return l}
function Rd(b){var c=new Ld;Od(c,b[0],b[1],b[2],b[3],b[4]);return c}
function Od(b,c,d,e,h,l){b.zp=function(b,q){var u=b[q],y=b[q+1],E,L;for(L=0;16>L;++L){var M=u^=c[L],Q,ka;ka=M&255;M>>=8;E=M&255;M>>=8;Q=M&255;M>>=8;M=d[M&255]+e[Q];M^=h[E];M+=l[ka];y^=M;E=u;u=y;y=E}E=u;u=y;y=E^c[16];u^=c[17];b[q]=u;b[q+1]=y};b.uF=function(b,q){var u=b[q],y=b[q+1],E,L;for(L=17;1<L;--L){var M=u^=c[L],Q,ka;ka=M&255;M>>=8;E=M&255;M>>=8;Q=M&255;M>>=8;M=d[M&255]+e[Q];M^=h[E];M+=l[ka];y^=M;E=u;u=y;y=E}E=u;u=y;y=E^c[1];u^=c[0];b[q]=u;b[q+1]=y}}
Ld.prototype.encrypt=function(b){b=Qd(b);b=Pd(b);b=Sd(b);for(var c=0;c<b.length;c+=2)this.zp(b,c);b=Td(b);for(var c="",d=0;d<b.length;d++)var e=b[d].toString(16),c=1==e.length?c+("0"+e):c+e;return c};Ld.prototype.decrypt=function(b){b=String(b);b=Ud(this,b);b=Vd(b);return Wd(b)};function Ud(b,c){for(var d=[],e=0;e<c.length;e+=2)d.push(parseInt(c.substr(e,2),16));d=Sd(d);for(e=0;e<d.length;e+=2)b.uF(d,e);return Td(d)}function Qd(b){for(var c=[],d=0;d<b.length;d++)c.push(b.charCodeAt(d));return c}
function Wd(b){for(var c=[],d=0;d<b.length;d++)c.push(String.fromCharCode(b[d]));return c.join("")}
function Pd(b){for(var c=[],d=0;d<b.length;){var e=b[d];d++;if(55296<=e&&56319>=e){if(d==b.length){k.error("source exhausted");break}var h=b[d];(56320>h||57343<e)&&k.error("unpaired high surrogate");e=(e-55296<<10)+(h-56320)+65536;d++}else 56320<=e&&57343>=e&&k.error("UTF-16 surrogate values are illegal in UTF-32");h=0;128>e?h=1:2048>e?h=2:65536>e?h=3:1114112>e?h=4:(h=3,e=65533);if(null==Id[h]){k.error("invalid bytesToWrite: "+h);break}var l=c.length;switch(h){case 4:c[l+3]=(e|128)&191,e>>=6;case 3:c[l+
2]=(e|128)&191,e>>=6;case 2:c[l+1]=(e|128)&191,e>>=6;case 1:c[l]=e|Id[h]}}return c}
function Vd(b){for(var c=[],d=0;d<b.length;){var e=0,h=Jd[b[d]];if(d+h>b.length)return k.error("source exhausted"),c;if(!Xd(b.slice(d,d+h+1)))return k.error("not legal UTF-8"),c;switch(h){case 5:e+=b[d],d++,e<<=6;case 4:e+=b[d],d++,e<<=6;case 3:e+=b[d],d++,e<<=6;case 2:e+=b[d],d++,e<<=6;case 1:e+=b[d],d++,e<<=6;case 0:e+=b[d],d++}e-=Kd[h];65535>=e?55296<=e&&57343>=e?(k.error("UTF-16 surrogate values are illegal in UTF-32"),c.push(65533)):c.push(e):1114111<e?(k.error("ch > UNI_MAX_UTF16"),c.push(65533)):
(e-=65536,c.push((e>>10)+55296),c.push((e&1023)+56320))}for(;c.length&&8>=c[c.length-1];)c.pop();return c}
function Xd(b){var c;switch(b.length){default:return!1;case 4:if(128>(c=b[3])||191<c)return!1;case 3:if(128>(c=b[2])||191<c)return!1;case 2:if(191<(c=b[1]))return!1;switch(b[0]){case 224:if(160>c)return!1;break;case 237:if(159<c)return!1;break;case 240:if(144>c)return!1;break;case 244:if(143<c)return!1;break;default:if(128>c)return!1}case 1:if(128<=b[0]&&194>b[0])return!1}return 244<b[0]?!1:!0}
function Sd(b){var c=[],d=b.length,e=0==d%4?d:d-d%4,h;for(h=0;h<e;h+=4)c[c.length]=b[h]<<24|b[h+1]<<16|b[h+2]<<8|b[h+3];if(h<d){for(var l=e=0;4>l;l++)h+l<d&&(e|=b[h+l]<<8*(3-l));c[c.length]=e}return c}function Td(b){for(var c=[],d=0,e=0;e<b.length;e++){var h=b[e];c[d]=h>>24&255;d++;c[d]=h>>16&255;d++;c[d]=h>>8&255;d++;c[d]=h&255;d++}return c};function r(b,c){null!=b&&null!=c||k.error("neither caller nor method may be null");var d=trackJs.watch(function(){return c.apply(b,arguments)});d._caller=b;return d}function Yd(b,c,d){return setTimeout(r(b,c),d)}function Zd(b){null!=b&&0<b.length&&(b=b.replace(/^.*\/xml\//,"/json/"));return b}
function $d(b){if(!_.isFunction(b))return k.error("Attempting to create a single call function but no backing function was provided."),$.noop;var c=!1;return function(){c?k.warn("A function that should only be called once is being called again."):(c=!0,b.apply(null,arguments))}}function ae(b,c,d){var e=null;2<arguments.length&&(e=_.rest(arguments,2));var h=$d(b);c&&setTimeout(function(){h.apply(null,e)},c);return h}
function be(b){null!=b&&0<b.length&&(b=b.replace(/\?dc=.*?$/,""),b=b.replace("/music/artist",""),b=b.replace("/music/composer",""),b=b.replace("/music/album",""),b=b.replace("/music/song",""));return b}function ce(b){return _.without(b.split("/"),"")}function de(){return(new Date).getTime()+""+Math.floor(1E4*Math.random())}function ee(b,c){for(var d=0;b&&d<b.length;d++)if(b[d]==c)return!0;return!1}function fe(b){return null!=b&&""!=b+""}function ge(b){return null==b||0==b.length}
function he(b){return 100*Math.random()<b}function ie(b){return null==b?!1:"true"==b.toLowerCase()}function je(b,c,d,e){var h="Unknown";b.message?h=b.message:pd(b)&&(h=String(b));ke({msg:h,url:c,num:d,ua:navigator.userAgent,browser:le(),site_version:window._pandoraVersion,flash_ver:me()},e)}
function ne(b,c){var d,e=(new Date).format("yyyy-mm-dd HH:MM:ss",!0),h=null;d||(d=oe?oe.get("currentUser"):null);oe&&oe.get("sequenceNumber")&&(h=oe.get("sequenceNumber"),oe.set({sequenceNumber:h+1}));s("mobile_view_mode",{page_view:b,view_mode:c,vendor_id:t,device_id:pe,device_code:pe,device_os:le(),client_timestamp:e,sequence_number:h},d)}
function qe(b,c,d,e){var h,l=(new Date).format("yyyy-mm-dd HH:MM:ss",!0);h||(h=oe?oe.get("currentUser"):null);s("onboarding_server_action",{page_view:b,view_mode:c,vendor_id:t,device_id:pe,device_code:pe,device_os:le(),client_timestamp:l,action:d,action_failure_reason:e},h)}
function re(b,c,d){var e=v.j&&v.j.vf();d&&trackJs.console.warn("message: "+d);d=c&&c.jPlayer&&c.jPlayer.error&&c.jPlayer.error.message||c;var h=c&&c.jPlayer&&c.jPlayer.error&&c.jPlayer.error.formatType||"",l=c&&c.jPlayer&&c.jPlayer.flash&&c.jPlayer.flash.active||"";c=c&&c.jPlayer&&c.jPlayer.version&&c.jPlayer.version.flash||"";trackJs.console.warn("adToken: "+e);trackJs.console.warn("trackToken: "+(b&&b.bb()));trackJs.console.warn("stationId: "+(b&&b.v&&b.v().e()));trackJs.console.warn("message: "+
d);trackJs.console.warn("format: "+h);trackJs.console.warn("using flash: "+l);l&&trackJs.console.warn("flash ver: "+c);trackJs.track("Error during playback detected.")}function me(){var b="unknown";try{if(swfobject)var c=swfobject.getFlashPlayerVersion(),b=c.major+"."+c.minor+"."+c.release}catch(d){}return b}function le(){return BrowserDetect.browser+" "+BrowserDetect.version+" ("+BrowserDetect.OS+")"}
function se(b){if(!ge(window.location.hostname)){$.cookie(b,null,{path:"/",domain:window.location.hostname});var c=window.location.hostname.indexOf(".");0>c&&(c=0);$.cookie(b,null,{path:"/",domain:window.location.hostname.substring(c)})}$.cookie(b,null,{path:"/"})}function te(){return"Explorer"==BrowserDetect.browser&&8>=BrowserDetect.version}function ue(){return"Explorer"==BrowserDetect.browser&&7>=BrowserDetect.version}function ve(){return"Firefox"==BrowserDetect.browser}
function we(b,c){for(var d="",e=0;e<b.length;e++)d+=String.fromCharCode(b.charCodeAt(e)^c[e%c.length]);return d}window.emptySelection=function(){$.textSelect("clear")};var k={enabled:!1,debug:function(){},info:function(){},warn:function(b){null!=window.console&&null!=window.console.warn&&window.console.warn.apply(window.console,arguments)},error:function(b){null!=window.console&&null!=window.console.error&&window.console.error.apply(window.console,arguments)}};"Explorer"==BrowserDetect.browser&&10>BrowserDetect.version&&null!=window.console&&(null!=window.console.warn&&(k.warn=window.console.warn),null!=window.console.error&&(k.error=window.console.error));var w=0,xe=w++,ye=w++,ze=w++,Ae=w++,Be=w++,Ce=w++,De=w++,Ee=w++,Fe=w++,Ge=w++,He=w++,Ie=w++,Je=w++,Ke=w++,Le=w++,Me=w++,Ne=w++,Oe=w++,Pe=w++,Qe=w++,Re=w++,Se=w++,Te=w++,Ue=w++,Ve=w++,We=w++,Xe=w++,Ye=w++,Ze=w++,$e=w++,af=w++,bf=w++,cf=w++,df=w++,ef=w++,ff=w++,gf=w++,hf=w++,jf=w++,kf=w++,lf=w++,mf=w++,nf=w++,of=w++,pf=w++,qf=w++,rf=w++,sf=w++,tf=w++,uf=w++,vf=w++,wf=w++,xf=w++,yf=w++,zf=w++,Af=w++,Bf=w++,Cf=w++,Df=w++,Ef=w++,Ff=w++,Gf=w++,Hf=w++,If=w++,Jf=w++,Kf=w++,Lf=w++,Mf=w++,Nf=w++,Of=w++,Pf=
w++,Qf=w++,Rf=w++,Sf=w++,Tf=w++,Uf=w++,Vf=w++,Wf=w++,Xf=w++,Yf=w++,Zf=w++,$f=w++,ag=w++,bg=w++,cg=w++,dg=w++,eg=w++,fg=w++,gg=w++,hg=w++,ig=w++,jg=w++,kg=w++,lg=w++,mg=w++,ng=w++,og=w++,pg=w++,qg=w++,rg=w++,sg=w++,tg=w++,ug=w++,vg=w++,wg=w++,xg=w++,yg=w++,zg=w++,Ag=w++,Bg=w++,Cg=w++,Dg=w++,Eg=w++,Fg=w++,Gg=w++,Hg=w++,Ig=w++,Kg=w++,Lg=w++,Mg=w++,Ng=w++,Og=w++,Pg=w++,Qg=w++,Rg=w++,Sg=w++,Tg=w++,Ug=w++,Vg=w++,Wg=w++,Xg=w++,Yg=w++,Zg=w++,$g=w++,ah=w++,bh=w++,ch=w++,dh=w++,eh=w++,fh=w++,gh=w++,hh=w++,
ih=w++,jh=w++,kh=w++,lh=w++,mh=w++,nh=w++,oh=w++,ph=w++,qh=w++,rh=w++,sh=w++,th=w++,uh=w++,vh=w++,wh=w++,xh=w++,yh=w++,zh=w++,Ah=w++,Bh=w++,Ch=w++,Dh=w++,Eh=w++,Fh=w++,Gh=w++,Hh=w++,Ih=w++,Jh=w++,Kh=w++,Lh=w++,Mh=w++,Nh=w++,Oh=w++,Ph=w++,Qh=w++,Rh=w++,Sh=w++,Th=w++,Uh=w++,Vh=w++,Wh=w++,Xh=w++,Yh=w++,Zh=w++,$h=w++,ai=w++,bi=w++,ci=w++,di=w++,ei=w++,fi=w++,gi=w++,hi=w++,ii=w++,ji=w++,ki=w++,li=w++,mi=w++,ni=w++,oi=w++,pi=w++,qi=w++,ri=w++,si=w++,ti=w++,ui=w++,vi=w++,wi=w++,xi=w++,yi=w++,zi=w++,Ai=w++,
Bi=w++,Ci=w++,Di=w++,Ei=w++,Fi=w++,Gi=w++,Hi=w++,Ii=w++,Ji=w++,Ki=w++,Li=w++,Mi=w++,Ni=w++,Oi=w++,Pi=w++,Qi=w++,Ri=w++,Si=w++,Ti=w++,Ui=w++,Vi=w++,Wi=w++,Xi=w++,Yi=w++,Zi=w++,$i=w++,aj=w++,bj=w++,cj=w++,dj=w++,ej=w++,fj=w++,gj=w++,hj=w++,ij=w++,jj=w++,kj=w++,lj=w++,mj=w++,nj=w++,oj=w++,pj=w++,qj=w++,rj=w++,sj=w++,tj=w++,uj=w++,vj=w++,wj=w++,xj=w++,yj=w++,zj=w++,Aj=w++,Bj=w++,Cj=w++,Dj=w++,Ej=w++,Fj=w++,Gj=w++,Hj=w++,Ij=w++,Jj=w++,Kj=w++,Mj=w++,Nj=w++,Oj=w++,Pj=w++,Qj=w++,Rj=w++,Sj=w++,Tj=w++,Uj=w++,
Vj=w++,Wj=w++,Xj=w++,Yj=w++,Zj=w++,ak=w++,bk=w++,ck=w++,dk=w++,ek=w++,fk=w++,gk=w++,hk=w++,ik=w++,jk=w++,kk=w++,lk=w++,mk=w++,nk=w++,ok=w++,pk=w++,qk=w++,rk=w++,sk=w++,tk=w++,uk=w++,vk=w++,wk=w++,xk=w++,yk=w++,zk=w++,Ak=w++,Bk=w++,Ck=w++,Dk=w++,Ek=w++,Fk=w++,Gk=w++,Hk=w++,Ik=w++,Jk=w++,Kk=w++,Lk=w++,Mk=w++,Nk=w++,Ok=w++,Pk=w++,Qk=w++,Rk=w++,Sk=w++,Tk=w++,Uk=w++,Vk=w++,Wk=w++,Xk=w++,Yk=w++,Zk=w++,$k=w++,al=w++,bl=w++,cl=w++,dl=w++,el=w++,fl=w++,gl=w++,hl=w++,il=w++,jl=w++,kl=w++,ll=w++,ml=w++,nl=[];
$.each({dV:xe,cV:ye,X0:ze,H1:Ae,I1:Be,e_:Ce,f_:De,g_:Ee,AU:Fe,$Z:Ge,b_:He,Q0:Ie,P0:Je,I0:Ke,S0:Le,x0:Me,O0:Ne,m1:Oe,o1:Pe,q1:Qe,l1:Re,r_:Se,dR:Te,z_:Ue,eR:Ve,t1:We,s1:Xe,n1:Ye,a0:Ze,b0:$e,U_:af,e0:bf,cR:cf,l0:df,h1:ef,f0:ff,cU:gf,dU:hf,bU:jf,j1:kf,D0:lf,C0:mf,h0:nf,d0:of,S1:pf,U0:qf,xZ:rf,yZ:sf,wZ:tf,y_:uf,qU:vf,hZ:wf,y1:xf,z1:yf,LU:zf,MU:Af,KU:Bf,i0:Cf,j0:Df,B1:Ef,C1:Ff,D1:Gf,vZ:Hf,l_:If,sS:Jf,yU:Kf,x1:Lf,A1:Mf,ER:Nf,w1:Of,d_:Pf,Q_:Qf,i1:Rf,P_:Sf,OU:Tf,BU:Uf,eV:Vf,TS:Wf,sR:Xf,rR:Yf,uU:Zf,vU:$f,kR:ag,
fV:bg,J0:cg,wU:dg,eU:eg,x_:fg,a1:gg,$0:hg,jZ:ig,kZ:jg,QU:kg,PU:lg,GZ:mg,HZ:ng,mX:og,cS:pg,nU:qg,mU:rg,oU:sg,sU:tg,pU:ug,rU:vg,UZ:wg,u1:xg,v1:yg,F1:zg,n0:Ag,g0:Bg,Y0:Cg,gS:Dg,t_:Eg,j_:Fg,CV:Gg,DV:Hg,UV:Ig,i_:Kg,s_:Lg,q_:Mg,GR:Ng,FR:Og,yR:Pg,W0:Qg,AZ:Rg,qR:Sg,rS:Tg,ZY:Ug,tT:Vg,kX:Wg,wR:Xg,YS:Yg,sT:Zg,rT:$g,xT:ah,US:bh,hT:ch,ET:dh,FT:eh,iT:fh,HT:gh,RT:hh,fT:ih,ST:jh,WS:kh,LT:lh,VT:mh,kT:nh,aU:oh,eT:ph,DT:qh,WT:rh,JT:sh,KT:th,XT:uh,YT:vh,ZT:wh,vT:xh,BT:yh,wT:zh,qT:Ah,GT:Bh,pT:Ch,IT:Dh,aT:Eh,$S:Fh,$T:Gh,
oT:Hh,zT:Ih,AT:Jh,TT:Kh,uT:Lh,UT:Mh,nR:Nh,OT:Oh,cT:Ph,mT:Qh,MT:Rh,NT:Sh,bT:Th,CT:Uh,PT:Vh,dT:Wh,VS:Xh,XS:Yh,gT:Zh,IY:$h,jW:ai,HY:bi,JY:ci,FY:di,EY:ei,SV:fi,RV:gi,VW:hi,CY:ii,zY:ji,EX:ki,IX:li,sV:mi,OW:ni,PW:oi,eX:pi,lX:qi,YY:ri,AV:si,wX:ti,DX:ui,AX:vi,YW:wi,XW:xi,ZW:yi,YV:zi,gW:Ai,tW:Bi,EV:Ci,HV:Di,FV:Ei,GV:Fi,QV:Gi,lW:Hi,sX:Ii,tX:Ji,WW:Ki,DY:Li,KW:Mi,wW:Ni,VV:Oi,kV:Pi,jV:Qi,zX:Ri,XY:Si,WV:Ti,GY:Ui,pY:Vi,SW:Wi,vX:Xi,uX:Yi,rB:Zi,hX:$i,NX:aj,fX:bj,BX:cj,GX:dj,JW:ej,DW:fj,AW:gj,jX:hj,KX:ij,JX:jj,aW:kj,
bW:lj,eW:mj,$V:nj,qV:oj,MW:pj,OY:qj,sB:rj,pW:sj,PY:tj,oW:uj,xX:vj,yX:wj,SY:xj,TY:yj,UY:zj,RW:Aj,bX:Bj,RY:Cj,qX:Dj,kW:Ej,NY:Fj,nV:Gj,MY:Hj,JV:Ij,OV:Jj,hW:Kj,ZV:Mj,rV:Nj,lT:Oj,jT:Pj,ZS:Qj,dX:Rj,tB:Sj,gV:Tj,pX:Uj,MV:Vj,KY:Wj,LW:Xj,TW:Yj,gX:Zj,BV:ak,NW:bk,XV:ck,CX:dk,uY:ek,vY:fk,xV:gk,yV:hk,rW:ik,sW:jk,qY:kk,rY:lk,sY:mk,tY:nk,vV:ok,wV:pk,IW:qk,iW:rk,FX:sk,HX:tk,cX:uk,wY:vk,xY:wk,zV:xk,WY:yk,xR:zk,UW:Ak,a_:Bk,yT:Ck,G1:Dk,uS:Ek,vS:Fk,k_:Gk,JU:Hk,w_:Ik,v_:Jk,tR:Kk,uR:Lk,vR:Mk,X1:Nk,W1:Ok,Y1:Pk,T1:Qk,U1:Rk,
V1:Sk,Z1:Tk,UQ:Uk,TV:Vk,HW:Wk,$W:Xk,GW:Yk,hV:Zk,tV:$k,uV:al,g1:bl,yY:cl,QT:dl,R1:el,Q1:fl,P1:gl,F0:hl,E0:il,IV:jl,uW:kl,nT:ll,NU:ml},function(b,c){nl[c]=b});function ol(b){switch(b){case ci:return"128";case di:return"129";case ei:return"130";case ki:return"133";case Ui:return"168";case Zi:return"173";case ij:return"183";case jj:return"184";case pj:return"188"}k.error("AppEvent.getPersistable could not map event ",b,nl[b]);return"0"};function pl(b,c,d,e,h,l){this.error=b;this.message=c;this.Lq=d;this.AK=e;this.ll=h;this.Gg=l}function x(b,c,d,e,h){z.b(Nh,new pl(b,b.cg,c,d,e,h))};var ql,rl,sl=[];function tl(b){sl.push(b);return b}
var ul=tl({key:"AnonAuthToken",D:!1}),vl=tl({key:"psn",D:!1}),wl=tl({key:"lastUserId",D:!1}),xl=tl({key:"storedUserIds",D:!1}),yl=tl({key:"hasLoggedIn",D:!1}),zl=tl({key:"Volume",D:!1}),Al=tl({key:"Muted",D:!1}),Bl=tl({key:"Username",D:!0}),Cl=tl({key:"Password",D:!0,Ei:!0}),Dl=tl({key:"KeepLoggedIn",D:!0}),El=tl({key:"isAnonymous",D:!0}),Fl=tl({key:"PlayTimeMapSeconds",D:!0}),Gl=tl({key:"LastPlayTimeSeconds",D:!0}),Hl=tl({key:"DeltaListeningTimeSeconds",D:!0}),Il=tl({key:"ListeningTimestamp",D:!0}),
Jl=tl({key:"LastPlayedStationId",D:!0}),Kl=tl({key:"StationSortOrderAlpha",D:!0}),Ll=tl({key:"SkipResetTimestamps",D:!0}),Ml=tl({key:"StationSkipCounts",D:!0}),Nl=tl({key:"DailySkipCount",D:!0}),Ol=tl({key:"CurrentTrack",D:!0}),Pl=tl({key:"CurrentTrackOnDemandAAM",D:!0}),Ql=tl({key:"ElapsedTime",D:!0}),Rl=tl({key:"ElapsedTimeOnDemandAAM",D:!0}),Sl=tl({key:"ContextualHelpIntents",D:!0}),Tl=tl({key:"DisplayedTips",D:!0}),Ul=tl({key:"CurrentSkinPath",D:!0}),Vl=tl({key:"AlbumArtSize",D:!0}),Wl=tl({key:"DeclinedRenewalOffer",
D:!0}),Xl=tl({key:"lowQualityAudio",D:!0}),Yl=tl({key:"shuffleType",D:!0}),Zl=tl({key:"shuffleStations",D:!0}),$l=tl({key:"shareOnTwitter",D:!0}),am=tl({key:"shareOnFacebook",D:!0}),bm=tl({key:"SeenFbConnected",D:!0}),cm=tl({key:"deviceId",D:!0}),dm=tl({key:"LiveStreamListeningStart",D:!0}),em=tl({key:"LiveStreamListeningSeconds",D:!0}),fm=tl({key:"flaggedMsgs",D:!0}),gm=tl({key:"TimeoutDialogImpressions",D:!0}),hm=tl({key:"SessionStartDialogLastShown",D:!0});
function im(){for(var b=jm(xl)||[],c=0;c<b.length;c++){var d=km("U"+b[c],Sl),e=lm(d);if(null!=e&&pd(e)){var h={};_.each((""+e).split(","),function(b){fe(b)&&(null==h[b]?h[b]=1:h[b]++)});mm(d,h)}}}function jm(b){return lm(nm(b),b.Ei)}function om(b,c,d){mm(nm(b),c,d,b.Ei)}function pm(b){qm(nm(b),b.Ei)}function nm(b,c){if(b.D){if(rl)return km("U"+rl,b,c);k.warn("PersistenceManager.currentUserId is null for key "+b.key);return"zorro"}return b.key}
function km(b,c,d){return null==d?b+"."+c.key:b+"."+c.key+"."+d}function rm(b,c){return c||!ue()?ql.encrypt(b):b}function lm(b,c){var d;if(d="ttls"!=b)d=(lm("ttls")||{})[b],d=null!=d&&d<(new Date).getTime();if(d)return qm(b,c),null;d=$.jStorage.get(rm(b,c));try{return null==d||0==d.length?d:JSON.parse(c||!ue()?ql.decrypt(d):d)}catch(e){return trackJs.track(e),k.error("Could not parse encrypted value: ",d),null}}
function mm(b,c,d,e){null!=c?($.jStorage.set(rm(b,e),rm(JSON.stringify(c),e)),null!=d&&(c=lm("ttls")||{},c[b]=d+(new Date).getTime(),mm("ttls",c))):qm(b,e)}function qm(b,c){$.jStorage.deleteKey(rm(b,c));var d=lm("ttls")||{};null!=d[b]&&(delete d[b],mm("ttls",d))}function sm(){$.jStorage.flush();k.info("PersistenceManager wipe is complete")}function tm(){var b=lm("ttls")||{},c=[];$.each(b,function(b,e){e<(new Date).getTime()&&c.push(b)});$.each(c,function(b,c){qm(c)})}
function um(){var b=jm(Dl);return null==b||!0===b}function vm(b){om(ul,b);if(rl){om(El,null!=b);b=[];for(var c=jm(xl)||[],d=0;d<c.length;d++)if(c[d]!=rl&&lm(km("U"+c[d],El)))for(var e=c[d],h=0;h<sl.length;h++)sl[h].D&&qm(km("U"+e,sl[h]));else b.push(c[d]);c.length!=b.length&&om(xl,b)}}function wm(){var b=jm(El);return null==b?!1:!0===b}function xm(){if(!rl)return 0;var b=jm(Fl);null==b&&(b={});var c=0,d;for(d in b){var e=b[d];if(null==e||isNaN(Number(e)))return 0;c+=Number(e)}return c}
function ym(b){var c=jm(Gl);null==c&&(c={});c[b]=Math.floor((new Date).getTime()/1E3);om(Gl,c)}function zm(){if(!rl)return 0;var b=jm(Hl);return null==b||isNaN(Number(b))?0:Number(b)}function Am(){if(!rl)return 0;var b=jm(Il);return null==b||isNaN(Number(b))?0:Number(b)}function Bm(){var b=jm($l);return null==b||!0===b}function Cm(){var b=jm(am);return null==b||!0===b}function Dm(){var b=jm(zl);return null==b||isNaN(Number(b))?80:Number(b)}function Em(){return!0===jm(Al)}
function Fm(b){if(!rl)return null;var c=jm(Ll);return c&&c[b]?c[b]:null}function Gm(b){if(!rl)return 0;var c=jm(Ml);return c&&c[b]?c[b]:0}function Hm(b,c){var d=rl?jm(Ml):null;null==d&&(d={});d[b]=c;om(Ml,d)}function Im(){if(!rl)return null;var b=jm(Nl);if(null!=b&&b.date==Jm())return b.skips;Km(0);return 0}function Lm(b,c,d){var e=Ql;d&&(e=Rl);c=lm(nm(e,c));return null==c||(c=c.split(","),2!=c.length||c[0]!=b||(b=parseInt(c[1],10),isNaN(b)))?null:b}
function Km(b){om(Nl,{date:Jm(),skips:b},864E5)}function Mm(){if(!rl)return{};var b=jm(Sl);return null!=b&&rd(b)?b:{}}function Nm(b){b=Mm()[ol(b)];return null!=b?b:0}function Om(b){var c=Pm();c.push(b);om(Tl,c.join(","))}function Pm(){if(!rl)return[];var b=jm(Tl);return null==b?[]:(""+b).split(",")}function Qm(){if(!rl)return 215;var b=jm(Vl);if(null==b||isNaN(Number(b)))return 215;b=Math.max(b,134);b=Math.min(b,450);return Number(b)}
function Rm(){if(!rl)return"all";var b=jm(Yl);return null==b?"all":""+b}function Sm(){if(!rl)return"";var b=jm(Zl);return null==b?"":""+b}function Jm(){var b=new Date;return""+b.getDate()+(b.getMonth()+1)+b.getFullYear()}function Tm(b){b.Ei=!0;var c=jm(b);b.Ei=null;return c}
function Um(){if(ue()){var b=Tm(wl);if(null!=b){var c=rl;rl=b;var d=Tm(Bl),e=jm(Cl)||"";null!=d&&null!=e&&0<d.length&&0<e.length&&($.jStorage.flush(),om(wl,b),om(Bl,d),om(Cl,e),k.info("+++ ie 7 updated +++"));rl=c}}b=jm(wl);return null!=b?(c=rl,rl=b,d=jm(Bl),(d=null!=d&&0<d.length)?om(wl,b):rl=c,d):!1}function Vm(b){om(wl,b);if(rl=b){for(var c=jm(xl)||[],d=0;d<c.length;d++)if(b==c[d])return;c.push(b);om(xl,c)}}
function Wm(){if(!rl)return null;var b=jm(cm);b&&""!=b||(b=hex_md5(rl+"-"+BrowserDetect.browser+"-"+BrowserDetect.OS+"-"+(new Date).getTime()),om(cm,b));return b}function Xm(b){om(dm,b)}function Ym(b){om(em,b)}function Zm(){var b=[],c=jm(fm);c&&(b=c.split(","));return b}function $m(){var b=(jm(gm)||0)+1;om(gm,b)};var z={};z.hC=[Ye,Xf,Yf,li,zk];z.Kq=!1;z.ls=!1;z.io={};z.ho={};z.fo={};z.c=function(b,c){z.uo(b,c,z.io)};z.wh=function(b,c){z.uo(b,c,z.ho)};z.eb=function(b,c){z.uo(b,c,z.fo)};z.uo=function(b,c,d){var e=d[b]||[];e.push(c);d[b]=e;c=c._caller;null!=c&&(d=c._eventTypes||[],d.push(b),c._eventTypes=d)};
z.ma=function(b,c){if(void 0!==c)for(var d=[z.ho,z.io,z.fo],e=0;e<d.length;e++){var h=d[e][c];if(h)for(var l=0;l<h.length;l++)h[l]._caller==b&&h.splice(l--,1)}else for(var d=b._eventTypes,e=0;d&&e<d.length;e++)z.ma(b,d[e])};z.By=function(b){if(rd(b)){var c=$.extend({},b);_.each(["password","username"],function(b){c[b]&&(c[b]="*****")});return c}return b};z.HC=function(b,c,d){try{b(c,d)}catch(e){trackJs.track(e),je(e)}};
z.b=function(b,c){if(-1===z.hC.indexOf(b)){var d=BrowserDetect.browser;void 0!==c?"Chrome"==d||"Firefox"==d?k.info("%cEVENT:","color:blue",nl[b],z.By(c)):k.info("EVENT:",nl[b],z.By(c)):"Chrome"==d||"Firefox"==d?k.info("%cEVENT:","color:blue",nl[b]):k.info("EVENT:",nl[b])}for(var d=[],e=[z.ho,z.io,z.fo],h=0;h<e.length;h++){var l=e[h][b];if(l)for(var p=0;p<l.length;p++)d.push(l[p])}for(h=0;h<d.length;h++)z.HC(d[h],c,b)};z.Lu={Kk:10,lE:"/js/libs/jquery.jplayer-2.3.9",Jv:"html, flash"};z.Ug=function(){return z.Lu};
z.PP=function(){$.ajax({type:"GET",url:an()+"ssl-test.jsonp",dataType:"jsonp",jsonpCallback:"callback",timeout:5E3}).fail(function(b,c,d){"parsererror"!=c&&s("ssl_error",{ua:navigator.userAgent,site_version:window._pandoraVersion,browser:le(),textStatus:c,errorThrown:d})})};z.FO=function(){z.$a=0;setInterval(function(){$.get("/appstamp.txt",{cachebuster:""+(new Date).getTime()},function(b){b=parseInt($.trim(b),10);if(b>z.$a){var c=z.$a;z.$a=b;0<c&&setTimeout(function(){z.b(Yj)},6E4)}})},3E5)};
z.DO=function(){function b(){bn="AT-"+(new Date).getTime()+"-"+Math.floor(1E3*Math.random());$.cookie("atn",bn);z.paused=!1}setInterval(function(){null==bn||$.cookie("atn")==bn||z.paused||(z.paused=!0,z.b(bi,!0))},1E3);z.c($h,b);z.c(Oe,b);z.c(Ki,b)};z.Uq=function(){var b=cn(),c=$(this).attr("href"),c=c.replace("#!","#");-1!=c.indexOf("#")?c=c.substr(c.indexOf("#")+1):0==c.indexOf(b)&&(c=c.substr(b.length-1));return c};z.OR="/profile/ /stations/edit/ /station/ /music/song/ /music/album/ /music/artist/ /music/composer/ /music/ /everywhere/".split(" ");
z.GO=function(){$('a[href^="#"][rel!="external"]:not([target])').address(z.Uq);$('a[href^="/"][rel!="external"]:not([target])').address(z.Uq);$('a[href^="'+cn()+'"][rel!="external"]:not([target])').address(z.Uq)};z.cE=function(){return null!=$.cookie&&null!=$.jPlayer};
z.start=function(){k.info("Starting Pandora");dn();z.PP();z.Kq||(z.iy=setTimeout(function(){s("not_loaded",{ua:navigator.userAgent,site_version:window._pandoraVersion,browser:le()});z.b(Yf,"splash");$("#splash .cantload.normal").fadeIn();en()},4E4),z.c(xe,function(){clearTimeout(z.iy);clearTimeout(z.hy)}));z.DO();z.FO();z.GO();fn("persistence");ql=Rd(gn());tm();$.jStorage.storageAvailable()||k.error("No persistence mechanism available");k.info("PersistenceManager initialized using "+$.jStorage.currentBackend());
rl=null;im();z.c(mi,sm);fn("persistence-done");hn()&&se("lsc");new jn;new kn;fn("start-done")};window._trackJs||(window.onerror=function(b,c,d){je(b,c,d);return!0});window.flashLoaded=function(){z.ls&&(z.hy=setTimeout(function(){clearTimeout(z.iy);s("not_loaded",{ua:navigator.userAgent,site_version:window._pandoraVersion,browser:le()});z.b(Yf,"splash");$("#splash .cantload.flash").fadeIn();en()},1E4))};window.flashEnabled=function(){z.ls=!1;clearTimeout(z.hy)};
$(function(){$.ajaxPrefilter(function(b,c,d){c.url&&""!=c.url||(d.abort(),trackJs.track(Error("Attempt to make an AJAX request without a URL.")))});setTimeout(function(){z.cE()||$("#depedencyNotLoaded").fadeIn()},5E3);var b=/(webkit)[ \/]([\w.]+)/.exec(navigator.userAgent.toLowerCase());if(b)var c=parseFloat(b[2]);if("Explorer"==BrowserDetect.browser&&7>BrowserDetect.version||"Opera"==BrowserDetect.browser&&10.5>BrowserDetect.version||"Mozilla"==BrowserDetect.browser&&2>BrowserDetect.version||0<c&&
528.16>c)$("#oldbrowser").fadeIn();else{var b=0<swfobject.getFlashPlayerVersion().N2||0<deconceptFlashVersionMajor,d=swfobject.hasFlashPlayerVersion("10")||9<deconceptFlashVersionMajor||9==deconceptFlashVersionMajor&&115<=deconceptFlashVersionRelease,e=Modernizr.audio&&""!=Modernizr.audio.m4a&&"no"!=Modernizr.audio.m4a&&""!=Modernizr.audio.mp3&&"no"!=Modernizr.audio.mp3||d,h=ie(A._data.forceFlash);if(h=(h=h||0<c||"Windows"==BrowserDetect.OS&&"Firefox"==BrowserDetect.browser||"Mac"==BrowserDetect.OS&&
"Firefox"==BrowserDetect.browser&&37<=BrowserDetect.version)&&!ie(A._data.disableForceFlash))b&&d?(z.Lu.Jv="flash",z.ls=!0):e=!1;e?z.start():b?($("#splash").hide(),$("#topnav").hide(),$("#flash_upgrade").show(),swfobject.showExpressInstall({data:"/js/libs/swfobject-2.2/expressInstall.swf",width:""+$(document).width(),height:"240"},{},"flash_upgrade",function(b){b.success?window.location.reload():$("#noaudio").fadeIn()})):0<c?$("#noaudio_webkit").fadeIn():$("#noaudio").fadeIn()}});function ln(b){this._isCreator=b.isCreator;this._stationId=b.stationId;this._stationIdToken=b.stationIdToken;this._originalCreatorId=b.originalCreatorId;this._originalStationId=b.originalStationId;this._stationName=b.stationName;this._stationArt=b.stationArt;this._fbShareArt=b.fbShareArt;this._transformType=b.transformType;this._isQuickMix=b.isQuickMix;this._quickMixStationIds=b.quickMixStationIds;this._quickMixType=b.quickMixType;this._chronologicalSequence=b.chronologicalSequence;this._isThumbprintStation=
b.isThumbprint||!1;this._thumbCount=b.thumbCount||"";this._originalStationShareName=this._stationShareName=b.stationShareName||"";this._initialSeed=b.initialSeed;this._originalSeed=b.originalSeed;this._adGenre=b.adGenre;this._genre=b.genre;this._genreSponsorship=b.genreSponsorship;this._antiTarget=b.antiTarget;this._comedy=b.isComedy;this._isNew=b.isNew;this._isOnDemandStation=b.isOnDemandStation;this._canShuffleStation=b.canShuffleStation;this._advertisingKey=mn(b);this._advertiserStation=b.advertiserStation;
this._canAutoshare=!!b.canAutoshare;this._description=b.description;this._recommendedStation=b.recommendedStation;this._promotedStationCampaignId=b.promotedStationCampaignId;this._promotedStationAdId=b.promotedStationAdId;this._promotedTrackingUrls=b.promotedTrackingUrls;this._promotedImpressionUrls=b.promotedImpressionUrls;this._promotedSponsorText=b.promotedSponsorText;this._promotedStationCorrelationId=b.adServerCorrelationId;this._impressionTracked=b.impressionTracked;this._stationNameWithTwitterHandle=
b.stationNameWithTwitterHandle;this._enableArtistAudioMessages=b.enableArtistAudioMessages;this._processSkips=b.processSkips||!1;this._hasLiveStream=b.hasLiveStream;this._artistMessageArtistUid=b.artistMessageArtistUid;this._artistMessageId=b.artistMessageId}f=ln.prototype;
f.update=function(b){this._stationId=b.stationId;this._stationIdToken=b.stationIdToken;this._stationName=b.stationName;this._isQuickMix=b.isQuickMix;this._isCreator=b.isCreator;this._initialSeed=b.initialSeed;this._adGenre=b.adGenre;this._genre=b.genre;this._genreSponsorship=b.genreSponsorship;this._antiTarget=b.antiTarget;this._quickMixStationIds=b.quickMixStationIds;this._quickMixType=b.quickMixType;this._artistMessageArtistUid=b.artistMessageArtistUid;this._artistMessageId=b.artistMessageId};
function nn(b){return b._promotedStationAdId}function on(b){return b._promotedStationCorrelationId}f.Cb=function(){return this._promotedStationCampaignId};f.Pb=function(){return this._recommendedStation};f.X=function(){return"true"===this._isCreator||!0===this._isCreator};f.e=function(){return this._stationId};f.Cd=function(){return this._stationIdToken};f.Xg=function(){return this._originalCreatorId};f.Ji=function(){return this._originalStationId};f.je=function(){return this._transformType};
f.ea=function(){return this._stationName};f.Em=function(b){this._stationName=b};f.B=function(){return"true"===this._isQuickMix||!0===this._isQuickMix};f.Ba=function(){return"true"===this._isThumbprintStation||!0===this._isThumbprintStation};f.Zp=function(){return this._thumbCount};function pn(b){return b.Ba()?b._stationShareName:b._stationName}f.he=function(){return this._quickMixStationIds};f.Dm=function(b){this._quickMixStationIds=b};f.Fl=function(){return this._quickMixType};f.ra=function(){return this._initialSeed};
function qn(b){return b._originalSeed}f.Sg=function(){return this._adGenre};f.wf=function(){return this._genre};f.Al=function(){return this._genreSponsorship};f.vl=function(){return this._antiTarget};f.Oq=function(){return"true"===this._comedy||!0===this._comedy};f.Na=function(){return"true"===this._isOnDemandStation||!0===this._isOnDemandStation};function rn(b){return"true"===b._canShuffleStation||!0===b._canShuffleStation}f.Ga=function(){return this._advertisingKey};f.mc=function(){return this._advertiserStation};
f.Vl=function(){return this._enableArtistAudioMessages};function sn(b){return"true"===b._isNew||!0===b._isNew}function mn(b){var c=b.advertisingKey;/\*$/.test(b.stationName)&&(c=b.originalStationId);return c}f.Bb=function(){return!1};f.yl=function(){return this._description};function tn(b){return b.isCustomContentStation?new un(b):new ln(b)}f.So=function(){return this._canAutoshare};f.Cs=function(){return this._processSkips};f.Ll=function(){return this._hasLiveStream};
f.Vi=function(){return null!=this._artistMessageArtistUid&&null!=this._artistMessageId};f.Wp=function(){return this._artistMessageArtistUid};f.Xp=function(){return this._artistMessageId};f.vs=function(b){this._artistMessageArtistUid=b};f.ws=function(b){this._artistMessageId=b};function un(b,c){ln.call(this,b);this._isQuickMix=!1;this._isOnDemandStation=!0;this._advertisingKey=mn(b);this._adIntervalMinutes=b.adIntervalMinutes;this._delayedInStationAd=b.delayedInStationAd;this._tracks=c;this._expiration=new Date;this._expiration.setTime(b.expirationTimeMillis)}td(un,ln);
un.prototype.update=function(b){this._stationId=b.stationId;this._stationIdToken=b.stationIdToken;this._stationName=b.stationName;this._isCreator=b.isCreator;this._initialSeed=b.initialSeed;this._adGenre=b.adGenre;this._genre=b.genre;this._genreSponsorship=b.genreSponsorship;this._antiTarget=b.antiTarget;this._quickMixType=b.quickMixType};function vn(b,c){b._tracks=c}un.prototype.Bb=function(){return!0};function wn(b,c){this.Yd=-1;this.Da=b.songTitle;this.Qh=b.artistSummary;this.bo=b.composerName;this.hb=b.albumTitle;this.wo=b.stationId||"";this.Yb=b.musicId;this.dv=b.musicIdToken;this.lC=b.albumIdToken;this.Pe=b.artistMusicId;this.Hc=b.rating;this.ev=b.narrative;this.po=b.lyricSnippet;this.Uh=b.lyricId;this.av=b.lyricChecksum;this.pC=Zd(b.artistExplorerUrl);Zd(b.songExplorerUrl);this.Fu=be(b.artistDetailURL);this.Cu=be(b.albumDetailURL);this.lv=be(b.songDetailURL);this.Xh=b.songDetailToken;this.Bk=
b.shareLandingURL;this.IC=b.isFeatured;this.fv=null;this.GD=b.userSeed;this.Gu=b.audioSkipUrl;this.Wn=b.amazonUrl;this.Un=b.albumAmazonDigitalAsin;this.mo=b.itunesUrl;this.Ek=!1;this.ao=b.audioIntroductoryMessage;this.Ec=b.nonMusicTrack;this.CD=b.trackToken;this.BD=b.trackLength;this.yo=b.trackType;this.zD=null!=b.streaming;this.Gc=b.programDescriptor;this.qb=b.categoryDescriptor;this.MC=xn(b.firstThumbed&&b.firstThumbed.timestamp);this.Vu=b.firstThumbed?b.firstThumbed.station:null;this.dD=xn(b.lastThumbed&&
b.lastThumbed.timestamp);this.$u=b.lastThumbed?b.lastThumbed.station:null;this.gD=b.numThumbs;this.Nb=b.artRadio||"/img/no_album_art.png";this.Nb||(this.Nb="/img/no_album_art.png");this.kC=document.createElement("img");this.kC.src=this.Nb;this.Ku=b.compilation;this.ko=this.Zh=this.Dk=!1;this.Vn=b.allowStartStationFromTrack;this.Eu=b.allowTiredOfTrack;this.nC=b.allowSkipTrackWithoutLimit;this.Du=b.allowFeedback;this.Zd=b.templatePath;this.Dc=b.artistTwitterHandle;this.uC=c;this.$n=b.audioEncoding;
"aacplus"==this.$n&&(this.$n="m4a");this.Rh=b.fileGain;this.Rh=""==this.Rh||isNaN(Number(this.Rh))?null:Number(this.Rh)}function xn(b){if(!b)return null;var c=new Date;c.setTime(b);return c}f=wn.prototype;f.V=function(){return this.Qh};f.sb=function(){return this.Nb};f.e=function(){return this.wo};f.o=function(){return this.Yb};f.bb=function(){return this.CD};f.Tg=function(){return this.Fu};f.ul=function(){return this.Cu};f.Yg=function(){return this.lv};f.gh=function(){return this.IC};f.nx=function(){return this.GD};
f.my=function(){return null!=this.mo||null!=this.Wn||null!=this.Un};f.Ej=function(b){this.Ek=b};f.cb=function(){return this.Ek};f.ie=function(){return this.BD};f.Ff=function(){return this.zD};f.El=function(){return!1};f.wl=function(){return this.uC};f.ge=function(){return this.$n};f.Qc=function(){return this.Rh};f.hx=function(){return""};function yn(b){this.ab=b.gain;this.lf=b.clickthrough;this.lc=b.impression;this.tracker=b.tracker;this.Vm=b.tile_tracker_urls;this.mf=b.companion;this.Yk=b.companion_web?b.companion_web:b.banner_html;this.ib=b.type;this.Vf=!0;this.Yb="V1";this.Nb=b.image;this.Yd=-1;this.hb=this.Da="ad";this.lv=this.Cu=this.Fu=this.Qh=""}td(yn,wn);f=yn.prototype;f.PG=function(){return this.lc};f.lH=function(){return this.tracker};f.kH=function(){return this.Vm};
f.sb=function(){var b=this.Nb;if(null==b||""==b)b="/img/ads/generictile.png";if(b&&"/img/ads/generictile.png"!=b&&-1==b.indexOf("mediaserverPublicRedirect.jsp")&&-1==b.indexOf("_500x500")){var c=b.match(/(?:\.([^.]+))?$/);c[1]&&(b=b.substr(0,b.lastIndexOf("."))+"_500x500."+c[1])}return b};f.Yl=function(){return this.Vf};f.xs=function(b){this.Vf=b};function zn(b,c){wn.call(this,b,c);this.Yb=b.musicId;this.Nb=b.tileImageURL;this.Yd=b.trackNumber;this.Da=b.trackName;this.Qh=b.categoryName;this.hb=b.programName;this.Zd=b.templatePath;this.qb=b.categoryDescriptor;this.Gc=b.programDescriptor}td(zn,wn);f=zn.prototype;f.Tg=function(){return this.Hl()};f.ul=function(){return this.Hl()};f.Yg=function(){return this.Hl()};f.Hl=function(){return"/station/"+this.wo};f.El=function(){return!0};function An(b){wn.call(this,b,null);this.Yb=b.musicId;this.Zd=b.templatePath;this.qb=b.categoryDescriptor;this.Gc=b.programDescriptor;this.UC=b.hlsLiveStreamPath;this.Yu=b.hdsLiveStreamPath;this.vD=b.shortLink;this.iv=Cd()}td(An,wn);f=An.prototype;f.Hl=function(){return"/station/"+this.wo};f.El=function(){return!0};f.Ff=function(){return!1};f.my=function(){return!1};f.hx=function(){return this.vD};var Bn={},Bn={StationKeyType:{AMG_ARTIST:"ar",MUSIC_ID:"mi",QUICKMIX:"qm",SHARED:"sh",MUSIC_ID_AC:"mc",GIFTED:"sg",AUTOPLAY_FACEBOOK:"af",FACEBOOK_SUGGEST:"fa",FRIENDS_STATION:"fs",FRIENDS_BOOKMARK:"fb",ARTIST_SUGGEST:"as",GENRE_SUGGEST:"gs",FACEBOOK_SUGGEST_SEARCH_VIEW:"fv",EXTENDED_SEARCH:"es",RECOMMENDATION:"re"}};var Cn={},Dn=g([[-668617326,-1489172681,1065101486,-115379946,-278200290,-746248963,1417609708,-372646020,635342487,-1622802655,-2025352635,1957035642,-1656086821,2129644150,1488000962,243217342,478415738,367978584],[1242278845,1186421985,-632397609,1658687266,1720545937,1882393713,-1899091612,-724446641,575132671,868035971,712898834,-1176038968,241517787,977647203,-1969572901,-777943246,309332310,635037017,-1706926976,-833502787,1943558205,582565347,1072930735,992875E3,-1567149616,1328296287,-1268677942,
-1299425746,-1015376167,-1963962233,1952430114,-339479800,792775040,-513386591,-1108553382,-913014509,-784386903,1382684063,-174576567,1440883213,246053430,-1871242693,-2060622435,-198495282,-1135236240,-712731143,-1608903574,342755680,-591140101,1163271072,-1752422059,68052641,1419848668,-2031388476,830175929,-1055711368,-1134050495,-125498832,652979891,-1575244906,-229455478,-390523918,-1841832974,-985010095,-1283540245,-507787403,-1050321547,1661602118,-1360752569,1321570751,-1319781990,787241843,
-563004666,312882359,332303031,-1819448167,899084E3,1343197286,-151517417,1087987224,-1043039698,-1913774587,-478267742,1422393299,1258273231,558691768,-1419201209,-1211361247,1551738969,-1294303777,-2073783046,-1934602987,441086370,1609600394,-2023170203,-1840369693,79171738,-468159446,1489862931,251112137,-1833906311,-1340096814,1306775074,1803001376,485566159,394897300,-1471791706,-204675156,-769297654,756748830,1059850320,-483983093,1457084545,-2043038802,28560107,527405828,2102129511,-454287143,
1829087825,-2010418931,-62875593,1709314758,-1530312057,-1323659090,-1250613908,-1676497131,1747940074,-993473015,1140244836,1271928281,-1684332594,-1676639195,1084808976,-1329822157,-1756447878,-563098084,-536517811,1888250270,2103180335,-1131586608,-255008730,-1242231292,-2079175737,-1707837428,887679316,1692493219,805803421,-1918612472,-1441736639,2122803936,-1241381839,1207233130,-192786348,381955035,-778676894,930592272,1958048798,-703840039,979300739,-2028591859,-1854309299,27429221,-115991108,
1151985154,-1410535675,-1433355626,1986035133,1220500409,629410442,-777234778,1872446068,-983021869,-1999696533,844033984,-360512289,-1568781695,-1700044421,855753881,1357446935,1739886399,1526414210,-216598573,-1170056268,138285812,486192091,2025883817,1858614789,-1267912471,2051396862,439466712,690236786,1911551839,1842326680,2040604186,946204405,1637114275,-1034288591,1963225810,2071022781,2119671992,-1280888417,1071496875,-995680635,1154712361,-1575286703,-1119572330,-96800304,1030186681,-1501016443,
-741760832,-890863364,1103305260,153018157,-1633360315,480261324,-519194088,-1842697764,767760587,-996315376,-286808216,-2123113066,-1772804712,-1423619086,-1514152216,-1987164010,77450682,1472056436,255039908,1670419492,1877941830,916747140,1374697182,-1368359264,-628935364,-73502056,-102960770,1332735810,708950080,2110596706,941617040,393471574,-167600447,-1319556549,279336660,1843080801,-1912410626,-483949846,-1757595659,362071593,-1955346894,377528632,1062933032,-1943410382,1238598818,41501845,
294646501],[-1373445067,-1082964757,-67935922,-1255475590,367820427,102092148,822686134,110981783,1163094176,-290455049,244470097,-558809758,-1819250194,198365906,581955716,-204096907,-390626189,-513494702,-1915545596,447478324,-243041253,-183692085,1156992454,633653959,1503854155,211705894,-1767337844,1237341470,1821716439,616229538,1805501216,1920143533,159858151,-1474997189,275203014,-187830222,-83752785,-712296528,-1198429253,-216151758,-1306052491,-1799365258,560301979,-1504528354,1481021668,
-1272254306,1308571891,696540119,351516199,1590318464,-69346381,-667341645,-155911195,-36757467,834017617,-1638363747,631275061,-592916160,-1936247919,1892169876,456068549,613293728,123745130,-1886669809,219833870,219562230,-1557455082,940149007,-2097680150,1825346575,-1175272402,-1235114922,1493298357,1991847414,568022808,-499172627,-112555421,-1980348828,1932904320,-1611071253,-1403174184,-167469628,-1180963542,1072158552,-613816163,-862178509,942387775,-1333808767,-1692354748,1313787485,-309445736,
1253468242,2025637473,-1042767220,1910542E3,-1630870511,-1526897811,-1604020582,408618476,1418292627,-2129595381,-724048516,512920646,-103932119,1047722833,-1482947508,-1380367266,1252234489,311768274,-551478972,1650963674,-181098760,-732091586,1595446500,-869801098,-24744625,-1787921266,174263527,1194616635,-1081427855,1126977887,-1562922113,-817301E3,838279323,-1226337575,1578329600,-175920827,-1428918177,-387775629,-1511675097,-892929462,1223926025,-1306891909,1169799152,779858323,-1778126405,
-524649920,-830556626,860562629,39944574,1320653483,-1201945930,1833423065,-761183429,1965265963,968842471,1914845989,-1030813421,-1071841724,1343170533,89356747,2020375304,2088053082,1653904173,-240115984,-409773834,-1983585121,-403227385,-277879753,-221402817,-1332130200,-1376343015,9590136,105204472,-834262869,-1617412468,960387492,949404040,1779064565,-1170764813,-764047123,-808316935,388506490,-1918117517,-500393918,698426955,-3647844,400419754,-103405224,285376919,-1003759537,1870759243,102748823,
-764696686,1677138858,-1388921396,103162473,1460773365,-1435213501,1965305741,1477945421,1671352758,1830344388,1342111233,109704916,1503123218,-681455781,-1844371092,1568671475,-572370966,509671019,416553660,-596462389,-1615021443,-358086715,1879801394,-817794090,-480992098,317412454,1675412708,499273070,480193155,1039594257,-5695919,974820933,819292324,-988129868,-301784537,252324012,1159121330,-684572776,1417427832,1539978209,-225831486,-536937811,-689407043,-400506339,-82012221,-469210633,-727619600,
2040721404,-696644205,-396165370,1421671191,874554992,-1843850645,1418921527,1441287891,-1463495738,-64214062,1940985584,-408776692,-2145511048,-965469418,-86307231,-1255055416,1993466557,741626603,-1623004809,-1142704129,1046088575,1310623322,617875974,539979483,-1683047686,1651692925],[1924355171,-206760028,1446110878,1081851253,889757828,-2002062898,1258590303,791669728,162171282,-568416902,534510333,942129417,1984822584,1548365744,-1578565320,-192856013,-796459990,-1282886816,-22686926,1193290357,
-853161062,-1554925756,-1208703306,-300525376,1343651963,307711866,-1256737732,1947362037,1862333257,-626768519,-443842416,1874874196,-2075012790,-2067574092,1896622168,266926156,-1352760840,140855675,1428568313,822733805,331521396,661435715,-1935253866,-377241192,-1201873832,-1255998515,558919673,-1938803056,841625638,-1199858779,1241472079,993956477,-862027225,105704041,-1997401277,1323087596,259892920,717025180,-2038013597,-1085596849,-1797201689,-1929486858,1250756411,1133601648,-1125316543,764343866,
-17011992,2050131149,1375397533,882467377,358193559,1519201778,-594587035,723751261,-1403549626,194758789,-441519256,-481123605,1731397408,-48797160,2025543567,-1253954991,1760777991,1196884E3,-1974512863,-1233696075,114168684,-1376959417,-1366679570,-1183077587,-1783097594,1228800044,228444464,-150211475,580686072,-1354431679,314022336,-1738185464,-1936890857,1226645204,452145750,-215523871,138758488,840600910,1330737125,487022727,-1808721063,-315188039,1341738853,-2028822604,-1928965600,2064773845,
-1755236176,50946811,-1905726113,-496283022,73124843,-1823411935,1378738155,518746290,-869356552,582635223,816890812,1692371532,-175423502,1454619622,1047635712,1708615111,-2019228107,-1856632757,-2050130774,2080346111,2071570745,1764195786,1518099954,931686965,394043827,-1769529388,-1201030595,472291233,-711915043,1804013381,-911361387,-612162600,175600401,635625261,415663319,1683300784,1487656700,2127163181,297065239,-1374015767,-2065079900,371717891,-1943802771,-257383652,-1907120381,-1324148976,
1461964562,-1726091009,-1559979848,49220985,725472239,-745789135,-445361274,-199564465,273260092,-141202994,-1898505054,-1733239760,-1620159711,1122723770,658685164,-1913000112,-1432314969,-110537466,-1567300113,-602748603,259685610,-1642472042,-1412271052,-764527553,330588144,-813467161,-127929197,-1739556394,-1112009470,-1564079012,582365868,1027180270,1166169189,-1360307975,-226240437,-2142146557,-1809113998,-471396475,1066304573,1951719533,833754523,1451918181,601670718,931601240,1623627875,-779578814,
1376339650,-1835322746,-648024788,706773824,-1836191182,-1071063207,221618751,15583516,964275929,-1440104441,-2068153545,2117904843,1425017603,1634279292,1479817341,1997256584,-1318913600,1130465025,-1643800204,115734566,217519677,-1142882739,2131782563,1906691491,1883553078,1423678573,-826883353,1306697646,325892400,-364869035,2061199728,-930064422,1890745429,-39988065,1905545865,704051402,-539749121,973552762,1628223491,-163728653,-625666554,496550603,-1901145629,655605251,-1485567849,1099234599,
-184841722,1119219236,382492833,1489500752,221924532,1086418682],[-256481494,801110085,-119872799,509783513,-477712071,-835558330,528867490,-2023045500,-123770387,-1178470037,255132311,1566332711,-456057122,-881236788,-513511868,1094564244,1343657617,712344639,-445847980,813451752,-1413515874,417532772,498960643,-308531879,769650731,1861403677,1072729325,1548451633,-1301707574,-1330515990,-1676577970,1745587046,-597222330,797825474,-892389003,-1007232805,954071072,1109263954,-1614914822,-1259062557,
-1786789371,-5930123,1428709893,2129228981,836684532,1047799277,-1395475429,-72114665,-375593368,-1008834401,-390317511,-1020792698,-1275926380,332253257,-1478960433,696775528,2143627797,739108967,-1013964626,1805278187,286714636,1459279357,-516006855,377449538,342030324,1561884148,-2103087240,771459302,-803663482,139514954,-822472764,1069121035,841333120,1026806815,1499441365,1068602459,-1797920262,-571528245,1278583513,-818773995,2112796988,-144046283,1824430040,-505204782,1918073884,1766199580,
1754925400,713223085,1517335798,-903046961,1342917813,-453565134,830127918,-1693036242,1630506763,-1087226906,2056931367,-469650104,1198940782,-882892537,-333931753,-1801229127,13133446,-636336561,24306924,-1753618462,1161075520,1921432801,420725813,-1947081664,381375699,-419371469,-182159270,-1300283639,632701037,-1583614324,991186338,-2123665216,-7948842,511044531,1471476290,1182211882,1400335455,1649921741,668443243,1957524639,244183410,-92517850,-1885895304,-215591065,-1602133765,-1978449123,
572600933,1241616114,1382791416,1606939532,-88724270,1357874804,1045415649,139803957,734817238,114434326,636579560,-1256384725,-1905954686,-788381430,1804460125,581871470,191442317,-974667535,-1287023496,-1422204417,-1049768011,-1242139543,834672046,2013782783,1742830664,1455109779,-1323647487,1254242362,1423359967,-1172351986,-187761029,2140983554,-2101236972,1295161230,-477941790,509847978,-887375925,1200516205,-658453656,-1190667728,96224156,2038902535,1946423187,1592191677,-956250560,-495710990,
2106986918,683885619,-1793478912,-1397870406,-772970640,1918205058,1356446925,-1126242162,-1746702593,-868733192,1907826626,1861026577,397436354,951998886,1833378346,-1723810851,874800112,-1737343646,1508666377,333477819,1826433159,1983728277,1373086304,1981139135,2074745613,-2048724808,698437559,-1866716593,362904801,-1782855718,-1741141157,-1773245672,323091746,1690064669,-2056374979,-1836816376,-1111732351,298166591,-1694443349,-372771188,2900670,2042098408,-867889354,275585313,-2096698177,-1277127965,
-79026157,-999457889,2096427848,468404578,-20429582,-704742134,-225830798,-1595657218,1591443597,22617057,-615642893,696913403,-969360586,1509515652,-1555772127,968555219,-2096027108,412286088,-2056348324,335367958,-2122306889,2046519694,-1416956959,-1737723199,-245999303,858718077,-791186324,-587740658,1642500890,-175974298,741609689,567739491]]);
Cn.nm=g([-660494265,2176313116,1416121723,-839045805,-1381132614,3076489317,-1750824686,-1445620563,1800353587,106414398,-55703929,1879595236,878713105,3179226769,-472871663,699586219,-916098940,-77882640,1323584925,-856773873,-664499978,637393335,-1327613289,1726668591,2808002686,-294476294,1409764844,-877821011,2056906976,-651500219,-1241716425,648910553,1566661992,-224834686,-429337790,1627725132,-810378076,-1958601416,-633647431,-651335083,-136757049,-1715159933,-1417056647,2009531291,303411786,
202292237,-370113870,1803419292,2873522889,-1859646072,-1541233823,1046957386,794964064,2966019713,-1159437909,-385950441,-271129120,1762475667,855301808,463072772,-1096833063,2039996358,-48529371,467959268,764451222,-28803088,1653329889,-1523268064,655389626,-1946606739,1054903350,-194947497,1616727936,3840716642,198674121,-45434397,1525356784,2056092818,1822690470,-659734215,-899776830,2126957776,1430932950,-1169732143,-518826133,-880171331,-211358708,-2023333461,-664906879,2041131815,1515085202,
-483385565,-233710239,1862353104,-610192193,1013067784,-704845450,1860068494,3091911084,3119450164,299612349,3240767786,994040417,-850368446,1656681537,321177603,1491205056,956821095,1201043762,-1010568576,-995084615,1589798068,-1803244996,1609538643,-1044839665,-395547718,988061102,-1146338788,2347657914,-1173118286,825424519,3377836921,3886022750,1532589967,-268816798,1518035669,-403833827,-817012773,-969864230,212765583,1394175023,-1399513825,3379970447,2107464022,782642322,871032245,-460202943,
2682112307,1164455951,2306022311,-1231550135,24380903,1828150735,1152934902,-543783606,-91585648,875290618,-1828101296,-854654845,-1104584739,1419422153,-2058038501,4197682403,820561805,-312461517,1263006914,64258524,-1947973732,4222574493,906732075,476690067,1440359941,751401112,334548079,1597046497,-161663280,1822787204,-1230905565,782692251,315859216,-238511334,1378593311,-476395597,-1346284591,710300276,1364396870,311507069,364653411,836777756,2384582612,4235264591,2449487292,1124899333,631187694,
418743758,3873107894,-1181382411,1831622427,-109755364,323523197,-1335247390,124887960,3352741505,1008103971,-1011101729,1086588634,-2117572687,-350174254,611773780,-1249775550,291547320,-1130255089,-655258465,1888208838,91871292,700097208,1169704430,-1518381703,-449951094,1211520120,-959660108,3015658171,888110206,-186638233,1065846889,1484390204,517974799,2186627181,1661651296,-1412001646,3630597186,-238406889,-1660991278,-1880932477,638328291,-1982133493,-249044509,2107966463,29992993,811022951,
-1974044114,-461666609,-1200579874,-1315250886,1185116276,323805572,527636763,-500483594,-372024003,-1721528145,367692793,2965109502,-733867907,189843210,-1179202420,1621433870,-1593351101,559878802,1515439684,-359208402,-369904452,-1168161326,1162569174,753946012,99556623,-853885970,-395929680,2875064567,-336745025,3785102970,1707679501,1645587281,-2014855690,2097938744,1861518926,3365531406,934715964,-852402451,3689597016,3933564480,943938819,-2079630206,600685706,3377771497,-338959859,167434988,
-1728077981,382787553,1421238184,-1940336516,-357777760,-359938633,-750536467,1188304636,38263995,3948986193,584774019,1719979903,-1563043338,-989338565,2067172070,1551136012,1206475204,2681187148,-1830518459,-640702285,-1796077080,2295612680,1001060277,2193961019,-404328488,446138072,514850637,69467365,-396311030,1997779636,1751019254,1124598223,1180777079,-86062826,4282598120,-301611745,-725208289,-1681254079,364839967,-1011855731,1825585071,298327635,-1283222561,-1311737006,108856055,-1444578933,
1314656422,2030950498,-559801647,1007456447,-1336049088,-22536359,-2094065153,387517724,347999945,2269588877,-32732626,560468902,-264075480,-1043194417,1410374347,1761300923,1062923881,1434446356,127294998,1491247620,1853250316,999133711,-579788416,-586192950,939119733,-1853793073,-1021692741,-1888416014,-220582014,2343090016,1173638787,2136517820,451646459,151909683,-1056102474,-135388413,-131461424,1459818802,-2001734575,1115607068,-240343824,-581603511,221752402,588280411,-921217668,2618231172,
1389199953,2088687670,881388889,-989042165,1733563373,1667782717,1472075823,452301409,1180237858,-1530461817,1180234731,-2136600503,2987450999,-1096021544,425381193,1809964613,1861346093,-1197164522,-1048094536,1579775421,-730480671,-868566865,1168874199,2349917682,-1699906002,-1176995742,687066406,-1604879858,1971691214,1248746374,-434227533,-1609691996,1043122588,2397584272,-834619493,398112309,1945223810,2080414944,445365338,-1145536819,372166828,-1917358246,-710077900,2767245172,1103879931,1905766388,
3423083954,3358274879,4194228464,-1527749415,1255965834,-371290099,-1082969597,3049994580,157108079,662340189,1265263059,1668011067,-481884736,1710765868,1232781665,305252938,-80195530,615735632,1824127533,-877972583,942826142,465049070,1789555911,-1879432520,1678327592,-1757693291,-2095414891,1219662397,3724783702,381309764,1753740122,-1129259060,-859683293,-95404371,1904842092,1703805866,-90225019,3622866487,2402060604,-1515930247,410705037,-1964005706,-162531798,-2002415430,-485722690,-1547715385,
2726462587,-995184654,-2110929414,-1435254315,1110375827,3707025876,-278774202,607738417,-225446776,466849138,661665028,-1623651469,-1499884200,-1965012448,-579868709,3268953145,-806391621,1888265847,-2142439541,-710140766,2064722377,1608537823,632525034,290785349,363170827,2083860643,609551684,-745148976,-352032894,2117914225,631792652,-1767287330,1274503502,806681864,-492036562,497266354,-1237535332,-1634544639,-2053428156,529086784,-293488197,2135098761,-1356021012,262304738,1046245290,1988297319,
1691828198,-406478198,-1716035396,1628646192,-615375754,-607665672,3790886060,-728593129,1841024095,1746843240,-1020866887,2302010665,-260980333,1556521100,-95709717,200094813,377835361,843090564,1999855405,-872321307,1289869302,850477211,1703192522,1942852851,1457100782,-1829097321,-1582363235,301775772,1430088660,3352254470,-1296627143,1539899779,3989048382,2848677958,-769546492,176647396,2592676081,-2133600140,1768582397,-1182142479,-358223566,-1566651555,1732998016,195916383,1507153160,-1917579734,
4111634,-2028285938,2060329129,-428819835,1138047383,66941171,2710136E3,-1307363395,2031387624,737273789,1625363889,-1920526739,-90989064,-1327162914,201931177,3207880130,-1921330742,2424363103,-822995138,-1268099087,-1646672011,1419456093,1738765445,955776024,-1570114143,453308750,1162928134,-1889661420,1589221676,2227695182,1561995678,1195013569,3872805224,2108776840,-426133752,-1999599622,115625294,-886446823,2013727577,-1133202947,-637058752,1434163510,-2135206530,1112681764,-1868654977,2102889E3,
2138631127,-1215046581,139038471,-1971848184,-155455,785006883,-1237818916,-653696914,698697188,1511757714,690990227,-1111046925,-624439803,3920210200,-527579526,-520420569,391466338,1668124736,101896863,-1356528523,-1198123200,-1103215608,988899046,991349895,768045377,4124428921,239113763,-950572166,902494170,178892502,1818176704,598391055,1956912209,-626936489,1093583906,3505452946,4033786148,-1839816397,-201513415,3525196195,-1308260124,859020292,-878996736,-861824791,-2070269953,1055124755,-763608609,
-247120679,2235744095,-1662605666,358728125,-1970307577,530815132,1612461120,71344115,-1292718444,-2095339581,1748100077,1549536216,1653214857,656856995,-2101943244,-1222007353,3002295244,-1542349594,1146741764,188646794,135015929,1857961979,-1042920498,984177156,-1718950649,-1051555942,834248483,930519416,-171473304,731201812,3556284681,-1080136067,1103019065,901538749,2011766546,-1987012976,-887638115,-859878875,1046373694,994390513,833577225,41795647,860545703,-1972872592,-668191907,2104738195,
-265216903,-402055505,2362776736,-2050049626,1076541385,-1453439674,4203818537,1067458257,138862871,-762267512,-836204292,-487384847,2809824723,2049799098,-494323739,1837462581,-1976629766,-1583638929,938420607,1831532847,-1480335846,-1735575472,604010387,-1186170580,1302955830,-1605454480,1252282244,1898244038,330891886,665595157,-71717485,798272028,-1739032003,-1667384938,2117371861,-1474746580,2421164745,-522489099,1303676220,1934673900,-1318949773,118688351,1130973230,-700307659,-2057756659,273082460,
846003028,2107938573,-1370700956,3051084201,-193791840,1006642308,19949502,-930475241,1279008923,2092665779,1107004847,593858995,-594064827,-2043025608,-1748792551,-671131867,1031094131,672302424,-147028085,1897272260,1391983881,1248205622,1652641166,-1143137002,1795652157,1454471812,-2019348041,1804141881,-1345607787,1325328814,-354179855,-1009460787,1593670706,-1313661340,-1792780666,564648466,1901453377,1935848565,910715861,-1451336324,1172862241,-1827037870,611291550,1515721561,3353018398,1017710988,
1457149716,-1442093238,147364445,3907446828,-227498236,1908355546,995587886,-68612277,-2013518858,-817808015,1342089452,-273014590,-346824511,-1612994,-2058475288,542591014,-1971830338,-1796630176,-1545170844,912021419,-1091995956,1500222658,-1939959582,122371156,3569776105,4076660380,3962251101,1739124204,616450329,-2115265398,-38718351,-295590751,518219998,-1940536747,-764174336,374560197,581333134,1807008154,4226050524,3975859667,-581467815,526806814,761623905,1189298362,-1954716528,-430188675,
-1525734782,1262837027,-1688385429,-1781620317,3432301303,773242498,4018764681,2194958628,515511589,-2063747213,-730013373,-1054523385,484756414,-2142683091,290290521,1691836589,1794035273,-2082695065,922721320,1878749341,-1305513215,1852616082,127892,2699268385,-368902694,1080070758,2136578945,462411162,-1520238756,-1609084730,2023969044,139506436,-194669384,-12971330,702409552,-472950228,-1908143328,-1077985832,1688057226,-997553583,-1745798717,196114755,554134367,-2125202191,2871444998,-2127649646,
-66403193,-974461686,2105288958,761182035,1506525513,1790153750,959651354,591127819,2131345853,-322888082,-1503363837,113062829,-686307435,-528601753,646501387,-499239777,-1937812066,1000773826,-346043076,-380752411,1007674591,1430602838,4148396122,565139671,3852311073,398181959,-255434734,716828220,873312462,1923315311,-495825839,909551101,-1037646823,275479761,4019233708,193268365,-710477685,-835250760,-1220994910,1791569505,4236285125,-178655522,880984896,621717038,-111317326,-1305580433,-1822998318,
2080682536,-1190478566,-1919090231,1136016173,-521409108,2082575876,-2072414865,-1233955330,-1604955237,-1357030910,3893568590,-778020548,1521217351,2940154802,-1428467119,2026539754,1542736860,3819288606,518318201,1366018198,-843374102,-183255804,-1809418464,1797905089,494374247,-1775900094,596929468,-230871542,1846523,-284028413,-1774580693,447649291,334681480,-1368654162,1233373661,504048287,1734651128,2793038906,-128739999,2885388799,-661807186,744246375,744733413,-1714621237,3857683291,216506644,
-880199469,859368867,-417881250,-1231210446,1478989228,-708193271,2098837965,-972115330,-1317439242,2009906410,3341623989,1507828598,920347090,-1769789163,-867954189,3334228589,743761377,-583210684,47787561,491230641,670630064,-1750788404,3118382098,431486917,-1086006153,3200818831,1615284733,638728558,-1581322112,1888187443,1564832304,-318520085,-1471319122,-1982506963,-1779382278,-279856951,208552588,-886158851,-1054127395,1629264597,902944718,1588274806,545004424,490201106,1263876993,1228970266,
601487829,844423E3,-1188763182,-1079632624,-2044731633,-1143797743,191556422,-1833663692,459429406,1536464179,479813011,-1724672447,3860650814,1362014812,1413514054,-1601132546,496805369,1191975396,3031537019,-1469938605,911026636,1122267871,4070339594,1820083946,548214811,2104971925,-999654350,1775142240]);
var gn=g([[229897818,849839868,-332487530,-907383437,-1140707779,1654199944,1768821727,652357015,623000070,1470604882,-1700802255,325928445,1032404949,1187458971,1923722567,-1203655686,-1390756482,697642389],[-838202984,1582992320,-1714076669,679877749,189010644,1849391637,1294974997,-1459294,-1488742285,-1267499271,726168914,2094845591,754773706,-1978458060,-964803934,127750555,475421891,-1954094281,1930533718,1804524105,394085593,-2051681430,1657887374,-1897984338,-15890258,-495691821,-1572079538,
-1249123943,1045945831,-1502595007,1833385681,1320753672,-704191285,-1083120076,99601038,-2126564410,-844996408,-471190585,-95833021,-642258511,-13931089,204284672,363505287,350301540,2096251266,1373144888,630788670,-1816153472,-401154963,-97762171,1780264345,-463978616,-247249674,-1749504896,1661023437,907615021,-12831512,397335952,-1786395721,993476149,-1289892824,-1486484666,-1637501503,1675351685,956816708,-391449187,1892156646,-1927668726,534517972,-2067356029,1379383480,-1110405008,-1415767431,
-297252165,-827208828,1370363882,-977108484,1148411618,-424551702,2063167191,174620934,-1391584961,745393472,-333539626,-524786491,-2117597493,-1848292203,161065330,-1666287795,-629597872,-1515716318,279188318,837684612,1390580413,1470418347,-1721969561,1616928068,819446181,113011226,-1137116088,1893567469,1270822224,-1942858657,780944747,-764992437,-5230105,2052542001,-999992473,-1537640841,650047489,1734205268,824706066,-788513771,957925301,-374186585,1533109320,-1173745566,-826461704,2145721040,
-357151714,841612069,2114269302,1241753843,-1049389401,2142940283,-1838067471,-1324159491,1905776214,-157297790,-201054091,-540165134,-709698336,-1016771856,-1488430653,-594563498,1731530846,-1798530146,-1606210681,-120326099,-638304073,162704055,1158793164,-1080616086,1632271664,-953274094,1725021944,690842045,1739639665,-44622681,-1967781309,-641513874,-761373643,65745658,-1214426411,-1813964993,645427078,1338844898,-2050732116,1578591624,1083724660,590026151,374619257,-1119927069,919795828,-1845588850,
949741829,1681149992,2078866991,27836027,991084966,1816575850,588384585,-1794583888,-1101425630,1569299599,-958842176,1540325237,-888719722,1539346640,509413950,1355091328,969898415,249646189,-297327243,449063944,-701365741,1107499286,-1381919827,-680597934,-778804932,1098355179,921066823,-1666097852,1340413236,1635380422,2096582952,767918068,-2000835789,-1834546588,-1280335848,-278303333,-780249545,461588273,-667101715,-401949267,-1858128041,1434456423,-1750756032,-374815067,195467630,2099495900,
-1597721624,-1903156491,-1493112415,-78449633,246041414,252275050,75487554,924386488,-134584506,-1983745120,149251714,-2087652145,1622942259,505617848,587788700,1687633870,841560575,2549740,1514529746,-1765142328,-167150553,1778487572,444538353,4769090,154804769,-760448134,-718437660,1384148803,-823751116,1125707753,-464419398,-597630465,1284194762,-1132703057,-382861132,8794989,623742166,-728917168,102274724,-1816409486,-776347168,-75071976,-440781865,1682065087,2078723742],[-21733635,-306381912,
-744029967,-176378044,1429039436,-1164660022,-381547734,-1299991660,1607009042,-402998702,-754759649,-439166825,-710246648,1827069566,95384152,-641266701,1622567497,-1349685950,349194347,-65540781,-294482240,-809162226,1024527238,-2048819911,-1414777854,-1706213789,2015358012,1154205471,-727150729,1910149322,-220239283,1094825782,-684452274,1939354503,-277056907,-494300589,916538274,892016842,-742209427,-1484685128,-1017654794,847680589,932969587,142238672,1099215356,1985912574,-886341855,696524866,
2145491540,1058435670,1159229527,999079252,86553755,805114715,1787566030,-91209740,-829271227,1839351800,1401981608,-139328093,1934503773,-1434150918,1964025873,1804658669,-608913682,-921334185,-15173140,-2124493524,-1988743674,1137069043,-177302877,-2040222398,423375948,-481425272,-569706283,206961364,-1995276609,-271767082,703822755,-427391440,-185040687,2128784808,196339784,1762627017,2069139401,-1843691302,736819839,1542164659,-1512726270,1458966678,-385056603,1024786372,1010105275,824382034,
-2068651977,477383174,791412835,28915243,-1389343508,577668759,-673413218,1342015518,250058625,246215074,-216638913,414242972,-289953053,-1820650324,1832775439,111065849,-1237666466,1577571453,1826822183,243112583,372960343,-1937708138,2103358009,763214910,1800183795,-1992244437,-478430059,1210796593,1184941843,-1205185367,159027875,-1041734734,-1829498500,2107083548,1717162088,-1973878467,-979334533,-1793931378,85668082,1777533755,981628988,1650968752,695069126,-1039023194,49931267,-82940838,1189597009,
28043600,380817357,1018153443,-1258808613,1477041890,-1102691390,817007353,-85096175,1369063118,641924991,-1297538737,466052501,1236104331,1283110662,525901675,-595677004,1267730858,-1311074061,-1367762857,1162231097,-24262407,979403729,-1629480743,943319477,1346742362,1842491538,684231818,1644633962,-734924384,-418702453,-2017213300,-188901916,-2093017368,1433345104,-1469387383,202250897,636101491,926093488,-1073854191,-1275868552,-697868318,-679652007,-439843226,-969688977,260882203,137526431,-705670178,
-735332500,-898570095,-202874621,1951633522,1251469271,1358944081,1854037419,-952514179,-221850763,-615500027,-7901447,-1842188195,796332468,-1820356461,1042145500,300996451,985124197,685221834,-333293243,1437878022,-1378933693,307092097,-2052507185,-149857939,-1781671066,294895386,433559162,1422069771,-1738410930,-1239801250,1639309903,-723122509,1546543226,1627266706,-1531749319,1934841867,-334231859,-1926427978,-1592311471,717274623,404420987,1893525710,-1529537637,-917170529,936436263,-1450703610,
2047953531,70803453,1124273233,1284478630,1799480282,-905101325,438026463,-59942803,1430045468,-155909065,916399199,1391353235,385801221,-850529431,806123563,39169159,-1463583305,1078258570,1679455913,-249910367,-573522649,-71380760],[1982223603,-1914120326,1673119344,-168093710,1947706464,-934868568,2011192205,-161518924,1095646864,1078536813,1518513073,680733802,868705769,-1164672567,-907727792,-195111916,-723872473,-53086897,-797237490,-1310522730,135608533,-1864755069,505723833,340204661,126389924,
-779012581,-1414928074,-1999261634,1626444430,265750136,952664295,1814671453,136123214,-1148729170,-2102244111,-1744560770,166251269,2019206348,675536010,2033139586,1664460932,867947356,415015563,-1949352336,1934943806,1097729844,-215743455,1152939329,-1230477738,-1062002250,-1646094734,-745966900,-1113255229,-1045012556,1898513641,815662513,-1209695412,-1474435823,-759507396,-872643116,-108293793,-572780926,2022587303,-26207250,2045611257,-31016004,-1067849877,-1746594747,-1595407948,445118195,-2022755727,
-467239754,-2142137154,1647650691,-492521712,1924021825,-451120621,1007593429,1585867336,566249380,167652736,-997230851,-820510928,1987537237,-77322129,262455164,274897663,1452723459,253350837,1993954181,311086899,415511719,172713492,1598988379,933809783,-464840682,-1782212473,-2022230711,1837947820,1746531791,-206384375,1552574670,1930803788,-195613728,-254531863,2100839943,404263737,2076054570,-1257047081,1122290846,947256648,-357075167,1653644953,-1558596525,479604551,1668133562,472305059,-1332310297,
-931671832,-198191009,257794323,1840067446,1332484586,-1686394935,836568977,1059869891,124574933,-1157811146,759298928,-1853108948,1750828,-2054155681,926532184,349063367,737772888,-1935143471,2055341648,-5740653,1123272834,1403698003,427644913,2084653420,53827208,-556580955,-622974526,-718538160,777066131,10642179,-1473927485,42961280,733402084,-1298075695,-330803213,716645118,991501217,1804621255,295909446,699884413,-502219415,-303184296,-983523053,-1926299132,-1270671729,1764727330,-985542033,
1070783554,-449455124,950733955,1144604746,-213809266,2113881892,289964390,667808448,-205094838,1829894736,-237492343,1714574299,452117068,687998055,-344931971,473450841,-240555773,921904454,-1947709052,716848713,-923746189,1655336916,-1361111575,1374401370,1351735416,-503841965,-210662912,28550606,-1013775971,-1627755881,-1956449285,-1231132106,-1798511564,1839607845,1333480181,828920720,-550535857,-79200818,-2072427763,-92182117,-1007537560,-531634013,597078630,1019601208,427553351,1358839937,1295606149,
1253698240,1321359326,1827036120,-96297979,1961035071,-1449129387,1906218152,-1852074724,830126831,259976739,-480649884,562280542,-849465299,1526639975,1025967841,1384043246,2123956991,-206097982,373358100,-1299736234,-287411656,1139982495,780957194,982178842,1868585192,-342016983,-201343E3,1529621679,-1608908150,-1201917255,1653588554,-236943630,160438843,-1639974092,-1312483576,-359232666,1179000579,-1991728832,-168800292,-195944685,1440643255,-1784478805,1294228634,231058942],[346310866,-760785108,
-255773812,462402975,-1991838300,240492811,382342214,-535902431,-1506588573,227308918,-1235754389,1744325636,1494196796,-81336513,-1254187923,1131677180,618125740,-1255254505,-1029117223,1746489860,-400793256,-1790807970,447773130,897514369,1839734262,1931953313,2039336191,250787664,-2025426637,1326940614,-929563768,1936457968,750315571,807450175,1324985591,1730186793,574834892,446538401,-461826422,-1804212375,1272844656,-1597838884,609411969,-918395893,-1091983950,2034242906,-687308265,588920300,
1900791685,-1750628192,1141924258,2075806930,1916119262,-1924883801,-1793833298,-744070970,1751868198,-1068060208,-551272117,1934334331,-2122147844,420717243,-1740382679,635830970,-1464421974,-611800772,-1879975247,899221619,235128823,1385409654,76799203,816779713,-926092397,1649034526,1731428310,-1566667886,-544352885,848104315,2068987801,-1501879997,-971648040,597634660,1011756967,-816256336,509827742,2105236561,-2073381484,535587639,1442863916,-259688764,1154162298,-1329147873,1242116280,-674309101,
-2129691236,-1590254342,-1776959195,-185688384,149638103,30587288,283319883,-2086106302,1382586556,713320120,159643440,2087908061,1707758771,1408264143,-798412373,1313073328,-980735637,426682037,-1786021936,-1598979960,149656261,-1074946190,562266820,1071849995,203272844,928777036,-1746950025,-738917907,-1864172749,-1027921778,808351611,115564112,451258030,1391532245,974074225,1052258170,1500394287,7472814,-2133625261,864640902,-1996258910,-1513661669,1086557597,835755723,869467621,-663168492,1650292399,
-1193685367,-1423305959,-1082638598,604520037,-355064967,-317184772,789017940,-775204512,-449424947,685481445,1875371481,949742154,-1563315671,828175252,-1712992024,-2125014394,-94286895,139800385,-1914750551,-1591004111,1727600768,-70726198,157276910,983607038,1854715835,587547850,71192417,1202500605,313054625,1332967648,2096005486,1915131330,-91820094,-544224602,-292927581,-1335047682,-336867977,-625557152,2072714926,2079774434,769210250,-859846950,-38963052,-1473111984,-1396332027,-559123088,245192377,
1430587735,807115516,-1797967089,-605290717,-1832360828,735521680,-119714850,-2041009803,-225999952,-52361340,1532219385,-1753338216,1482882949,-729913722,526862483,1344697426,-1879713815,1420857364,178749626,348151218,1024138671,73407581,201150095,258443307,-1880539428,922289345,-1726210854,-569095356,-1212013925,593943551,1877108094,-1369467026,756404946,1671239417,-1038910312,1028722355,-1464597671,1588106857,-1194587045,-1745622080,408802864,-307788967,-1238595610,1953339802,-175053189,323314842,
-1729050542,488025824,846074955,-1859913371,1139433929,-909139537,-400097536,1669572363,348222980,713310757,181818277,-1736954573,-1728472916,-1450741757,-2092843115,-1230542315,-184772168,-1280578355,-1536881661,1341851270,-1756297125,-915020579]]);function En(){this.Dv=!1;this.Hg={};this.Ig={};this.Ad=null;this.bD=this.Rs=this.ia=this.Bd=!1;this.rD=[];this.xy=!1}
function Fn(b){var c=new En;c.cf=b.adCookieValue;c.Gk=b.adToken;c.WE=b.cmAdParams;c.nE=b.authToken;c.s=b.listenerState;c.rb=b.alertCode;c.La=b.username;c.t=b.listenerId;c.Rb=b.hasExplicitContentFilterEnabled;c.Bv=b.allowExplicitContentManagement;c.zq=b.hasExplicitPINSet;c.dg=b.webAuthToken;c.Z=b.webName;c.sl=b.fullName;c.ff=b.autoRenew;c.w=b.billingFrequency;c.Lr=b.paymentMethod;c.yc=b.subscriptionDaysLeft;c.dt=b.subscriptionHasExpired;c.Ao=b.accountMessageKey;c.Xl=b.isGiftee;c.uf=b.gender;c.KQ=b.zipcode;
c.sg=b.birthYear;c.ih=b.isProfilePrivate;c.op=b.disallowProfileNotes;c.kl=b.emailOptIn;c.rr=b.notifyOnNote;c.qr=b.notifyOnFollow;c.S2=b.proxyHostname;c.T2=b.proxyPort;c.kK=b.homepageUrl;c.er=b.monthlyListeningCapHours;c.bE=b.antidote;c.Zk=b.complimentarySponsor;c.jK=b.highQualityTrialAudio;c.cz=b.pingAndo;c.Vj=b.timeoutCredits;c.Va=b.isUserAUNZ;c.iL=b.monthlyPrice;c.be=b.annualPrice;c.Uk=b.businessMonthlyPrice;c.Tk=b.businessAnnualPrice;c.q2=b.isBusinessEligible;c.LP=b.isSuspectedBusinessMoreLikely;
c.d3=b.isSuspectedBusinessLessLikely;c.Tb=b.canSubscribeToBusiness;c.lA=b.timeoutDialogBusinessOfferFreqImpressions;c.kO=b.sessionStartDialogFrequencyDays;c.TC=b.hasReceipts;c.Zy=b.paymentBackedTrialDuration;c.eh=b.inPaymentBackedTrial;c.jj=b.isMultiDayPassSubscriber;c.qh=b.offerPaymentBackedTrial;c.iN=b.payToPlayPrice;c.Rj=b.subscriptionName;c.lw=b.currentSubscriptionName;c.FK=b.allowPromotedStations;c.wQ=b.promotedStationsRecommendedFallback;c.Ih=b.svnTimeoutReward;c.Tj=b.svnTimeoutCredit;c.hn=
b.valueExchangeContext;c.jn=b.valueExchangeRewards;c.Wl=b.isEligibleForProgrammaticAds;c.bD=b.isThumbprintRadioAvailable||!1;c.rD=b.reasonsThumbprintRadioUnavailable||[];c.xy=b.logTimeToMusicEnabled;Gn(c,b);c.Zm=b.tsck;c.$m=b.tscs;c.vi=b.customSkin;var d=b.twShareUserTokens;fe(d)?(d=d.split("|"),c.Sd=d[0],c.Lh=d[1]):(c.Sd=null,c.Lh=null);c.b3=b.subscriberVendor;c.Qj=b.subscriberVendorDisplayName;c.GP=b.subscriberVendorHidePrice;c.XE=b.collectTrackLifetimeStats;c.Mr=b.paypalDisabled;c.eL=b.mdid;c.jh=
b.isStreamLimited;c.OD=b.adPodEligible;c.xq=b.useChronos?b.useChronos:!1;c.zg=b.dailySkipLimit;c.$s=b.stationSkipLimit;c.te=b.offerAnnualSub;c.JA=parseFloat(b.volumeNormalizationMultiplier)||1;c.Hv=b.artistAnalyticsHomeURL;c.CK=b.isAdvertiser;c.kt=b.timeToStartAudioAds;c.it=b.timeBetweenAudioAds;c.SF=b.enableArtistAudioMessages;c.rf=b.enableArtistPromoEmails;c.gB=b.isGPTSampleEnabled;c.UA=b.isAsyncGPTEnabled;c.ia=b.simpleUrlWebEnabled;c.Rs=b.simpleUrlWebStatsEnabled;c.oK=parseInt(b.inactivityTimeoutSubscribed,
10)||10800;c.ey=parseInt(b.inactivityTimeoutRegistered,10)||3600;c.nK=parseInt(b.inactivityTimeoutBusiness,10)||18E5;c.fy=420;c.vm=b.propAdsExperiments;c.QK=b.kruxToken;c.re=b.newWebPaymentApisEligible;c.cw=b.companyName;c.Jq=b.industry;return c}
function Gn(b,c){b.Mg=c.fbDisconnected;b.za=c.fbId;b.ic=c.fbName;b.ol=c.autoShareEnabled;b.Jg=c.autoShareFollows;b.Kg=c.autoShareLikes;b.Lg=c.autoShareTrackPlay;b.Mp=c.fbShowAutoShare;b.Nc=c.fbAccessToken;b.Mw=c.facebookSettingChecksum;b.Lw=c.fbReauthorize;b.Ad=null;b.Hg={};b.Ig={};b.Ng=null}function Hn(b,c){b.or=c.or;b.za=c.za;b.ic=c.ic;b.Hg=c.Hg;b.Ig=c.Ig;b.Ad=c.Ad;b.Ng=c.Ng}f=En.prototype;f.RG=function(){return this.s};function In(){return v.j.nE}f.Vl=function(){return this.SF};f.vf=function(){return this.Gk};
function Jn(b){b.zq=!0}f.p=function(){return this.s==m.u.nn()};f.Oa=function(){return this.s==m.u.rn()||this.s==m.u.Bc()||this.s==m.u.fg()||this.s==m.u.gg()&&this.eh};f.I=function(){return this.s==m.u.fg()};function Kn(b){return b.s==m.u.hu()||b.s==m.u.fu()}function Ln(b){var c=!0;if(b.s==m.u.Bc()||b.RG==m.u.fg()){if(30<b.yc||b.ff&&b.rb!=m.pa.Hn())c=!1}else Mn(b)?c=!1:b.eh&&(c=!1);return c}function Nn(b){return!(b.s==m.u.nn()||b.s==m.u.ou()||b.s==m.u.dB()||b.s==m.u.gg()&&!b.eh)}
function On(b){if(b.jh){var c=Pn(A._data.streamNagTimeout);return!isNaN(c)&&c<b.fy?1E3*c:1E3*b.fy}c=Pn(A._data.timeout);!isNaN(c)&&c<b.ey||(c=b.oK,b.G()?c=b.ey:b.I()&&(c=b.nK));return 1E3*c}f.tb=function(){return this.KQ};function Qn(b){var c="";0<b.uf.length&&(b=b.uf.charAt(0),"M"==b||"F"==b)&&(c=b);return c}function Rn(b,c){c!=b.Mg&&(b.Bd=!0);b.Mg=c}f.LG=function(){return this.za};
function Sn(b,c){null!=c&&c!=b.za&&(b.Bd=!0);b.za=c;null==c&&(b.Bd=!1,b.ic=null,b.Ad=null,b.Hg={},b.Ig={},b.Mg=!0,b.Nc=null,b.Ng=null)}function Tn(b,c,d){c!=b.Nc&&(b.Bd=!0);b.Nc=c;b.bG=d?d+"":null}function Un(b,c){b.Ng=c;c.publish_actions&&(b.Ng.publish_stream=1)}function Vn(b,c){c!=b.ic&&(b.Bd=!0);b.ic=c}function Wn(b){return b.ic}
function Xn(b,c){null==c&&(c=[]);for(var d={},e=[],h=[],l=0;l<c.length;l++){var p=c[l];d[p.name]=p.id;e.push(p.name)}e.sort();p={};for(l=0;l<e.length;l++){var q=e[l],u=d[q];p[u+"f"]=q;h.push(u)}b.Hg=p;b.Ad=h}f.Up=function(b){var c=this.Hg[b+"f"];null==c&&(c=this.Ig[b+"f"]);return c};function Yn(b){return b.Va}function Zn(b){return b.iL.toString()}f.Sx=function(){return this.TC};f.ny=function(){return("V1"===this.Rj||"ANNUAL48"===this.Rj)&&!("V1"===this.lw||"ANNUAL48"===this.lw)};
function $n(b){return b.G()||null!=b.Zk&&0<b.Zk.length&&!b.jK||!0==jm(Xl)?"aacplus":"mp3-hifi"}function ao(b){return bo(b)&&b.rb==m.pa.VA()}f.Ta=function(){return this.w};f.G=function(){return this.s!=m.u.Bc()&&this.s!=m.u.fg()&&this.s!=m.u.rn()&&this.s!=m.u.xu()&&!(this.s==m.u.gg()||this.s==m.u.vu())};function co(b,c,d){if(!b.Oa()){var e;rl?(e=jm(Fl),null==e&&(e={}),e=e[c],e=null==e||isNaN(Number(e))?0:Number(e)):e=0;e+=d;var h=jm(Fl);null==h&&(h={});h[c]=e;om(Fl,h);c=zm();om(Hl,c+d);eo(b)}}
function eo(b){!b.p()||fo(b)||b.Dv||(b.Dv=!0,z.b(kh))}function fo(b){if(b.Oa())return!0;b=600;var c=Pn(A._data.playtime);isNaN(c)||(b=Math.min(b,c));return xm()<b}function Mn(b){return b.s==m.u.xu()||b.s==m.u.vu()}function go(b){return b.XE}function bo(b){return b.s==m.u.un()||b.s==m.u.hu()&&b.dt}f.me=function(){return!0===this.OD};function ho(){var b=v.j;return b.JA?b.JA:1}f.Rq=function(){return this.ia};f.Df=function(){return this.UA};function io(b,c){this.Ye=b;this.Fc=c}function jo(b){var c=new io;c.Ye=b.attr("data-like-type");c.Fc=b.attr("data-like-objectid");c.Ue=b.attr("data-like-id");return c}function ko(b){var c=new io;c.Ue=b.id;c.k2=b.listenerId;c.Ye=b.likeType;c.Fc=b.objectId;c.m2=b.stationName;c.l2=b.stationImgUrl;c.j2=b.contextType;c.h2=b.contextId;c.i2=b.contextName;return c}io.prototype.xf=function(){return this.Ye};function lo(b){this.ab=b.gain;this.lf=b.clickthrough_web?b.clickthrough_web:b.clickthrough;this.lc=b.impression;this.tracker=b.tracker;this.Vm=b.tile_tracker_urls;this.mf=b.companion;this.Yk=b.companion_web?b.companion_web:b.banner_html;this.hL=b.minutesToNext;this.nw=b.delayedInStationAd?"true"==(b.delayedInStationAd+"").toLowerCase():!1;this.ib=b.type;this.Vf=!0;this.sm=mo(b.adToken);this.Yb="0";this.Nb=b.image;this.Yd=-1;this.hb=this.Da="audioad";this.Qh="";this.yo="AudioAd";this.PD=b.adRequestMetaData;
this.WC=b.isInStationAd;this.Th=b.lineId;this.pd=b.creativeId}td(lo,yn);lo.prototype.IK=function(){return this.WC};lo.prototype.Yl=function(){return this.Vf};function no(b,c){wn.call(this,b,c);this.qC=b.artistMessageButtonText;this.rC=b.artistMessageButtonUrl;this.od=b.artistMessageId;this.Qe=b.artistUid;this.Xu=!1;this.ZC=b.artistMessageIsOnDemand;this.sC=b.artistMessageDeepLink;this.aD=b.artistMessageIsSharable}td(no,wn);no.prototype.Ef=function(){return this.ZC};function oo(b,c){wn.call(this,b,c);this.Un=this.Wn=this.mo=null}td(oo,wn);function po(b,c,d,e){this.g=b;this.Ub=c;this.description=d;this.context=e}po.prototype.v=function(){return this.g};po.prototype.o=function(){return this.Ub};po.prototype.yl=function(){return this.description};po.prototype.getContext=function(){return this.context};function A(){}function qo(){return!(ge(ro())&&ge(so())&&isNaN(Pn(A._data.tip))&&$.isEmptyObject(to()))}var uo=!1;
function vo(){if(!uo){uo=!0;var b=ro();if(b&&0<b.length){var c=wo(),d=xo();z.b(Ei,{stationCode:b,stationName:A._data.sn,source:A._data.site||"",artistMessageArtistUid:""==c?null:c,artistMessageId:""==d?null:d})}(b=so())&&0<b.length&&(b="/search/"+escape(b),(c=yo())&&0<c.length&&(b+="/"+escape(c)),$.address.value(b));b=Pn(A._data.tip);isNaN(b)||z.b(Hi,b);b=to();_.each(b,function(b,c){z.b(eg,[c,b])})}}function Pn(b){return null!=b&&0<b.length?parseInt(b,10):NaN}
function zo(b,c){b=Pn(b);return isNaN(b)||!b||b>c?c:b}function to(){var b={};_.each(A._data,function(c,d){0==d.indexOf("ext_")&&(b[d]=c)});return b}function ro(){var b=A._data.sc;return"sh"!=b?b:null}function so(){return A._data.search}function yo(){var b=A._data.searchfilter;return null!=b?(b=b.toLowerCase(),"track"==b?"song":b):null}function Ao(){return A._data.tc||""}function Bo(){return A._data.accountBirthYear}
function Co(){return"175"==A._data.dc||0==A._data.autoplay||null!=ro()&&0<ro().length}function cn(){return"http://"+A._data.host+("80"!=A._data.port?":"+A._data.port:"")+"/"}function an(){var b=A._data.shost,c=A._data.sport;return null==b||null==c||A._data.nossl?cn():"https://"+b+":"+c+"/"}function Do(){return A._data.facebookShareAppId}function Eo(){var b=A._data.facebookTrackShareBaseUrl;return b?b:an()}function Fo(){return A._data.createStationHintPath}
function Go(){var b="true"==A._data.tdlFullLyrics;setTimeout(function(){A._data.tdlFullLyrics=null},2500);return b}function Ho(){var b="true"==A._data.tdlFullTraits;setTimeout(function(){A._data.tdlFullTraits=null},2500);return b}function Io(){return!0==A._data.paypalShowOrderConfirmScreen}function Jo(){var b=A._data.companionAd;-1!=document.location.search.indexOf("onlyFirstForced")&&(A._data.companionAd=null);return b}function Ko(){return A._data.audioAd}function Lo(){return A._data.videoAd}
function Mo(){return null==A._data.maxAdInitiatedRefreshDelaySeconds?60:A._data.maxAdInitiatedRefreshDelaySeconds}function No(){return A._data.adTestMode}function hn(){return!0===A._data.lsiCookieDisabled||"true"===A._data.lsiCookieDisabled}function Oo(){return zo(A._data.timeToStartAudioAds,420)}function Po(){return zo(A._data.timeBetweenAudioAds,900)}function Qo(){try{return ie(A._data.canDisplayLyrics)}catch(b){return!0}}function Ro(){return ge(A._data.countryCode)?"US":A._data.countryCode}
function So(){return"US"===Ro()}function To(){return ge(A._data.postalCodeValidationRegex)?"^d{5}$":A._data.postalCodeValidationRegex}function Uo(){return ge(A._data.postalCodeValidationErrorMessage)?"You must have a valid 5 digit U.S. zip code.":A._data.postalCodeValidationErrorMessage}function Vo(){return A._data.rt}function xo(){var b=A._data.am;return b&&2==b.split(":").length?b.split(":")[1]:""}function wo(){var b=A._data.am;return b&&2==b.split(":").length?b.split(":")[0]:""}
function Wo(b){return A._data[b]}window.TunerVars=A;var Xo=!1,Yo=!1;function Zo(b){z.b(eg,b)}window.Pandora_onExternalEvent=Zo;window.Pandora.sendTunerCommand=function(b,c,d){Zo([b,c,d])};function $o(){if(Xo&&Yo){var b=Pandora.getSecretary();if(null!=b&&Pandora.eiWorking)b.onTunerReady();else k.error("ExternalEventService: could not communicate with secretary (onTunerReady)")}}
function ap(b,c,d){var e=Pandora.getSecretary();null!=e&&Pandora.eiWorking?e.sendToLocalConnection(b,c,d):k.error("ExternalEventService: could not communicate with secretary ("+b+":"+c+")")}Pandora.waitForSecretary(function(b){b?(Xo=!0,$o()):k.warn("ExternalEventService: can't communicate with secretary")});z.c(xe,function(){Yo=!0;$o()});$(window).bind("unload",function(){var b=Pandora.getSecretary();null!=b&&null!=b.shutdown&&b.shutdown()});function bp(b,c,d){this.position=b;this.size=c;this.Cm=d}var cp=/^pod:(\d+)\/(\d+)\/(\d+)$/;function mo(b){var c=null;if(b=cp.exec(b))if(c=new bp(Number(b[1]),Number(b[2]),Number(b[3])),c.position>c.size||1>c.position)c=null;return c}bp.prototype.vf=function(){return"pod:"+this.position+"/"+this.size+"/"+this.Cm};bp.prototype.toString=function(){return"[AdPodLocation: "+this.vf()+"]"};var dp={},dp={SLOT_SIZE_AUTOPLAY_VIDEO:"442x188",SLOT_SIZE_USER_INITIATED_VIDEO:"2000x7",AUDIO_AD_SIZE:"2000x12",AUDIO_IN_STATION_AD_SIZE:"2000x14",PRELOAD_SECONDS:10,PRELOAD_PERCENTAGE:97};var B={};
(function(b){function c(b){k.debug("AdUrlBuilder : "+b)}function d(b,c){return null!=b&&b!=B.L&&(b==B.Xd||b==q||b==u||b==y||b==l||b==p||b==E||b==L||b==B.En||b==M||b==ka)&&null!=c&&c!==B.L}function e(b,c,d,e){var h=B.L;if(null!=b)for(var l in b){var p=b[l];if(B.Sq(l,p))if(c&&(l=encodeURIComponent(l)),p=p.toString(),e&&-1<p.indexOf(B.Vd))for(var q=p.split(B.Vd),u=0;u<q.length;u++)null!=q[u]&&q[u]!==B.L&&(p=q[u],h+=d+l+Q+p);else h+=d+l+Q+p}return h}function h(b,c,d){var e={};b=b.split(B.Mi());for(var h=
0;h<b.length;h++){var l=b[h].split(Q);if(1<l.length){var p=l[0],l=l[1];c&&(p=decodeURIComponent(p),l=decodeURIComponent(l));if(d(p,l)){var q=e[p];q?(_.isArray(q)||(e[p]=[q]),e[p].push(l)):e[p]=l}}}return e}var l="mdid",p="ppid",q="sz",u="ord",y="c",E="ref",L="dc_ref",M="ss_req",Q="=",ka="iu";B.L="";B.eu="pand";B.Xd="tile";B.En="ip";B.GB="msa";B.hg="d_imp";B.Vd=",";B.In=";";B.ik="http://";B.init=function(b){B.ia=!1;B.qw=b};B.Rq=function(){return B.ia};B.lQ=function(b){b&&(B.ia=b.Rq())};B.Mi=function(){return B.ia?
"&":B.In};B.Ki=function(){return B.ia?"adx":"pfadx"};B.cx=function(){return B.ia?"adx":"adj"};B.OG=function(){return B.ia?"adx":"adi"};B.yG=function(b){var c=B.L,c=c=B.L;B.ia?(c=/^.+?iu=(\/\d+\/.+?\/.+?)&.*/,c=c.exec(b),c=c[1]):(c=/^.+?click\.net\/.+?(\/.+?\/.+?);.*/,c=c.exec(b),c="/"+B.qw+c[1]);return c};B.Sq=function(b,c){return null!=b&&b!=B.L&&b!=B.Xd&&b!=q&&b!=u&&b!=y&&b!=l&&b!=p&&b!=E&&b!=L&&b!=B.En&&b!=M&&b!=ka&&"t"!=b&&b!=B.hg&&null!=c&&c!==B.L};B.ky=function(b,c){var d=c;if(B.ia){var e=B.Mi();
0==b.indexOf(e)&&(b=b.substring(1));for(d+=e+"t"+Q+encodeURIComponent(b);-1<d.indexOf("%2C");)d=d.replace("%2C",B.Vd)}else d+=b;return d};B.aG=function(b){var c=!1;B.ia?(c=/&t=(.*?)&/.exec(b),b=decodeURIComponent(c[1]),c=!0):b=b.replace(/^.+?click\.net\/.+?(\/.+?\/.+?);/,B.L);return h(b,c,B.Sq)};B.$F=function(b){b=b.replace(B.ia?/^.+?click\.net\/.+?\/.+?\/\?/:/^.+?click\.net\/.+?\/.+?\/.+?;/,B.L);return h(b,!1,d)};B.AE=function(b){b=b.split(B.ia?"|":B.Vd);for(var c=[],d=0;d<b.length;d++){var e=b[d].split("x");
c.push([parseInt(e[0],10),parseInt(e[1],10)])}return c};B.bx=function(b,c){var d=B.ik,d=B.ia?d+String.fromCharCode(112)+"ubads.g.doublec"+String.fromCharCode(108)+"ick.net/gampad/":d+String.fromCharCode(97)+"d.doublec"+String.fromCharCode(108)+"ick.net/",d=d+b;return d=B.ia?d+("?"+ka+Q+"/"+B.qw+"/"+c):d+("/"+c)};B.vc=function(b,c){var d=B.Mi(),e=b.split(d),h;for(h in c)for(var l=0;l<e.length;l++)0==e[l].indexOf(h+Q)&&(e[l]=h+Q+c[h]);return e.join(d)};B.mx=function(){return B.ia?p:l};B.Nv=function(b,
d,h,l,p,M,ka,xb,kb){var Jg=C.wv,yb=B.Mi();null==l&&(l={});l.sz=M;kb=B.Xw(l,B.ia,yb,Jg,kb,!B.ia);null!=p&&(kb+=e(p,B.ia,yb,!B.ia));p=C.WG();p=p+"."+C.hH();p+="/";p+=C.oH();p+=".";p+=d;p+=h;b=B.bx(b,p);c("Base Ad URL : "+b);b=B.ky(kb,b);c("Base Ad URL with Targeting Parameters : "+b);b+=yb+(B.ia?E:L)+Q+B.eu;d=B.mx();null!=l[d]&&l[d]!=B.L&&(b+=yb+d+Q+l[d]);B.ia&&null!=l[B.hg]&&!0===l[B.hg]&&(b+=yb+B.hg+Q+"1");xb&&null!=l[B.Xd]&&l[B.Xd]!=B.L&&(b+=yb+B.Xd+Q+l[B.Xd]);l=b;xb=yb+q+Q;if(B.ia)for(;-1<M.indexOf(B.Vd);)M=
M.replace(B.Vd,"|");b=l+(xb+M)+(yb+(B.ia?y:u)+Q+ka);c("Final Ad URL : "+b);return b};B.Xw=function(b,c,d,h,l,p){var q=B.L;if(null!=b){if(h)for(h=h.split(B.In),l=0;l<h.length;l++){var u=h[l].split(Q);if(1<u.length){q=u[0];u=c?encodeURIComponent(u[1]):u[1];if(q in b)var y=b[q],y=null!=y&&void 0!=y&&y!==B.L?y+B.Vd+u:u;else y=u;b[q]=y}}else b.d1=l;q=e(b,c,d,p)}return q};b.AdUrlBuilder=B;b.AdUrlBuilder_getBaseAdUrl=B.bx;b.AdUrlBuilder_getAdUnit=B.yG;b.AdUrlBuilder_isTargetingKeyValue=B.Sq;b.AdUrlBuilder_getUrlSeparator=
B.Mi;b.AdUrlBuilder_isSimpleUrlEnabled=B.Rq;b.AdUrlBuilder_getJsCreativeRequestType=B.cx;b.AdUrlBuilder_getIFrameCreativeRequestType=B.OG;b.AdUrlBuilder_insertUrlTargetingParameters=B.ky;b.AdUrlBuilder_extractUrlTargetingParameters=B.aG;b.AdUrlBuilder_extractUrlNonTargetingParameters=B.$F;b.AdUrlBuilder_buildSlotSizesArray=B.AE})(this);var C={};
(function(b){function c(b,c,d,e,h,l){k.debug("Chronos enabled - Ad response");k.debug("Chronos Response - "+JSON.stringify(l));l=l.adList;if(void 0==l||null==l)k.debug("Chronos Web Ad is null or empty"),fp("Ad was blocked",c,"Chronos Web Ad is null or empty",d),b(null);else if(0===l.length)k.debug("Chronos says it's not time for an ad."),b(null);else{k.debug("Chronos says it's time to play "+l.length+" ads");var p=!1,q=[];_.each(l,function(b){k.debug("Chronos - commence parsing of Ad response");var h=
b.success;if(h&&"false"!==h)if(h=b.adType,"AUDIO_AD"===h||"VIDEO_AD"===h){p="AUDIO_AD"===h;var h={},l=b.content,u=b.adType;"AUDIO_AD"===u&&(h=C.qj(l,d,c));k.debug("Chronos - commence parsing of ad: "+u);void 0!=b[sa]&&(h[sa]=b[sa]);h.adRequestMetaData=b.adRequestMetaData;k.debug("Chronos adRequestMetaData - "+b.adRequestMetaData);k.debug("Chronos adToken - "+b[sa]);h.isInStationAd=e;b={parsedContent:h,content:l,response:b};k.debug("Chronos Got Ad - pushing onto array ",b);q.push(b)}else k.info("Unknown adType...ignoring: "+
h);else k.info("Success is false, don't process current ad")});0===q.length?b(null):"VIDEO"===h&&p?(k.info("Audio Ad was received but the callback does not know how to handle it. Handing it off to AudioAdManager directly for inclusion into queue."),z.b(Mk,{ads:q,callback:_.bind(b,null,q)})):b(q)}}function d(b,c,d,h,l,p,q,u,y,E){if(b=e(b,c,d,l,p,q,u,y,E))c=null!=Ko()||"true"==No()||"true"==A._data.audioAdTestMode,d=null!=Lo()||"true"==No()||"true"==A._data.videoAdTestMode,_.extend(b,{chronosOptions:h,
testMode:c&&d?"all":c?"audio":d?"video":""}),z.b(Hk,b)}function e(b,c,d,e,h,l,p,q,u){h={subzone:c,options:d,slotSize:e,adToken:h,stationId:l,successCallback:p,errorCallback:q};if(u){b=u.split(Gb,2);if(2!=b.length)return q({message:"audioAd tunerVar form is: ?audioAd=AdId:CreativeId"}),null;h[xb]="/util/dartCreative.jsp?ad="+b[0]+"&c="+b[1];h.secondsUntilAd=ra}else d[B.mx()]=C.pA,h[xb]=y(b,c,d,e,!0);return h}function h(b){b&&(p(b.cf),C.p=b.p(),C.Gk=b.vf(),C.wv=b.WE,C.pA=b.eL,C.me=b.me(),C.hn=b.hn||
B.L,C.Wl=b.Wl,C.Df=b.Df(),C.vm=b.vm,B.lQ(b))}function l(b){k.debug("AdService : "+b)}function p(b){var c=new Date;c.setTime(c.getTime()+2592E6);c="v3ad="+b+"; "+("expires="+c.toGMTString()+"; ");c+="path=/; ";null!=document.domain&&document.domain.match(/pandora.com$/)&&(c+="domain=.pandora.com;");document.cookie=c;b=b.split(Gb);C.rw=String(b[0])==Oa;C.Io=b[1];C.ox=b[2];C.zip=b[3];C.xi=b[4];C.by=b[5];C.dw=b[6];C.Iy=String(b[7])==Oa;C.Kw=b[8];C.vw=b[9];14<=b.length&&(C.Ey=b[10],C.state=b[11],C.county=
b[12],C.Dw=b[13]);17<=b.length&&(C.pv=b[14],C.ay=b[15],C.Ux=b[16]);18<=b.length&&(C.zw=b[17]);19<=b.length&&(C.dy=b[18])}function q(b,c){if(b.B()){var d={};if(c)for(var e=0;e<c.length;e++){var h=c[e];d[h.e()]=h}e=b.he()||[];for(h=0;h<e.length;h++){var l=d[e[h]];if(l){if(l.vl())break;if(L(l)||q(l,c))return!0}}}return!1}function u(b){if(null!=b)for(var c=0;c<b.length;c++){var d=b[c].Sg();if("toddler"==d)return 1;if("kids"==d)return 2;if("tween"==d)return 3}return-1}function y(b,c,d,e,h){if(C.Ko&&"comedy"==
C.Jt)return null;var l=C.tl(),p=C.Jt;C.me&&h&&(p=fa+p,l=Wb);return B.Nv(b,c,p,d,null,e,l,!0,E().toString())}function E(){var b=C.Io,c=0;if("number"===typeof b)c=b;else try{c=parseInt(b,10)}catch(d){c=0}return 13<=c&&18>c?1:18<=c&&21>c?2:21<=c&&25>c?3:25<=c&&30>c?4:30<=c&&35>c?5:35<=c&&40>c?6:40<=c&&45>c?7:45<=c&&50>c?8:50<=c&&55>c?9:55<=c&&60>c?10:60<=c&&65>c?11:65<=c&&80>c?12:0}function L(b){if(b=b.wf())for(var c=0;c<b.length;c++)if("comedy"==b[c].toLowerCase())return!0;return!1}function M(b){var c=
{};b.each(function(){var b=$(this).find("> name")[0];if(b){var b=$(b).text(),d=$(this).find("value string");1==d.length?c[b]=$(d[0]).text():1<d.length&&(c[b]=d.map(function(){return $.trim($(this).text())}))}});return c}function Q(b,c,d){var e=b.indexOf("?>");-1<e&&(b=b.substr(e+3));e=b.replace(/<\!\[CDATA\[|\]\]>/g,B.L);e=M($("member",e));e&&0!=_.size(e)||(l("selector XML parse error"),e=ka(b,c,d));return e}function ka(b,c,d){for(var e={},h=$.trim(b.replace(/<\!\[CDATA\[|\]\]>/g,B.L)),p="type audio creative_token gain company_name image dimmed tracker companion impression clickthrough minutesToNext gain movie uif aspectRatio logoimage richmedia_companion followon_companion banner_image banner_html delayedInStationAd tile_tracker_urls".split(" "),
q=["clickthrough","tracking","tracker"],h=$.trim($(h).text()).split(/\s+/),u=0,y=h.length;u<y;u++){var E=h[u],L=h[u+1];if(_.contains(p,L)||Ka(q,L))e[E]=B.L;else if("tile_tracker_urls"==E){var M=$($.trim(L).split(B.ik)).filter(function(b){return!!b});if(1<M.length)e[E]=$.map(M,function(b){return B.ik+b}),u++;else{e[E]=[L];for(u+=2;u<y&&0==h[u].indexOf(B.ik);)e[E].push(h[u++]);u-=1}}else e[E]=L,u++}e&&0!=_.size(e)||(l("brute force XML parse error"),fp(b,d,"AdService : XML parse failed",c));return e}
function Ka(b,c){for(var d=!1,e=0;e<b.length;e++){if(d)return;d=c&&0==c.indexOf(b[e])}return d}var ra="0",Oa="1",sa="adToken",Gb=":",fa="__POD__",Wb="__CACHEBUST__",xb="adUrl";C.Oh="REQUESTFAILED";C.init=function(b,c){C.rw=!0;C.Ck=b;C.zk=c;C.Io=ra;C.ox=ra;C.zip=B.L;C.xi=B.L;C.by=ra;C.dw=ra;C.exp=ra;C.Kw=ra;C.Yw=null;C.Iy=!1;C.Ko=!1;C.Jt=B.L;C.vw=ra;C.aN=A._data.organization||B.eu;C.Ss=A._data.pub||"default";C.LQ=A._data.zone||"prod";C.p=!1;C.Ey=ra;C.state="CA";C.county=ra;C.Dw=ra;C.pv=ra;C.ay=ra;
C.Ux=ra;C.zw=ra;C.dy=ra;C.pA=B.L;C.hn=B.L;C.me=!1;C.Wl=!1;C.Df=!1;C.vm="";B.init(A._data.dfpNetworkCode||"4204");var d=$.cookie("v3ad");d&&p(d);null!=document.cookie&&document.cookie.match(/v2pub=(\w+)/)&&(C.Ss=RegExp.$1);z.c(Ae,h);z.c(Be,h)};C.pO=function(){C.exp="1"};C.wf=function(){return C.Yw};C.G2=function(){return C.p};C.H2=function(){return C.Df};C.WG=function(){return C.aN};C.hH=function(){return C.Ss};C.oH=function(){return C.LQ};C.tl=function(){return(new Date).getTime()+B.L+Math.floor(1E6*
Math.random())};C.Ge=function(c){if(!C.rw)return null;null==c&&(c={});var d;C.Gk?d=C.Gk:(d=C.tl(),14<d.length&&(d=d.substring(0,14)));c.l=d;c.ag=C.Io;c.gnd=C.ox;c.zip=C.zip;c.hours=C.by;c[B.Xd]=c[B.Xd]||1;c.comped=C.dw;c.exp=C.exp;c.fb=C.Kw;c.dma=C.vw;c.clean=C.Iy||C.Ko?Oa:ra;c[B.GB]=C.Ey;c.st=C.state;c.co=C.county;c.et=C.Dw;c.pin=!_.isUndefined(b.external)&&_.isFunction(external.msIsSiteMode)&&external.msIsSiteMode()?Oa:ra;c.aa=C.pv;c.hisp=C.ay;c.hhi=C.Ux;c.dse=C.zw;c.iat=C.dy;c.abx=C.vm;c.vxc=C.hn;
c.prg=C.Wl?Oa:ra;c.async=C.Df?Oa:ra;C.xi=C.xi.replace(/^\W*/,B.L).replace(/\W*$/,B.L);if(0<C.xi.length){d=C.xi.split(B.Vd);for(var e=0;e<d.length;e++){var h=d[e];h==B.En&&(h="ios");c[h]="1"}}return c};C.Yf=function(c,d,e){null==c&&(c={});c.fam=u(e);if(null!=d){e=L(d)?!0:q(d,e);c.station=d.Ga();d.Ga()&&(c.stationId=d.e());var h=d.ra();c.artist=null==h?B.L:h.musicId;if(C.p)c.gcat="none";else if(!c.gcat){var l=d.Al();c.gcat=l?l:"none"}h=d.Sg();C.Yw=h;c.genre=h?h:l;C.Ko=d.vl();C.Jt=e?"comedy":B.L;c=qn(d)?
qn(d).key:B.L;b.gStationSeed=c;b.gStationArtistId=qn(d)&&"artist"==qn(d).type?c:null;c=B.L;qn(d)&&(qn(d).artistName?c=qn(d).artistName:qn(d).stationName&&(c=qn(d).stationName));b.gStationArtistName=c;b.gStationSongName=qn(d)&&qn(d).songName?qn(d).songName:B.L;c=B.L;qn(d)&&(qn(d).artistDetailUrl?c=qn(d).artistDetailUrl:qn(d).songDetailUrl&&(c=qn(d).songDetailUrl));b.gStationSeedUrl=c;b.gGenreSponsorship=d.Al()}};C.wa=function(b){if(!b)return!1;var c=b.Ga(),d=!!b.Na(),e=!!b.mc();return!b.X()&&fe(c)||
d||e};C.QG=function(b){var c=D.lx(),d={};C.Yf(d,b,c);d=C.Ge(d);return B.Xw(d,!1,B.In,C.wv,E().toString(),!1)};C.Iz=function(b,c,d){C.Su=y(B.cx(),b,c,d,!1)};C.Hi=function(){return C.Su};C.Oz=function(b){C.ID=b};C.nH=function(){return C.ID};C.us=function(b){C.EC=b};C.$w=function(){var b=C.EC;C.us(null);return b};C.oO=function(b){C.Ru=b};C.zG=function(){var b=C.Ru;C.Ru=null;return b};C.SN=function(b,c,d,h,p,q){(b=e(b,F.Yh,c,F.Se,d,h,p,function(b){l("AudioAd fetch failed: "+b.message);q(C.Oh)},F.Wu))&&
z.b(Gk,b)};C.cs=function(b,c,d,e,h,l){z.b(Ik,{creativeId:b,secondsPlayed:c,adLength:d,isHouseAd:e,successCallback:h,errorCallback:l})};C.Qf=function(b,c,d,e,h,p,q){var u=y(b,c,d,e,h);null!=u&&(l("Fetch Ad Url (requestAd) : "+u),gp(u,function(b){p(b,u)},function(b){fp(b.name+" : "+e,e,"proxy get failure",c);q(b)}))};C.RN=function(b,c,d,e,h,p){var q=B.Nv(B.Ki(),b,"",c,d,e,C.tl(),!1,E().toString());null!=q&&(l("Fetch Ad Url (requestAdForZone) : "+q),gp(q,function(b){h(b,q)},function(c){fp(q,e,c.name,
b);p(c)}))};C.Pw=function(b,c,d,e){b="/sponsorship/?feature=p1TrialSponsor&sponsor="+b;c&&(b+="&st=true");gp(b,function(b){b=C.qj(b,"p1trial","sponsorship");d(b)},e)};C.Wa=function(b,c,d){var e=C.Ck.U(),h=-1;e&&(h=e.k.e());z.b(Jk,{adData:b,stationId:h,onImpressionSuccess:c,onImpressionFailure:d})};C.qj=function(b,c,d){var e={};b&&(b=$.trim(b));if(null==b||0==b.length)return l("Ad content is null or empty - Ad blocked?"),fp($.trim(b),d,"Ad content is null or empty - Ad blocked?",c),e;e=null;try{e=
$.parseXML(b)}catch(h){return Q(b,c,d)}return 0<$(e).find("parsererror").length?(k.debug("AdService : ","Failed to parse",b),Q(b,c,d)):e=M($(e).find("member"))};C.sO=function(){var b=B.vc(C.Hi(),{tile:2,sz:"2000x24"});C.Su=b};C.Dz=function(b){var e=b.currentStationData,h=b.options,l=b[sa],p=b.callback,q=b.forcedAudioAd,u=b.lastDisplayAdTime,y=b.requestType,E=b.subZone,L=b.currentSize,M=b.isInStationAd,Q=b.currentStationTrack,ka=b.currentStationTrackType,fa=b.isUserInitiated;b=b.handlerType;var ra=
Cd(),Ka=0,Oa=0;Q&&((e=Lm(Q.o(),e.e()))&&(Ka=e),Q.ie()&&(Oa=Q.ie()));e=Oa-Ka;0>e&&(e=dp.PRELOAD_SECONDS);u={secondsUntilAd:fa?0:e,secondsPlayed:null==Ka?0:Ka,currentStationId:Q?Q.v().e():B.L,trackToken:Q&&Q.bb()?Q.bb():B.L,trackType:ka?ka:B.L,userInitTrackEnd:fa,secondsSinceDisplayAd:ra-u};k.debug("chronos elapsed time - "+Ka);k.debug("chronos total track length - "+Oa);k.debug("chronos secondsUntilAd - "+e);k.debug("chronos - trackType - "+ka);k.debug("chronos - trackToken - "+u.trackToken);(Q=C.Ck.U())?
(ka=B.L,(fa=C.Ck.r)&&(ka=fa.v().k.e()),Q=Q.k,ka=Q.B()?ka:Q.e(),M=_.bind(c,null,p,L,E,M,b),d(y,E,h,u,L,l,ka,M,function(b){k.debug("GetAdList fetch failed: "+b.message);p(C.Oh)},q)):(k.error("Missing next station data! Skipping call to Chronos service."),p(C.Oh))};C.ya=function(){var b=C.Ck.U(),c=C.zk.j&&C.zk.j.xq&&!0!=b.Cb()&&!0!=b.Na()&&!0!=b.Pb();k.debug("Can use chronos - "+c+" \n isChronosEnabled: "+(C.zk.j&&C.zk.j.xq)+" \n isPromotedStation: "+b.Cb()+" \n isOnDemandStation: "+b.Na()+" \n isAdvertiserStation: "+
b.mc()+" \n isRecommendedStation: "+b.Pb());return c};var kb={};kb.getGenre=C.wf;b.Patron=kb;b.AdService=C;b.AdService_getDisplayAdUrl=C.Hi;b.AdService_getVxDisplayAdUrl=C.nH;b.AdService_getAndClearDisplayAdContent=C.$w;b.AdService_getAndClearDisplayAdCompanionUrls=C.zG;b.AdService_generateCorrelationId=C.tl})(this);function fp(b,c,d,e){if(null!=b)try{var h={};512<b.length&&(b=b.replace(/\s/g,""),b=b.substr(0,512));h.adUrl=b+" : "+le();h.adType=c;h.reason=d;h.client=e;hp(h)}catch(l){k.warn("Exception in BrokenAdManager",l),trackJs.track(l)}}
function ip(b,c,d,e,h,l,p){if(null!=b)try{var q={},u=b,y=b.indexOf(";u=");0<y&&(u=b.substr(0,y));512<u.length&&(u=u.replace(/\s/g,""),u=u.substr(0,512));q.adUrl=u+" : "+le();q.adType=c;q.reason=d;q.client="radio";q.requestUrl=e;q.creativeId=h;q.lineId=l;q.browserInfo=p;q.hiveRecord=null!=e?"1":"0";hp(q)}catch(E){k.warn("Exception in BrokenAdManager recordWebBrokenAd",E),trackJs.track(E)}}
function hp(b){k.debug("brokenAdManager :/radio/services/brokenAd.jsp",b);$.ajax({cache:!1,type:"POST",data:b,error:jp,success:kp,timeout:1E4,url:"/radio/services/brokenAd.jsp"})}function jp(b,c){k.warn("BrokenAdManager.error: "+c)}function kp(b,c){"success"!=c&&k.warn("BrokenAdManager: unexpected status: "+c)};function lp(b,c,d){d=new flensed.flXHR({instancePooling:!0,noCacheHeader:!1,xmlResponseText:!1,onerror:d,onreadystatechange:function(b){if(4==b.readyState)try{c(b.responseText)}catch(d){trackJs.track(d),k.debug("FlashProxy : Error in handler",d)}}});d.setRequestHeader=mp;d.open("GET",b);d.send()}function mp(b,c){k.debug("FlashProxy defeating header "+b+" with value "+c)};function gp(b,c,d){lp(b,c,d)}function np(b,c,d){try{k.debug("CrossDomainProxy :  fallback image pingUrl called : "+b);var e=new Image(1,1);e.onload=function(){e.onerror=e.onload=null;c&&c()};e.onerror=function(){e.onerror=e.onload=null;d&&d(null)};e.src=b}catch(h){trackJs.track(h),fp(b,"impression","fallback image ping failed","ads")}};var op={},pp=!1,qp=0,rp=!1,t=100,pe="1880";setInterval(function(){qp=0},1E3);setInterval(function(){rp=!1},6E4);var sp={};$(window).bind("beforeunload",function(){tp(null)});function ke(b,c){up();s("script_error",b,c);null!==b.msg&&""!==b.msg&&trackJs.track(Error(b.msg))}var vp=null;function en(){fn("page_failed");$.cookie("errorCookieInfo","start")}
function dn(){"start"==$.cookie("errorCookieInfo")&&(he(5)?(z.c(Og,function(){$.cookie("errorCookieInfo",null)}),vp=""+(new Date).getTime()+"."+(1E3*Math.random()|0),$.cookie("errorCookieInfo","log")):$.cookie("errorCookieInfo",null));fn("start")}function fn(b){"log"==$.cookie("errorCookieInfo")&&s("cant_load_site",{ua:le(),flash_ver:me(),checkpoint:b,site_version:window._pandoraVersion,ticket:vp})}
function s(b,c,d){var e=wp()+"/v2";sp[e]||(sp[e]=setTimeout(function(){tp(e)},A._data.statsInterval));try{if(null!=b&&""!=b){var h={type:b};null!=c&&$.each(c,function(b,c){null!==b&&""!==b&&null!==c&&""!==c&&(h[b]=c)});d&&d.t&&(h.listener_id=d.t);xp(e,h)}}catch(l){trackJs.track(l),k.error("StatsCollectorUtil.logEvent error: "+l)}}function yp(b,c){try{c&&c.t&&0==c.t%10&&s("promo_box",b,c)}catch(d){trackJs.track(d),k.error("StatsCollectorUtil.logEvent error listenerId % 10 failed: "+d)}}
function zp(b){try{null!=b&&0!=b.length&&$.each(b,function(b,c){s(c,null,null)})}catch(c){trackJs.track(c),k.error("StatsCollectorUtil.logMultipleEvents error: "+c)}}
function xp(b,c){try{if(pp&&(!rp||"script_error"!=c.type)){var d;a:{for(var e=sd(),h=Ap(b),l=h.length-1;0<=l;l--){var p=h[l].url,q=h[l].data,u=h[l]&&h[l].time&&300>e-h[l].time?!0:!1;if(!u&&!h[l].pending)h.splice(l,1);else if(null!=p&&p==b&&null!=q&&_.isEqual(q,c)&&u){d=!0;break a}}var y=A._data.statsHost;d=c&&c.url&&y&&-1<c.url.indexOf(y)?!0:!1}if(d)k.debug("duplicate request, skipping: "+b,c);else{var E=Ap(b);E.push({time:sd(),data:c,pending:!0});E.length>=A._data.statsBatchSize&&(k.debug("Triggered with "+
E.length+" events."),tp(b))}}}catch(L){trackJs.track(L),k.warn("Error sending stats collector log: "+L)}}function wp(){var b=A._data.statsHost,c=A._data.statsPort;pp=b?!0:!1;return"http://"+b+(null!=c?":"+c:"")}function Bp(b,c){var d="type"+b.count;b.count=++b.count;_.each(c,function(c,h){var l=d;"type"!==h&&(l+="."+h);b.data[l]=c})}
function tp(b){_.each(op,function(c,d){if(!b||d===b){sp[d]&&(clearTimeout(sp[d]),sp[d]=null);var e=sd();if(0>=c.length)k.debug("No events in '"+d+"' queue.");else{k.debug("Flushing '"+d+"' queue "+(e-c[0].time)+"ms after 1st event added to queue");for(var h,l;;){l=[];h={data:{},count:0};for(var p=0;p<c.length&&h.count<A._data.statsBatchSize;p++)c[p]&&c[p].time&&300>e-c[p].time||l.unshift(p),c[p].pending&&(c[p].pending=!1,Bp(h,c[p].data));for(p=0;p<l.length;p++)c[l[p]].pending||c.splice(p,1);if(0===
h.count)break;k.debug("Sending "+h.count+" events to "+d,h);$.ajax({cache:!1,type:"GET",data:h.data,dataType:"jsonp",crossDomain:!0,error:Cp,success:Dp,url:d})}}}})}function Ap(b){op[b]||(op[b]=[]);return op[b]}function Cp(b,c){k.warn("StatsCollectorUtil.jsonpError: "+c);up()}function up(){!rp&&50<++qp&&(k.info("StatsCollector failing too much... stopping logging for a minute."),rp=!0)}
function Dp(b,c){k.debug("StatsCollectorUtil.jsonpSuccess: success");"success"!=c&&k.warn("StatsCollectorUtil.jsonpSuccess: unexpected status: "+c)};var bn;function Ep(b){this.xk=b.offerName;this.Th=b.lineId;this.pd=b.creativeId;this.zo=b.truexInstanceId}Ep.prototype.Vg=function(){return null};Ep.prototype.Fm=function(){return!1};Ep.prototype.Uz=function(){return!1};function Fp(b){Ep.call(this,b);this.xk=b.offerName;this.Th=b.lineId;this.pd=b.creativeId;this.tD=parseInt(b.secondsRemaining,10);this.uD=parseInt(b.secondsTotalDuration,10);this.GC=b.displayTextByBrand;this.FC=b.displayText;this.wC=b.brandName;this.hD=b.offerButtonLabel;this.iD=b.offerButtonUrl;this.Tu=b.displayTextEndRewardLine1;this.Uu=b.displayTextEndRewardLine2;this.fD=b.leadInBannerUrl;this.eD=b.leadInAudioUrl}td(Fp,Ep);
function Gp(b){var c="";b.Tu&&(c+=b.Tu);b.Uu&&(c&&(c+=" "),c+=b.Uu);return c}Fp.prototype.Vg=function(){return this.fD};Fp.prototype.Fm=function(){return!0};Fp.prototype.Uz=function(){return!0};function Hp(b){return Ip(["account/sign-in","account/register","account/help","account/welcome","password_reset"],b)||"/"==b?b:!1}function Jp(b){var c="account/info account/privacy account/notices account/upgrade account/audioQuality account/desktopApp /payment".split(" ");return"/one"===b||Ip(c,b)?b:!1}function Ip(b,c){return b.some(function(b){return 0<=c.indexOf(b)})};function Kp(b,c,d,e,h){this.url=b;this.method=c;this.bp=e;this.QD=d;this.timeout=12E4;this.Ez=!0;this.wg=this.vQ=!1;this.YN=r(this,this.XN);this.bO=h}var Lp=null,Mp=0,Np=0,Op=null,Pp=null;
Kp.prototype.apply=function(b){var c=this.url;if(!this.vQ){var d=Lp+"P",c=c+(0<=c.indexOf("?")?"&":"?"),c=c+("rid="+d.substr(6));null!=Op&&0>c.indexOf("lid=")&&(c+=0<=c.indexOf("?")?"&":"?",c+="lid="+Op);d=this.method.substr(this.method.indexOf(".")+1);c+="&method="+d;this.wg&&0>c.indexOf("commerce=true")&&(c+=0<=c.indexOf("?")?"&":"?",c+="commerce=true");if(this.QD)for(d=1;d<b.length;d++)c=c+"&arg"+d+"="+escape(b[d]);1024<c.length&&(c=c.substr(0,1024))}if(this.Ez){d=this.method;0!=d.indexOf("misc.")&&
(b=[Mp+(Cd()-Np)].concat(b));var e=[];e.push('<?xml version="1.0"?><methodCall><methodName>');e.push(d);e.push("</methodName><params>");for(d=0;d<b.length;d++)e.push("<param>"),Qp(b[d],e),e.push("</param>");e.push("</params></methodCall>");b=e.join("");b=Pp.encrypt(b)}else b="";this.bp.send(c,b,this.timeout,this.YN)};Kp.prototype.XN=function(b){var c=b;b instanceof vd&&(c=Rp(b.body));this.bO(c)};Kp.prototype.setTimeout=function(b){this.timeout=b};
function Qp(b,c){c.push("<value>");if(rd(b))if(b.constructor==Array){c.push("<array><data>");for(var d=0;d<b.length;d++)Qp(b[d],c);c.push("</data></array>")}else{c.push("<struct>");for(d in b)null!=b[d]&&(c.push("<member>"),c.push("<name>"),c.push(d),c.push("</name>"),Qp(b[d],c),c.push("</member>"));c.push("</struct>")}else qd(b)?(c.push("<int>"),c.push(b),c.push("</int>")):"boolean"==typeof b?(c.push("<boolean>"),c.push(b?"1":"0"),c.push("</boolean>")):pd(b)?(c.push("<string>"),pd(b)&&c.push(b.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split("'").join("&apos;").split('"').join("&quot;")),
c.push("</string>")):k.error("unknown type: value: "+b+", current output: "+c.join(""));c.push("</value>")}
function Rp(b){if("methodResponse"!=b.nodeName)return Sp("invalid top node: "+b.nodeName);var c=b.firstChild;if(null==c)return Sp("no child in methodResponse");if("fault"==c.nodeName){b=Tp(c.firstChild);if(null==b)return Sp("invalid fault data");c=b.faultString.split("|");return 4!=c.length?new Bd(b.faultString,b.faultCode):new Bd(c[3],c[2])}if("params"==c.nodeName){b=[];for(var d=0;d<c.childNodes.length;d++){var e=c.childNodes[d];if(3!=e.nodeType){if("param"!=e.nodeName)return Sp("not a param node");
e=Tp(e.firstChild);if(null==e)return Sp("invalid item");b.push(e)}}return new wd(b)}return Sp("invalid response data: "+c.nodeName)}function Sp(b){k.error("XmlRpc parse error: "+b);return new Bd(b,0)}
function Tp(b){if("value"!=b.nodeName)return k.error("not a value node");if(0==b.childNodes.length)return"";var c=b.firstChild;if(3==c.nodeType)return b.normalize&&(b.normalize(),c=b.firstChild),c.nodeValue;if("struct"==c.nodeName){for(var d={},e=0;e<c.childNodes.length;e++){var h=c.childNodes[e];if(3!=h.nodeType){if("member"!=h.nodeName)return k.error("not a member node");for(var h=h.childNodes,l,p=0;p<h.length;p++){var q=h[p];if(3!=q.nodeType)if("name"==q.nodeName)l=h[p].firstChild.nodeValue;else if("value"==
q.nodeName){if(b=Tp(h[p]),null==b)return null}else return k.error("unknown node: "+h[p].nodeName)}d[l]=b}}return d}if("array"==c.nodeName){b=c.firstChild;if("data"!=b.nodeName)return k.error("not a data node");d=[];for(e=0;e<b.childNodes.length;e++)if(3!=b.childNodes[e].nodeType){c=Tp(b.childNodes[e]);if(null==c)return null;d.push(c)}return d}return"int"==c.nodeName||"i4"==c.nodeName?Number(c.firstChild.nodeValue):"boolean"==c.nodeName?"1"==c.firstChild.nodeValue?!0:!1:"string"==c.nodeName?0==c.childNodes.length?
"":c.firstChild.nodeValue:k.error("unknown node: "+c.nodeName)};var G=Cn.nm(),H=911312399,I="Ed",J=[11,42,27,20,25,41,40,4,10,24,22,44,58,38,29,53,26,32,36,13,46,56,18,15,45,47,-1,3,21,8,23,48,6,14,30,2,54,57,50,19,51,33,7,12,39,9,28,35,31,37,59,16,0,17,34,52,1,49,5,55,43],K="LT",Up=[30,58,14,25,20,45,27,33,0,32,43,6,41,26,40,8,17,9,50,3,38,19,46,49,12,10,54,48,59,36,52,55,18,37,15,7,47,-1,44,51,39,53,16,1,5,34,28,57,29,21,56,22,2,11,42,4,35,24,23,31,13],N="CP",Vp=[30,34,47,2,32,45,0,12,46,21,39,-1,6,49,4,8,36,52,15,20,9,56,50,18,23,40,33,3,29,19,51,53,11,22,
1,58,5,41,57,17,44,54,35,13,7,48,55,28,27,10,25,16,31,42,38,59,14,43,37,26,24],O=236273669,Wp=[40,46,56,34,27,42,4,59,12,13,35,18,7,11,54,24,32,44,-1,47,39,15,9,48,57,28,52,41,19,45,22,6,1,30,38,37,5,3,21,29,10,49,8,25,51,0,20,17,16,58,26,2,36,53,43,55,14,33,23,31,50],Xp=[20,11,5,3,45,47,38,13,41,26,28,23,46,43,31,44,22,53,57,56,32,34,30,4,49,37,54,24,9,1,25,29,0,27,-1,58,10,14,50,15,21,19,17,59,35,2,8,6,42,39,40,52,18,33,48,12,55,36,7,16,51];function Yp(){this.Rf=!1}f=Yp.prototype;f.send=function(b,c,d,e){z.b(Xf,b);this.Rf&&k.error("request pending");this.Rf=!0;this.Ra=e;this.rF=b;this.mF=c;-1!=b.indexOf("/jsonp")?$.ajax({cache:!1,contentType:"text/plain",type:"GET",data:{req:c},dataType:"jsonp",processData:!0,crossDomain:!0,error:r(this,this.oy),success:r(this,this.PK),timeout:d,url:b}):$.ajax({cache:!1,contentType:"text/xml",type:"POST",data:c,dataType:"xml",processData:!1,error:r(this,this.jm),success:r(this,this.Sy),timeout:d,url:b})};
f.oy=function(b,c){k.warn("jsonpError: ",c);this.Cg(new zd(c))};f.PK=function(b,c){if("success"==c){var d=$.parseXML(b.rpcResult);this.Sy(d)}else k.warn("jsonp unexpected status: "+c),this.oy(0,c)};f.Cg=function(b){this.Rf=!1;this.Ra(b)};f.Sy=function(b){this.Cg(new vd(b.lastChild))};f.jm=function(b,c,d){k.info("HTTP error",c,d);"timeout"==d?this.Cg(new Ad("load failed",this.rF,this.mF)):this.Cg(new zd("load failed"))};function Zp(b){this.sd=null==b?[]:b;this.sd.constructor!=Array&&k.error("call method must have an Array for its args parameter")}Zp.prototype.Sp=function(){return this.sd};function P(b){this.sd=null==b?[]:b;this.sd.constructor!=Array&&k.error("call method must have an Array for its args parameter")}P.prototype.Sp=function(){for(var b=[],c=0;c<this.sd.length;c++)b.push(this.sd[c]);v.j&&In()?b.unshift(In()):je("User not logged in while in AuthorizedRequestArguments. Args="+this.sd.join(","));return b};
function $p(b,c,d,e,h,l){this.method=b;this.sd=c;this.gA=d;this.Jw=e;this.context=h;this.KK=l;this.Pv=0;this.oi=!1}$p.prototype.getContext=function(){return this.context};$p.prototype.cancel=function(){this.oi=!0};var v={ku:"radio/xmlrpc/v35",ju:"radio/jsonp/v35",VENDOR:"html5tuner",nd:"HTML5",pi:"",iu:{misc:"message logTunerDiagnostics logRadioEventMessage sync getCookies setCookie".split(" "),listener:"isUsernameUnique getUsername getArtistBookmarks getSongBookmarks emailPassword addTrackingCode getListenerResult addTiredSong setExplicitContentFilter setExplicitPIN verifyExplicitPIN emailExplicitPINRescue getProfileInfo getExtendedProfileInfo setProfileInfoExtended getProfileInfoWithStations getCountNewFeedPosts publishSongShare publishArtistMessageShare publishStationShare getSVNAds checkSVNAdComplete exerciseTimeoutCredit clearVendorBilledTrialExpiredAlertCode clearVendorBilledSubscriberTimedOutAlertCode acknowledgeSubscriptionExpiration getShowCpa canListen setAwareOfProfile setPrivacySettings setFacebookShareUserTokens setTwitterShareUserTokens like unlike getLikeInfo getFollowInfo search banListener unbanListener deleteListener accountMessageDismissed deleteCreditCard getAvailableFeatures setP1CustomSkin proxyAdRequest getAdList registerImpression registerVideoAdImpression trackPlay getArtistRepInfo startValueExchange insertArtistMessageMetric flagArtistMessage setUserArtistMessageSettings passwordHelp".split(" "),
music:"search searchCancelled shareSong shareArtistMessage getSeedSuggestions getRelatedSongInfoForFacebookShare searchTextForArtists getSearchRecommendations".split(" "),playlist:["getFirstFragment","narrative","getFragment"],station:"createStation createStationHexedCode createPromotedStation createMixStation addSeed deleteSeed deleteSeedByMusicId addThumbUp addFeedback deleteFeedback transformShared getStations setStationName removeStation dismissPromotedStation getStation getQuickMix setQuickMix shareStation setStationNameAndDescription getCustomContentStation getPromotedStations forcePromotedStation setStationSettings verifyHybridStationChecksum trackSkip".split(" "),
friends:"getServices activity find findByAddress add invite findFans hideFeedItem hideActivityItem hideAllFeedItems reportFeedSpam follow unfollow".split(" "),facebook:["getFriends","addFacebookFriends","disconnect","setAutoSharePreferences"]},WB:{vendor:["getVendor"],listener:"createListener register activateAccount changeAccount resetPassword validateResetToken purchaseSubscription updateBillingInformation updateBusinessInformation migrateToBusiness setBillingInformation setBillingInfoPaypal startPaypalPayment completePaypalPayment getPaypalCheckoutDetails getReceipts authenticateListener logout getCreditCard unsubscribe setPrivacySettings startComplimentaryTrial redeemGiftCode createP1Gift loadGift emailGift startCCBackedTrial startPaypalBackedTrial completePaypalBackedTrial redeemCCBackedGift startRedeemPaypalBackedGift completeRedeemPaypalBackedGift".split(" "),
station:["setStationSettings"],facebook:["getSigPlus","getFacebookInfo","connectListener"]},init:function(){v.bp=new Yp;v.f={};v.Ja=[];v.Rf=!1;v.Bz=Rd(Dn());null==Pp&&(Pp=Rd(Cn.nm()),delete Cn.nm);null==Lp&&(Lp=Dd());v.j=null;v.LF=r(v,v.Cg);v.Qq()?v.Ho(v.iu,v.gx(),!0,!0):v.Ho(v.iu,v.gH(),!0,!0);v.Ho(v.WB,v.gx(),!1,!0);v.f.listener.purchaseSubscription.setTimeout(18E4);v.f.listener.updateBillingInformation.setTimeout(18E4);v.f.listener.setBillingInformation.setTimeout(18E4);v.f.listener.startCCBackedTrial.setTimeout(18E4);
v.f.listener.redeemCCBackedGift.setTimeout(18E4);v.f.listener.purchaseSubscription.wg=!0;v.f.listener.updateBillingInformation.wg=!0;v.f.listener.setBillingInformation.wg=!0;v.f.listener.startCCBackedTrial.wg=!0;v.f.listener.redeemCCBackedGift.wg=!0;v.f.station.getStations.setTimeout(3E5);v.f.listener.getSVNAds.setTimeout(5E3);v.f.listener.getAdList.setTimeout(8E3);v.pi=aq},Qq:function(){return"https:"==window.location.protocol},xl:function(){return cn()},ex:function(){var b=A._data.shost,c=A._data.sport;
return null==b||null==c||A._data.nossl?v.xl():"https://"+b+":"+c+"/"},gH:function(){return v.Qq()?v.xl()+v.ju:v.xl()+v.ku},gx:function(){return v.Qq()?v.ex()+v.ku:v.ex()+v.ju},Ho:function(b,c,d,e){for(var h in b)for(var l=b[h],p=0;p<l.length;p++){null==v.f[h]&&(v.f[h]={});var q=l[p];v.f[h][q]=new Kp(c,h+"."+q,d,v.bp,v.LF);e||(v.f[h][q].Ez=!1)}},h:function(b,c,d,e,h){b=v.Xr(b,c,d,e,h,!1,!1);v.Pp();return b},Xr:function(b,c,d,e,h,l,p){k.debug("RPC dispatching request",b.method);null==b&&k.error("dispatchRequest called with null rpc");
var q=c.Sp();if(null!=q)for(var u=0;u<q.length;u++)null==q[u]?k.error("dispatchRequest called with null, method: "+b.method+" - argument at position: "+u):"object"==typeof q[u]&&q[u].constructor!=Array&&(k.error("dispatchRequest called with non Array object, method: "+b.method+" - argument at position: "+u),k.error("maybe you forgot to use '.getValue()'?"));b=new $p(b,c,d,e,h,p);l?v.Ja.unshift(b):v.Ja.push(b);return b},JE:function(){for(var b=0;b<v.Ja.length;b++)v.Ja[b].cancel()},Pp:function(){if(!v.Rf&&
0!=v.Ja.length){var b=v.Ja[0];b.Pv++;b.oi?(v.Ja.shift(),v.Pp()):(v.Rf=!0,b.method.apply(b.sd.Sp()))}},Cg:function(b){var c=!1;try{z.b(Yf,"rpc response");if(b instanceof Bd)switch(b.code){case m.d.QB():v.Ja.shift();z.b(Dh);return;case m.d.cu():v.Ja.shift();z.b(Lh);return;case m.d.OB():v.Ja.shift();z.b(Mg);return;case m.d.BB():v.Ja.shift();return;case m.d.hB():v.Ja.shift();z.b($g);return;case m.d.JB():v.Ja.shift();z.b(ah);return;case 12:window.location=v.xl()+"restricted";return}c=!0;if(v.Ja[0].KK)if(k.debug("received a response to a re-auth"),
v.Ja.shift(),b instanceof xd){k.debug("got an error performing a re-auth");var d=v.Ja.shift();d.oi||v.Cp(d,b);c=!1}else{k.debug("re-auth response is valid, new authtoken value: "+n(b));var e=Fn(n(b));b=!1;wm()&&(v.j=e,b=!0);v.Ca(e);b&&v.Sm(null,null)}else if(b instanceof Bd&&b.code==m.d.SA()&&null!=v.j){k.debug("got an authorization error: "+b.code+", "+(v.j&&In()?In():""));var h=v.Ja[0];if(3>h.Pv)if(k.debug("putting a re-auth event onto the queue"),wm())v.Xr(v.f.listener.getListenerResult,new Zp([jm(ul),
v.VENDOR,v.nd]),null,r(this,function(b){b instanceof xd&&k.error("got error from authenticateAnonymous: "+b.code)}),{},!0,!0);else{var l=jm(Bl),p=jm(Cl)||"";hn()&&se("lsc");var q=new Zp([v.pi,l,p,v.VENDOR,"","",v.nd,!1,um()]);v.Xr(v.f.listener.authenticateListener,q,null,null,{La:l,P2:p},!0,!0)}else k.debug("failed to run the request after 3 attempts"),v.Ja.shift(),h.oi||v.Cp(h,b)}else h=v.Ja.shift(),b instanceof Bd&&m.d.Zt(),h.oi||v.Cp(h,b)}finally{v.Rf=!1,c&&v.Pp()}},Cp:function(b,c){c instanceof
yd?null!=b.Jw&&b.Jw.call(v,c,b.getContext()):null!=b.gA&&b.gA.call(v,c,b.getContext())},Xc:function(){return null!=v.j},aK:function(){return null!=jm(ul)},Ul:function(){vm(null)},Mq:function(){om(Bl,null);pm(Cl)},Sm:function(b,c){b=null!=b?b.toLowerCase():null;null!=b&&v.j.La!=b?k.error("Returned username does not match sent username: "+v.j.La+" != "+b):v.j.p()?vm(In()):(om(Bl,b),null!=c&&om(Dl,c),pm(Cl),!0!==jm(yl)&&om(yl,!0),v.Ul(),$.cookie("v2lo",null),$.cookie("lua",b))},Ca:function(b){var c=
v.j;v.j=b;Op=null!=b?b.t:null;Vm(null!=b?b.t:null);v.cO(b);null!=c&&null!=b&&c.t==b.t?(Hn(b,c),z.b(Be,b)):(z.b(Ae,b),null!=b&&(eo(b),v.BG(function(b){z.b(Pg,b)})))},cO:function(b){k.info("Saving at cookie",b);b=null==b?"":escape(b.dg);var c=new Date;c.setTime(c.getTime()+2592E6);b="at="+b+"; path=/; "+("expires="+c.toGMTString()+"; ");null!=document.domain&&(document.domain.match(/pandora.com$/)?b+="domain=.pandora.com;":document.domain.match(/savagebeast.com$/)&&(b+="domain=.savagebeast.com;"));
document.cookie=b},dh:function(){return!0===jm(yl)&&(!v.j||v.j.p())}};v.MP=function(b,c){v.h(v.f.misc.sync,new Zp([v.pi]),function(d){var e=v.YP(n(d));null==e?c(new xd("Invalid sync value from server: "+n(d))):b(e)},c,{})};v.YP=function(b){b=Ud(v.Bz,b);for(var c=0;4>c;c++)b.shift();b=Wd(Vd(b));b=Number(b);return isNaN(b)?null:b};v.oE=function(b,c){v.h(v.f.listener.getListenerResult,new Zp([b,v.VENDOR,v.nd]),v.Ny,c,{})};v.hw=function(b){var c=A._data.af,c=new Zp([v.pi,v.VENDOR,"","",v.nd,!0,null!=c?c:""]);v.h(v.f.listener.createListener,c,v.Ny,b,{newUser:!0})};
v.Ny=function(b,c){z.b(Ng);var d=Fn(n(b));d.or=c.newUser;v.Ca(d);v.Sm(null,null)};v.HE=function(b,c,d){v.h(v.f.listener.canListen,new Zp([b,""]),function(b){c(n(b))},d,{})};v.td=function(b,c,d,e){null!=b&&null!=c||k.error("null arguments");hn()&&se("lsc");var h=new Zp([v.pi,b,c,v.VENDOR,"","",v.nd,!0,d]);return v.h(v.f.listener.authenticateListener,h,function(b,c){v.Kv(b,c);z.b(ig)},e,{username:b,password:c,keepLoggedIn:d})};
v.FN=function(b,c,d,e,h,l,p,q,u,y){v.h(v.f.listener.register,new P(p&&l?[b,c,d,e,h,l,p,q,v.VENDOR,"",v.nd,u]:[b,c,d,e,h,q,v.VENDOR,"",v.nd,u]),function(b,c){v.Kv(b,c);z.b(fg)},y,{username:b,password:c,keepLoggedIn:u})};v.Kv=function(b,c){z.b(Ng);var d=Fn(n(b));v.Ca(d);v.Sm(c.username,c.keepLoggedIn)};v.logout=function(b){return v.h(v.f.listener.logout,new P([]),b,b,{})};v.hN=function(b,c,d,e,h,l){e=new Zp([b,c,d,e]);v.h(v.f.listener.passwordHelp,e,h,l,{email:b,birthYear:c,zipCode:d})};
v.jH=function(b,c){v.h(v.f.station.getStations,new P([]),function(c){var e=[],h=(new Date).getTime(),l=0;$.each(n(c),function(){v.Oe(this,h-l++);var b=bq(this);e.push(b)});b(e)},c,{})};v.$G=function(b){var c=cq,d=dq;v.h(v.f.station.getPromotedStations,new P([b]),function(b){b=v.gv(n(b));c(b)},d,{})};v.vG=function(){var b=cq,c=dq;v.h(v.f.station.forcePromotedStation,new P([eq]),function(c){c=v.gv(n(c));b(c)},c,{})};
v.gv=function(b){var c=[],d=(new Date).getTime(),e=0;$.each(b,function(){v.Oe(this,d-e++);var b=bq(this);c.push(b)});return c};
v.Oe=function(b,c){c||(c=(new Date).getTime());b.chronologicalSequence=c;var d=b.initialSeed;null!=d&&(null!=d.song?b.originalSeed={type:"song",key:d.song.musicId,songName:d.song.songTitle,artistName:d.song.artistSummary,songDetailUrl:d.song.songDetailUrl,isComedy:d.song.isComedy}:null!=d.nonGenomeStation?b.originalSeed={type:"nonGenomeStation",stationId:d.nonGenomeStation.stationId,stationName:d.nonGenomeStation.stationName,seedNames:d.nonGenomeStation.seeds,key:d.nonGenomeStation.musicId,isComedy:d.nonGenomeStation.isComedy,
redirect:d.nonGenomeStation.isRedirect}:null!=d.artist&&(b.originalSeed={type:"artist",key:d.artist.musicId,artistName:d.artist.artistName,likelyMatch:d.artist.likelyMatch,isComposer:d.artist.isComposer,artistDetailUrl:d.artist.artistDetailUrl,isComedy:d.artist.isComedy}));1==b.isQuickMix&&(0==b.isCreator&&(b.transformType=m.Cc.Me()),b.stationName&&b.stationName.replace&&(b.stationName=b.stationName.replace("QuickMix","Shuffle")))};
v.yO=function(b,c,d,e,h){v.h(v.f.station.setStationNameAndDescription,new P([b,c,d]),function(b){e(n(b))},h,{})};v.Em=function(b,c,d,e){return v.h(v.f.station.setStationName,new P([b,c]),function(){d(b)},e,{})};v.wO=function(b,c,d,e,h,l,p){for(var q=[],u=0;u<c.length;u++)q.push(""+c[u]);v.h(v.f.station.setQuickMix,new P([b,q,"",d,e,h]),function(b){b=n(b);v.Oe(b);l(b)},p,{})};v.aH=function(b,c){v.h(v.f.station.getQuickMix,new P([]),function(c){c=n(c);v.Oe(c);b(c)},c,{})};
v.Gy=function(b,c,d){v.h(v.f.music.search,new P([b]),function(b){c(n(b))},d,{})};v.wN=function(b,c,d){var e=b.indexOf("@");-1<e&&(b=b.substring(0,e));v.h(v.f.listener.search,new P([b]),function(b){c(n(b))},d,{})};v.NG=function(b,c,d,e,h,l,p,q){ym(b.e());var u=String(zm()),y=String(Am()),E=$n(v.j);c=[b.e(),Ao(),E,u,y,e||"",h||"",A._data.testArtistMessage||"",c,d,l];d=v.f.playlist.getFragment;b.Vi()&&(c.push(b.Wp()),c.push(b.Xp()));return v.h(d,new P(c),function(b){p(n(b))},q,{})};
v.GG=function(b,c,d){ym(b.e());v.h(v.f.station.getCustomContentStation,new P([b.e()]),function(b){c(n(b))},d,{})};v.qi=function(b,c,d,e,h){var l=fq;d||(d="");c||(c="");b=c&&0<c.length||e&&0<e.length?new P([b,c,d,e]):new P([b,d]);v.h(v.f.station.createStation,b,function(b){b=n(b);v.Oe(b);h(b)},l,{})};v.iw=function(b,c,d){var e=null,h=gq,l=fq;e||(e="");b=new P([b,e]);v.h(v.f.station.createStationHexedCode,b,function(b){b=n(b);v.Oe(b);b.artistMessageArtistUid=c;b.artistMessageId=d;h(b)},l,{})};
v.iF=function(b,c,d,e,h){b=new P([b,c,d]);v.h(v.f.station.createPromotedStation,b,function(b){b=n(b);v.Oe(b);e(b)},h,{})};v.UD=function(b,c,d,e,h){v.h(v.f.station.addFeedback,new P([b,c,d,"",!0,!1,13]),e,h,{})};v.bi=function(b,c,d,e,h){return v.h(v.f.station.addFeedback,new P([b.yf(c),c.bb(),d]),function(){b.Zl(c)&&(c.n.Hc=d?1:-1);e(c)},h,{})};v.gl=function(b,c,d,e,h){return v.h(v.f.station.deleteFeedback,new P([b.yf(c),c.bb(),d]),function(){b.Zl(c)&&(c.n.Hc=0);e(c)},h,{})};
v.yv=function(b,c,d,e){v.h(v.f.station.addSeed,new P([b,c]),d,e,{})};v.VD=function(b,c,d){v.h(v.f.listener.addTiredSong,new P([b]),c,d,{})};v.hl=function(b,c,d){return v.h(v.f.station.removeStation,new P([b]),c,d,{})};v.KF=function(b,c,d,e,h){v.h(v.f.station.dismissPromotedStation,new P([b,c,d]),e,h,{})};v.RF=function(b,c,d){b=b.redirect?new Zp([b.username,b.redirect]):new Zp([b.username]);v.h(v.f.listener.emailPassword,b,c,d,{})};
v.J2=function(b,c){return v.h(v.f.listener.getSongBookmarks,new P([]),b,c,{})};v.E2=function(b,c){return v.h(v.f.listener.getArtistBookmarks,new P([]),b,c,{})};v.eH=function(b,c){v.h(v.f.music.getSearchRecommendations,new P([]),function(c){b(n(c))},c,{})};v.iQ=function(b,c,d){v.h(v.f.listener.changeAccount,new P([b.oldusername,b.oldpassword,b.newusername,b.newpassword,b.emailOptIn,b.gender,b.birthYear,b.zipCode]),function(d){c({ldata:n(d),newpass:b.newpassword})},d,{})};
v.oQ=function(b,c,d){var e=[b.isProfilePrivate,b.disallowComments,b.optOut,b.noNotifyOnNote,!1,b.noNotifyOnFollow];null!=b.artistPromoEmailsEnabled&&e.push(b.artistPromoEmailsEnabled);v.h(v.f.listener.setPrivacySettings,new P(e),function(b){c(n(b))},d,{})};v.IF=function(b,c){v.h(v.f.facebook.disconnect,new P([]),function(c){b(n(c))},c,{})};v.rO=function(b,c,d,e,h,l,p){v.h(v.f.facebook.setAutoSharePreferences,new P([b,c,d,e,h]),function(b){l(n(b))},p,{})};
v.kQ=function(b,c,d,e){v.h(v.f.listener.setExplicitContentFilter,new P([b]),function(){d(c)},e,{})};v.qO=function(b,c,d){v.h(v.f.listener.setExplicitPIN,new P([b.pin,b.rescueEmail]),c,d,{})};v.zQ=function(b,c,d){v.h(v.f.listener.verifyExplicitPIN,new P([b.pin]),function(b){c(n(b))},d,{})};v.xp=function(b,c){return v.h(v.f.listener.emailExplicitPINRescue,new P(null),function(c){b(c)},c,{})};v.iH=function(b,c,d,e){v.h(v.f.playlist.narrative,new P([b,c]),function(b){d(n(b))},e,{})};
v.fH=function(b,c,d,e){v.h(v.f.music.getSeedSuggestions,new P([b,c,10]),function(b){d(n(b))},e,{})};v.AN=function(b,c,d,e){v.h(v.f.listener.publishSongShare,new P([b,c]),function(b){d(n(b))},e,{})};v.zN=function(b,c,d,e,h){v.h(v.f.listener.publishArtistMessageShare,new P([b,c,d]),function(b){e(n(b))},h,{})};v.BN=function(b,c,d,e,h,l){null==d&&(d="");v.h(v.f.listener.publishStationShare,new P([""+b,c,d,e]),function(b){h(n(b))},l,{})};
v.YG=function(b,c,d){v.h(v.f.listener.getExtendedProfileInfo,new P([b]),function(b){c(n(b))},d,{})};v.vO=function(b,c,d,e,h,l,p,q,u){v.h(v.f.listener.setProfileInfoExtended,new P([b,c,d,e,h,l,p]),function(b){q(n(b))},u,{})};v.uO=function(b,c,d){v.h(v.f.listener.setP1CustomSkin,new P([b]),function(b){c(n(b))},d,{})};v.DG=function(b,c,d,e){v.h(v.f.listener.getCountNewFeedPosts,new P([b,c]),function(b){d(n(b))},e,{})};
v.ZG=function(b,c,d){v.h(v.f.listener.getProfileInfoWithStations,new P([b]),function(b){c(n(b))},d,{})};v.cH=function(b,c,d){v.h(v.f.music.getRelatedSongInfoForFacebookShare,new P([b,3]),function(b){c(n(b))},d,{})};v.BO=function(b,c,d,e){v.h(v.f.listener.setTwitterShareUserTokens,new P([b,c]),function(b){d(n(b))},e,{})};v.YK=function(b,c,d,e,h,l,p){v.h(v.f.listener.like,new P([b,c,d,e,h]),function(b){l(n(b))},p,{})};
v.gQ=function(b,c,d,e){v.h(v.f.listener.unlike,new P([b,c]),function(b){d(n(b))},e,{})};v.fQ=function(b,c,d){v.h(v.f.listener.unlike,new P([b]),function(b){c(n(b))},d,{})};v.MG=function(b,c,d){v.h(v.f.listener.getFollowInfo,new P([b]),function(b){c(n(b))},d,{})};v.Vp=function(b,c,d,e){if(v.Xc())return v.h(v.f.listener.getLikeInfo,new P([b,c]),function(b){d(n(b))},e,{})};
v.As=function(b,c,d,e,h,l,p){b=[b,c,d,e];_.isString(h)&&!_.isEmpty(h)&&b.push(h);return v.h(v.f.station.shareStation,new P(b),l,p,{})};v.zs=function(b,c,d,e,h){return v.h(v.f.music.shareSong,new P([b,d,c]),e,h,{})};v.JO=function(b,c,d,e,h,l){v.h(v.f.music.shareArtistMessage,new P([b,c,e,d]),h,l,{})};v.WD=function(b,c){v.h(v.f.listener.addTrackingCode,new P([b]),c,c,{})};v.yK=function(b,c,d,e){v.h(v.f.listener.insertArtistMessageMetric,new P([b,c,d,e,document.referrer]),null,null,{})};
v.pG=function(b,c,d,e){v.h(v.f.listener.flagArtistMessage,new P([c,b,d]),e,e,{})};v.EG=function(b,c){v.h(v.f.listener.getCreditCard,new P(null),function(c){b(n(c))},c,{})};v.vj=function(b,c,d,e,h,l,p,q,u,y,E,L,M,Q){return v.h(v.f.listener.purchaseSubscription,new P([b,c,d,e,h,l,p,q,u,y,E,L]),function(b){M(n(b))},Q,{})};v.Xj=function(b,c,d,e,h,l,p,q,u,y,E,L,M,Q){return v.h(v.f.listener.updateBillingInformation,new P(b?[c,d,e,h,l,p,q,u,y,E,L]:[c,y,L]),function(b){M(n(b))},Q,{})};
v.jQ=function(b,c,d,e){v.h(v.f.listener.updateBusinessInformation,new P([b,c]),function(b){d(n(b))},e,{})};v.gL=function(b,c,d,e){v.h(v.f.listener.migrateToBusiness,new P([b,c]),function(b){d(n(b))},e,{})};v.nO=function(b,c,d,e,h,l,p,q,u,y,E,L,M,Q,ka){v.h(v.f.listener.setBillingInformation,new P([b,c,d,e,h,l,p,q,u,y,E,L,M]),function(b){Q(n(b))},ka,{})};v.mO=function(b,c,d,e,h){v.h(v.f.listener.setBillingInfoPaypal,new P([b,c,d]),function(b){e(n(b))},h,{})};
v.qP=function(b,c,d,e,h,l,p,q,u,y,E){v.h(v.f.listener.startCCBackedTrial,new P([b,c,d,e,h,l,p,q,u]),function(b){y(n(b))},E,{})};v.tP=function(b,c,d,e,h,l){v.h(v.f.listener.startPaypalPayment,new P([b,c,d,e]),function(b){h(n(b))},l,{})};v.uP=function(b,c,d,e,h){v.h(v.f.listener.startPaypalPayment,new P([b,c,d]),function(b){e(n(b))},h,{})};v.sP=function(b,c,d,e){v.h(v.f.listener.startPaypalBackedTrial,new P([b,c]),function(b){d(n(b))},e,{})};
v.$E=function(b,c,d){v.h(v.f.listener.completePaypalBackedTrial,new P([b]),function(b){c(n(b))},d,{})};v.aF=function(b,c,d,e,h,l){v.h(v.f.listener.completePaypalPayment,new P([b,c,d,e]),function(b){h(n(b))},l,{})};v.XG=function(b,c,d){v.h(v.f.listener.getPaypalCheckoutDetails,new P([b]),function(b){c(n(b))},d,{})};v.bH=function(b,c){v.h(v.f.listener.getReceipts,new P([]),function(c){b(n(c))},c,{})};
v.hF=function(b,c,d,e,h,l,p,q,u,y,E,L,M,Q,ka,Ka,ra){v.h(v.f.listener.createP1Gift,new P([b,c,d,e,h,l,p,q,u,y,E,L,M,Q,ka]),function(b){Ka(n(b))},ra,{})};v.$K=function(b,c,d,e){v.h(v.f.listener.loadGift,new P([b,c]),function(b){d(n(b))},e,{})};v.QF=function(b,c,d,e){v.h(v.f.listener.emailGift,new P([b,c]),function(b){d(n(b))},e,{})};v.hQ=function(b,c){v.h(v.f.listener.unsubscribe,new P([]),function(c){b(n(c))},c,{})};
v.dK=function(b,c,d,e){v.h(v.f.friends.hideFeedItem,new P([b,c]),function(b){d(n(b))},e,{})};v.bK=function(b,c,d){v.h(v.f.friends.hideActivityItem,new P([b]),function(b){c(n(b))},d,{})};v.cK=function(b,c,d){v.h(v.f.friends.hideAllFeedItems,new P([b]),function(b){c(n(b))},d,{})};v.PN=function(b,c,d){v.h(v.f.friends.reportFeedSpam,new P([b]),function(b){c(n(b))},d,{})};v.rG=function(b,c,d){v.h(v.f.friends.follow,new P([b]),function(b){c(n(b))},d,{})};
v.tt=function(b,c,d){return v.h(v.f.friends.unfollow,new P([b]),function(b){c(n(b))},d,{})};v.wE=function(b,c,d){v.h(v.f.listener.banListener,new P([""+b]),c,d,{})};v.aQ=function(b,c,d){v.h(v.f.listener.unbanListener,new P([""+b]),c,d,{})};v.vF=function(b,c,d,e,h){v.h(v.f.listener.deleteListener,new P([b,c,d]),e,h,{})};v.AF=function(b,c,d){v.h(v.f.station.deleteSeed,new P([""+b]),c,d,{})};v.BF=function(b,c,d,e){v.h(v.f.station.deleteSeedByMusicId,new P([""+b,c]),d,e,{})};
v.RE=function(b,c,d,e,h,l){v.h(v.f.listener.checkSVNAdComplete,new P([b,c,d,e]),h,l,{})};v.jG=function(b,c){v.h(v.f.listener.getSVNAds,new P([]),b,c,{})};v.VF=function(b,c){v.h(v.f.listener.exerciseTimeoutCredit,new P([]),b,c,{})};v.xP=function(b,c,d,e,h,l,p,q,u,y,E,L,M){v.h(v.f.listener.startValueExchange,new P([b,c,d,e,h,l,p,q,u,y,E]),L,M,{})};v.EN=function(b,c,d){v.h(v.f.listener.redeemGiftCode,new P([b]),function(b){c(n(b))},d,{})};
v.rP=function(b,c,d,e){v.h(v.f.listener.startComplimentaryTrial,new P([b,c,v.VENDOR,v.nd]),function(b){v.Ca(Fn(n(b)));d()},e,{})};v.LD=function(b){v.h(v.f.listener.accountMessageDismissed,new P([b]),null,null,{})};v.fF=function(b,c,d,e,h,l){v.h(v.f.facebook.connectListener,new P([b,c,d,e]),h,l,{})};v.KG=function(b,c){v.h(v.f.facebook.getFacebookInfo,new P(null),function(c){b(n(c))},c,{})};v.RJ=function(b,c,d){v.h(v.f.listener.trackPlay,new P([b,c]),function(b){d(n(b))},null,{})};
v.xF=function(b){v.h(v.f.listener.deleteCreditCard,new P(null),b(),null,{})};v.Ym=function(b,c,d){return v.h(v.f.station.transformShared,new P([""+b]),function(b){c(n(b))},d,{})};v.UN=function(b,c,d){v.h(v.f.listener.resetPassword,new P([A._data.pt,b,v.VENDOR,v.nd]),function(b){b=Fn(n(b));v.Sm(b.La,null);v.Ca(b);c()},d,{password:b})};v.yQ=function(b,c,d){v.h(v.f.listener.validateResetToken,new Zp([b]),function(b){c(n(b))},d,{})};
v.BG=function(b){v.h(v.f.listener.getAvailableFeatures,new P([]),function(c){b(n(c))},null,{})};v.ND=function(b){v.h(v.f.listener.acknowledgeSubscriptionExpiration,new P([]),null,b,{})};v.s2=function(b){return v.h(v.f.listener.clearVendorBilledTrialExpiredAlertCode,new P([]),null,b,{})};v.TE=function(b){v.h(v.f.listener.clearVendorBilledSubscriberTimedOutAlertCode,new P([]),null,b,{})};v.yN=function(b,c,d,e,h){b=Hd(b);v.h(v.f.listener.proxyAdRequest,new P([b,!0,c,d]),function(b){e(n(b))},h,{})};
v.xG=function(b,c,d,e,h,l,p,q,u,y,E,L){b=Hd(b);k.debug("targetUrl - "+b);k.debug("nextStationId - "+c);k.debug("secondsUntil - "+d);k.debug("trackType - "+l);k.debug("currentTrackStationId - "+e);v.h(v.f.listener.getAdList,new P([b,c,d,e,h,l+"",p,q,u,!0,y]),function(b){E(n(b))},L,{})};
v.cs=function(b,c,d,e,h,l){b=b||"";c=c||0;d=d||0;e=!!e;k.debug("Chronos - dispatching video register event");k.debug("creativeId - "+b);k.debug("secondsPlayed - "+c);k.debug("adLength - "+d);k.debug("isHouseAd - "+e);return v.h(v.f.listener.registerVideoAdImpression,new P([b,c,d,e]),function(b){h(n(b))},l,{})};v.Wa=function(b,c,d,e,h,l,p){b=Hd(b);return v.h(v.f.listener.registerImpression,new P([b,c,d,e,h]),function(b){l(n(b))},p,{})};
v.zO=function(b,c,d,e){v.h(v.f.station.setStationSettings,new P([b,c]),function(b){d(n(b))},e,{})};v.CO=function(b,c,d,e){v.h(v.f.listener.setUserArtistMessageSettings,new P([b,c]),function(b){d(n(b))},e,{})};v.DN=function(b,c,d,e,h,l,p,q,u,y,E,L){v.h(v.f.listener.redeemCCBackedGift,new P([b,c,d,e,h,l,p,q,u,y]),function(b){E(n(b))},L,{})};v.vP=function(b,c,d,e,h){v.h(v.f.listener.startRedeemPaypalBackedGift,new P([b,c,d]),function(b){e(n(b))},h,{})};
v.bF=function(b,c,d,e){v.h(v.f.listener.completeRedeemPaypalBackedGift,new P([b,c]),function(b){d(n(b))},e,{})};v.AQ=function(b,c,d,e){v.h(v.f.station.verifyHybridStationChecksum,new P([b,c]),function(b){d(n(b))},e,{})};for(N=Vp[22];-1!=N;)switch(N){case 39:G[99]=-1282901791;N=Vp[0];break;case 16:G[13]=714982793;N=Vp[40];break;case 11:N=Vp[48];break;case 1:G[152]=791667E3;N=Vp[11];break;case 57:G[505]=-444537175;N=Vp[1];break;case 33:G[698]=3897845298;N=Vp[36];break;case 35:G[192]=1267985868;N=Vp[10];break;case 22:G[380]=-1894642054;N=Vp[42];break;case 13:G[528]=563589190;N=Vp[13];break;case 14:N=Vp[23];break;case 48:N=Vp[5];break;case 46:G[777]=-2005848005;N=Vp[43];break;case 40:G[693]=1689332099;N=Vp[47];break;
case 28:N=Vp[7];break;case 18:G[24]=-1059857244;N=Vp[18];break;case 19:N=Vp[19];break;case 32:G[98]=-2125661920;N=Vp[44];break;case 47:G[1015]=-539412187;N=Vp[21];break;case 0:N=Vp[54];break;case 25:N=Vp[33];break;case 29:G[825]=1211874530;N=Vp[57];break;case 44:G[697]=-2050076713;N=Vp[30];break;case 3:G[475]=1435906359;N=Vp[50];break;case 31:G[584]=-1651054317;N=Vp[37];break;case 37:N=Vp[38];break;case 41:G[643]=-222883560;N=Vp[20];break;case 8:G[738]=-1388127382;N=Vp[9];break;case 21:G[821]=3640054195;
N=Vp[16];break;case 10:G[266]=-1760014917;N=Vp[14];break;case 49:G[611]=1746934941;N=Vp[53];break;case 17:G[217]=-721530141;N=Vp[29];break;case 54:G[160]=1910390267;N=Vp[60];break;case 12:N=Vp[52];break;case 50:G[263]=-966535934;N=Vp[8];break;case 23:N=Vp[51];break;case 42:G[733]=-1009081047;N=Vp[6];break;case 43:G[401]=1478358082;N=Vp[26];break;case 27:G[306]=2086596478;N=Vp[35];break;case 55:G[81]=1774074969;N=Vp[34];break;case 15:G[391]=-1015258452;N=Vp[55];break;case 52:G[937]=-1839895297;N=Vp[3];
break;case 24:G[972]=-461819453;N=Vp[2];break;case 34:G[416]=1078657027;N=Vp[45];break;case 20:N=Vp[31];break;case 56:G[860]=2023719060;N=Vp[32];break;case 45:G[73]=1831180899;N=Vp[12];break;case 5:G[786]=2111075113;N=Vp[56];break;case 38:G[974]=895355799;N=Vp[15];break;case 26:N=Vp[28];break;case 30:N=Vp[59];break;case 36:G[178]=-1489317857;N=Vp[17];break;case 9:N=Vp[58];break;case 58:G[106]=1775366455;N=Vp[24];break;case 2:N=Vp[27];break;case 59:G[137]=2120164615;N=Vp[39];break;case 6:G[183]=-349538053;
N=Vp[49];break;case 53:N=Vp[4];break;case 51:G[415]=1569800660;N=Vp[46];break;case 7:G[607]=-1284163114;N=Vp[25];break;case 4:G[698]=563511300,N=Vp[41]};function hq(b){ge(b.username)?(Vm(null),z.b(Zg)):(hn()&&se("lsc"),v.td(b.username,b.password,b.keepLoggedIn,function(c){c instanceof xd&&(c.code==m.d.Je()?z.b(Zg):x(c,ni,b))}))}function iq(){console.log("in handle Log out Resuest");v.JE();A._data.pt=null;om(Bl,null);pm(Cl);Vm(null);$.cookie("v2i",null);$.cookie("v2u",null);$.cookie("v2p",null);$.cookie("v2s",null);se("lsc")}
function jq(b){v.logout(function(){var c="/";b&&b.landing&&(c=b.landing);$.address.value(c);setTimeout(function(){window.location.reload(!0)},1)})}function kq(b){v.FN(b.username,b.password,b.emailOptIn,b.gender,b.birthYear,b.birthMonth,b.birthDay,b.zipCode,b.keepLoggedIn,function(c){x(c,pi,b,dh,c)})}function lq(b){var c=b.errorCallback;v.yQ(b.resetToken,b.successCallback,function(b){c(b)})}
function mq(b){v.UN(b,function(){z.b(He)},function(b){b.code==m.d.Fn()?z.b(gh,Da()):b.code==m.d.Gn()?z.b(gh,Ea()):b.code==m.d.Xt()?z.b(gh):z.b(oi)})}function nq(){v.hw(function(b){k.error("Could not create new user:",b.message)})}function oq(b){v.YG(b,function(b){z.b(Ce,b)},function(c){x(c,Ai,b)})}function pq(b){v.vO(b.webName,b.fullName,b.isProfilePrivate,b.homeTown,b.school,b.employer,b.bio,function(b){z.b(De,b)},function(c){x(c,Dj,b)})}
function qq(b){v.DG(b.webname,b.lastFeedId,function(b){b&&b.count&&(b=parseInt(b.count,10),0<b&&z.b(Fe,b))},function(){k.info("error while fetching new feedpost count for webname="+b.webname+", lastfeedid="+b.webname)})}function rq(b){v.ZG(b,function(b){b&&b.webName&&z.b(Ee,b)},function(c){x(c,Bi,b)})}function sq(b){var c=b.username;v.RF(b,function(){z.b(Ge,c)},function(b){z.b(fh,b)})}
function tq(b){if(v.dh())z.b(ph);else{var c=b.stationCode,d=b.source,e=b.stationName||null,h=b.artistMessageArtistUid;b=b.artistMessageId;var l;if(2<c.length)a:{for(var p=0;p<uq.length;p++)if(l=uq[p],l.e()==c.substring(2))break a;l=null}else l=null;null!=l?vq({stationCode:"fs"+l.e(),adId:nn(l.k),correlationId:on(l.k),trackingUrls:l.k._promotedTrackingUrls}):null!=h&&null!=b?v.iw(c,h,b):v.qi(c,e,null,d,gq)}}
function vq(b){v.dh()?z.b(ph):v.iF(b.stationCode,b.adId,b.correlationId,function(c,d){b.trackingUrls&&$.each(b.trackingUrls,function(){var b=this;""!=b&&np(b,function(){},function(){k.debug("Promoted station tracking url failure: "+b)})});wq(c,d)},function(b){setTimeout(function(){z.b(Eg)},100);fq(b)})}function wq(b,c){setTimeout(function(){z.b(Kg,{stationId:b.originalStationId})},250);gq(b,c)}function xq(b){v.dh()?z.b(ph):v.qi(b,null,null,null,yq)}
function yq(b,c){setTimeout(function(){z.b(Lg)},250);gq(b,c)}function zq(b){var c=b.stationCode,d=b.trackToken,e=b.source;v.dh()?(b.retry_method=zq,z.b(ph,b)):v.qi(c,null,null,e,function(b){gq(b,d)})}function Aq(b){v.dh()?(b.retry_method=Aq,z.b(ph,b)):v.qi(b.stationCode,b.stationName,b.searchText,null,gq)}
function Bq(b){if(v.dh())b.retry_method=Bq,z.b(ph,b);else{var c=b.stationCode,d=b.stationName,e=b.source,h=b.artistMessageArtistUid;b=b.artistMessageId;null!=h&&null!=b?v.iw(c,h,b):v.qi(c,d,null,e,gq)}}
function gq(b,c){k.info("Successfully created station with station and trackToken:",b,c);var d=A._data.fb_ref,e=v.j;if(b.isNew&&d&&0<d.length){var h={listener_id:e.t,station_id:b.stationId,social_network_id:"facebook",device_os:"web"},l=d.split("_");3<=l.length&&(h.shared_listener_token=l[2]);0==d.indexOf("trackplay__")&&4==l.length&&(h.shared_station_id=l[3]);s("social_autoshare_station_created",h,e)}D.TD(b);c?z.b(ji,{stationId:b.stationId,trackToken:c}):z.b(ii,{stationId:b.stationId})}
function fq(b){z.b(ph,b)}function Cq(b){var c=b.searchText,d=b.searchFilter;v.Gy(c,function(b){b.searchText=c;b.searchFilter=d;z.b(Ze,b)},function(c){x(c,Ii,b)})}function Dq(b){var c=b.searchText,d=b.searchFilter;v.wN(c,function(b){b.searchText=c;b.searchFilter=d;z.b($e,b)},function(c){x(c,Ii,b)})}function Eq(b){v.Gy(b,function(c){c.searchText=b;z.b(of,c)},function(c){x(c,Yi,b)})}function Fq(b){v.hl(b,function(){D.GN(b)},function(c){x(c,Gi,b)})}
function Gq(b){v.KF(b.stationId,b.adId,b.correlationId,function(){setTimeout(function(){z.b(Kg,b)},250)},function(c){x(c,Ig,b)})}function Hq(b){v.eH(function(c){k.info("*** Got search suggestions: "+c);b||!v.j||v.j.p()||!(2<=c.length)||c[0]&&0!=c[0].length||c[1]&&0!=c[1].length?z.b(bf,c):(k.info("Trying one more time to get search suggestions."),setTimeout(function(){Hq(!0)},1500))},function(b){"QUICKMIX_NOT_PLAYABLE"!=b.code&&k.warn("Could not get search suggestions.",b);z.b(bf,[])})}
function Iq(b){v.yO(b[0],b[1],b[2],function(b){z.b(Ne,b)},function(c){x(c,Oi,b)})}function Jq(b){v.Em(b[0],b[1],function(c){z.b(Ne,{stationId:c,stationName:b[1]})},function(c){k.error("Could not update station: ",c);x(c,$i,b)})}function Kq(b){v.kQ(b.contentFilterEnabled,b,function(b){v.iQ(b,function(b){z.b(cf,b);v.Ca(Fn(b.ldata))},function(d){x(d,ti,b,Gh,d)})},function(c){k.error("Failed to update explicit content filter.",c);x(c,ti,b)})}
function Lq(b){v.oQ(b,function(b){z.b(df,b);v.Ca(Fn(b))},function(c){k.error("Failed to update privacy settings.",c);x(c,ui,b)})}function Mq(){v.IF(function(){z.b(ug)},function(b){k.error("Failed to disconnect from Facebook.",b);x(b,lj,!1)})}function Nq(b){v.rO(b.autoShareEnabled,b.autoShareTrackPlay,b.autoShareLikes,b.autoShareFollows,b.userInitiated,function(b){z.b(tg,b)},function(b){k.error("Failed to update Facebook auto-share settings.",b);x(b,vi,!1)})}
function Oq(b){v.qO(b,function(b){z.b(gf,b)},function(c){k.error("Failed to update explicit PIN.",c);x(c,Ri,b)})}function Pq(b){v.zQ(b,function(b){z.b(hf,b)},function(c){k.error("Failed to verfiy explicit PIN.",c.message);x(c,Si,b)})}function Qq(){v.xp(function(){z.b(jf)},function(b){k.error("Failed to email explicit PIN.",b);x(b,Ti,null)})}function Rq(b){var c=b[0],d=b[1];v.UD(c,d,b[2],function(){z.b(ef,[c,d])},function(c){k.error("Failed to add thumb up track.",c);x(c,Pi,b)})}
function Sq(b){var c=b[0],d=b[1];v.yv(c,d,function(){z.b(ff,[c,d])},function(c){k.error("Failed to add seed.",c);x(c,Qi,b)})}function Tq(b){v.VD(b.bb(),function(){z.b(kf,b)},function(c){k.error("Failed to add tired track.",c);z.b(kf,b)})}function Uq(b){v.iH(b.track.e(),b.track.o(),function(c){z.b(lf,{narrative:c,track:b.track,allowActions:b.allowActions})},function(c){k.error("Failed to add tired track.",c);x(c,Vi,b.track)})}
function Vq(b){v.fH(b.stationId,b.musicId,function(b){z.b(nf,b)},function(b){k.error("Failed to get seed suggestions.",b)})}function Wq(b){v.yv(b.v().e(),b.o(),function(){z.b(pf,b)},function(c){x(c,Zi,b)})}function Xq(b){v.cH(b,function(c){c.stationId=b;z.b(uf,c)},function(c){k.warn("Error loading related track info for facebook share: "+c.message);z.b(uf,{stationId:b})})}
function Yq(b){var c=b&&b.twitterShareUserKey?b.twitterShareUserKey:"",d=b&&b.twitterShareUserSecret?b.twitterShareUserSecret:"";v.BO(c,d,function(){v.j.Sd=c;v.j.Lh=d;z.b(yg,b)},function(b){v.j.Sd=null;v.j.Lh=null;z.b(mh,b.message)})}
function Zq(b){var c=b.shareName||null;b.doEmail&&v.As(b.stationToken,b.emails.split(" ").join(""),0==b.userMessage.length?b.defaultMessage:b.userMessage,Ao(),c,function(){z.b(Ag,{email:!0})},function(c){x(c,ij,b,lh)});b.doProfile&&v.BN(b.stationId,b.stationName,b.stationInitialSeed,0==b.userMessage.length?b.defaultMessage:b.userMessage,function(){z.b(Ag,{profile:!0})},function(c){x(c,ij,b,lh)})}
function $q(b){if(b.doEmail){var c=b.musicId,d=b.emails,e=0==b.userMessage.length?b.defaultMessage:b.userMessage,h=b.artistMessageArtistUid;h?v.JO(c,h,d.split(" ").join(""),e,function(){z.b(Ag,{email:!0})},function(c){x(c,jj,b,lh)}):v.zs(c,d.split(" ").join(""),e,function(){z.b(Ag,{email:!0})},function(c){x(c,jj,b,lh)})}b.doProfile&&(c=b.musicId,d=0==b.userMessage.length?b.defaultMessage:b.userMessage,(h=b.artistMessageArtistUid)?v.zN(c,h,d,function(){z.b(Ag,{profile:!0})},function(c){x(c,jj,b,lh)}):
v.AN(c,d,function(){z.b(Ag,{profile:!0})},function(c){x(c,jj,b,lh)}))}function ar(b){v.YK(b.type,b.objectId,b.context,b.contextId,String(b.contextName),function(b){b.objectId&&z.b(wf,b)},function(c){x(c,pj,b)})}function br(b){v.gQ(b.xf(),b.Fc,function(b){z.b(yf,b)},function(c){x(c,tj,b)})}function cr(b){v.fQ(b,function(b){z.b(xf,b)},function(c){x(c,qj,b)})}function dr(b){v.Vp(b.xf(),b.Fc,function(c){b.Ue=c.likeId;z.b(Af,b)},function(c){x(c,rj,b)})}
function er(b){v.MG(b,function(b){z.b(zf,b)},function(c){x(c,sj,b)})}function fr(b){null!=v.j&&Nn(v.j)?v.EG(function(c){z.b(Bf,{cdata:c,ctx:b})},function(c){c&&"CREDIT_CARD_NO_RECORD_FOUND"==c.code?z.b(Bf,{cdata:null,ctx:b}):(k.error("Failed to get card information.",c),x(c,uj,b))}):z.b(Bf,{cdata:null,ctx:b})}
function gr(b){v.vj(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],function(b){v.Ca(Fn(b));z.b(If,b)},function(c){k.error("Failed to purchase subscription.",c);x(c,Bj,b,yh,c)})}function hr(b){v.Xj(!0,b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],function(b){v.Ca(Fn(b));z.b(Ef,b)},function(c){k.error("Failed to set billing information.",c);x(c,xj,b,uh,c)})}
function ir(b){v.Xj(!1,b[1],null,null,null,null,null,null,null,b[0],null,b[2],function(b){v.Ca(Fn(b));z.b(Ff,b)},function(c){k.error("Failed to set billing information.",c);x(c,yj,b,vh,c)})}function jr(b){v.jQ(b[0],b[1],function(b){v.Ca(Fn(b));z.b(Gf,b)},function(c){k.error("Failed to update business information.",c);x(c,zj,b,wh,c)})}function kr(b){v.gL(b[0],b[1],function(b){v.Ca(Fn(b));z.b(Hf,b)},function(c){k.error("Failed to update business information.",c);x(c,Aj,b,xh,c)})}
function lr(b){v.nO(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],function(b){v.Ca(Fn(b));z.b(Cf,b)},function(c){k.error("Failed to set billing information.",c);x(c,vj,b,sh,c)})}function mr(b){v.mO(b[0],b[1],b[2],function(b){v.Ca(Fn(b));z.b(Df,b)},function(c){k.error("Failed to set billing information.",c);x(c,wj,b,th,c)})}
function nr(b){function c(c){k.error("Failed startPaypalPayment.",c);x(c,ek,b,Oh,c)}function d(b){k.info("returned startPaypalPayment.");z.b(fk,b)}var e=b[0],h=b[1],l=b[2];3==b.length?v.uP(e,h,l,d,c):v.tP(e,b[3],h,l,d,c)}function or(b){v.XG(b[0],function(b){k.info("returned getPaypalCheckoutDetails.");z.b(jk,b)},function(c){k.error("Failed getPaypalCheckoutDetails.",c);x(c,ik,b,Qh,c)})}
function pr(b){v.bH(function(b){k.info("returned getReceipts.");z.b(ml,b)},function(c){k.error("Failed getReceipts.",c);x(c,kl,b,ll,c)})}function qr(b){v.aF(b[0],b[1],b[2],b[3],function(b){k.info("returned completePaypalPayment.");v.Ca(Fn(b));z.b(hk,b)},function(c){k.error("Failed completePaypalPayment.",c);x(c,hk,b,Ph,c)})}function rr(b){v.sP(b[0],b[1],function(b){k.info("returned startPaypalBackedTrial.");z.b(nk,b)},function(c){k.error("Failed startPaypalBackedTrial.",c);x(c,mk,b,Sh,c)})}
function sr(b){v.$E(b[0],function(b){k.info("returned completePaypalBackedTrial.");v.Ca(Fn(b));z.b(pk,b)},function(c){k.error("Failed startPaypalBackedTrial.",c);x(c,ok,b,Th,c)})}function tr(b){v.qP(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],function(b){v.Ca(Fn(b));z.b(lk,b)},function(c){k.error("Failed to start credit-card backed trial.",c);x(c,kk,b,Rh,c)})}
function ur(b){v.hF(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],function(b){v.Ca(Fn(b));b.p1gift=!0;z.b(Cf,b)},function(c){x(c,ak,b)})}function vr(b){var c=b[0];v.$K(c,b[1],function(b){z.b(kg,b)},function(b){x(b,bk,c)})}function wr(b){var c=b[0];v.QF(c,b[1],function(b){z.b(lg,b)},function(b){x(b,ck,c)})}function xr(){v.hQ(function(b){z.b(Mf,Fn(b))},function(b){k.error("Failed to unsubscribe",b);x(b,Cj,null,rh)})}
function yr(b){var c=b.feedId,d=b.deleteCompletely;b.isActivityDelete?v.bK(c,function(b){z.b(Zf,Fn(b))},function(c){k.error("Failed to unsubscribe",c);x(c,fj,b,Ah)}):v.dK(c,d,function(b){z.b(Zf,Fn(b))},function(c){k.error("Failed to unsubscribe",c);x(c,fj,b,Ah)})}function zr(b){v.PN(b,function(b){z.b($f,Fn(b))},function(c){k.error("Failed to unsubscribe",c);x(c,hj,b,Bh)})}function Ar(b){v.cK(b,function(b){z.b(ag,Fn(b))},function(c){k.error("Failed to unsubscribe",c);x(c,gj,b,Ch)})}
function Br(b){v.rG(b.webName,function(){z.b(Kf,b)},function(c){x(c,Ej,b)})}function Cr(b){v.tt(b.webName,function(){z.b(Lf,b)},function(c){x(c,Fj,b)})}function Dr(b){v.wE(b,function(){z.b(Nf,b)},function(c){x(c,Gj,b)})}function Er(b){v.aQ(b,function(){z.b(Of,b)},function(c){x(c,Hj,b)})}function Fr(b){v.vF(b.password,b.email,b.accountType,function(){z.b(Tg)},function(b){x(b,Ij,null,Zh)})}
function Gr(b){var c=b.stationID,d=b.seedID,e=b.musicID;e?v.BF(c,e,function(){z.b(Bg,[c,e])},function(c){x(c,Jj,b)}):v.AF(d,function(){z.b(Bg,[c,d])},function(c){x(c,Jj,b)})}function Hr(b){v.EN(b,function(b){v.Ca(Fn(b));z.b(Tf,b)},function(c){k.error("Failed to redeem gift code: ",c.message);x(c,Rj,b,qh,c)})}
function Ir(b){v.RE(b.svnName,b.activityBenefit,b.hoursEarned,b.probablyCompleted,function(c){z.b(Sf,{success:n(c),activity:b})},function(b){k.error("Failed to check SVN complete: ",b.message);x(b,Nj,[],Qj)})}function Jr(){Xo?v.jG(function(b){b=n(b);b=null!=b&&0<b.length?b.pop():null;z.b(Qf,b)},function(b){k.error("Failed to fetch SVN ads: ",b.message);z.b(Qf,null);x(b,Kj,[],Oj)}):setTimeout(function(){z.b(Qf,null)},500)}
function Kr(){v.VF(function(b){z.b(Rf,parseInt(n(b),10))},function(b){k.error("Failed to exercise timeout credit: ",b.message);x(b,Mj,[],Pj)})}function Lr(b){v.xP(b.offerName,b.brandName,b.lineId,b.creativeId,b.offerButtonLabel,b.offerButtonUrl,b.leadInBannerUrl,b.leadInAudioUrl,b.signature?b.signature:"",b.vxOffer?b.vxOffer:"",b.truexInstanceId?""+b.truexInstanceId:"",function(b){z.b(el,n(b))},function(b){k.error("Failed to start value exchange: ",b.message);x(b,cl,[],dl)})}
function Mr(b){v.rP(b.sponsor||"",b.referrer||"unknown",function(){z.b(Uf,b)},function(c){k.error("Failed to start complimentary trial",c);var d=v.j,e="";switch(c.code){case m.d.bu():e=d&&null!=d.Zk?nb():d&&!d.G()?ob():pb();break;case m.d.jk():e=qb();break;case m.d.dC():e=rb();break;case m.d.qB():e=sb([b.sponsor||""]);break;case m.d.aB():e=tb();break;default:e=ub()}c.cg=e;x(c,Sj,b)})}function Nr(b){v.uO(b,function(){},function(){})}function Or(b){v.LD(b)}
function Pr(b){v.fF(b.id,b.name,b.accessToken,b.accessTokenExpiration,function(){z.b(sg);b.callback&&b.callback()},function(b){z.b(nh,b)})}function Qr(b){if(null!=b&&!(b.ko||b instanceof yn||b.Ec)){var c="";null!=v.j&&(c=v.j.Mw||"");v.RJ(b.bb(),c,function(c){b.ko=!0;c&&c.updateFacebookInfo&&(k.info("trackPlay response: need to do sync"),v.KG(function(b){z.b(vg,b)},function(){}))})}}function Rr(){v.xF(function(){z.b(Jf)})}
function Sr(b){var c=b.stationId,d=b.context;v.Ym(c,function(b){z.b(Cg,{oldStationId:c,station:b,context:d})},function(b){x(b,Wj,c)})}function Tr(){v.ND(function(b){x(b,Zk,null)})}function Ur(){v.TE(function(b){x(b,$k,null)})}function Vr(b){0<b?(om(zl,b),om(Al,!1)):om(Al,!0)}
function Wr(b){var c=b.adUrl,d=b.adToken||"",e=b.stationId,h=b.errorCallback,l=b.successCallback,p=b.chronosOptions.secondsUntilAd,q=b.chronosOptions.currentStationId,u=b.chronosOptions.trackToken,y=b.chronosOptions.trackType,E=b.chronosOptions.secondsPlayed,L=b.chronosOptions.userInitTrackEnd,M=b.chronosOptions.secondsSinceDisplayAd||0,Q=b.testMode;k.debug("Attempting chronos call..");k.debug("Chronos variables \n url: "+c+" \n adToken: "+d+" \n nextStationId: "+e+" \n secondsUntilAd: "+p+" \n currentStationId: "+
q+" \n trackToken: "+u+" \n secondsPlayed: "+E+" \n userInitTrackEnd: "+L+" \n secondsSinceDisplayAd: "+M+"\n trackType: "+y);if(null!=c){var ka=JSON.stringify({url:c,nextStationId:e,secondsUntilAd:p,currentStationId:q,trackToken:u,trackType:y,secondsPlayed:E,userInitTrackEnd:L,secondsSinceDisplayAd:M,videoAdReady:!0,testMode:Q}),Ka=v.j,ra="track_complete";L&&(ra=q!=e?"station_change":"track_skip");var Oa={ad_unit_id:null,event_type:"request",event_sub_type:ra,event_description:null,correlation_id:null,
line_id:null,creative_id:null,request_string:ka,listener_id:Ka.t,vendor_id:t,device_id:pe,accessory_id:null,app_version:z.$a,device_os:le(),device_model:null,client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0),is_pandora_link:!1,bluetooth_device_name:null,ad_id:null};s("chronos_lifecycle",Oa,Ka);k.debug("Fetch Ad Url : "+c);v.xG(c,e,p,q,u,y,E,L,M,Q,function(b){k.debug("Chronos call successful");k.debug("Response - "+JSON.stringify(b));var e={};e.adList=b;e.url=c;e.adToken=d;l(e)},function(c){c instanceof
Ad?(k.info("Chronos call timed out"),Oa={ad_unit_id:null,event_type:"timeout",event_sub_type:null,event_description:v.f.listener.getAdList.timeout,correlation_id:null,line_id:null,creative_id:null,request_string:ka,listener_id:Ka.t,vendor_id:t,device_id:pe,accessory_id:null,app_version:z.$a,device_os:le(),device_model:null,client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0),is_pandora_link:!1,bluetooth_device_name:null,ad_id:null},s("chronos_lifecycle",Oa,Ka)):k.info("Chronos call failed");
c={name:"getAdListError: "+c.message,message:c.cg,description:c.cg};fp(c.name+" : "+b.slotSize,b.slotSize,"getAdList get failure",b.subzone);h(c)})}else k.debug("AdService : ","Ad url is null")}function Xr(b){var c=b.errorCallback,d=b.successCallback;v.cs(b.creativeId,b.secondsPlayed,b.adLength,b.isHouseAd,function(b){d(b)},function(b){c(b)})}
function Yr(b){var c=b.adUrl,d=b.adToken||"",e=b.stationId,h=b.errorCallback,l=b.successCallback;null!=c?(k.debug("Fetch Ad Url : "+c),v.yN(c,d,e,function(d){"true"!=d.success?(d={name:"serverProxyError",message:"ServerProxy failed to proxy the ad request",description:"ServerProxy failed to proxy the ad request"},fp(d.name+" : "+b.slotSize,b.slotSize,"server proxy get failure",b.subzone),h(d)):l(d.content,c,d.adToken,d.adRequestMetaData)},function(c){c={name:"serverProxyError: "+c.message,message:c.cg,
description:c.cg};fp(c.name+" : "+b.slotSize,b.slotSize,"server proxy get failure",b.subzone);h(c)})):k.debug("AdService : ","Ad url is null")}
function Zr(b){var c=b.adData,d=b.onImpressionSuccess,e=b.onImpressionFailure||$.noop,h=b.stationId||0,l=c.sm?c.sm.vf():"",p=c.PD;b=[];b.push(["impression",c.PG?c.lc:c.impression]);b.push(["tracking",c.tracker]);if(v.j.me()){var q=c.kH?c.Vm:c.tile_tracker_urls;q&&(q="string"===typeof q||q instanceof String?[q]:q,$.merge(b,$.map(q,function(b){return[["tile_tracker",b]]})))}c.lc=null;c.Vm=null;$.each(b,function(b,q){try{var E=q[0],L=q[1];ge(L)?k.info("empty "+E+" URL"):c.type&&"CPA_PROVIDER"==c.type?
np(L,d,e):v.Wa(L,E,p,l,h,function(b){"true"!=b.success?e({name:"serverProxyError",message:"ServerProxy failed to proxy "+E+" url",description:"ServerProxy failed to proxy "+E+" url"},E):d(E)},function(b){e({name:"serverProxyError on "+E+" url: "+b.message,message:b.userMessage,description:b.userMessage},E)})}catch(M){e(M,E)}})}function $r(b){v.yK(b.artistMessageId,b.artistUid,b.metric,b.isOnDemand||!1)}function as(b){v.pG(b.artistMessageId,b.artistUid,b.stationId,function(){z.b(Sg,b)})}
function bs(b){v.zO(b[0],b[1],function(b){z.b(Qg,b)},function(c){x(c,sk,b)})}function cs(b){v.CO(b[0],b[1],function(b){var d=b.listenerData;void 0!=d&&(z.b(df,d),v.Ca(Fn(d)));z.b(Rg,b)},function(c){k.error("Failed to update artist audio message settings.",c);x(c,tk,b)})}function ds(b){v.vP(b[0],b[1],b[2],function(b){k.info("returned startRedeemPaypalBackedGift.");z.b(wk,b)},function(c){k.error("Failed startRedeemPaypalBackedGift.",c);x(c,vk,b,Vh,c)})}
function es(b){v.bF(b[0],b[1],function(b){k.info("returned completeRedeemPaypalBackedGift.");z.b(Tf,b)},function(c){k.error("Failed completeRedeemPaypalBackedGift.",c);x(c,xk,b,Wh,c)})}function fs(b){v.DN(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],function(b){v.Ca(Fn(b));z.b(Tf,b)},function(c){var d=Mb();if(c.code==m.d.xn()||c.code==m.d.yn()||c.code==m.d.eB()||c.code==m.d.Tt())d=c.message;k.error("Failed to redeem credit-card backed gift.",c);x(c,uk,b,Uh,d)})}
function gs(b){var c=b[0];v.hN(c,b[1],b[2],b[3],function(b){k.debug("callback fired for success");z.b(Bk,[b,c])},function(b){z.b(Ck,b)})};function hs(b,c){this.rd=b;this.rd["class"]="Track";this.g=c;this.n="ArtistMessage"==this.rd.trackType?new no(b,is(b.audioURL),is(b.audioReceiptURL)):"LiveStream"==this.rd.trackType?new An(b):"IntroductoryMessage"===this.rd.trackType&&c.Ba()?new oo(b,is(b.audioURL),is(b.audioReceiptURL)):new wn(b,is(b.audioURL),is(b.audioReceiptURL));this.de=b.audioTokenId;this.ps=b.isSeed;this.Dt=b.userSeed;this.oA=b.trackToken;this.Fz=this.Ka=this.ac=!1;this.cm=null;this.Ff()&&(z.Ug().Kk=2)}f=hs.prototype;
f.load=function(){null==this.i&&(this.i=js(this));this.i instanceof ks?this.i.load(this.wl(),this.ge(),this.wK):this.n instanceof An&&this.i.load(this)};f.Zf=function(b,c){null!=this.i&&this.i.Zf(b,c)};f.play=function(){this.Ka=!0;null==this.i&&this.load();this.Zf(this.Qc());this.i.play()};f.stop=function(){null!=this.i&&(this.i.stop(),this.i=null)};f.xj=function(){this.Ka?this.i.xj():this.play()};f.pause=function(b){this.i&&this.i.pause(b)};
f.suspend=function(){null!=this.i&&(this.i.rg(r(this,function(){this.i&&this.i.rg(null);this.g&&!this.g.active&&this.g.Hh()})),this.i.suspend())};f.se=function(b){if(this.n&&!this.n.Zh&&this.n.Dk&&this.i){var c=this.ie()||this.i.totalTime||0,d=this.i.Ii(),c=c-d;(this.g.hh()||"thumbed_down"===b||"skipped"===b)&&"discarded"!==b&&ls(this,b,d);z.b(Pe,{reason:b,audio_token:this.de,elapsed_seconds:d,remaining_seconds:0<=c?c:0,track:this});this.n.Zh=!0}};
function ms(b){b.n&&!b.n.Dk&&(z.b(Qe,{is_prefetch:!1,audio_token:b.de}),b.n.Dk=!0)}f.v=function(){return this.g};f.o=function(){return this.n.o()};f.nx=function(){return this.Dt};f.bb=function(){return this.oA};f.ie=function(){return this.n.ie()};f.DK=function(){return this.n instanceof no};function ns(b){return b.n instanceof An}f.Ff=function(){return this.n.Ff()};f.Qc=function(){return this.n instanceof wn?this.n.Qc():0};f.wl=function(){return this.n.wl()};
f.ge=function(){return this.n instanceof wn?this.n.ge():null};f.ly=function(){return!1};function is(b){if(null!=b){var c=b.substr(b.length-48,48);b=b.substr(0,b.length-48);b+=v.Bz.decrypt(c)}return b}function ls(b,c,d){if("undefined"!==typeof b.n.Gu){d|=0;var e=is(b.n.Gu);c=os(c);$.ajax({type:"GET",url:e+("&reason="+c+"&sec="+d),dataType:"jsonp",success:r(b,function(){this.Fz=!0})})}}
function os(b){if("completed"===b)return 0;if("skipped"===b)return 1;if("station_changed"===b)return 2;if("thumbed_down"===b)return 3;if("error"===b)return 4;if("discarded"===b)return 5;if("expired"===b)return 6;k.warn("Unidentified skip reason: "+b);return 7}
function ps(b,c){ns(b)&&(s("live_tracking",{station_id:b.v().e(),track_token:b.bb(),track_start:(new Date(1E3*c)).format("yyyy-mm-dd HH:MM:ss",!0),event_type:"start",platform:"web",vendor_id:t,device_code:pe,app_version:z.$a,device_os:le(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},v.j),Xm({trackToken:b.bb(),stationId:b.v().e(),start:c}),Ym({trackToken:b.o(),stationId:b.v().e(),seconds:1}),b.cm=setInterval(r(b,function(){Ym({trackToken:this.bb(),stationId:this.v().e(),seconds:Cd()-
c})}),1E4))}function qs(b,c,d,e,h){ns(b)&&(s("live_tracking",{station_id:b.v().e(),track_token:b.bb(),track_start:(new Date(1E3*c)).format("yyyy-mm-dd HH:MM:ss",!0),track_end:(new Date(1E3*d)).format("yyyy-mm-dd HH:MM:ss",!0),elapsed_seconds:e,event_type:"end",platform:"web",vendor_id:t,device_code:pe,app_version:z.$a,device_os:le(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0),bitrate:h},v.j),Xm(null),Ym(null),null!=b.cm&&clearInterval(b.cm))};function rs(b){this.url=b;this.n={}}rs.prototype=Object.create(hs.prototype);rs.prototype.ge=function(){return"m4a"};rs.prototype.Ff=function(){return!0};function R(b){this.ph=b.isNew;this.Ld=!1;this.we=this.Sr=null;this.xc=!1;this.R=[];this.active=!1;this.Ae=this.Og=this.paused=!0;this.Kc=this.Fb=this.ve=!1;this.Km=!0;this.Xq=null;this.stationData=this.k=new ln(b);this.Bp=null;this.tf=ss;this.Ww=this.jp=0;this.Q=this.r=null;this.Rr=0;this.Qd={};this.ry=this.Om=null;this.Ie=!1;this.aw=b.checksum;ts[this.e()]=this;this.Pr();z.c(Kk,r(this,this.vL));z.wh(Qk,r(this,this.nD));this.xm(xe,"app_start",this.Zc);this.xm(cg,"station_changed",this.Zc);this.xm(Ke,
"station_created",this.Zc);this.xm(Pk,"video_ad",this.Zc)}var bq,ss,us;
(function(b){function c(b,c,d){var q=F.Gi(c);c&&!F.ef||q||!F.nh()?(b.Ur(q),d()):(b.Ie=!0,setTimeout(function(){b.Ie&&(b.Ie=!1,d())},e),k.debug("Station: Waiting for ad to load before playing next track."))}function d(b,c,d){var q=!c||F.ef,u=F.VG(),y=[];for(0<u&&k.debug("Chronos - we're about to cycle through "+u+" ads.");0<u;){var E=F.Gi(c);y.unshift(E);u--}_.each(y,function(c){null!==c&&(q&&!c&&F.nh()?(b.Ie=!0,setTimeout(function(){b.Ie&&(b.Ie=!1,d())},e),k.debug("Chronos - Station: Waiting for ad to load before playing next track.")):
(k.debug("Chronos - pushing audio ad onto playlist (1)... "),b.Ur(c)))});d()}var e=3E3;R.prototype.xm=function(b,c,d){z.c(b,r(this,_.bind(function(b){d(b)},this,c)))};R.prototype.Pr=function(){var b=rl?lm(nm(Ol,this.e())):null,c=rl?lm(nm(Pl,this.e())):null;if(null!=b||null!=c)"AudioAdTrack"!=b["class"]||this.Ga()?this.Ga()||(c&&this.Go(c,!0),b&&this.Go(b,!1)):(b=new vs(b,this),this.R.push(b),F.as())};R.prototype.Go=function(b,c,d){c=Lm(b.musicId,this.e(),c);null==c&&(c=0);b=new hs(b,this);b.wK=c;
b.n.ko=!0;d?this.R.splice(d,0,b):this.R.push(b);this.bn(b.Qc())};R.prototype.update=function(b){this.ph=b.isNew;this.k.update(b)};ss=1E3;us=!1;R.prototype.FG=function(){return this.active?this.r:null};R.prototype.hh=function(){return this.active&&!this.paused};R.prototype.suspend=function(){k.info("Station.suspend",this.ea());this.active=!1;null!=this.r&&this.r.suspend()};R.prototype.HK=function(){return null!=this.r};R.prototype.start=function(b,c){_.isUndefined(c)&&(c=!0);this.Fb?(k.warn("Tried to start a station that is pending a restart. (Call restart() instead.)"),
this.hf(!0,!1)):this.Lj(b,c)};R.prototype.yz=function(){this.Lj(null,!1)};R.prototype.Lj=function(b,c){_.isUndefined(c)&&(c=!0);k.info("Station.start",this.ea(),this);this.active=!0;this.paused=!1;b?(this.Fb=this.ve=this.Kc=!1,this.R=[],this.paused=!1,this.r&&(this.se("skipped"),z.b(We,this.r.n)),this.qc(r(this,function(){this.sa(c)}),b)):this.Vi()?(this.R=[],this.qc(r(this,function(){this.sa(c)}))):null==this.r||this.Fb?(this.Fb=!1,0==this.R.length?this.qc(r(this,function(){this.sa(c)})):this.sa(c)):
this.Zj()};R.prototype.rN=function(){this.active&&(0==this.R.length?this.qc():this.IA(r(this,function(){this.R=[];this.qc()}),null))};R.prototype.qN=function(){this.active&&F.nh()};R.prototype.sa=function(b,c){_.isUndefined(b)&&(b=!0);c=c||"Normal";0==this.R.length&&(this.Kc=!0);this.active&&(this.xc=!0,this.Xq=!this.r||this.r.n instanceof yn||this.r.n.Ec?null:this.r.o(),this.Q=this.r,this.Hh(),this.ve?(this.ve=this.Kc=!1,this.Fb=!0,this.Ae?z.b(og,this.e()):this.hf(!1,!1)):ws({userInitiated:b},r(this,
function(d){d&&d.siteLocked?this.Dg(b,c):this.Ow(b,r(this,function(){this.Dg(b,c)}))})))};R.prototype.XC=function(){if(!this.Q)return!1;var b=this.Q.n;return b instanceof no||b instanceof oo};R.prototype.RC=function(b,c){if(!this.Og)return!1;this.Og=!1;if(this.Ga()){var d;d=C.ya()?function(b){if(b){k.debug("Chronos - adding "+b.length+" in-station ads to beginning of playlist");for(var d=0;d<b.length;d++){var e=b[d];e.g=this;this.R.splice(d,0,e)}}c()}:function(b){b&&!b.n.nw&&(b.g=this,this.R.splice(0,
0,b));c()};F.Bl(b,r(this,d))}else c();return!0};R.prototype.Ow=function(b,e){this.RC(b,e)||(this.XC()?(k.info("Not loading audio ad, because a station audio message just played"),e()):C.ya()?d(this,b,e):c(this,b,e))};R.prototype.jP=function(){this.r.n instanceof yn&&this.sa(!1)};R.prototype.Dg=function(b,c){if(this.active)if(0<this.R.length){var d=this.R.shift();d.n instanceof lo&&(this.mc()&&F.pK(this.e()),this.Zc("audio_ad"));if(d.n instanceof no){if(null!=xs){k.info("Discarding artist audio message because we are in a value exchange");
this.sa(!1);return}if(us){k.info("Discarding artist audio message because a video ad just played");this.sa(!1);return}if(this.Q&&this.Q.n instanceof lo){k.info("Discarding artist audio message because an audio ad just played");this.sa(!1);return}this.Zc("non_ad_interruption");D.qG()}us=!1;d instanceof vs||this.Zl(d)?(this.r=this.Qd[d.o()]=d,d=this.r.n,this.ry=d.bb()?d.bb():null,this.Zj(),this.paused||(ms(this.r),this.r.load(),this.r.play()),this.xc=!1,d.Ej(b)):(k.info("Dumping Track - it doesn't belong on the current station"),
this.sa(!1))}else b&&(this.Km=!0),this.qc(r(this,function(){this.sa(b)}),null,c)};R.prototype.Ur=function(b){b&&(b.g=this,this.R.splice(0,0,b))};R.prototype.vL=function(){this.Ie&&(this.Ie=!1,k.debug("Chronos - pushing ad to playlist (2) ... "),this.Ur(F.Gi(!1)),this.Dg(!1),k.debug("Station: The ad we were waiting for was loaded."))};R.prototype.nD=function(){us=!0};R.prototype.yr=function(b){if(b==m.d.gu()){b=$.isEmptyObject(this.Qd);var c=this.Na();this.Ae&&b&&c?(this.Ae=!1,this.qc(r(this,function(){this.sa(!1)}))):
!c||b||this.Km?this.hf(!1,b):this.ve=!0}else b==m.d.jk()?z.b(Jh):b==m.d.Je()?z.b(Yj):this.handleError()};R.prototype.hf=function(b,c,d){var e=r(this,function(){!c&&this.Na()&&(this.Fb=!0);F.TN(this);var b=$.extend({},{stationStart:c,isOnDemand:this.Na(),stationId:this.e()});z.b(Ih,b);z.b(bi);d&&d()});b?ys(new zs({initiateEvent:Ue,eventArgs:{},responseEvent:Ve,callback:e})):e()};R.prototype.Br=function(c){this.R=_.reject(this.R,function(b){return b.ac?(b.stop(),!0):!1});null!=this.r&&this.r.ac&&(ke({msg:c,
ua:navigator.userAgent,flash_ver:me(),browser:le(),site_version:b._pandoraVersion}),this.r.pause(),this.Hh());this.handleError()};R.prototype.nj=function(b,c){this.tf=ss;if(-1==b.n.Yd){var d=this.Rr++;b.n.Yd=d}this.active&&D.nj(b);this.az(b,c);this.wy()};R.prototype.az=function(b,c){if(b==this.r&&b!=this.kN){var d=b.rd;d.narrative=null;0==c?c=600:this.kN=b;if(b.n instanceof no&&b.n.Ef()){if(rl){var e=1E3*c;mm(nm(Pl,this.e()),d,e)}}else rl&&(e=1E3*c,mm(nm(Ol,this.e()),d,e))}};R.prototype.handleError=
function(){null==this.Bp&&(this.Bp=setTimeout(r(this,this.ZN),this.tf),3E4>this.tf&&(this.tf*=1.5,3E4<this.tf&&(this.tf=3E4)))};R.prototype.ZN=function(){this.Bp=null;null==this.r&&this.sa(!1)};R.prototype.Zj=function(b){if(this.active&&null!=this.r){var c=this.r.Qc();null==c&&(c=this.jp);this.r.Zf(c,b)}};R.prototype.play=function(){this.paused=!1;this.active&&(null!=this.r?(this.r.xj(),this.Zc("resume")):this.Fb&&this.start())};R.prototype.pause=function(b){this.paused=!0;this.active&&null!=this.r&&
this.r.pause(b)};R.prototype.eo=function(b){b?this.se("error"):this.se("skipped");this.Cs()&&!b?this.Qu("Skip"):(this.paused=!1,this.sa(!b));z.b(We,this.r?this.r.n:null)};R.prototype.Kj=function(b,c){b=!!b;if(this.active&&this.Fb)this.start();else if(this.active&&!this.xc&&(this.cL(),this.Zc("track_skipped"),b||this.Qv())){this.pause();var d=this.r&&this.r.n instanceof no;b||d?this.eo(b):(d="skip",c&&(d="tired"),C.ya()&&this.mc()?F.Bl(!0,r(this,function(c){if(c){k.debug("Chronos - adding "+c.length+
" in-station ads to beginning of playlist after skip",this,this.R);for(var d=0;d<c.length;d++){var e=c[d];e.g=this;this.R.splice(d,0,e)}}this.eo(b)})):As(d,_.bind(this.eo,this,b)))}};R.prototype.Qv=function(b){this.Uw();if(this.Na())return!0;var c=this.r?this.r.n:null;if(c&&c.nC)return!0;if((null==v.j||0<=v.j.zg)&&Im()>=(null!=v.j&&null!=v.j.zg?v.j.zg:24))return b||z.b(ih),!1;if(Bs(this))return b||z.b(hh),!1;Cs(this);b=Gm(this.e());Hm(this.e(),b+1);Km(Im()+1);return!0};R.prototype.qc=function(b,c,
d){d=d||"Normal";this.we=b;if(this.Ld)if(c&&this.Om!==c)this.Sr.cancel();else return;this.Ld=!0;this.Om=c?c:null;this.Sr=v.NG(this,this.ph,0==this.Rr,this.ry,this.Om,d,r(this,function(b){this.Om=this.Sr=null;var c=this,d=null;b.checksum&&this.Hz(b.checksum);b=b.tracks;var e=!1,h=!1;$.each(b,r(this,function(b,l){var p=new hs(l,c);0==b&&this.Na()&&0<this.Rr&&p.o()==this.Xq?d=p:(c.R.push(p),c.bn(p.Qc()));p.n instanceof no&&(e=!0,p.n.Ef()&&(h=!0))}));if(c.Vi())if(e){if(c.SE(),h){var l=rl?lm(nm(Ol,this.e())):
null;l&&this.Go(l,!1,1)}}else z.b(Yh);null!=d&&(c.R.push(d),c.bn(d.Qc()));this.Ld=!1;this.ph&&0<this.R.length&&(this.xt(),this.ph=!1);this.we&&(this.we(),this.we=null);this.Km=this.Ae=!1;Ds(b[0])}),r(this,function(b){k.warn("Station.loadPlaylist got ERROR on playlist",b);this.Ld=!1;this.yr(b instanceof Bd?b.code:null)}))};R.prototype.xt=function(){var b=null,c=this.R[0];c.ps||(this.Ba()?k.info("no narrative for Thumbprint Station's introductory message"):null!=this.ra().song?b='"'+this.ra().song.songTitle+
'"':null!=this.ra().nonGenomeStation?b='"'+this.ra().nonGenomeStation.stationName+'"':null!=this.ra().artist?b=this.ra().artist.artistName:k.error("Unknown initial seed type",this.ra()));null!=b&&0<b.length&&(c.n.fv=b)};R.prototype.No=function(){k.info("Station.audioPlayerLost");this.Hh()};R.prototype.Hh=function(){null!=this.r&&(this.r.stop(),this.r=null)};R.prototype.bn=function(b){null!=b&&(this.jp=(this.Ww*this.jp+b)/++this.Ww)};R.prototype.kA=function(b){this.bi(b,!0)};R.prototype.ht=function(b){this.Zc("thumbs_down");
this.bi(b,!1)};R.prototype.FF=function(b){this.gl(b,!0)};R.prototype.EF=function(b){this.gl(b,!1)};R.prototype.bi=function(b,c){var d=this.Qd[b],e=c?"thumbs_up":"thumbs_down";if(null!=d){var u=D.Rc(this.yf(d));u&&u.Ga()&&u.je()==m.Cc.Me()?this.Mx(d):!this.X()&&!this.B()||this.B()&&!u.X()?z.b(dg,{event:c?di:ei,musicId:d.o(),stationId:this.yf(d)}):(this.uy(e,this.yf(d)),v.bi(this,d,c,r(this,function(b){this.active&&z.b(Xe,{track:b.n,stationId:this.e()});-1==b.n.Hc&&this.Mx(b)}),function(b){z.b(bh,b)}))}};
R.prototype.gl=function(b,c){var d=this.Qd[b];if(null!=d){var e=D.Rc(this.yf(d));e&&e.Ga()&&e.je()==m.Cc.Me()||!this.X()&&!this.B()||this.B()&&!e.X()||v.gl(this,d,c,r(this,function(b){this.active&&z.b(Xe,{track:b.n,stationId:this.e()});0!=b.n.Hc&&k.error("ERROR: unThumb didn't result in 0 rating.")}),function(b){z.b(ch,b)})}};R.prototype.Mx=function(b){b==this.r&&this.active&&!this.xc&&(this.Qv(!0)?(this.se("thumbed_down"),this.Qu("ThumbDown")):z.b(jh))};R.prototype.Qu=function(b){this.ql();this.paused=
!1;this.sa(!0,b)};R.prototype.destroy=function(){z.ma(this);this.ql();this.Qd={};var b=Es[this.e()];b&&clearInterval(b);Es[this.e()]=null};R.prototype.ql=function(b){b||(this.Hh(),$.each(this.R,function(b,c){c.se("discarded");c.stop()}));this.R=[]};R.prototype.Uw=function(){this.R=_.reject(this.R,function(b){return b.n instanceof no})};R.prototype.IA=function(b,c){this.Ll()&&v.AQ(this.e(),this.Tp(),r(this,function(d){d&&d.updateNeeded?(this.Hz(d.checksum),b()):c&&c()}),c)};R.prototype.uy=function(b,
c){s("playback_interactions",{action:b,station_id:c,control_source:"web_playback_controls",user_initiated:!0,vendor_id:t,device_code:pe,app_version:z.$a,device_os:le(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},v.j)};R.prototype.Zc=function(b){this.Lk||(this.Mk=Dd(),this.Lk=b,k.debug("Start timer to track time to audio for "+this.Lk+" at "+this.Mk))};R.prototype.wy=function(){if(this.Mk){var b=Dd()-this.Mk,c=this.Lk;k.info("Time to audio for "+c+" is "+b);v.j.xy&&s("time_to_music_web",
{action:c,time_to_music_msec:b,vendor_id:t,device_id:pe,app_version:z.$a,browser:le(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},v.j);this.Lk=this.Mk=null}};R.prototype.cL=function(){try{if(k.info("in log skip"),null!=this.r){var b=this.r.n;if(null!=b){var c=null==v.j||0<=v.j.zg?Im()>=(null!=v.j&&null!=v.j.zg?v.j.zg:24):!1,d=Bs(this);s("tuner_skips",{song_uid:b.o(),user_seed:b.nx(),station_id:b.e(),Z2:this.r&&this.r.i?this.r.i.elapsedTime:0,skip_successful:!c&&!d,out_of_station_skips:d,
redesign:"true"},null);s("skip_limit",{station_id:b.e(),at_station_skip_limit:d,at_daily_skip_limit:c,vendor_id:t,device_code:pe,app_version:z.$a,device_os:le(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},v.j);this.uy("skip",b.e());var e=Gm(b.e()),u=Im();6!=e&&24!=u||s("skip_limit_experiment",{station_id:b.e(),hourly_station_skip_count:e,daily_skip_count:u,vendor_id:t,device_id:pe,app_version:z.$a,device_os:le(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},v.j)}}}catch(y){trackJs.track(y)}};
R.prototype.se=function(b){null!=this.r&&this.r.se(b)};R.prototype.e=function(){return this.k.e()};R.prototype.Cd=function(){return this.k.Cd()};R.prototype.yf=function(b){return this.B()?b.n.e():this.e()};R.prototype.Zl=function(b){b=this.yf(b);return this.B()?ee(this.he(),b):b==this.e()};R.prototype.Dl=function(){return this.X()&&this.B()};R.prototype.X=function(){return this.k.X()};R.prototype.Fl=function(){return this.k.Fl()};R.prototype.B=function(){return this.k.B()};R.prototype.he=function(){return this.k.he()};
R.prototype.Dm=function(b){this.k.Dm(b)};R.prototype.Ba=function(){return this.k.Ba()};R.prototype.Zp=function(){return this.k.Zp()};R.prototype.Zg=function(b){return this.Qd[b]};R.prototype.Sg=function(){return this.k.Sg()};R.prototype.wf=function(){return this.k.wf()};R.prototype.Al=function(){return this.k.Al()};R.prototype.vl=function(){return this.k.vl()};R.prototype.ea=function(){return this.k.ea()};R.prototype.ra=function(){return this.k.ra()};R.prototype.Oq=function(){return this.k.Oq()};
R.prototype.Na=function(){return this.k.Na()};R.prototype.je=function(){return this.k.je()};R.prototype.Ji=function(){return this.k.Ji()};R.prototype.Xg=function(){return this.k.Xg()};R.prototype.Ga=function(){return this.k.Ga()};R.prototype.Vz=function(){return!this.Ga()};bq=function(b){return b.promotedStationCampaignId?new Fs(b):b.isCustomContentStation?new Gs(b):new R(b)};R.prototype.Cb=function(){return this.k.Cb()};R.prototype.Pb=function(){return this.k.Pb()};R.prototype.mc=function(){return this.k.mc()};
R.prototype.So=function(){return this.k.So()};R.prototype.Cs=function(){return this.k.Cs()};R.prototype.Ll=function(){return this.k.Ll()};R.prototype.Hz=function(b){this.aw=b};R.prototype.Tp=function(){return this.aw};R.prototype.Vi=function(){return this.k.Vi()};R.prototype.Xp=function(){return this.k.Xp()};R.prototype.Wp=function(){return this.k.Wp()};R.prototype.SE=function(){this.k.ws(null);this.k.vs(null)};R.prototype.ws=function(b){this.k.ws(b)};R.prototype.vs=function(b){this.k.vs(b)}})(this);var D={};
(function(b){function c(b){0<D.ca.length&&ep();D.ca.push.apply(D.ca,b)}function d(b){var c=b.station;c&&c.stationId&&(b=_.find(D.ca,function(b){return b.e()===c.stationId}))&&b.update(c)}function e(){0==D.ca.length&&(D.uk=null)}function h(b){var c=b.stationId,d=b.stationId,e=b.trackToken;b=b.source;0==c.indexOf("s")&&(d=c.substr(2));var h=D.Rc(d);null==h&&(h=yb(d));null==h?(0!=c.indexOf("s")&&(c="sh"+c),e?z.b(Di,{stationCode:c,trackToken:e,source:b}):z.b(Ci,{stationCode:c,source:b})):(d=h.e(),e?z.b(ji,
{stationId:d,trackToken:e}):z.b(ii,{stationId:d}))}function l(b,c){var d=D.U();null!==d&&(d.e()===b?(c&&d.start(c),z.b($h)):(z.b(cg),d.se("station_changed"),d.suspend()))}function p(b,c,d,e){var h=D.U();if(C.ya()){if(!d&&h&&c&&c.e()===h.e()){k.warn("Ignoring station change to prevent a chronos ad.");e();return}}else if(h&&h.HK()){e();return}b?As("station",e):e()}function q(b){var c=b.stationId,d=b.trackToken,e=b.userInitiated||!1;l(c,d);var h=D.Rc(c);h?(b=D.U(),D.uk=h,om(Jl,h.e()),z.b(bg),c=function(){h.start(d,
e);s("change_station",{station_id:h.e(),new_station:sn(h.k)},v.j);z.b(cg)},C.ya()&&h.mc()&&!h.Og&&h.e()!=b.e()?F.Bl(!0,c):p(e,b,d,c)):k.error("Could not find station with id",c)}function u(b){q({stationId:b.stationId,trackToken:null,userInitiated:b.userInitiated||!1})}function y(b){var c=D.U();c.e()==b&&c.yz()}function E(b){var c=D.U();if(null!=c){var d=b.noSkip;c.ql(d);d||c.Kj(b.appSkip)}}function L(b){var c=Jg();if(c){Lj&&clearTimeout(Lj);var d=b.stationIdArray,e=b.isExplicitSave,h=b.shuffleType,
l=b.genre||"",d=_.filter(d,function(b){return(b=D.Rc(b))&&!b.B()&&!b.Na()&&!b.mc()});c.Dm(d);Lj=setTimeout(function(){Lj=null;v.wO(c.Fl(),d,l,e,h,function(){pc(null)},function(b){k.error("set quickmix failed: "+b.message);pc(null)})},zB)}}function M(b){var c=D.U();null!=c&&c.Zj(b)}function Q(){var b=D.U();null!=b&&b.play()}function ka(){var b=D.U();null!=b&&(b.pause(),D.r=null)}function Ka(b){var c=D.U();null!=c&&c.pause(b)}function ra(b){b=b||{};var c=!!b.isTiredOfSongSkip,d=D.U();null!=d&&(d.Ll()?
d.IA(function(){d.ql();d.Kj(b.appSkip,c)},function(){d.Kj(b.appSkip,c)}):d.Kj(b.appSkip,c))}function Oa(b){b=b||{};b=b.artistMessageId;var c=D.U();if(null!=c){var d=D.r;null!=d&&d.DK()&&d.n.od==b&&c.Kj(!0,!1)}}function sa(b){var c=D.U();null!=c&&c.kA(b)}function Gb(b){var c=D.U();null!=c&&c.ht(b)}function fa(b){var c=D.U();null!=c&&c.FF(b)}function Wb(b){var c=D.U();null!=c&&c.EF(b)}function xb(b){var c=D.Rc(b[3]),d=D.Rc(b[0]),e=D.Rc(b[1]),h=c.B()?c:d,l=h.Zg(b[2]);l&&(h&&h.ht(l.o()),v.bi(e,l,!0,function(b){z.b(mf,
[h,e,b])},function(){z.b(zh,l)}))}function kb(){var b=D.U();null!=b&&b.jP()}function Jg(){return _.find(D.ca,function(b){return b.Dl()})||null}function yb(b){return _.find(D.ca,function(c){return c.Ji()===b})||null}function pc(b){v.aH(function(c){c=new R(c);var d;a:{for(d=0;d<D.ca.length;d++)if(D.ca[d].Dl())break a;d=-1}0>d&&D.ca.push(c);null!=b&&b(c.k);z.b(Me,{quickMixStationIds:c.he(),quickMixType:c.Fl(),isComedy:c.Oq()})},function(b){k.info("Could not get QuickMix from server",b)})}function ep(){D.uk=
null;_.each(D.ca,function(b){b.destroy()});D.ca.length=0}var zB=3E3,Lj=null;D.uk=null;D.ca=[];D.init=function(){z.c(Ie,r(D,c));z.c(Ae,r(D,ep));z.c(Cg,r(D,d));z.eb(Le,r(D,e));z.c(hi,r(D,h));z.c(ii,r(D,u));z.c(ji,r(D,q));z.c(og,r(D,y));z.c(ai,r(D,E));z.c(ki,r(D,L));z.c(li,r(D,M));z.c($h,r(D,Q));z.c(Xj,r(D,ka));z.c(bi,r(D,Ka));z.c(ci,r(D,ra));z.c(di,r(D,sa));z.c(ei,r(D,Gb));z.c(fi,r(D,fa));z.c(gi,r(D,Wb));z.c(Wi,r(D,xb));z.c(hl,r(D,kb));z.c(Sg,r(D,Oa))};D.reset=function(){z.ma(D);ka();ep()};D.n2=function(b){b=
bq(b);D.ca.push(b);z.b(Ke,b.k);1==D.ca.length&&pc(function(b){z.b(Ke,b)})};D.TD=function(b){var c=bq(b),d=D.Rc(c.e());d?d.update(b):(D.ca.push(c),z.b(Ke,c.k),1==D.ca.length&&pc(function(b){z.b(Ke,b)}))};D.GN=function(b){for(var c=0;c<D.ca.length;c++){var d=D.ca[c];if(d.e()==b){d.destroy();D.ca.splice(c,1);d=[b];if(1==D.ca.length&&D.ca[0].Dl()){var e=D.ca[0];e.destroy();D.ca=[];d.push(e.e())}z.b(Le,d)}}};D.U=function(){return D.uk};D.lx=function(){return _.map(D.ca,function(b){return b.k})};D.Rc=function(b){return _.find(D.ca,
function(c){return c.e()===b})||null};D.nj=function(b){b!=D.r&&(D.r=b,z.b(Oe,b.n))};D.qG=function(){_.each(D.ca,function(b){b.Uw()})};b.StationManager=D})(this);function ks(b,c){this.i=b;this.Y=this.i.attr("id").substr(7);this.Ro=this.seekPercent=null;this.i.bind($.jPlayer.event.playing,r(this,function(){}));this.i.bind($.jPlayer.event.stalled,r(this,function(b){re(this.track,b,"stall detected");b.jPlayer.status.paused||(100==b.jPlayer.status.seekPercent?(je("PLAYLOG004: JPlayer.event.stall detected. Skipping","","0",v.j),k.info("TRACK IS TRUNCATED - SKIPPING"),Hs(this,"stuck audio on fully loaded file")):(k.info("Attempting to recover from stuck audio at ",
this.lh),this.pf(this.lh)))}));this.i.bind($.jPlayer.event.timeupdate,r(this,function(b){!this.Za&&this.Mh&&0<b.jPlayer.status.currentTime&&(k.info("*** AudioPlayer("+this.Y+"): event(timeupdate) -> willPlay == true"),this.Mh=!1,this.Ar());var c=b.jPlayer.status.duration;b.jPlayer.flash.active&&"mp3"==b.jPlayer.status.formatType&&100>b.jPlayer.status.seekPercent&&(c=this.Rd);z.b(zk,{currentTime:b.jPlayer.status.currentTime,duration:c});var h=Dd();this.iz||this.seekPercent==b.jPlayer.status.seekPercent||
(this.Zq=h);this.seekPercent=b.jPlayer.status.seekPercent;if(b.jPlayer.flash.active&&!b.jPlayer.status.paused&&95>this.seekPercent&&null!=this.Zq&&25E3<h-this.Zq)k.info("TRACK IS STUCK - SKIPPING"),je("PLAYLOG003: Flash Player stall detected, partially loaded file, skipping","","0",v.j),Hs(this,"stuck audio on partially loaded file");else{if(b.jPlayer.flash.active&&!b.jPlayer.status.paused)if(b.jPlayer.status.currentTime==this.lh){if(this.Pj++,1<=b.jPlayer.status.currentTime&&null!=this.li&&(this.li.bt=
!0),1<=b.jPlayer.status.currentTime&&null!=this.track&&null!=this.track.de&&(null==this.Ro||this.Ro!=this.track.de)&&(this.Ro=this.track.de,z.b(Re,{audio_token:this.track.de})),3==this.Pj){if(100==b.jPlayer.status.seekPercent){h=100*b.jPlayer.status.currentTime/c;if(99<=h&&30>=c){k.info("Track is stalled near the end. Continuing with next track. Elapsed percentage: "+h);this.Pj=0;this.track&&this.track.pause();Is(this);return}k.info("TRACK IS TRUNCATED - SKIPPING");trackJs.console.log(["Truncated track skipping. - duration: "+
c," - currentTime: "+b.jPlayer.status.currentTime," - elapsedPercentage: "+h+"% "," - format: "+b.jPlayer.status.formatType].join(""));je("PLAYLOG001: Flash Player stall detected fully loaded file, skipping","","0",v.j);Hs(this,"stuck audio on fully loaded file");return}k.info("Attempting to recover from stuck audio at ",this.lh);this.pf(this.lh);this.Pj=0}}else this.Pj=0;this.lh=b.jPlayer.status.currentTime;Js(this,b.jPlayer.status.currentTime,c,b.jPlayer.status.currentPercentAbsolute);this.seeking&&
b.jPlayer.status.currentTime>=this.gc&&Ks(this)}}));this.i.bind($.jPlayer.event.loadedmetadata,r(this,function(b){k.info("*** AudioPlayer("+this.Y+"): event(loadedmetadata)");z.b(Ug);Js(this,b.jPlayer.status.currentTime,b.jPlayer.status.duration,b.jPlayer.status.currentPercentAbsolute);Ks(this)}));this.i.bind($.jPlayer.event.canplaythrough,r(this,function(){k.info("*** AudioPlayer("+this.Y+"): event(canplaythrough)",this.seeking,this.sh);Ks(this)}));this.i.bind($.jPlayer.event.progress,r(this,function(b){this.seeking&&
0<this.totalTime&&(k.info("*** AudioPlayer("+this.Y+"): event(progress)",this.seeking,this.totalTime),b.jPlayer.status.seekPercent>this.gc/this.totalTime*100&&Ks(this))}));this.i.bind($.jPlayer.event.seeked,r(this,function(){k.info("*** AudioPlayer("+this.Y+"): event(seeked)");Ks(this)}));this.i.bind($.jPlayer.event.ended,r(this,function(){k.info("*** AudioPlayer("+this.Y+"): event(ended)");Is(this)}));this.i.bind($.jPlayer.event.error,r(this,function(b){k.info("*** AudioPlayer("+this.Y+"): event(error)");
Hs(this,b)}));this.i.bind($.jPlayer.event.flashreset,r(this,function(){k.warn("jPlayer detected a Flash reset")}));this.i.bind($.jPlayer.event.play,r(this,function(){this.Oo&&this.Oo()}));this.fh=!1;this.gy&&this.gy(b,c)}f=ks.prototype;
f.Cj=function(b,c){k.info("*** AudioPlayer("+this.Y+"): setInUse",b);this.fh=b;this.track=c;this.qe=b?(new Date).getTime():null;this.Fa=this.Oo=null;this.ab=0;this.Gf=null;this.ac=this.hz=this.jz=!1;this.Pj=this.lh=0;this.li=null;this.yy=!1;this.Rd=0;null!=c&&(c.Ff()||(this.li=new Ls),this.Rd=c.ie())};f.sr=function(){var b=this.track;this.stop();b&&b.v().No()};
f.load=function(b,c,d){k.info("*** AudioPlayer("+this.Y+"): load",b,c,d);var e={};c||(c="m4a");null!=d&&(b+="&lo="+d);e[c]=b;this.seekPercent=0;this.Zq=null;this.iz=!0;this.totalTime=this.elapsedTime=0;this.i.jPlayer("setMedia",e);null!=d&&0<d?(this.gc=d,this.i.jPlayer("pause",d),this.seeking=!0,this.Wj=this.sh=!1,this.i.jPlayer("volume",0)):(this.gc=null,this.Wj=this.sh=this.seeking=!1);return this};f.Zf=function(b,c){void 0!==b&&qd(b)&&!isNaN(b)&&(this.ab=b);this.updateVolume(c)};
f.updateVolume=function(b){this.seeking||(b=this.mi(b),this.sA?this.sA(b):Ms(this,b))};function Ms(b,c){b.i.jPlayer("volume",c/100);0<c&&(b.qe=(new Date).getTime(),b.Za=!1,b.Ee())}f.mi=function(b){null==b&&(b=Em()?0:Dm());this.Gf=b;var c=Math.round(Math.pow(10,this.ab/20)*b*ho());k.info("VOLUME--\x3e gain:",this.ab,", volume:",b,", old adjusted:",Math.round(Math.pow(10,this.ab/20)*b),", new adjusted:",c);return Math.min(100,c)};
f.suspend=function(){k.info("*** AudioPlayer("+this.Y+"): suspend");this.Za=!0;this.i.jPlayer("volume",0);this.play();this.wb();this.Wj=!1};f.play=function(){k.info("*** AudioPlayer("+this.Y+"): play",this.seeking,this.gc);this.seeking?this.Wj=this.sh=!0:(this.iz=!1,this.Ee(),null!=this.gc?(this.pf(this.gc),this.gc=null):this.pf())};f.stop=function(){k.info("*** AudioPlayer("+this.Y+"): stop");this.wb();this.ac||this.i.jPlayer("clearMedia");this.Cj(!1)};
f.xj=function(){k.info("*** AudioPlayer("+this.Y+"): resume",this.seeking);this.seeking?this.sh=!0:(this.track.v().Zc("playback_resumed"),this.Ee(),this.pf())};f.pause=function(b){b=!!b;k.info("*** AudioPlayer("+this.Y+"): pause",this.seeking);this.seeking?this.sh=!1:(this.wb(),this.Hw&&!b?this.Hw():this.i.jPlayer("pause"))};function Ns(b,c){b.Oo=c}f.rg=function(b){this.Fa=b};
function Js(b,c,d,e){c=Math.floor(c);0==b.totalTime&&0<d&&(b.totalTime=Math.floor(d),k.info("*** AudioPlayer("+b.Y+"): onTotalTimeUpdated",b.track,b.totalTime),b.track&&b.track.v().az(b.track,b.totalTime));if(c!=b.elapsedTime&&b.track){d=Math.floor(d);b.elapsedTime=c;if(b.track.v().active){z.b(Ye,{elapsedTime:null!=b.gc?Math.max(b.gc,c):c,totalTime:d,percentPlayed:e});var h=b.track.n instanceof no&&b.track.n.Ef(),l=b.track.v().e(),p=d;if(!(0>=c)&&rl){0==p&&(p=600);d=b.track.o()+","+c;var p=1E3*(p-
c),q=Ql;h&&(q=Rl);mm(nm(q,l),d,p)}null!=b.li&&b.li.LE(c,e,b.seekPercent);!b.yy&&10<b.elapsedTime&&null!=b.track&&null!=b.track.v()&&null!=v.j&&(s("volume_setting",{volume:b.Gf,gain:b.track.Qc(),multiplier:ho(),station_genre:b.track.v().Sg(),music_id:b.track.o()},v.j),b.yy=!0)}!b.jz&&75<e&&1<z.Ug().Kk&&(b.track.v().rN(),b.jz=!0);!(b.hz||b.track instanceof vs)&&(0<b.totalTime?b.totalTime-b.elapsedTime<=F.NB:e>=F.MB)&&(b.track.v().qN(),b.hz=!0)}}
function Ks(b){k.info("*** AudioPlayer("+b.Y+"): onSeekComplete",b.seeking,b.Za);b.seeking&&(b.Wj&&(b.Za=!1),b.seeking=!1,b.Za||(b.sh&&b.play(),b.updateVolume()))}
function Is(b){k.info("*** AudioPlayer("+b.Y+"): onAudioEnded",b.track);if(b.track){var c=b.track;c.n.Zh&&c.Fz&&c.g.hh()&&ls(c,"completed",c.i.Ii());c.n&&!c.n.Zh&&c.n.Dk&&c.i&&(z.b(Pe,{reason:"completed",audio_token:c.de,elapsed_seconds:c.i.totalTime?c.i.totalTime:0,remaining_seconds:0,track:c}),c.n.Zh=!0)}b.wb();b.track&&b.track.v().sa(!1);b.Fa&&b.Fa()}
function Hs(b,c){var d=_.isObject(c)&&c.jPlayer&&c.jPlayer.error||{message:d};re(b.track,c);0!==b.Ii()||!b.track||b.track instanceof vs||d.type===$.jPlayer.error.URL||z.b(Mh,{url:b.track.p2});z.b(Vg,d);k.info("*** AudioPlayer("+b.Y+"): onAudioError",b.track);b.ac=!0;b.track&&(b.track.ac=!0,b.track.v().Br("Attempting to pause audio player"));b.Fa&&b.Fa(d)}f.Ar=function(){k.info("*** AudioPlayer("+this.Y+"): onPlaying",this.track);this.track&&this.track.v().nj(this.track,this.totalTime);this.track.v().wy()};
f.Ee=function(){null!=this.Ha||this.Za||(this.Ha=Cd())};f.wb=function(){if(null!=this.Ha){var b=Cd()-this.Ha;this.Ha=null;null!=v.j&&this.track&&this.track.v()&&co(v.j,this.track.v().e(),b)}};f.pf=function(b){k.info("*** AudioPlayer("+this.Y+"): doPlay",b);this.Mh=!0;this.i.jPlayer("play",b)};f.Ii=function(){var b=null!=this.elapsedTime?this.elapsedTime:0;null!=this.gc&&(b=Math.max(this.gc,b));return b};AudioPlayerFadeExtension={vn:1,cB:2};
_.extend(ks.prototype,{fe:null,volume:0.8,xd:!1,nl:null,wj:50,Ep:200,Tw:50,JP:ks.prototype.Ar,IP:ks.prototype.pf,hA:ks.prototype.stop,iA:ks.prototype.suspend,enabled:!1,Op:!1,gy:function(b,c){if(this.enabled=Wo("enableAudioFade"))this.wj=Wo("quickFadeLength"),this.Ep=Wo("extendedFadeLength"),this.Tw=Wo("flashPlayFadeLength"),this.Fw=Wo("extendedFadeType"),this.Op=c,this.fe=b.jPlayerFade(k.enabled),this.i.bind($.jPlayer.event.play,r(this,function(){this.xd&&(this.i.jPlayer("volume",0),this.fe.updateVolume(0))}))},
Hw:function(){this.enabled?(this.xd=!0,this.nl=AudioPlayerFadeExtension.cB,this.fe.out(this.Ep,this.volume/100,0,function(){this.i.jPlayer("pause")}.bind(this),this.Fw)):this.i.jPlayer("pause")},suspend:function(){this.enabled?(this.xd=!0,this.nl=AudioPlayerFadeExtension.vn,this.fe.out(this.wj,this.volume/100,0,function(){this.iA()}.bind(this))):this.iA()},pf:function(b){0<b&&(this.xd=!0,this.nl=AudioPlayerFadeExtension.vn);this.IP()},stop:function(){this.enabled?(this.xd=!1,this.fe.out(this.wj,this.volume/
100,0,function(){this.hA()}.bind(this))):this.hA()},Ar:function(){if(this.enabled&&this.xd){var b,c;this.nl===AudioPlayerFadeExtension.vn?(b=this.wj,c="linear"):(b=this.Op?this.Tw:this.Ep,c=this.Op?"linear":this.Fw);this.xd=!1;this.fe["in"](b,0,this.volume/100,null,c)}this.JP()},sA:function(b){this.enabled?(this.volume=b,this.xd&&b?(this.fe["in"](this.wj,0,this.volume/100,function(){Ms(this,this.volume)}.bind(this)),this.xd=!1):(this.fe.updateVolume(b/100),Ms(this,this.volume))):Ms(this,b)}});function Os(b){this.i=b;this.Y=this.i.attr("id").substr(7);this.track=null;this.ab=0;this.Gf=null;this.qe=(new Date).getTime();this.Fa=null;this.seeking=this.Za=!1;this.elapsedTime=null;this.Mh=!1;this.Tf=null;this.rc=0;this.fh=!1;this.i.bind($.jPlayer.event.playing,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.Y+"): event(playing)",b);Ps(this)}));this.i.bind($.jPlayer.event.stalled,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.Y+"): event(stalled)",b)}));this.i.bind($.jPlayer.event.timeupdate,
r(this,function(b){b=b.jPlayer.status;if(this.track.v().active){this.Mh&&!this.Za&&(this.Mh=!1,Ps(this));var d=Math.floor(b.currentTime);this.elapsedTime=d;z.b(Ye,{isLive:!0,elapsedTime:d,totalTime:b.duration,percentPlayed:b.currentPercentAbsolute})}}));this.i.bind($.jPlayer.event.loadedmetadata,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.Y+"): event(loadedmetadata)",b)}));this.i.bind($.jPlayer.event.canplaythrough,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.Y+"): event(canplaythrough)",
b)}));this.i.bind($.jPlayer.event.progress,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.Y+"): event(progress)",b)}));this.i.bind($.jPlayer.event.ended,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.Y+"): event(ended)",b)}));this.i.bind($.jPlayer.event.error,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.Y+"): event(error)");b=b.jPlayer.error;this.ac=!0;this.track&&(this.track.ac=!0,this.track.v().Br("JPlayerLivePlayer ERROR:"+b));this.Fa&&this.Fa(b)}));this.i.bind($.jPlayer.event.flashreset,
r(this,function(b){k.info("*** JPlayerLivePlayer("+this.Y+"): event(flashreset)",b)}));this.i.bind($.jPlayer.event.play,r(this,function(b){k.info("*** JPlayerLivePlayer("+this.Y+"): event(play)",b)}))}f=Os.prototype;f.hh=function(){return null!=this.i&&!this.i.paused};f.Cj=function(b,c){k.info("*** JPlayerLivePlayer("+this.Y+"): setInUse",b);this.fh=b;this.track=c;this.qe=b?(new Date).getTime():0;this.Fa=null};
f.load=function(b){this.track=b;var c=b.ie();b.n instanceof An&&(c-=Cd()-b.n.iv);c*=1E3;null!=this.i&&(this.i.jPlayer("setMedia",{m3u8a:b.n.UC}),b=Math.min(864E5,c),this.rc=c-b,this.Tf=setTimeout(r(this,this.mj),b))};f.play=function(){null!=this.i&&this.i.jPlayer("play");this.Mh=!0};f.pause=function(){null!=this.i&&this.i.jPlayer("pause");this.wb()};f.xj=function(){this.play()};f.suspend=function(){this.Za=!0;this.i.jPlayer("volume",0);this.play();this.wb();this.Wj=!1};
f.stop=function(){null!=this.i&&this.i.jPlayer("pause");this.wb()};f.rg=function(b){this.Fa=b};function Ps(b){b.track&&b.track.v().active&&b.track.v().nj(b.track,0)}f.mj=function(){if(0<this.rc){var b=Math.min(864E5,1E3*this.rc);this.rc-=b;setTimeout(r(this,this.mj),b)}else null!=this.Tf&&clearTimeout(this.Tf),this.track&&this.track.v().active&&(this.wb(),this.track&&this.track.v().sa(!1),this.Fa&&this.Fa())};f.Zf=function(b,c){void 0!==b&&qd(b)&&!isNaN(b)&&(this.ab=b);this.updateVolume(c)};
f.updateVolume=function(b){this.seeking||(b=this.mi(b),this.i.jPlayer("volume",b/100),0<b&&(this.qe=(new Date).getTime(),this.Za=!1,this.Ee()))};f.mi=function(b){null==b&&(b=Em()?0:Dm());this.Gf=b;var c=Math.round(Math.pow(10,this.ab/20)*b*ho());k.info("VOLUME--\x3e gain:",this.ab,", volume:",b,", old adjusted:",Math.round(Math.pow(10,this.ab/20)*b),", new adjusted:",c);return Math.min(100,c)};f.Ee=function(){null!=this.Ha||this.Za||(this.Ha=Cd(),ps(this.track,this.Ha))};
f.wb=function(){if(null!=this.Ha){var b=Cd(),c=b-this.Ha;qs(this.track,this.Ha,b,c,0);this.Ha=null;null!=v.j&&this.track&&this.track.v()&&co(v.j,this.track.v().e(),c)}};f.Ii=function(){return null!=this.elapsedTime?this.elapsedTime:0};f.sr=function(){this.stop();this.track&&this.track.v().No()};function Qs(b){this.i=b;this.Fa=this.track=null;this.Gf=this.ab=0;this.qe=(new Date).getTime();this.Id=this.Za=!1;this.Rd=0;this.Tf=this.elapsedTime=null;this.De=!1;this.Yy=0;this.cm=this.Ha=null;this.rc=this.Ap=this.Wm=this.Xm=this.Qk=0;this.fh=!1}function Rs(b){return b.i&&b.i.getState?b.i&&b.i.getState():""}f=Qs.prototype;f.hh=function(){return"playing"==Rs(this)};f.Cj=function(b,c){k.info("*** StrobePlayer: setInUse",b);this.fh=b;this.track=c;this.qe=b?(new Date).getTime():0;this.Fa=null};
f.load=function(b){this.track=b;this.Rd=b.ie();b.n instanceof An&&(this.Rd-=Cd()-b.n.iv);var c=1E3*this.Rd;this.Id=!0;this.i.setMediaResourceURL(b.n.Yu);b=Math.min(864E5,c);this.rc=c-b;this.Tf=setTimeout(r(this,this.mj),b)};f.reload=function(){this.Id||(this.Id=!0,this.i.setMediaResourceURL(this.track.n.Yu))};f.handleError=function(b){this.Id=!1;3<=this.Ap++?(this.track&&(this.track.ac=!0,this.track.v().Br("StrobePlayer ERROR:"+b)),this.Fa&&this.Fa(b),this.Ap=0):setTimeout(r(this,this.reload),1E3)};
function Ss(b){try{var c=b.i.getBitrateForDynamicStreamIndex(b.i.getCurrentDynamicStreamIndex()),d=Cd();b.Xm+=0==b.Qk?1:d-b.Qk;b.Qk=d;b.Wm+=c}catch(e){}}f.play=function(){this.De=!0;if(!this.Id&&null!=this.i&&this.i.play2)try{this.i.play2()}catch(b){}};f.pause=function(){this.Id||(this.Yy=this.Gf,this.updateVolume(0),this.De=!1,this.wb())};f.xj=function(){this.De=!0;this.Id||(this.updateVolume(this.Yy),this.Ee())};f.suspend=function(){this.De=!1;this.Za=!0;if(null!=this.i&&this.i.pause)try{this.i.pause()}catch(b){}this.wb()};
f.stop=function(){this.De=!1;if(!this.Id){if(null!=this.i&&this.i.pause)try{this.i.pause()}catch(b){}this.wb()}};f.rg=function(b){this.Fa=b};f.mj=function(){if(0<this.rc){var b=Math.min(864E5,1E3*this.rc);this.rc-=b;setTimeout(r(this,this.mj),b)}else null!=this.Tf&&clearTimeout(this.Tf),this.track&&this.track.v().active&&(this.wb(),this.track&&this.track.v().sa(!1),this.Fa&&this.Fa())};f.Zf=function(b,c){void 0!==b&&qd(b)&&!isNaN(b)&&(this.ab=b);this.updateVolume(c)};
f.updateVolume=function(b){if(this.De||this.Za)b=this.mi(b),null!=this.i&&this.i.setVolume&&this.i.setVolume(b/100),0<b&&(this.qe=(new Date).getTime(),this.Za&&(this.De=!0,this.reload()),this.Za=!1)};f.mi=function(b){null==b&&(b=Em()?0:Dm());this.Gf=b;var c=Math.round(Math.pow(10,this.ab/20)*b*ho());k.info("VOLUME--\x3e gain:",this.ab,", volume:",b,", old adjusted:",Math.round(Math.pow(10,this.ab/20)*b),", new adjusted:",c);return Math.min(100,c)};
f.Ee=function(){null!==this.Ha||this.Za||(this.Ha=Cd(),ps(this.track,this.Ha))};f.wb=function(){if(null!=this.Ha){var b=Cd(),c=b-this.Ha;qs(this.track,this.Ha,b,c,this.Wm/this.Xm);this.Qk=this.Xm=this.Wm=0;this.Ha=null;null!=v.j&&this.track&&this.track.v()&&co(v.j,this.track.v().e(),c)}};f.Ii=function(){return null!=this.elapsedTime?this.elapsedTime:0};f.sr=function(){this.stop();this.track&&this.track.v().No()};function Ls(){this.bt=!1;this.Ht=this.qy=0}Ls.prototype.LE=function(b,c,d){0<b&&0==b%10&&99>d&&(b=d-c,c=5>b&&b<this.qy,0.5>b||c||this.bt?(this.Ht++,3==this.Ht&&z.b(jg)):this.Ht=0,this.qy=b,this.bt=!1)};var Ts=!1,Us=[],Vs=[],Ws={},Xs=!1,Ys=null,Zs=0,$s=0;
function at(){var b=jm(dm),c=jm(em);if(null!=b&&null!=c){var d=b.start,c=c.seconds;s("live_tracking",{station_id:b.stationId,track_token:b.trackToken,track_start:(new Date(1E3*d)).format("yyyy-mm-dd HH:MM:ss",!0),track_end:(new Date(1E3*(d+c))).format("yyyy-mm-dd HH:MM:ss",!0),elapsed_seconds:c,event_type:"end",platform:"web",vendor_id:t,device_code:pe,app_version:z.$a,device_os:le(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},v.j);Xm(null);Ym(null)}}
function bt(){var b=$.jPlayer.prototype.play;$.jPlayer.prototype.play=function(c){if(this.status.pP){var e=this.status.media.mp3;null==e&&(e=this.status.media.m4a);if(!isNaN(c)&&-1==e.indexOf("&lo="+c))return}b.call(this,c)};var c=$.jPlayer.prototype.pause;$.jPlayer.prototype.pause=function(b){if(this.status.pP){var e=this.status.media.mp3;null==e&&(e=this.status.media.m4a);if(!isNaN(b)&&-1==e.indexOf("&lo="+b))return}c.call(this,b)}}
function ct(b){Zs++;$('<div id="jPlayer'+Zs+'"></div>').css({width:0,height:0}).appendTo("body").jPlayer({wmode:"window",swfPath:z.Ug().lE,solution:z.Ug().Jv,supplied:b,ready:function(c){setTimeout(r(this,function(){dt($(this),b,c)}),0)},error:function(b){Xs||(Xs=!0,b.jPlayer.error.type==$.jPlayer.error.NO_SOLUTION&&z.b(Yg,b.jPlayer.error.message))}})}
function et(){Zs++;var b="strobePlayer"+Zs,c="strobeMediaPlayback"+Zs;$('<div id="'+c+'"></div>').css({width:0,height:0,position:"absolute"}).appendTo("body");swfobject.embedSWF("/include/3rd-party/strobe/StrobeMediaPlayback.swf",c,1,1,"10.1.0",{},{src:"about:blank",controlBarMode:"none",streamType:"liveOrRecorded",verbose:!0,autoPlay:!1,expandedBufferTime:30,minContinuousPlayback:30,javascriptCallbackFunction:"strobeCallback"},{allowFullScreen:"false"},{id:b,name:b})}
function dt(b,c,d){"m4a"==c||"mp3"==c?(b=new ks(b,d.jPlayer.flash.used),"m4a"==c?Vs.push(b):"mp3"==c&&Us.push(b),Ts||(d.jPlayer.flash.used&&k.info("AudioPlayer initialized: Using Flash audio for "+c),d.jPlayer.html.used&&k.info("AudioPlayer initialized: Using native HTML5 audio for "+c),0<Vs.length&&0<Us.length&&(Ts=!0,Ys&&Ys()))):"m3u8"==c?(b.attr("id"),new Os(b)):"f4m"==c&&(Ws[b.id]=new Qs(b))}
function js(b){var c=null,d=null,e;if(b&&ns(b))e=_.map(Ws,function(b){return b});else{d=b&&b.ge()?b.ge():"mp3";if("m4a"!=d&&"mp3"!=d)return k.error("No AudioPlayer for type "+d),null;e="m4a"==d?Vs:Us}var h=_.select(e,function(b){return!b.fh});0<h.length?c=h.shift():(c=_.min(e,function(b){return b.qe}),c.sr());b instanceof rs?c.Cj(!0,null):c.Cj(!0,b);0==h&&e.length<z.Ug().Kk&&(b&&ns(b)?et():null!=d&&ct(d));return c}
function ft(){k.info("jplayer successfully initialized, resetting consecutive error count to 0");$s=0}function gt(b){k.warn("jPlayer error (count: "+$s+"): "+b.message);$s++;5<=$s&&(k.warn("too many consecutive jplayer errors.  re-initializing jplayer"),z.b(Wg),$s=0)}function ht(){z.b(bi)}
window.strobeCallback=function(b,c,d){Ws[b]?(b=Ws[b],"timeupdate"!=c&&k.info("*** StrobePlayer: state="+b.i.getState()+", handleCallbackEvent",c,d),"emptied"==c?"ready"==Rs(b)&&(b.Id=!1,b.De&&(b.play(),b.updateVolume(),Ss(b))):"play"==c?b.track&&b.track.v().active&&(b.Ee(),b.track.v().nj(b.track,0)):"timeupdate"==c&&b.track.v().active&&(b.Ap=0,b.elapsedTime=Math.floor(d.currentTime),z.b(Ye,{isLive:!0,elapsedTime:b.elapsedTime,totalTime:b.Rd,percentPlayed:d.currentTime/b.Rd}))):((c=$("#"+b))&&0<c.length&&
dt(c[0],"f4m",null),c[0].addEventListener("switchingChange","onStrobeDynamicStreamSwitch"),c[0].addEventListener("mediaError","onStrobeMediaError"))};window.onStrobeDynamicStreamSwitch=function(){Ss(Ws)};window.onStrobeMediaError=function(b,c,d){Ws.handleError(d)};var Es={},ts={};function Cs(b){if(null!=ts[b.e()]){ts[b.e()]=null;var c=Fm(b.e()),d=Dd()-c;null==c||36E5<d?it(b.e()):setTimeout(function(){it(b.e())},36E5-d)}}function Bs(b){Cs(b);var c;(c=null==v.j)||(c=0<=v.j.$s);return c?Gm(b.e())>=(null!=v.j&&null!=v.j.$s?v.j.$s:6):!1}function it(b){jt(b);Es[b]=setInterval(function(){jt(b)},36E5)}function jt(b){var c=Dd(),d=rl?jm(Ll):null;null==d&&(d={});d[b]=c;om(Ll,d);Hm(b,0)};function Ds(b){var c=b.listeningTimestamp;b=b.monthlyListening;om(Hl,0);om(Il,c);z.b(rf,b);c=v.j;null!=c&&"REGISTERED"==c.s&&(b=Math.round(Number(b)/60/60),b>=c.er?(om(vl,c.dg),z.b(tf,b)):310<=b&&z.b(sf,b))};var kt,lt=null,mt=null;function nt(b){kt=!1;var c=D.U();null!=c&&(kt=c.hh());z.b(bi);ot();var c=new rs(b.url),d=js(c);d.Zf(b.gain);d.rg(function(c){b.reachedEnd=!0;null!=c&&(b.isError=!0);z.b(af,b);kt&&z.b($h)});d.load(c.url,"m4a").play();lt=d;mt=b}function ot(){null!=lt&&(lt.stop(),lt=null,mt.reachedEnd=!1,z.b(af,mt),kt&&z.b($h))}function pt(b){null!=lt&&lt.updateVolume(b)};function qt(){this.We=0;this.Zb=null;this.nc=!1;z.c(Ae,r(this,function(b){clearTimeout(this.Zb);this.zb=null;null!=b&&b.cz&&this.Bf()}));z.c(Ye,r(this,function(){this.nc=!0}));z.c($h,r(this,function(){this.nc=!0}));z.c(bi,r(this,function(){this.nc=!1}));z.c(Xj,r(this,function(){this.nc=!0}))}f=qt.prototype;
f.Bf=function(){var b=v.j;null!=b&&(clearTimeout(this.Zb),this.zb=null,b=hex_md5(b.t).toUpperCase(),this.Wa("http://lt150.tritondigital.com/lt?sid=9718&vid="+b,r(this,function(b){b=this.Vh(b);var d=b.valid;this.$c(!d,"newSession",null);d?(this.We=0,this.zb=b.guid,this.Ve=b.intervalSeconds,this.Zb=Yd(this,this.$e,1E3*b.intervalSeconds)):(this.We++,10>this.We&&Yd(this,this.Bf,5E3))})))};
f.Vh=function(b){var c;null!=b&&pd(b)&&0!=b.indexOf(",")?(c=b.split(","),b=parseInt(c[0],10),c=c[1]):c=b=null;var d=!(isNaN(b)||null==c||0==c.length);d&&c.indexOf("\n")==c.length-1&&(c=c.substring(0,c.length-1));return{intervalSeconds:b,guid:c,valid:d}};
f.$e=function(){if(this.nc)if(null==this.zb)this.Bf();else{var b=(new Date).getTime();this.Wa("http://lt150.tritondigital.com/lt?guid="+escape(this.zb),r(this,function(c){c=this.Vh(c);c.valid?(this.$c(!1,"ping",this.zb),this.Ve=c.intervalSeconds):this.$c(!0,"ping",this.zb);this.Zb=Yd(this,this.$e,1E3*this.Ve-((new Date).getTime()-b))}));this.Sh=(new Date).getTime()}else null!=this.Sh&&18E4<(new Date).getTime()-this.Sh&&(this.zb=null),this.Zb=Yd(this,this.$e,1E3*this.Ve)};
f.Wa=function(b,c){var d="",e=v.j;null!=e&&(d=e.G()?1:0,d="&yob="+e.sg+"&gender="+Qn(e)+"&zip="+e.tb()+"&hasads="+d+"&devcat=WEB&devtype=WEB");b+=d+"&cb="+de();lp(b,c,c)};f.$c=function(b,c,d){var e=v.j;null!=e&&5>e.t%100&&s("ando",{event:c,is_error:b,birth_year:e.sg,gender:Qn(e),zip:e.tb(),guid:d,vendor_id:"100",device_code:"1880",app_version:z.$a,device_os:le(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},e)};function rt(){this.We=0;this.Zb=null;this.nc=!1;z.c(Ae,r(this,function(b){clearTimeout(this.Zb);this.zb=null;null!=b&&b.cz&&this.Bf()}));z.c(Ye,r(this,function(){this.nc=!0}));z.c($h,r(this,function(){this.nc=!0}));z.c(bi,r(this,function(){this.nc=!1}));z.c(Xj,r(this,function(){this.nc=!0}))}
rt.prototype.Bf=function(){var b=v.j;null!=b&&(clearTimeout(this.Zb),this.zb=null,b=hex_md5(b.t).toUpperCase(),this.Wa("http://lt.andomedia.com/lt?sid=9718&vid="+b,r(this,function(b){b=this.Vh(b);b.valid?(this.We=0,this.zb=b.guid,this.Ve=b.intervalSeconds,this.Zb=Yd(this,this.$e,1E3*b.intervalSeconds)):(this.We++,10>this.We&&Yd(this,this.Bf,5E3))})))};
rt.prototype.Vh=function(b){var c;null!=b&&pd(b)&&0!=b.indexOf(",")?(c=b.split(","),b=parseInt(c[0],10),c=c[1]):c=b=null;var d=!(isNaN(b)||null==c||0==c.length);d&&c.indexOf("\n")==c.length-1&&(c=c.substring(0,c.length-1));return{intervalSeconds:b,guid:c,valid:d}};
rt.prototype.$e=function(){if(this.nc)if(null==this.zb)this.Bf();else{var b=(new Date).getTime();this.Wa("http://lt.andomedia.com/lt?guid="+escape(this.zb),r(this,function(c){c=this.Vh(c);c.valid&&(this.Ve=c.intervalSeconds);this.Zb=Yd(this,this.$e,1E3*this.Ve-((new Date).getTime()-b))}));this.Sh=(new Date).getTime()}else null!=this.Sh&&18E4<(new Date).getTime()-this.Sh&&(this.zb=null),this.Zb=Yd(this,this.$e,1E3*this.Ve)};
rt.prototype.Wa=function(b,c){var d="",e=v.j;null!=e&&(d=e.G()?1:0,d="&yob="+e.sg+"&gender="+Qn(e)+"&zip="+e.tb()+"&hasads="+d+"&devcat=WEB&devtype=WEB");b+=d+"&cb="+de();lp(b,c,c)};var st=0;function zs(b){this.jy=b.initiateEvent;this.UF=b.eventArgs;this.Bo=b.ackEvent;this.qv=b.ackEventCallback;this.ns=b.responseEvent;this.Lv=b.bailOutEvent;this.uE=b.bailOutPeriod?b.bailOutPeriod:2E3;this.Ra=b.callback||$.noop;this.zK=++st;k.debug("UIActivityManager : creating instance: "+this.zK);this.px=!1}
function ys(b){b.px?k.error("UIActivityManager : handoff called more than once!"):(b.px=!0,b.ns&&b.jy?(b.ki=setTimeout(r(b,function(){this.Ra?(k.debug("UIActivityManager : bailing out.."),this.Lv&&z.b(this.Lv),this.Ra(),this.Ra=null):k.debug("UIActivityManager : bailout cancelled since the callback has already been handled.")}),b.uE),b.Bo&&z.c(b.Bo,r(b,function(){k.debug("UIActivityManager : ACK event ..");clearTimeout(this.ki);this.ki=null;z.ma(this,this.Bo);this.qv&&this.qv()})),z.c(b.ns,r(b,function(){this.Ra?
(k.debug("UIActivityManager : RESPONSE event .."),this.ki&&(clearTimeout(this.ki),this.ki=null),z.ma(this,this.ns),this.Ra.apply(null,arguments),this.Ra=null):k.debug("UIActivityManager : RESPONSE event cancelled, callback has been handled.")})),z.b(b.jy,b.UF)):b.Ra())}function ws(b,c){ys(new zs({initiateEvent:Se,eventArgs:b,responseEvent:Te,callback:c}))};var F={};
(function(b){function c(b){if(b.callback){var c=b.callback;if(b.ads){var d=D.U(),e=d.k;Ka(function(b){b?(p(e,b),d.Ow(!0,c)):(k.debug("No AudioAdTracks to add to queue: "+b),c())},b.ads)}else c()}else k.error("AudioAdReadyForCache handler did not receive a callback for indicating when process completes! This could potentially block playback.")}function d(b){return 0>=F.pb.length?!1:C.ya()?!0:b&&!F.ef?(k.debug(0<"Have cached ad - "+F.pb.length),k.debug("isnt User init - "+!b),k.debug("is test mode - "+F.ef),
k.debug("Returning null - no ad will be played"),!1):!0}function e(b,c){var d=[];if(_.isArray(c))for(var e=0;e<c.length;e++){var h=c[e];h.ib==Wb?sa(h.n):h.ib!=xb&&h.ib!=kb||d.push(h)}0<d.length?b(d):b(null)}function h(b,c){if(null===c)b(null);else{var d=D.U().k,e=!1;d.Bb()?d._delayedInStationAd&&(e=!0):c.n.nw&&(e=!0);e?(F.Te=c,F.qd=Cd()):F.as();c.ib==Wb?(sa(c.n),b(null)):c.ib==xb||c.ib==kb?(e=d.Bb()&&d._adIntervalMinutes?d._adIntervalMinutes:c.n.hL,d=F.Cl(d.e()),1==d.nf&&(d.tv=e),b(c)):b(null)}}function l(b){F.og=
Cd();F.Xn=1;F.qd=0;F.Xe=0;F.ng=0;F.mg=0;F.Yn=0;F.tk=0;F.sk=!1;null!=b&&(b.it&&(F.Qn=b.it,F.rk=b.it),b.kt&&(F.Pn=b.kt,F.qk=b.kt))}function p(b,c){if(C.ya()?!F.ro:1){var d=C.wa(b);if(C.ya())if(null!=c){k.debug("Chronos - Fetch Audio Ad has returned a chronos related response, pushing it onto the _cachedAds array... ("+c.length+")");for(var e in c){var h=c[e];k.debug("pushing - ",h);F.pb.push(h)}}else k.debug("Chronos - Fetch Audio Ad has returned "+c);else F.pb.push(c);d?(d=!1,d=C.ya()?null!=c&&0<c.length&&
c[0].ib==Wb:null==c||c.ib==Wb,e=F.Cl(b.e()),1<e.nf&&d?(k.debug("Advertiser station: resetting ad index "+(C.ya()?"(Chronos)":"(non-chronos)")),e.nf=1,ka(!1,null,function(b){C.ya()?(k.debug("Advertiser station: Pushing "+b.length+" ads onto _cachedAds"),0<b.length&&F.pb.push(b[0])):(k.debug("Advertiser station: Pushing 1 ad onto _cachedAds"),F.pb.push(b));L()})):L()):(C.ya()||E(c),L())}else L()}function q(b){b&&b instanceof lo||(F.Ne=[]);b&&(b instanceof lo?(F.Zn=!0,sa(b)):F.vk&&(fa("Playlist playback continued before Ad was received. Will ignore audio ad response until next opportunity."),
F.ro=!0))}function u(b){b&&!b.cb()&&(F.ng=Cd(),Gb())}function y(){Gb();var b=D.U();b&&C.wa(b.k)?F.$h(pc):F.$h(yb)}function E(b){if(b){var c=b.n.sm,d=mo(F.Ne[0]);if(c&&(!d||d.Cm!=c.Cm||d.position<=c.position)){c=[];b=b.n.sm;for(d=b.position;d<b.size;d++)c.push((new bp(d+1,b.size,b.Cm)).vf());F.Ne=c;fa("Generated "+c.length+" _adPodTokens: ",F.Ne)}}}function L(){z.b(Kk);F.vk=!1;F.ro=!1;C.ya()||F.nh()}function M(){if(!v.j||!v.j.G())return!1;var b=v.j.me();if(!C.ya()&&b&&0!=F.Ne.length)return!0;var c=
Cd(),d=!1,e=D.U().k;C.ya()?(fa("Chronos is enabled"),d=F.qg):C.wa(e)?(b=F.lg[e.e()])&&c>F.qd+60*b.tv&&(d=!0):(d=b?F.qk:F.Pn,b=b?F.rk:F.Qn,d=F.qg&&c>F.mg+F.Sn&&c>F.og+d&&c>F.qd+b&&c>F.ng+F.Tn&&c>F.Xe+F.Rn);!F.ef||D.r instanceof vs||(fa("Test mode enabled"),d=!0);fa("Ready for Audio ad: : now : "+c+" : since start : "+(c-F.og)+" : since sv : "+(c-F.mg)+" : since lv : "+(c-F.ng)+" : since la : "+(c-F.qd)+" : since ld : "+(c-F.Xe)+" : _userActive : "+F.qg+" : _cachedAds : "+F.pb.length+" : delayed ISA : "+
(null!=F.Te)+" : ready : "+d);return d}function Q(b,c,d,e,h){if(null==c||0==c.length)fa("Web audio ad is null or empty"),fp("Audio ad was blocked",F.Se,"Web audio ad is null or empty",F.Yh),b(null);else if(c==C.Oh)b(null);else{F.SK=Cd();d=C.qj(c,F.Yh,F.Se);var l=d.moathearability;null!=l&&(F.cd=l);d.adToken=e;d.adRequestMetaData=h;d.isInStationAd=F.Se==pc;c=F.ax(d,c);fa("Got AudioAdTrack: ",c);b(c)}}function ka(b,c,d){if(v.j&&v.j.G()){var e=v.j.t,e={segment:e.charAt(e.length-1)},h=!C.wa(D.U().k),
l=v.j,l=v.Xc()&&!l.p();h&&l&&(e.index=F.Xn);if(h=D.U()){C.wa(h.k)&&(l=F.Cl(h.e()),e.isa=l.nf,k.debug("_sendAdRequest, isa="+e.isa));l=h.k;l.Ga()&&(e.playlist=l.Ga());C.Yf(e,D.U().k,D.lx());C.Ge(e);d=C.ya()?_.bind(Ka,null,d):_.bind(Q,null,d);var p=B.Ki();C.ya()?(h=h.FG(),h||(h=D.r),C.Dz({currentStationData:l,options:e,adToken:c,callback:d,forcedAudioAd:F.Wu,lastDisplayAdTime:F.Xe,requestType:p,subZone:F.Yh,currentSize:F.Se,isInStationAd:F.Se==pc,currentStationTrack:h,currentStationTrackType:null==
h?"":h.n.yo,isUserInitiated:b,handlerType:Jg})):C.SN(p,e,c,h.k.e(),d,d)}else fa("No station available for ad flow."),d(null)}else fa("Attempt to send audio ad request when ads are disabled"),d(null)}function Ka(b,c){if(c===C.Oh)return b(null),!1;var d=[];_.each(c,function(b){var c=b.response;"AUDIO_AD"!==c.adType?k.error("Received Audio Ad of incorrect type: "+c.adType):d.push(F.ax(b.parsedContent,b.content))});b(d);return 0<d.length}function ra(b,c){fa("Impression of urlType '"+c+"' failed: "+b.message)}
function Oa(b){fa("Impression of urlType '"+b+"' succeeded.");"tracking"==b&&(C.ya()||F.nh())}function sa(b){F.OP&&(F.Mo||(F.Mo=0),F.Mo+=1);C.wa(D.U().k)||F.Xn++;C.Wa(b,Oa,ra)}function Gb(){F.pb=[];F.Te=null;fa("Flush")}function fa(b){if(!k.enabled){var c=Array.prototype.slice.call(arguments,0);"Chrome"==BrowserDetect.browser||"Firefox"==BrowserDetect.browser?(c.unshift("color:green"),c.unshift("%cAudioAdManager : ")):c.unshift("AudioAdManager : ");"Explorer"!=BrowserDetect.browser&&k.debug.apply(k,
c)}}var Wb="HOUSE",xb="PLAYLIST",kb="DEVICE_AD",Jg="AUDIO",yb=dp.AUDIO_AD_SIZE,pc=dp.AUDIO_IN_STATION_AD_SIZE;F.init=function(){F.ef=!!Ko()||"true"==No()||"true"==A._data.audioAdTestMode;F.NB=F.ef?1E4:dp.PRELOAD_SECONDS;F.MB=F.ef?0:dp.PRELOAD_PERCENTAGE;F.og=Cd();F.Pn=Oo();F.qk=Oo();F.Rn=zo(A._data.timeBetweenDisplayAndAudioAd,5);F.Tn=zo(A._data.timeBetweenVideoAndAudioAd,60);F.Qn=Po();F.rk=Po();F.Sn=120;F.qd=0;F.Xe=0;F.ng=0;F.mg=0;F.qg=!0;F.Yh="tuner";F.$h(yb);F.Wu=Ko()||"";F.pb=[];F.Te=null;F.Xn=
1;F.Ne=[];F.vk=!1;F.lg={};F.Zn=!1;F.tk=0;F.jC="pandora5413215442154";F.iC=document.getElementById("playerBar");F.cd=null;F.df=0;F.ot=!1;F.Ic=!1;F.Co=!1;F.Do=!1;F.Eo=!1;F.em=null;F.Yn=0;F.sk=!1;F.ro=!1;z.c(Ae,r(F,l));z.c(ii,r(F,y));z.c(Dk,r(F,function(b){F.qg=b}));z.c(Sf,r(F,function(){F.mg=Cd();Gb()}));z.c(Qk,r(F,u));z.c(Pk,r(F,u));z.c(Ek,r(F,function(){F.Xe=Cd()}));z.wh(Oe,r(F,q));z.c(Mk,r(F,c));z.c(Oe,r(this,function(b){b&&b instanceof lo&&null!=F.cd?F.ot=!0:F.xz()}));z.c(zk,r(this,function(b){if(F.ot&&
null!=F.cd){var c=Math.floor(b.currentTime);!F.Ic&&0==F.df&&1>c?(F.df=b.duration,F.em=F.vK(),F.Ic=!0,F.wd("AdAudioStart",Dm()/100)):F.Ic&&!F.Co&&c==Math.floor(F.df/4)?(F.Co=!0,F.wd("AdAudioFirstQuartile",Dm()/100)):F.Ic&&!F.Do&&c==Math.floor(F.df/2)?(F.Do=!0,F.wd("AdAudioMidpoint",Dm()/100)):F.Ic&&!F.Eo&&c==Math.floor(3*F.df/4)&&(F.Eo=!0,F.wd("AdAudioThirdQuartile",Dm()/100))}}));z.c(Pe,r(this,function(b){F.Ic&&null!=F.cd&&(0==b.remaining_seconds?F.wd("AdAudioComplete",Dm()/100):F.wd("AdStopped",
Dm()/100),F.xz())}));z.c($h,r(this,function(){F.Ic&&null!=F.cd&&F.wd("AdPlaying",Dm()/100)}));z.c(bi,r(this,function(){F.Ic&&null!=F.cd&&F.wd("AdPaused",Dm()/100)}));z.c(li,r(this,function(b){F.Ic&&null!=F.cd&&F.wd("AdVolumeChange",b/100)}))};F.xz=function(){F.ot=!1;F.Ic=!1;F.Co=!1;F.Do=!1;F.Eo=!1;F.cd=null;F.em=null;F.df=0};F.SG=function(){return{level1:F.Wg("Level1"),level2:F.Wg("Level2"),level3:F.Wg("Level3"),level4:F.Wg("Level4"),slicer1:F.Wg("Slicer1"),slicer2:F.Wg("Slicer2")}};F.Wg=function(b){try{var c=
F.cd.indexOf(b),d=F.cd.substring(c+b.length+1),c="&";"Slicer2"==b&&(c='"');return d.substring(0,d.indexOf(c))}catch(e){return""}};F.wd=function(b,c){null!=F.em&&F.em.dispatchEvent({type:b,adVolume:c})};F.vK=function(){var b=F.iC,c=F.SG(),d=F.df,e=F.jC,h=window.location.protocol,l="https:"===h?"z":"js",p=document.createElement("script"),q=[],c={adData:{ids:c,duration:d,url:""},dispatchEvent:function(b){this.sendEvent?(q&&(q.push(b),b=q,q=!1),this.sendEvent(b)):q.push(b)}},d="_moatApi"+Math.floor(1E8*
Math.random());window[d]=c;p.type="text/javascript";b&&b.insertBefore(p,b.childNodes[0]||null);p.src=h+"//"+l+".moatads.com/"+e+"/moatvideo.js#"+d;return c};F.reset=function(){z.ma(F)};F.$h=function(b){F.Se=b;z.b(Lk,{size:b})};F.Cl=function(b){var c=F.lg[b];c||(c=new tt,F.lg[b]=c);return c};F.pK=function(b){var c=F.Cl(b);c.nf++;k.debug("Incremented current ad index to "+c.nf+" (on "+b+")")};F.nh=function(){if(F.vk)return!0;if(!M())return fa("loadAudioAd: not ready for ads yet."),!1;if(0<F.pb.length&&
0==F.Ne.length)return fa("loadAudioAd: audio ad(s) have been cached"),!1;if(F.Te)return F.pb=[F.Te],F.Te=null,fa("loadAudioAd: had a _delayedInStationAd, moving it to _cachedAds."),!0;var b="none",c=D.U(),d=c.k,e=C.wa(d);!C.ya()&&v.j.me()&&c.Vz()?b=F.Ne.shift():e&&F.$h(pc);F.vk=!0;ka(!1,b,_.bind(p,null,d));return!0};F.HG=function(b){F.Bl(!1,function(c){null!=c?b(c):b(null)})};F.TN=function(b){var c=b.k,d=F.lg[c.e()];d?(d.nf=1,F.pb=[],F.Te=null,F.lg[c.e()]=d,fa("Reset the ISA sequence for ",b,F),F.nh()):
fa("Tried to reset the ISA sequence for a station, but it had no ad data.",b,F.lg)};F.VG=function(){return F.pb.length};F.Gi=function(b){if(!d(b))return null;b=F.pb.shift();if(!b)return k.debug("Ad is null"),k.debug("Returning null - no ad will be played"),null;F.as();var c=b.n;if(b.ib==Wb)return k.debug("house ad, registering impression"),sa(c),k.debug("Returning null - no ad will be played"),null;if(b.ib!==xb&&b.ib!==kb)return k.debug("ad isn't correct type"),k.debug("Returning null - no ad will be played"),
null;fa("Elapsed time since ad fetch and playback: "+(Cd()-F.SK)+" seconds");F.Zn=!1;F.Yn++;F.sk||setTimeout(function(){!F.Zn&&c&&(F.tk++,fp("Audio ad fail","Audio","Audio ad failed to play - "+c.ib+" - "+c.mf,"radio"),!F.sk&&F.Yn==F.tk&&2700<Cd()-F.og&&(F.sk=!0,fp("Audio ads failed","Audio","Audio ads failed - "+F.tk+" - "+v.j.t,"radio")))},8E3);k.debug("Returning an ad for playback");return b};F.as=function(){F.qd=Cd()};F.Bl=function(b,c){F.$h(pc);var d;d=C.ya()?_.bind(e,null,c):_.bind(h,null,c);
ka(b,"none",d)};F.I2=function(){return F.qd};F.ax=function(b,c){var d=new vs(b,D.U());if(b.type==xb){fa("PLAYLIST audioAd",b);d.Nk=d.Nk.replace("__AUTH_TOKEN__",encodeURIComponent(""+In()));var e=d.n.sb().replace("__AUTH_TOKEN__",encodeURIComponent(""+In()));d.n.Nb=e}else b.type==Wb?fa("HOUSE audioAd",b):b.type==kb?b.creative_token&&0!==b.creative_token.length?(fa("DeviceAd audioAd : "+b.creative_token,b),e="/util/mediaserverPublicRedirect.jsp?at="+encodeURIComponent(""+In())+"&ct="+encodeURIComponent(b.creative_token),
d.Nk=e+"&type=audio",d.n.Nb=e+"&type=tile"):(fa("DeviceAd audioAd : HOUSE - Converting to TYPE house",b),d.ib=Wb):(fa("chronos - UNKNOWN audioAd: "+b.type,b),c&&0!=c.indexOf("<a target=")&&(fa("chronos - Unknown Web AudioAd type "+c),fp(c,F.Se,"chronos - Unknown Web AudioAd type ",F.Yh)));return d};F.F2=function(){var b=Math.floor((new Date).getTime()/1E3);return"Ready for Audio ad:\n : now : "+b+"\n : since start : "+F.og+"\n : since sv : "+F.mg+"\n : since lv : "+F.ng+"\n : since la : "+F.qd+"\n : since ld : "+
F.Xe+"\n : _userActive : "+F.qg+"\n : _cachedAds : "+F.pb.length+"\n : RPCService.listenerData.isAdPodEligible() :"+v.j.me()+"\n : AudioAdManager._TIME_BETWEEN_AUDIO_AD_PODS: "+F.rk+"\n : AudioAdManager._TIME_BETWEEN_AUDIO_ADS:"+F.Qn+"\n : AudioAdManager._MIN_AD_POD_START_INTERVAL : "+F.qk+"\n : AudioAdManager._MIN_AD_START_INTERVAL : "+F.Pn+"\n : AudioAdManager._TIME_BETWEEN_DISPLAY_AUDIO_ADS : "+F.Rn+"\n : AudioAdManager._TIME_BETWEEN_VIDEO_AUDIO_ADS : "+F.Tn+"\n : AudioAdManager._TIME_BETWEEN_SVN_AUDIO_ADS : "+
F.Sn+"\n ready = AudioAdManager._userActive \n\t&& now > AudioAdManager._lastSvnInteractionTime + AudioAdManager._TIME_BETWEEN_SVN_AUDIO_ADS \n&& now > AudioAdManager._startTime + minAdStartInterval \n&& now > AudioAdManager._lastAudioAdTime + timeBetweenAudioAds \n&& now > AudioAdManager._lastVideoAdTime + AudioAdManager._TIME_BETWEEN_VIDEO_AUDIO_ADS \n&& now > AudioAdManager._lastDisplayAdTime + AudioAdManager._TIME_BETWEEN_DISPLAY_AUDIO_ADS \n \tready ="+F.qg+" \n \t \t"+b+" > "+(Number(F.mg)+
Number(F.Sn))+" \n \t \t"+b+" > "+(Number(F.og)+Number(F.qk))+" \n \t \t"+b+" > "+(Number(F.qd)+Number(F.rk))+" \n \t \t"+b+" > "+(Number(F.ng)+Number(F.Tn))+" \n \t \t"+b+" > "+(Number(F.Xe)+Number(F.Rn))+" \n"};b.AudioAdManager=F})(this);var ut=null,vt=!0,wt=null;function xt(){z.c(Nk,yt);z.c(Ok,zt);z.c(Qk,At);z.c(yk,function(b){As("return",b)});z.c(ei,function(){As("thumbsdown")});z.c(Wi,function(){As("move")})}function As(b,c){null!=ut?(fp("Video",b,"callback hasn't completed","radio"),c&&c()):(ut=c||null,vt=!0,wt=setTimeout(Bt,5E3),z.b(Sk,{interaction:b,currentTrack:D.r}))}function yt(){vt=!1;wt&&(clearTimeout(wt),wt=null)}function zt(b){vt=!1;wt&&(clearTimeout(wt),wt=null);b&&b.ad||(ut&&ut(),ut=null)}
function At(b){b&&b.cb()||(ut&&ut(),ut=null)}function Bt(){vt&&(ut&&ut(),ut=null)};function vs(b,c){this.rd=b;this.rd["class"]="AudioAdTrack";this.g=c;this.n=new lo(b);this.Nk=b.audio;this.Dt=this.ps="";this.Di=b.gain;this.ac=!1;this.ib=b.type;this.Di=""==this.Di||isNaN(Number(this.Di))?null:Number(this.Di)}td(vs,hs);vs.prototype.ly=function(){return!0};vs.prototype.ge=function(){return"mp3"};vs.prototype.wl=function(){return this.Nk};vs.prototype.Qc=function(){return this.Di};function tt(){this.tv=0;this.nf=1;this.Hk=[]};var Ct;Ct=function(b){$.ajax({dataType:"json",url:"/radioAdEmbed.html",complete:function(c,d){b("error"===d)}})};function Dt(b){var c=b.track.n;"skipped"==b.reason&&c instanceof no&&z.b(qk,{artistMessageId:c.od,artistUid:c.Qe,metric:m.Kb.SB(),isOnDemand:c.Ef()})}function Et(b){b instanceof no&&!b.Xu&&(b.Xu=!0,z.b(qk,{artistMessageId:b.od,artistUid:b.Qe,metric:m.Kb.PA(),isOnDemand:b.Ef()}))};var xs=null;function Ft(){z.c(Ae,function(b){Gt(b)});z.c(Be,function(b){Gt(b)});z.c(el,function(b){b=Ht(b);b instanceof Fp&&It(b,!1);xs=b});z.c(fl,function(b){b=Ht(b);b instanceof Fp&&It(b,!0);xs=b});z.c(gl,function(){null!=xs&&xs instanceof Fp&&z.b(il);xs=null;null!=v.j&&(v.j.jn=null)});z.c(il,function(){xs=null;null!=v.j&&(v.j.jn=null)})}function Gt(b){b.G()||null==xs?b.jn&&z.b(fl,b.jn):z.b(gl)}
function It(b,c){var d=v.j;if(d.G()){null!=xs&&xs instanceof Fp&&z.b(il);var e=b.eD;if(!c&&e){var h=!1,l=D.U();null!=l&&(h=l.hh());l=js();l.load(e,"mp3");var p=function(){h&&z.b($h)};l.rg(p);z.b(bi,!1);z.b(Li);var q=!1;setTimeout(function(){q||(z.b(hl,b),q=!0,p())},5E3);Ns(l,function(){q||(setTimeout(function(){z.b(hl,b)},100),q=!0)});z.c(Vg,function(){z.ma(this,Vg);p()});l.play();s("value_exchange",{action:"vx_lead_in_audio_played",line_id:b.Th,creative_id:b.pd,offer_name:b.xk,truex_instance_id:b.zo,
vendor_id:t,device_id:pe},d)}else z.b(hl,b)}}function Ht(b){if(!b)return null;var c=b.offerName;if(!c)return null;var d=null;0==c.indexOf("uninterrupted")&&(d=new Fp(b));return d};function Gs(b){R.call(this,b);this.np=this.Sf=!1;this.ye=null;this._tracks=[];for(var c=0;c<b.tracks.length;c++)this._tracks.push(new Jt(b.tracks[c],this));this.stationData=this.k=new un(b,_.map(this._tracks,function(b){return b.n}));this.Pr();this._tracks=[]}td(Gs,R);f=Gs.prototype;f.Pr=function(){};f.start=function(b){b||!this.Fb&&!this.Kc?this.Lj(b):this.hf(!0,!1,r(this,function(){this.Sf=!0}))};f.yz=function(){this.Lj()};
f.Lj=function(b){this.active=!0;(new Date).getTime()>=this.k._expiration.getTime()?(b=$.extend({},{stationStart:!0,isOnDemand:!0,stationId:this.e(),didExpire:!0}),z.b(Ih,b)):(this.Km=this.paused=!1,b?(this.Fb=this.ve=this.Kc=!1,this.qc(r(this,function(){if(0<this._tracks.length)this.sa(!0);else{k.warn("CustomContentStation.start tried to play a custom content station with no tracks");var b=$.extend({},{stationStart:!0,isOnDemand:!0,stationId:this.e(),customContentStation:!0});z.b(Ih,b)}}),b)):null==
this.r||this.Fb?(this.Fb=!1,0==this.R.length?this.qc(r(this,function(){if(0<this._tracks.length)this.sa(!0);else{k.warn("CustomContentStation.start tried to play a custom content station with no tracks");var b=$.extend({},{stationStart:!0,isOnDemand:!0,stationId:this.e(),customContentStation:!0});z.b(Ih,b)}})):this.sa(!0)):this.Zj())};
f.sa=function(b){_.isUndefined(b)&&(b=!0);k.info("[CustomContentStation.playNextTrack] ",this.k.ea(),b);0==this.R.length&&(this.Kc=!0);if(this.active&&!this.xc)if(this.xc=!0,this.Xq=!this.r||this.r instanceof yn||this.r.n.Ec?null:this.r.o(),this.Hh(),(new Date).getTime()>=this.k._expiration.getTime()){this.xc=!1;var c=$.extend({},{stationStart:!0,isOnDemand:!0,stationId:this.e(),didExpire:!0});z.b(Ih,c)}else this.ve||this.Kc?(this.ve=this.Kc=!1,this.Fb=!0,this.xc=!1,this.Ae?z.b(og,this.e()):this.hf(!1,
!1,r(this,function(){this.Sf=!0}))):ws({userInitiated:b},r(this,function(){if(this.Ga()&&this.Og)F.HG(r(this,function(c){c&&(c.g=this,this.k._delayedInStationAd||this.R.splice(0,0,c));this.Dg(b)})),this.Og=!1;else{var c;if(c=this.np?F.Gi(!1):F.Gi(!0===b))c.g=this,this.R.splice(0,0,c);this.Dg(b)}this.np=!1}))};
f.Dg=function(b){if(this.active)if(0<this.R.length){var c=this.R.shift();c instanceof vs||this.Zl(c)?(this.r=this.Qd[c.o()]=c,this.Zj(),this.paused||(ms(this.r),this.r.load(),this.r.play()),this.xc=!1,this.r.n.Ej(b)):(k.info("Dumping Track - it doesn't belong on the current station"),this.xc=!1,this.sa(!1))}else this.xc=!1,this.hf(!1,!1,r(this,function(){this.Sf=!0}))};
f.yr=function(b){b==m.d.gu()?Kt(this):b==m.d.jk()?z.b(Jh):b==m.d.Ot()?(b=$.extend({},{stationStart:!0,isOnDemand:!0,stationId:this.e(),didExpire:!0}),z.b(Ih,b)):this.handleError()};function Kt(b){var c=$.isEmptyObject(b.Qd);b.Ae&&c?(b.Ae=!1,b.qc(r(b,function(){this.sa(!1)}))):c?b.hf(!0,c,r(b,function(){this.Sf=!0})):(b.ve=!0,b.Kc=!0)}
f.qc=function(b,c){b&&(this.we=b);c&&(this.ye=c);this.Ld||(this.ye||$.isEmptyObject(this.Qd)||this.Sf?(this.Ld=!0,this.Sf&&(this.Sf=!1,this.np=!0),v.GG(this,r(this,function(b){var c=this;c._tracks=[];c.R=[];b=b.tracks;this.ye&&0===$.grep(b,function(b){return b.musicId==c.ye}).length&&(k.warn("CustomContentStation.loadPlaylist tried to play a custom content track that does not exist"),z.b(Kh,c.e()),this.ye=null);$.each(b,r(this,function(b,d){var p=new Jt(d,c);c._tracks.push(p);this.ye?p.n.o()==this.ye&&
(c.R.push(p),this.ye=null):c.R.push(p);c.bn(p.Qc())}));vn(this.k,_.map(this._tracks,function(b){return b.n}));z.b(Dg,this.k);this.Kc=this.Ld=!1;this.ph&&0<this.R.length&&(this.xt(),this.ph=!1);this.we&&(this.we(),this.we=null);this.Ae=!1;b.length&&Ds(b[0])}),r(this,function(b){k.warn("CustomContentStation.start got ERROR on getCustomContentStation",b);this.Ld=!1;b=b instanceof Bd?b.code:null;"FEATURE_TEMPORARILY_UNAVAILABLE"==b?z.b(Zj):this.yr(b)}))):(this.Ld=!1,Kt(this)))};f.xt=function(){};
f.kA=function(){};f.ht=function(){};f.Vz=function(){return!1};function Jt(b,c){b.stationId=c.e();this.rd=b;this.rd["class"]="CustomContentTrack";this.g=c;this.n=new zn(b,b.audioURL);this.de=b.audioTokenId;this.ps=b.isSeed;this.Dt=b.userSeed;this.oA=b.trackToken;this.Ka=this.ac=!1;this.Ff()&&(z.Ug().Kk=2)}td(Jt,hs);Jt.prototype.ge=function(){return"mp3"};var Lt=!1,eq=null,uq=[],Mt=null,Nt=1,Ot=[],Pt=[],Qt=null,Rt=!0;
function St(){var b=A._data.promotedStation;b&&(Lt=!0,eq=b);z.c(ii,function(b){b=b.stationId;Rt||b&&Qt&&b==Qt||(Qt=b,(b=D.Rc(b))&&(b.Dl()||b.Og&&(sn(b.k)||!b.X()))||z.b(Eg))});z.eb(Be,function(){setTimeout(function(){z.b(Eg)},1)});z.eb(hl,function(){setTimeout(function(){z.b(Fg,[])},1)});z.eb(il,function(){setTimeout(function(){z.b(Eg)},1)});z.c(Eg,function(){var b=v.j;b&&!b.p()&&b.FK&&(Lt?v.vG():(b=D.U(),b=C.QG(b?b.k:null),v.$G(b)))});z.c(bf,function(b){k.info("Got recommended station suggestions:",
b);$.each(b,function(b,c){$.each(c,function(b,c){var d=c.musicId.substr(0,1);"R"==d?Ot.push({stationName:c.artistName,initialSeed:c.musicId}):"C"==d?Ot.push({stationName:c.composerName,initialSeed:c.musicId}):"G"==d?Pt.push({stationName:c.stationName,initialSeed:c.musicId}):k.error("Unknown error with parsing recommended station suggestions.",c)})})})}
function Tt(){var b=null;0<Ot.length&&0<=Ot.length-Nt?b=new Ut({stationName:Ot[Ot.length-Nt].stationName,initialSeed:Ot[Ot.length-Nt].initialSeed}):0<Pt.length&&0<=Pt.length-Nt&&(b=new Ut({stationName:Pt[Pt.length-Nt].stationName,initialSeed:Pt[Pt.length-Nt].initialSeed}));Mt&&(Mt.destroy(),Mt=null);b&&(Mt=b,Nt++)}function Vt(){$.each(uq,function(b,c){c.destroy()});uq=[]}
function cq(b){var c=v.j;0<uq.length&&Vt();uq=b;0==uq.length?c.wQ&&(Tt(),Mt?(b.push(Mt),z.b(Fg,b)):setTimeout(function(){Tt();Mt&&(b.push(Mt),z.b(Fg,b))},1E3)):z.b(Fg,b);Rt=!1}function dq(b){fn("user-getpromotedstations-error");k.error("error getting promoted stations",b);Rt=!1};function Fs(b){R.call(this,b)}td(Fs,R);function Ut(b){b.isQuickMix=!1;b.promotedStationCampaignId=null;b.recommendedStation=!0;b.isOnDemandStation=!1;b.isCreator=!0;R.call(this,b)}td(Ut,R);function kn(){var b=r(this,this.init);z.c(Vg,gt);z.c(Ug,ft);z.c(Wg,ht);z.c(Ae,at);Ys=b;bt();ct("m4a");ct("mp3");et()}var aq="";function Wt(){var b=25+window._sts%100,b=$("div").eq(b).html();null!=b&&(window.divhash=hex_md5(b))}
kn.prototype.init=function(){if(Ts){fn("radio");k.info("Radio initializing");Wt();var b=Xt();D.init();St();Yt(b);Zt();v.init();C.init(D,v);F.init();xt();z.c(Ki,nt);z.c(Li,ot);z.c(li,pt);z.c($h,ot);z.c(Oe,ot);z.c(ii,ot);z.c(ni,hq);z.c(oi,iq);z.eb(oi,jq);z.c(pi,kq);z.c(qi,mq);z.c(ri,lq);z.c(si,nq);z.c(Ai,oq);z.c(Dj,pq);z.c(Bi,rq);z.c(zi,sq);z.c(Ii,Cq);z.c(Ji,Dq);z.c(Ci,tq);z.c(Gg,vq);z.c(Hg,xq);z.c(Di,zq);z.c(Ei,Bq);z.c(Fi,Aq);z.c(Gi,Fq);z.c(Ig,Gq);z.c(Ni,Hq);z.c(ti,Kq);z.c(ui,Lq);z.c(Oi,Iq);z.c(Pi,
Rq);z.c(Qi,Sq);z.c(Ri,Oq);z.c(Si,Pq);z.c(Ti,Qq);z.c(Ui,Tq);z.c(Vi,Uq);z.c(Xi,Vq);z.c(Yi,Eq);z.c(Zi,Wq);z.c($i,Jq);z.c(bj,Xq);z.c(dj,Yq);z.c(ej,Yq);z.c(ij,Zq);z.c(jj,$q);z.c(pj,ar);z.c(qj,cr);z.c(tj,br);z.c(rj,dr);z.c(sj,er);z.c(uj,fr);z.c(xj,hr);z.c(yj,ir);z.c(zj,jr);z.c(Aj,kr);z.c(Bj,gr);z.c(vj,lr);z.c(wj,mr);z.c(ek,nr);z.c(gk,qr);z.c(ik,or);z.c(ak,ur);z.c(bk,vr);z.c(ck,wr);z.c(Cj,xr);z.c(fj,yr);z.c(hj,zr);z.c(gj,Ar);z.c(Ej,Br);z.c(Fj,Cr);z.c(Gj,Dr);z.c(Hj,Er);z.c(Ij,Fr);z.c(Jj,Gr);z.c(Kj,Jr);z.c(Nj,
Ir);z.c(Mj,Kr);z.c(Rj,Hr);z.c(Sj,Mr);z.c(dk,Nr);z.c(Tj,Or);z.c(Uj,Pr);z.c(Vj,Rr);z.c(Wj,Sr);z.c(oj,qq);z.c(li,Vr);z.c(Zk,Tr);z.c($k,Ur);z.c(Jk,Zr);z.c(Gk,Yr);z.c(Hk,Wr);z.c(Ik,Xr);z.c(Oe,Qr);z.c(lj,Mq);z.c(vi,Nq);z.c(cl,Lr);z.c(kk,tr);z.c(mk,rr);z.c(ok,sr);z.c(qk,$r);z.c(rk,as);z.c(sk,bs);z.c(tk,cs);z.c(uk,fs);z.c(vk,ds);z.c(xk,es);z.c(kl,pr);z.c(Ak,gs);Ft();z.c(Pe,Dt);z.c(Oe,Et);new qt;new rt;this.wq=this.DA=!1;this.td();z.c(Ae,r(this,this.td));z.c(Zg,r(this,function(){v.Mq();v.Xc()||this.td()}));
z.c(Lh,r(this,function(){v.Mq();v.Xc()||this.td()}));z.wh(Mg,r(this,function(){this.wq||null!=v.j||(this.wq=!0,z.b(Ie,[]),z.b(xe))}));fn("radio-done")}};
kn.prototype.td=function(){fn("user-auth");var b=!1;this.wq=this.lz=!1;if(0==Mp)fn("user-auth-sync"),v.MP(r(this,function(b){$.cookie("fr",null);Mp=b;Np=Cd();this.td()}),function(b){k.error("Error during sync:",b.message)});else{null==A._data.csat||v.Xc()||(sm(),vm(A._data.csat),b=!0,fn("user-auth-customerservice"));if(!b){if(v.Xc()||this.$v)this.$v=!1;else{var c=jm(vl);fn("user-auth-canlisten");v.HE(null==c?"":c,r(this,function(b){b.canListen?(this.Ay=!1,z.b(Pf,!1)):(z.b(Pf,!0),this.Ay=!0);this.$v=
!0;this.td()}),function(b){k.error("Error during canListen:",b.message)});return}null==A._data.pt||v.Xc()||this.DA||(fn("user-auth-rsat"),this.DA=!0,v.Mq());if(!v.Xc()&&Um()){fn("user-auth-persist");k.info("performing auto-login using persited credentials");z.b(ni,{username:jm(Bl),password:jm(Cl)||"",keepLoggedIn:um()});return}this.Ay&&v.Ul()}!v.Xc()&&v.aK()?(fn("user-auth-anonymous"),k.info("authenticating using persisted anonymous credentials"),v.oE(jm(ul),r(this,function(c){c instanceof xd&&(k.error("Can't log in with persisted anonymous credentials",
c.message),A._data.pt=null,v.Ul(),b?alert("Customer service login failed. Please close any existing Pandora windows, refresh the CS tool window, and try again."):this.td())}))):v.Xc()?(k.info("listener is authenticated",v.j),fn("user-auth-done"),$t(this)):(k.info("no persisted credentials, creating new anonymous user"),fn("user-auth-new"),v.hw(r(this,function(b){k.error("Could not create new user:",b.message)})))}};
function Xt(){for(var b="3r21a#".split("").reverse().join(""),c=$(b+" ~ div").eq(10),d=(new Function("return "+c.html()))(),e=d[0]+d[1]+d[2],h=String["edoCrahCmorf".split("").reverse().join("")],l="",p=6;12>p;p++)var q=h(d[p]),l="A"<=q&&"Z">=q||"a"<=q&&"z">=q?l+q:l+"_";d=d.slice(e,e+16);e=we(window[l],d);for(h=0;4>h;h++)p=d.slice(4-h),e=we(e,p);aq=(new Function(e))();$(b).detach();c.detach();return l}
function $t(b){ge(Ao())||b.lz?b.Wc():v.WD(Ao(),r(b,function(b){k.info("RPCService.addTrackingCode returned",b);this.lz=!0;$t(this)}))}
kn.prototype.Wc=function(){var b=v.j;b.or?(fn("user-auth-init-newbie"),z.b(Ie,[]),z.b(xe)):(b.bE&&(om(vl,null),z.b(Pf,!1)),fn("user-auth-getstations"),v.jH(r(this,function(b){fn("user-auth-getstations-success");te()&&b&&0<b.length?(z.c(Je,this.eA),z.b(Ie,b)):(z.b(Ie,b),this.eA(b))}),r(this,function(b){fn("user-auth-getstations-error");k.error("error getting station list",b);b instanceof Bd&&b.code==m.d.Zt()&&v.Ul()})),fn("user-auth-init-done"),setTimeout(function(){z.b(Eg)},100))};
function Yt(b){for(var c=window["hsahvid".split("").reverse().join("")].split(""),d=we(aq,c),e="[",h=0;h<c.length;h++)0<h&&(e+=", "),e+='"'+c[h]+'"';window[b]=we('_m(unescape("'+escape(d)+'"), '+(e+"]")+")",hex_md5(window._t()).split(""))}kn.prototype.eA=function(b){if(0<b.length){var c=jm(Jl);c&&0==$.grep(b,function(b){return b.e()==c}).length&&(c=null);c||(c=b[0].e());z.b(ze,c)}z.b(xe)};
function Zt(){var b=aq.substring(30);setTimeout(function(){var c=(new Date).getTime()-window._ts.getTime(),d=window.getClientKey();"undefined"==typeof d||null==d?fn("getClientKey failed : "+c):32==d.length&&30==d.indexOf(b)&&(aq=d)},10)};var au="SONG_SLIDES",bu="REGISTRATION_PANEL",cu="TOO_YOUNG_PANEL",du="LOGIN_PANEL",eu="FORGOT_PASSWORD_PANEL",fu="RESET_PASSWORD_PANEL",gu="RESET_PASSWORD_BAD_TOKEN_PANEL",hu="REQUEST_PASSWORD_HELP_PANEL",iu="REQUEST_PASSWORD_HELP_SUCCESS_PANEL",ju="FORGOT_PASSWORD_CONFIRMATION_PANEL";var ku="activity",lu="feed",mu="connect",nu={NQ:ku,F_:"stations",BR:"bookmarks",aZ:"likes",iU:"following",hU:"followers",gU:lu,MR:mu};var S=0,ou=S++,pu=S++,qu=S++,ru=S++,su=S++,tu=S++,uu=S++,vu=S++,wu=S++,xu=S++,yu=S++,zu=S++,Au=S++,Bu=S++,Cu=S++,Du=S++,Eu=S++,Fu=S++,Gu=S++,Hu=S++,Iu=S++,Ju=S++,Ku=S++,Lu=S++,Mu=S++,Nu=S++,Ou=S++,Pu=S++,Qu=S++,Ru=S++,Su=S++,Tu=S++,Uu=S++,Vu=S++,Wu=S++,Xu=S++,Yu=S++,Zu=S++,$u=S++,av=S++,bv=S++,cv=S++,dv=S++,ev=S++,fv=S++,gv=S++,hv=S++,iv=S++,jv=S++,kv=S++,lv=S++,mv=S++,nv=S++,ov=S++,pv=S++,qv=S++,rv=S++,sv=S++,tv=S++,uv=S++,vv=S++,wv=S++,xv=S++,yv=S++,zv=S++,Av=S++,Bv=S++,Cv=S++,Dv=S++,Ev=S++,Fv=
S++,Gv=S++,Hv=S++,Iv=S++,Jv=S++,Kv=S++,Lv=S++,Mv=S++,Nv=S++,Ov=S++,Pv=S++,Qv=S++,Rv=S++,Sv=S++,Tv=S++,Uv=S++,Vv=S++,Wv=S++,Xv=S++,Yv=S++,Zv=S++,$v=S++,aw=S++,bw=S++,cw=S++,dw=S++,ew=S++,fw=S++,gw=S++,hw=S++,iw=S++,jw=S++,kw=S++,lw=S++,mw=S++,nw=S++,ow=S++,pw=S++,qw=S++,rw=S++,sw=S++,tw=S++,uw=S++,vw=S++,ww=S++,xw=S++,yw=S++,zw=S++,Aw=S++,Bw=S++,Cw=S++,Dw=S++,Ew=S++,Fw=S++,Gw=S++,Hw=S++,Iw=S++,Jw=S++,Kw=S++,Lw=S++,Mw=S++,Nw=S++,Ow=S++,Pw=S++,Qw=S++,Rw=S++,Sw=S++,Tw=S++,Uw=S++,Vw=S++,Ww=S++,Xw=S++,
Yw=S++,Zw=S++,$w=S++;
$.each({RU:ou,Y_:pu,TX:qu,UX:ru,qW:su,nW:tu,jY:uu,EW:vu,VX:wu,kY:xu,aX:yu,mY:zu,BW:Au,oY:Bu,lV:Cu,iV:Du,LV:Eu,iX:Fu,LX:Gu,MX:Hu,rB:Iu,NV:Ju,QW:Ku,RX:Lu,SX:Mu,fY:Nu,zW:Ou,bY:Pu,xW:Qu,$X:Ru,cY:Su,gY:Tu,dY:Uu,yW:Vu,aY:Wu,OX:Xu,VY:Yu,fW:Zu,rX:$u,mW:av,LY:bv,KV:cv,PV:dv,FW:ev,dW:fv,cW:gv,BY:hv,AY:iv,ZX:jv,iY:kv,XX:lv,QY:mv,sB:nv,pV:ov,eY:pv,nY:qv,YX:rv,QX:sv,PX:tv,lY:uv,WX:vv,mV:wv,hY:xv,oV:yv,B0:zv,A0:Av,CU:Bv,pR:Cv,iZ:Dv,c0:Ev,xS:Fv,wS:Gv,yS:Hv,jR:Iv,V0:Jv,w0:Kv,v0:Lv,t0:Mv,q0:Nv,dS:Ov,eS:Pv,fS:Qv,xU:Rv,
iR:Sv,M0:Tv,H0:Uv,fR:Vv,oR:Wv,k1:Xv,f2:Yv,u_:Zv,y0:$v,z0:aw,FZ:bw,a2:cw,b2:dw,nX:ew,oX:fw,S_:gw,R_:hw,o0:iw,p0:jw,mR:kw,lR:lw,SS:mw,tS:nw,s0:ow,r0:pw,d2:qw,Z0:rw,EZ:sw,c_:tw,SU:uw,h_:vw,zU:ww,$_:xw,W_:yw,X_:zw,Z_:Aw,V_:Bw,gZ:Cw,hR:Dw,gR:Ew,r1:Fw,T0:Gw,K0:Hw,L0:Iw,N0:Jw,tU:Kw,zZ:Lw,k0:Mw,DR:Nw,u0:Ow,E1:Pw,RS:Qw,R0:Rw,BZ:Sw,m0:Tw,G0:Uw,tB:Vw,vW:Ww,T_:Xw,g2:Yw,ZZ:Zw,YZ:$w},function(){});function ax(b){if(!pd(b))return!1;var c=b.indexOf("@"),d=b.length,e=b.indexOf(".");return-1==b.indexOf("@")||0==c||c==d-1||-1==e||0==e||"."==b.substr(d-1,d)||-1!=b.indexOf("@",c+1)||"."==b.substring(c-1,c)||"."==b.substring(c+1,c+2)||-1==b.indexOf(".",c+2)||-1!=b.indexOf(" ")?!1:!0}function bx(b){return pd(b)?6<=b.length:!1}function cx(b){return pd(b)?/^\s*\d{4}\s*$/.test(b):!1}function dx(b){return pd(b)?(new Date).getFullYear()-Number(b)>("AU"===Ro()?15:13):!1}
function ex(b,c){if(!c||!b)return!1;try{return RegExp(b).test(c)}catch(d){return!/^\s*$/.test(c)}}function fx(b){return pd(b)?b==Pa()||b==Qa():!1}function gx(b){if(3>b.length||4<b.length)return!1;for(var c=0;c<b.length;c++){var d=b.charCodeAt(c)-48;if(0>d||9<d)return!1}return!0}
function hx(b){for(var c=[],d=0,e=0;e<b.length;e++){var h=b.charCodeAt(e)-48;0<=h&&9>=h&&c.push(h);42==b.charCodeAt(e)&&d++}if(4<d&&13<=d+c.length&&16>=d+c.length)return!0;if(13>c.length||16<c.length)return!1;c.reverse();for(d=b=0;d<c.length;d+=2)b+=c[d];for(d=1;d<c.length;d+=2)b+=2*c[d]%10+(5<=c[d]?1:0);return 0==b%10}function ix(b){return pd(b)?"ANNUAL"==b||"MONTHLY"==b||"END_OF_MONTH"==b:!1}function jx(b){return pd(b)?"visa"==b||"mastercard"==b||"discover"==b||"americanexpress"==b:!1}
function kx(b){var c="unknown";if(pd(d))return c;var d=b.replace(/[\s-]+/g,""),d=d.replace(/\*/g,"1");d.match(/^4[0-9]{12}(?:[0-9]{3})?$/)?c="visa":d.match(/^5[1-5][0-9]{14}$/)?c="mastercard":d.match(/^3[47][0-9]{13}$/)?c="americanexpress":d.match(/^6(?:011|5[0-9]{2})[0-9]{12}$/)&&(c="discover");return c}function lx(b,c){var d=new Date;return b>d.getMonth()&&c==d.getFullYear()||c>d.getFullYear()}
function mx(b){if(null==b)return!1;if(/^[A-Z0-9]{13,13}$/.test(b))return!0;var c;c=[];for(var d=0;d<b.length;d++){var e=b.charAt(d);"0"<=e&&"9">=e&&c.push(e)}c=c.join("");return 9!=c.length&&10!=c.length?!1:11>=b.length}function nx(b){return null!=b&&-1<b.indexOf("invalid_email")}function ox(b){return null!=b&&-1<b.indexOf("invalid_zip_code")}function px(b){return null!=b&&-1<b.indexOf("invalid_demographic_info")}function qx(b){return null!=b&&-1<b.indexOf("update_demographic_info")};function rx(b){var c=b.el;"undefined"===typeof b.Jf&&(b.Jf="Invalid field");$(c).hasClass("error")||($(c).addClass("error"),$('<div class="errorDialog"><p>'+b.Jf+"</p></div>").insertAfter(c),this.el=$(c).next(".errorDialog")[0]);b.N&&b.na&&ne(b.N,b.na)}rx.prototype.ds=function(){$(this.el).prev().removeClass("error");$(this.el).remove()};
rx.prototype.close=function(){var b=!1,c=["Webkit","Moz","O","ms","Khtml"],d=document.createElement("div");void 0!==d.style.animationName&&(b=!0);if(!1===b)for(var e=0;e<c.length;e++)if(void 0!==d.style[c[e]+"AnimationName"]){b=!0;break}b||this.ds();this.el.addEventListener("animationend",r(this,this.ds),!1);this.el.addEventListener("webkitAnimationEnd",r(this,this.ds),!1);$(this.el).addClass("outro")};function sx(b,c,d){var e=[];b=$.trim(b);if(0<b.length){var h={};$.each(b.split("\n"),function(b,p){var q=p.split("\t");if(!h[q[0]]){h[q[0]]=!0;var u=q[0].substr(0,1),y=q[0];if("TT0"==y)d||e.push(new tx({stationName:q[1],searchableStationId:q[0],index:b}));else if("S"==u)e.push(new ux({songTitle:q[2],artistSummary:q[1],musicId:q[0],index:b}));else if("R"==u)e.push(new vx({artistName:q[1],musicId:q[0],index:b}));else if("C"==u)e.push(new wx({composerName:q[1],musicId:q[0],index:b}));else if("G"==u)c||
e.push(new xx({genreName:q[1],musicId:q[0],index:b}));else if("T"==u&&"TT0"!=y)u=q[0].substring(1),e.push(new yx({stationName:q[1],stationId:u,index:b}));else if("A"==u)u=q[0].substring(1),e.push(new zx({stationName:q[1],stationId:u,index:b}));else return k.error("Unknown autocomplete music id type (ViewUtil)",p),!0;0==b&&e[0]&&(e[0]=new Ax({},{model:e[0]}))}})}return e}var Bx,Cx;Bx=function(b){return!Cx(b)&&b.match(/.+?@/)};Cx=function(b){return b.match(/.+?@.+?\..+/)};
function Dx(b,c){b.jScrollPane?(b.jScrollPane({hideFocus:!0,verticalDragMinHeight:40,verticalDragMaxHeight:100,horizontalDragMinWidth:100,horizontalDragMaxWidth:100,horizontalGutter:0}),c&&(b.attr("scrollerName",c),$(".jspDrag",b).unbind("mousedown",Ex),$(".jspDrag",b).bind("mousedown",Ex),$(".jspTrack",b).unbind("mousedown",Ex),$(".jspTrack",b).bind("mousedown",Ex),$(".jspPane",b).unbind("mousewheel",Ex),$(".jspPane",b).bind("mousewheel",Ex),b.bind("keyup",Fx),b.bind("keyup",Fx))):je("Can't create jScrollPane. el="+
b)}function Fx(b){_.any([38,40,33,34,35,36],function(c){return c==b.which})&&Ex(b)}function Ex(b){b=$(b.target).closest("[scrollerName]");T(Bw,$(b).attr("scrollerName"))}function Gx(b,c){var d=b.closest(".scroll-pane");if(d&&d.is(":visible"))try{d.data("jsp").scrollToElement(c)}catch(e){}}
function Hx(b,c,d,e,h){Ix();var l=$("#lightboxTmpl").tmpl({classname:b,dont_close:h});e?$(".lightbox_footer",l).append(e):$(".lightbox_footer",l).remove();c?$(".lightbox_header",l).append(c):$(".lightbox_header",l).remove();$(".lightbox_content",l).append(d);$(".close",l).bind("click",function(){l.fadeTo(400,0,function(){$(l).trigger("closed")});return!1});l.css("top",$(window).scrollTop()+200+"px");l.css("opacity",0);"first_interaction"!=b&&"postreg_ad"!=b||l.css("margin-left","auto");b=null;te()&&
(b=function(){l.css("filter","none !important")});return l.fadeTo(400,1,b)}
function Jx(b,c,d){Ix();var e=$("#onboarding-lightboxTmpl").tmpl({classname:"",dont_close:void 0});d?$(".onboarding-lightbox_footer",e).append(d):$(".onboarding-lightbox_footer",e).remove();b?$(".onboarding-lightbox_header",e).append(b):$(".onboarding-lightbox_header",e).remove();$(".onboarding-lightbox_content",e).append(c);$(".close",e).bind("click",function(){e.fadeTo(400,0,function(){$(e).trigger("closed")});return!1});e.css("opacity",0);b=null;te()&&(b=function(){e.css("filter","none !important")});
return e.fadeTo(400,1,b)}function Ix(b){$(".lightbox:visible").each(function(c,d){b&&0!=$(b,d).length||$(".close",$(d)).click()})}
function Kx(b,c){$(".likeButton[data-like-type="+c.xf()+"]",b).each(function(){var b=$(this);if(b.attr("data-like-objectid")==c.Fc){var e=Lx(c.xf(),c.Fc);b.removeClass("unknown");e="genrestation"==e?"genre station":e;fe(c.Ue)&&"0"!=c.Ue?(b.addClass("selected"),b.attr("data-like_id",c.Ue),b.css("background-image","url(/img/likes/liked.png)"),b.text(Hc()+e)):(b.removeClass("selected"),b.removeAttr("data-like_id"),b.css("background-image","url(/img/likes/like.png)"),b.text(Ic()+e))}})}
function Lx(b,c){b==m.Le.mP()?b="track":b==m.Le.dE()&&"C"==c.charAt(0)&&(b="composer");return b}function Mx(b){b.target.getAttribute("data-like_id")&&$(b.target).text(Lc());$(b.target).css("background-image",$(b.target).hasClass("selected")?"url(/img/likes/liked-hover.png)":"url(/img/likes/like-hover.png)")}
function Nx(b){if(b.target.getAttribute("data-like_id")){var c=Lx(b.target.getAttribute("data-like-type"),b.target.getAttribute("data-like-objectid"));$(b.target).text(Hc()+c)}$(b.target).css("background-image",$(b.target).hasClass("selected")?"url(/img/likes/liked.png)":"url(/img/likes/like.png)")}
(function(b){b.fn.A2=function(){this.each(function(){var c=b(this);if("hidden"==c.css("overflow")){var d=c.html();c.width();var e=b(this.cloneNode(!0)).hide().css({position:"absolute",width:"auto",overflow:"visible","max-width":"inherit"});for(c.after(e);0<d.length&&e.width()>c.width();)d=d.substr(0,d.length-1),e.html(d+"...");c.html(e.html());e.remove()}})}})(jQuery);
(function(b){var c=b.fn.fadeOut;b.fn.fadeOut=function(){for(var d=[],e=0;e<arguments.length;e++)d.push(arguments[e]);var h=this;if(0<d.length&&"function"==typeof d[d.length-1]){var l=d[d.length-1];d[d.length-1]=function(){b.fn.hide.apply(h);l.apply(h)}}else 0==d.length&&d.push(400),d.push(function(){b.fn.hide.apply(h)});return c.apply(this,d)}})(jQuery);
(function(b){b.fn.extend({Vv:function(c){c=b.extend({Tl:window,transition:0,Cy:0,Dy:0,LA:!0,CQ:!0,lK:!0},c);return this.each(function(){var d={position:"absolute"};if(c.CQ){var e=(b(c.Tl).height()-b(this).outerHeight())/2;c.LA&&(e+=b(c.Tl).scrollTop()||0);e=e>c.Dy?e:c.Dy;b.extend(d,{top:e+"px"})}c.lK&&(e=(b(c.Tl).width()-b(this).outerWidth())/2,c.LA&&(e+=b(c.Tl).scrollLeft()||0),e=e>c.Cy?e:c.Cy,b.extend(d,{left:e+"px"}));0<c.transition?b(this).animate(d,c.transition):b(this).css(d);return b(this)})}})})(jQuery);
function Ox(b){var c=[],d=b.get("currentStation"),e=b.get("currentTrack");d&&d.B()&&e&&(d=b.get("stationList").Oc(e.e()));b=b.get("stationList");for(e=0;e<b.length;e++){var h=b.models[e];!h.X()||h.B()||h==d||h.Cb()||h.Pb()||c.push(h.toJSON())}return c}function Px(){return $("#mainContent .home").is(":visible")&&!$("#splash").is(":visible")}
function Qx(b){b=$(b);b=$("input:checkbox.styled",b);for(var c=0;c<b.length;c++){var d=$(b[c]),e=$(document.createElement("span"));e.attr("class","checkbox");d.prop("checked")&&e.addClass("checked");d.parent().prepend(e);d.change(r(d,function(){$(".checkbox",this.parent()).removeClass("pushed");this.prop("checked")?$(".checkbox",this.parent()).addClass("checked"):$(".checkbox",this.parent()).removeClass("checked")}));e.mousedown(r(d,function(){this.prop("checked")?$(".checkbox",this.parent()).addClass("pushed"):
$(".checkbox",this.parent()).removeClass("pushed")}));e.mouseup(r(d,function(){$(".checkbox",this.parent()).removeClass("pushed");this.prop("checked")?($(".checkbox",this.parent()).removeClass("checked"),this.prop("checked",!1)):($(".checkbox",this.parent()).addClass("checked"),this.prop("checked",!0));this.change()}))}}function Rx(b,c){if(null!=b&&b instanceof wn){var d=b.e(),e=c.detect(function(b){return b.e()==d});if(null!=e)return e.Ba()&&!e.X()||e.je()===m.Cc.Me()}return!1}
function Sx(b){if(ge(b))return"$0.00";var c=b.length;if(1==c)return"$0.0"+b;var d=b.substring(0,c-2);0==d.length&&(d="0");return"$"+d+"."+b.substring(c-2,c)};function Tx(b,c){var d=b.I()||ao(b);return"MONTHLY"===c?d?b.Uk.toString():Zn(b):"ANNUAL"===c?d?b.Tk.toString():b.be.toString():"END_OF_MONTH"===c?b.iN.toString():"0"}function Ux(b){return"MONTHLY"===b?"month":"ANNUAL"===b?"year":"END_OF_MONTH"===b?"month":"QUARTERLY"===b?"quarter":""}function Vx(b,c){$(".auto_renew_on",b).toggle(c);$(".auto_renew_off",b).toggle(!c)};function Wx(b){this.hp=b;this.Qg=this.Rg=null}var Xx=!1,Yx=!1;function Zx(b,c){$x(b,c,null)}
function $x(b,c,d){Xx&&!c?Yx=!0:(Xx=!0,Yx=!1,b.Rg=[],b.Qg={},(d?$(".facebookThumbnail",d):$(".facebookThumbnail")).each(function(b,c){var d=$(c);d.attr("src",Ed(d,!0))}),(d?$(".facebookName",d):$(".facebookName")).each(r(b,function(b,c){var d=$(c).attr("fbid");if(d&&""!=d&&"-1"!=d&&"0"!=d){var p=null!=this.hp?this.hp.Up(d):null;ge(p)?(-1==jQuery.inArray(d,this.Rg)&&this.Rg.push(d),this.Qg[d]?this.Qg[d].push(c):this.Qg[d]=[c]):ay($(c),p)}})),0==b.Rg.length?Xx=!1:by(b))}
function ay(b,c){b.removeAttr("fbid");null!=c&&"Facebook User"!=c&&(b.data("forcefacebook")||jQuery.trim(b.text())==jQuery.trim(b.attr("webname")))&&b.text(c)}function by(b){if(0==b.Rg.length)Xx=!1,Yx&&Zx(b,!0);else{var c=b.Rg.splice(0,100);T(Zu,{fbids:c,fbCallback:r(b,b.wG)})}}
Wx.prototype.wG=function(b){if(b&&null==b.error_code){for(var c=this.hp,d=0;d<b.length;d++)c.Ig[b[d].id+"f"]=b[d].name;for(c=0;c<b.length;c++){var d=b[c].id,e=this.Qg[d];if(e){for(var h=0;h<e.length;h++)ay($(e[h]),b[c].name);this.Qg[d]=null}}by(this)}else Xx=!1};var cy={m:"January February March April May June July August September October November December".split(" "),UG:function(){return cy.m[(new Date).getMonth()+1]},JG:function(b){var c=new Date;if(c.getTime()>b.getTime())return"unavailable";if(c.getFullYear()==b.getFullYear()&&c.getMonth()==b.getMonth()){if(c.getDate()==b.getDate()-1)return"tomorrow";if(c.getDate()==b.getDate())return"today"}return b.toLocaleDateString()}};var dy="default",ey="default";window.setActiveStyleSheet=function(b){fy(b)};window.setDefaultValance=function(b,c){dy=b;fy(dy);null!=c&&(c=c.replace("__UNIQUE__",(new Date).getTime()),(new Image(1,1)).src=c)};function gy(){fy(dy)}window.switchToDefaultValance=gy;function fy(b){null!=window.location.search&&window.location.search.match(/valance=([^&]*)/)&&(b=RegExp.$1);ey=b;document.getElementById("valanceStyle").href="/static/valances/pandora/"+ey+"/design.css"}window.setCurrentValance=fy;function hy(){}function iy(b){var c=new hy;c.bf=b["@musicId"];c.jo=Zd(b["@explorerUrl"]);c.Ou=be(b["@detailUrl"]);c.qo=b["@name"];c.oC=b["@artUrl"]||"/img/no_photo_180.png";c.Hu=b.bio||"";c.kv=[];b.similar&&$.each(b.similar,function(b,e){c.kv.push(iy(e))});jy(c);return c}function jy(b){b.name=b.qo;b.bio=b.Hu;b.artUrl=b.oC;b.detailUrl=b.Ou}hy.prototype.getName=function(){return this.qo};hy.prototype.EK=function(){return"C"==this.bf.charAt(0)};hy.prototype.o=function(){return this.bf};
function ky(b,c){return null==c?!1:c.Pe==b.bf||c.bo==b.getName()};function ly(){}function my(b){var c=new ly;c.Yb=b.data("musicid");c.Uh=b.attr("data-lyricid");c.Iu=b.data("checksum");c.bv=b.attr("data-lyricid-nonexplicit");c.Ju=b.data("checksum-nonexplicit");return c}function ny(b){var c=new ly;c.Yb=b.o();c.Uh=b.Uh;c.bv=b.Uh;c.Iu=b.av;c.Ju=b.av;return c}ly.prototype.o=function(){return this.Yb};ly.prototype.Tp=function(){return this.Iu};function oy(b,c,d){this.cv=b.replace(/\n/g,"<br>");this.Mu=c.replace(/\n/g,"<br>");this.Yb=d}oy.prototype.o=function(){return this.Yb};function py(b,c,d,e){this.DD=b;this.mv=c;this.xo=d;this.$C=e}py.prototype.C=function(){return this.DD};function qy(b,c,d,e,h,l){this.type=b;this.Fy=c;this.Xl=e;this.cl=d;this.RP=h;this.nG=l}qy.prototype.C=function(){return this.type};for(H=Wp[23];-1!=H;)switch(H){case 17:G[740]=-1533061352;H=Wp[12];break;case 15:G[310]=3061018486;H=Wp[30];break;case 48:G[241]=-919527311;H=Wp[25];break;case 19:G[561]=395964679;H=Wp[16];break;case 8:G[73]=771947589;H=Wp[28];break;case 37:G[365]=1271548579;H=Wp[14];break;case 9:G[661]=1521836994;H=Wp[11];break;case 43:G[582]=860879390;H=Wp[17];break;case 20:G[753]=-418823080;H=Wp[15];break;case 52:H=Wp[49];break;case 56:G[135]=-1616599864;H=Wp[59];break;case 28:G[633]=-639279888;H=Wp[6];break;case 16:H=
Wp[60];break;case 3:G[668]=1406003075;H=Wp[56];break;case 27:H=Wp[41];break;case 2:G[414]=1549854583;H=Wp[45];break;case 24:G[353]=382320335;H=Wp[36];break;case 30:G[220]=-89931965;H=Wp[18];break;case 7:G[993]=1850007317;H=Wp[42];break;case 50:G[798]=-67114748;H=Wp[26];break;case 18:G[142]=2873452704;H=Wp[44];break;case 23:G[539]=1491228658;H=Wp[31];break;case 31:G[878]=-950896169;H=Wp[33];break;case 26:G[265]=-600056631;H=Wp[7];break;case 14:H=Wp[50];break;case 38:G[469]=-1260926338;H=Wp[24];break;
case 46:G[852]=2511201188;H=Wp[40];break;case 10:G[416]=-197307887;H=Wp[47];break;case 6:G[1032]=1913623406;H=Wp[8];break;case 45:G[269]=1870522574;H=Wp[55];break;case 44:G[452]=2262615826;H=Wp[9];break;case 39:G[634]=2137686094;H=Wp[22];break;case 58:G[495]=2100999107;H=Wp[38];break;case 47:G[710]=-989423883;H=Wp[35];break;case 53:H=Wp[39];break;case 21:G[1009]=-1484909634;H=Wp[27];break;case 55:G[652]=-1780588840;H=Wp[1];break;case 13:H=Wp[32];break;case 33:H=Wp[43];break;case 25:G[185]=1830648549;
H=Wp[48];break;case 22:G[956]=2000833224;H=Wp[13];break;case 40:G[646]=-342567360;H=Wp[51];break;case 54:G[756]=2138374873;H=Wp[52];break;case 29:G[990]=-1562694456;H=Wp[46];break;case 11:G[139]=-233788760;H=Wp[34];break;case 57:G[569]=619118301;H=Wp[29];break;case 34:H=Wp[2];break;case 49:H=Wp[57];break;case 42:G[53]=353636178;H=Wp[10];break;case 1:G[918]=1149081892;H=Wp[5];break;case 35:G[330]=65044444;H=Wp[21];break;case 36:H=Wp[53];break;case 4:G[523]=585948585;H=Wp[20];break;case 32:H=Wp[0];
break;case 59:G[418]=1086405811;H=Wp[58];break;case 41:G[1004]=2970968853;H=Wp[37];break;case 5:G[534]=-1570293357;H=Wp[3];break;case 12:G[877]=2046969883;H=Wp[19];break;case 0:G[52]=1857826114;H=Wp[4];break;case 51:G[442]=-1769946258,H=Wp[54]};function ry(b,c,d){this.g=b;this.track=c;this.sF=d}ry.prototype.v=function(){return this.g};ry.prototype.Zg=function(){return this.track};ry.prototype.U=function(){return this.sF};function sy(b,c,d,e,h,l){this.Wh=b;this.Zu=c;this.FD=d;this.CC=e;this.yC=h;this.Ek=l}sy.prototype.fw=function(){return this.CC};sy.prototype.cb=function(){return!0===this.Ek};sy.prototype.update=function(b){var c=this.Wh;this.Zu&&b&&(c=0==b.indexOf(this.Wh)?b:c+("/"+b));c!=$.address.value()&&(this.FD?$.address.value(c):($.address.history(!1),$.address.value(c),$.address.history(!0)))};function ty(b,c,d){this.hv=b;this.sD=c;this.mC=d};function uy(b){this.data=b;this.ej=this.Ct=!1;this.Vf=!0;var c=parseInt(b.skipDelaySeconds,10);this.iP=!isNaN(c)&&isFinite(c)?Math.max(0,c):15;this.wr=b.onAdvertiserStation?b.onAdvertiserStation:!1;this.YO=b.showScrubber?b.showScrubber:!1;this.wP=b.startUrl;this.oG=b.firstQuartileUrl;this.hO=b.secondQuartileUrl;this.QP=b.thirdQuartileUrl;this.dF=b.completeUrl;this.lf=b.clickthrough_web?b.clickthrough_web:b.clickthrough_songSlide;this.lc=b.impression;this.tracker=b.tracker;this.Yk=(this.mf=b.companion)&&
"*INLINED*"==this.mf?b.companionHTML_320x50:b.companion_web;this.Yb="V1";this.Nb=b.image;this.Yd=-1;this.hb=this.Da="ad";this.no=this.pd=this.Qh=""}td(uy,yn);f=uy.prototype;f.C=function(){return this.data.type};function vy(b){return b.data.creativeType&&"yume"==b.data.creativeType}function wy(b){return b.data.uif}function xy(b){return b.data.uif?"VPAID"==b.data.mode?"VPAID":"VAST":null}function yy(b){return b.data.clickthrough_logo}function zy(b){return b.data.clickthrough_learnMore}
function Ay(b){return b.data.clickthrough_videoPlayer}function By(b){var c=b.data.movie;null==c&&(c=b.data.uif);return c}f.cb=function(){return void 0!=this.Ct&&!0==this.Ct};f.Ej=function(b){this.Ct=b};f.Yl=function(){return"HOUSE"!=this.C()&&this.Vf};f.xs=function(b){this.Vf=b};f.get=function(b){return this.data[b]};f.set=function(b,c){this.data[b]=c};function Cy(b){this.BC=$("caption_header",b).text();this.zC=$("caption",b).text();this.AC=$("caption_footer",b).text();this.tC=$("artist_id",b).text();this.HD=$("video_page_url",b).text();this.xC=$("bubble_image_url",b).text()};function Dy(b,c,d,e){this.JD=b;this.vC=c;this.AD=d;this.VC=!!e}Dy.prototype.tb=function(){return this.JD};Dy.prototype.Ta=function(){return this.vC};Dy.prototype.I=function(){return this.VC};function Ey(){}Ey=Backbone.Model.extend({initialize:function(b){this.k=b;_.extend(this,b)},getStationData:function(){return this.k}});function Fy(){}Fy=Backbone.Collection.extend({model:Ey,comparator:function(b){var c=b.B()&&b.X();return rl&&!0===jm(Kl)?c?"a":b.Cb()||b.Pb()?"b"+b.ea().toLowerCase():"z"+b.ea().toLowerCase():-1*(b.Cb()||b.Pb()?5E12-1:c?5E12:b._chronologicalSequence)},Oc:function(b){return this.detect(function(c){return c.e()==b})}});var Iy=Backbone.Collection.extend({comparator:function(b){var c;b.C()===Gy?c="A":b instanceof Ax?c="B":b.C()===tx?c="C":b.C()===vx?c="D":b.C()===wx?c="E":b.C()===ux?c="F":b.C()===xx?c="G":b.C()===Hy?c="H":b.C()===yx?c="I":b.C()===zx&&(c="J");return c+=String.fromCharCode(65+b.get("index"))}});var ux=Backbone.Model.extend({validate:function(b){if(!b.songTitle||0==b.songTitle.length)return k.error("Missing 'songTitle'"),"Missing 'songTitle'";if(!b.artistSummary||0==b.artistSummary.length)return k.error("Missing 'artistSummary'"),"Missing 'artistSummary'";if(!b.musicId||0==b.musicId.length)return k.error("Missing 'musicId'"),"Missing 'musicId'"},Qb:function(){return"#searchPopupSongItem"},kb:function(){return Ua()},C:function(){return ux}});var tx=Backbone.Model.extend({validate:function(b){if(!b.stationName||0==b.stationName.length)return k.error("Missing 'stationNameName'"),"Missing 'stationNameName'";if(!b.searchableStationId||0==b.searchableStationId.length)return k.error("Missing 'searchableStationId'"),"Missing 'searchableStationId'"},Qb:function(){return"#searchPopupCreateStationItem"},kb:function(){return Za()},C:function(){return tx}});var vx=Backbone.Model.extend({validate:function(b){if(!b.artistName||0==b.artistName.length)return k.error("Missing 'artistName'"),"Missing 'artistName'";if(!b.musicId||0==b.musicId.length)return k.error("Missing 'musicId'"),"Missing 'musicId'"},Qb:function(){return"#searchPopupArtistItem"},kb:function(){return Va()},C:function(){return vx}});var wx=Backbone.Model.extend({validate:function(b){if(!b.composerName||0==b.composerName.length)return k.error("Missing 'composerName'"),"Missing 'composerName'";if(!b.musicId||0==b.musicId.length)return k.error("Missing 'musicId'"),"Missing 'musicId'"},Qb:function(){return"#searchPopupComposerItem"},kb:function(){return Wa()},C:function(){return wx}});var xx=Backbone.Model.extend({validate:function(b){if(!b.genreName||0==b.genreName.length)return k.error("Missing 'genreName'"),"Missing 'genreName'";if(!b.musicId||0==b.musicId.length)return k.error("Missing 'musicId'"),"Missing 'musicId'"},Qb:function(){return"#searchPopupGenreItem"},kb:function(){return Xa()},C:function(){return xx}});var zx=Backbone.Model.extend({Qb:function(){return"#searchPopupAdvertiserItem"},kb:function(){return Ya()},C:function(){return zx}});function yx(){}yx=Backbone.Model.extend({initialize:function(){},validate:function(){},Qb:function(){return"#searchPopupArtistStationItem"},kb:function(){return $a()},C:function(){return yx}});function Ax(){}Ax=Backbone.Model.extend({initialize:function(b,c){this.Zr=c.model;this.set($.extend({tophit:!0},this.Zr.attributes))},Qb:function(){return this.Zr.Qb()},kb:function(){return Ta()},C:function(){return this.Zr.C()}});var Hy=Backbone.Model.extend({Qb:function(){return"#searchPopupStationItem"},kb:function(){return Za()},C:function(){return Hy}});var Gy=Backbone.Model.extend({Qb:function(){return"#searchPopupProfileItem"},kb:function(){return""},C:function(){return Gy}});function Jy(){}Jy=Backbone.View.extend({initialize:function(){z.c(ye,r(this,this.Iw));z.c(xe,r(this,this.Iw));setTimeout(function(){z.b(Xf,"splash")},1)},Iw:function(){z.b(Yf,"splash");$(this.el).fadeOut("fast")},el:$("#splash").get(0)});function Ky(){}
Ky=Backbone.View.extend({initialize:function(){this.Pd=this.model.get("stationList");U(Tv,r(this,this.CP));this.model.bind("change:currentStation",r(this,this.rA));this.model.bind("change:currentUser",r(this,this.en));this.model.bind("change:hasStations",r(this,this.en));this.model.bind("change:facebookAuthenticated",r(this,this.en));this.model.bind("change:siteLocked",r(this,this.Ts));this.model.bind("change:poisoned",r(this,this.XL));this.model.bind("change:modalPanel",r(this,this.fa));this.model.bind("change:videoAdPlaying",
r(this,this.DQ));this.Ea=new Ly($(".user_activator",this.el),null,$("#user_menu_dd"))},el:$("#brandingBar").get(0),Hj:!1,CP:function(b){this.model.get("currentStation").e()==b.e()&&this.rA()},rA:function(){var b=this.model.get("currentUser"),c=this.model.get("currentStation");null!=c?(b=$("#stationChangeSelectorTmpl").tmpl({currentStation:c.ea(),currentStationId:c.e(),stations:this.Pd.toJSON(),showDropDownMenu:b&&!b.G()}),$(".middlecolumn",this.el).empty().append(b).fadeIn(400,function(){var b=$(".middlecolumn .stationChangeList",
this.el);b.css("visibility","hidden").show();Dx($(".scroll-pane",b),"station_list");b.hide().css("visibility","visible")})):$(".middlecolumn",this.el).fadeOut().text("")},en:function(){var b=this.model.get("currentUser");if(null==b)this.Bq();else if(b.p())$(".registeredUser",this.el).hide(),$(".subscribedUser",this.el).hide(),$(".anonymousUser",this.el).show();else{$(".anonymousUser",this.el).hide();this.model.get("facebookAuthenticated")&&b.Mp?($(".userName",this.el).text(b.ic),$(".userNameImage",
this.el).empty().append('<img src="http://graph.facebook.com/v2.2/'+b.za+'/picture?type=square" width="20" height="20">').show()):($(".userName",this.el).text(b.La),$(".userNameImage",this.el).hide());$("a.helpMenuItem",this.el).attr("href","/help?un="+b.La);var c=$(".user_activator",this.el).width()+30;$("#user_menu_dd",this.el).width(Math.max(c,100));$(".notAnonymousUser",this.el).show();b.G()?($("#rightColumnDivider",this.el).show(),$(".registeredUser",this.el).show()):($(".registeredUser",this.el).hide(),
$("#rightColumnDivider",this.el).hide());b.Hv?0==$("#user_menu_dd .aaMenuItem",this.el).length&&($("#user_menu_dd .profileMenuItem",this.el).parent().after('<li class="menu able"><a class="aaMenuItem">Artist Insights</a></li>'),$("#user_menu_dd .aaMenuItem",this.el).attr("href",b.Hv).show()):0<$("#user_menu_dd .aaMenuItem",this.el).length&&$("#user_menu_dd .aaMenuItem",this.el).remove()}$(".logosubscriber",this.el).css("display","none");$(".logobusiness",this.el).css("display","none");null==b||b.G()?
$(".logo",this.el).css("display","block"):($(".logo",this.el).css("display","none"),b.I()?$(".logobusiness",this.el).css("display","block"):$(".logosubscriber",this.el).css("display","block"))},Bq:function(){$(".anonymousUser",this.el).hide();$(".notAnonymousUser",this.el).hide();$(".registeredUser",this.el).hide();$(".middlecolumn",this.el).fadeOut()},Ts:function(){this.model.get("siteLocked")?($(".able",this.el).hide(),$(".middlecolumndisabled",this.el).show()):($(".able",this.el).show(),$(".middlecolumndisabled",
this.el).hide())},DQ:function(){this.model.get("videoAdPlaying")?$(".disabled",this.el).show():$(".disabled",this.el).hide()},XL:function(){this.model.get("poisoned")?$(".registerLink",this.el).removeClass("underline").css("cursor","default"):$(".registerLink",this.el).addClass("underline").css("cursor","pointer")},fa:function(){this.model.get("modalPanel")==cu?this.Bq():this.en()},events:{"click .logo":"logoClick","click .logosubscriber":"logoClick","click .logobusiness":"logoClick","click .signoutMenuItem":"signoutMenuItemClick",
"click .helpMenuItem":"helpMenuItemClick","click .profileMenuItem":"profileMenuItemClick","click .upgradeLink":"upgradeLinkClick","mouseenter .stationChangeSelector":"mouseEnterStationSelector","mouseleave .stationChangeSelector":"mouseLeaveStationSelector","click .stationChangeSelector":"clickStationSelector","mouseenter .stationChangeList":"mouseEnterStationList","mouseleave .stationChangeList":"mouseLeaveStationList","click .stationChangeItem":"stationItemClick"},mouseEnterStationSelector:function(){this.Hj||
$(".stationChangeSelector").addClass("highlight")},mouseLeaveStationSelector:function(){this.Hj||$(".stationChangeSelector").removeClass("highlight")},clickStationSelector:function(b){if(0<$(b.target).parents(".scroll-pane").length)return!1;null!=this.model.get("currentStation")&&(this.Hj?this.Yx():$(".middlecolumn .stationChangeList",this.el).fadeIn("fast",r(this,function(){this.Hj=!0})))},stationItemClick:function(b){b=$.tmplItem(b.target).data;z.b(ii,{stationId:b.e(),userInitiated:!0});return!1},
Yx:function(){$(".middlecolumn .stationChangeList",this.el).fadeOut("fast",r(this,function(){this.Hj=!1;$(".stationChangeSelector").removeClass("highlight")}))},mouseEnterStationList:function(){this.va&&(clearTimeout(this.va),this.va=null)},mouseLeaveStationList:function(){this.va||(this.va=setTimeout(r(this,function(){this.va=null;this.Yx()}),1E3))},logoClick:function(){this.model.get("modalPanel")!=cu&&T(qu);return!1},upgradeLinkClick:function(){var b=this.model.get("currentUser"),c=My(),d="other";
if("/"==c||0==c.indexOf("/station/play"))d="nowplaying";else if(0==c.indexOf("/account"))d="account";else if(0==c.indexOf("/one")||0==c.indexOf("/payment"))d="p1";s("p1_web_upgrade_clicks",{trial_eligible:b.qh,url_path:c,url_type:d},b);return!0},signoutMenuItemClick:function(){z.b(oi);return!1},helpMenuItemClick:function(){T(uw);return!0},profileMenuItemClick:function(){var b=this.model.get("currentUser");return null!=b&&fe(b.Z)?(V("/profile/"+b.Z,!0,!0),!1):!0}});function Ny(){}
Ny=Backbone.View.extend({initialize:function(){this.Od=!1;$(".searchInput",this.el).val(Ra());this.Ea=new Oy(this.model,$(".cd_activator",this.el),$("#cd_menu_dd"));this.Qr=new Py({model:this.model});new Qy({});this.Ah=null;this.model.bind("change:currentTrack",r(this,this.cn));this.model.bind("change:currentUser",r(this,this.fq));this.model.bind("change:currentStation",r(this,this.MH));this.model.bind("change:searchText",r(this,this.Be));this.model.bind("change:modalPanel",r(this,this.fa));this.model.bind("change:forceRegistration",
r(this,this.an));this.model.bind("change:audioAdPlaying",r(this,this.kE));this.model.bind("change:videoAdPlaying",r(this,this.EQ));this.model.bind("change:siteLocked",r(this,this.an));this.model.bind("change:showingSearchResults",r(this,this.Gj));this.model.bind("change:hasStations",r(this,this.$j));this.model.bind("change:capped",r(this,this.$j));z.c(Xe,r(this,this.Ui));$.address.bind("change",r(this,this.vr))},el:$("#playerBar").get(0),cn:function(){var b=this.model.get("currentTrack");if(null!=
b){if(b instanceof no)$(".playerBarSong",this.el).removeAttr("href").css("text-decoration","none").text("Message From"),$(".playerBarArtist",this.el).removeAttr("href").css("text-decoration","none").text(b.V()),$(".playerBarAlbum",this.el).removeAttr("href").css("text-decoration","none").text(""),$(".playerByText",this.el).text(""),$(".playerOnText",this.el).text("");else{if(b instanceof An)$(".playerBarSong",this.el).removeAttr("href").css("text-decoration","none").text("Live Now"),$(".playerBarArtist",
this.el).removeAttr("href").css("text-decoration","none").text(b.V()),$(".playerBarAlbum",this.el).removeAttr("href").css("text-decoration","none").text(b.hb),$(".playerByText",this.el).text(b.qb?b.qb:"by");else if(b.El())$(".playerBarSong",this.el).removeAttr("href").css("text-decoration","none").text(b.Da),$(".playerBarArtist",this.el).removeAttr("href").css("text-decoration","none").text(b.V()),$(".playerBarAlbum",this.el).removeAttr("href").css("text-decoration","none").text(b.hb),$(".playerByText",
this.el).text(b.qb?b.qb:"from");else{if(b instanceof yn&&!b.Yl())return;$(".playerBarSong",this.el).css("text-decoration","").text(b.Da).attr("href",b.Yg());$(".playerBarArtist",this.el).css("text-decoration","").text(b.V()).attr("href",b.Tg());b.Ku?$(".playerBarAlbum",this.el).removeAttr("href").css("text-decoration","none").text(b.hb):$(".playerBarAlbum",this.el).css("text-decoration","").text(b.hb).attr("href",b.ul());$(".playerByText",this.el).text(b.qb?b.qb:"by")}$(".playerOnText",this.el).text(b.Gc?
b.Gc:"on")}$(".info",this.el).toggle(!0);this.zA(b);$(".albumArt img",this.el).fadeOut("default",function(){$(this).remove()});var c=$("#playerBarArtTmpl").tmpl(b.sb()),c=$(c).hide().bind("imgpreload",function(){b instanceof yn&&$("#mainContent .home").is(":visible")&&$(this).fadeOut();b instanceof yn?($(this).fadeIn(),$(this).addClass("backstage_ad_icon")):$(this).fadeIn()});$(".albumArt",this.el).append(c);$(".albumArt",this.el).show();$(".rightcolumn .nowplaying",this.el).stop(!0,!0).fadeIn();
$(".rightcolumn .nowplaying",this.el).show();(b instanceof yn||b.Ec)&&$(".info",this.el).fadeOut(200);this.To(b)?this.Ea.enable():this.Ea.disable()}else $(".middlecolumn",this.el).fadeOut(),$(".rightcolumn .nowplaying",this.el).fadeOut()},vr:function(b){this.model.get("currentTrack")instanceof yn&&("/"==b.path?($(".albumArt img",this.el).hide(),$(".albumArt img",this.el).removeClass("backstage_ad_icon")):($(".albumArt img",this.el).show(),$(".albumArt img",this.el).addClass("backstage_ad_icon")))},
zA:function(b){1==b.Hc?this.Qr.sK():-1==b.Hc?this.Qr.rK():this.Qr.qK()},Ui:function(b){var c=b.track;b=b.stationId;var d=this.model.get("currentTrack"),e=this.model.get("currentStation");null!=d&&c.o()==d.o()&&null!=e&&e.e()==b&&this.zA(c)},MH:function(){null==this.model.get("currentStation")?$(".middlecolumn",this.el).fadeOut():$(".middlecolumn",this.el).fadeIn();$(".rightcolumn .nowplaying",this.el).fadeOut();this.$j()},Be:function(){var b=this.model.get("searchText");null!=b&&0!=b.length||this.Od||
$(".searchInput",this.el).val(Ra())},fq:function(){this.$j();var b=this.model.get("currentUser");null!=b&&b.G()?$("#skinTab",this.el).hide():$("#skinTab",this.el).show()},fa:function(){this.model.get("modalPanel")==au?this.TF():this.HF();this.$j()},$j:function(){var b=this.model.get("modalPanel"),c=this.model.get("currentStation");this.model.get("currentTrack");this.model.get("capped")||"WELCOME_SEARCH"==b||"REDEMPTION_PANEL"==b||b==fu||"REGISTERED_PANEL"==b||null==c&&_.include([du,bu,cu,eu,ju,hu,
iu],b)?($("#playerBar").stop(!0,!0).fadeOut(),$("#mainContainer").addClass("no_player_bar")):($("#mainContainer").removeClass("no_player_bar"),$("#playerBar").stop(!0,!0).fadeIn(),Ry(this.model)?$(".leftcolumn",this.el).fadeOut():$(".leftcolumn",this.el).fadeIn())},To:function(b){return!b||!(b instanceof yn||b instanceof zn||b instanceof An||b.Ec||b.ao)&&b.Du&&b.Eu&&b.Vn?!0:!1},kE:function(){this.an();if(this.model.get("audioAdPlaying"))$(".info",this.el).fadeOut(),this.Ea.disable();else{this.model.get("videoAdPlaying")||
$(".info",this.el).fadeIn();var b=this.model.get("currentTrack");this.To(b)?this.Ea.enable():this.Ea.disable()}},EQ:function(){this.an();var b=this.model.get("videoAdPlaying");null!=b?($(".info",this.el).fadeOut(),$(".albumArt img",this.el).hide(),this.Ea.disable(),b.cb()||$(".middlecolumn .progress",this.el).hide()):(b=this.model.get("currentTrack"),this.cn(),this.To(b)?this.Ea.enable():this.Ea.disable(),$(".middlecolumn .progress",this.el).show())},an:function(){this.model.get("siteLocked")||this.model.get("forceRegistration")||
this.model.get("audioAdPlaying")||this.model.get("videoAdPlaying")||this.model.get("liveStreamPlaying")?($(".disabled",this.el).css("opacity",0.01).show(),te()?$(".columns",this.el).fadeTo(400,0.6):($(".columns .leftcolumn",this.el).fadeTo(400,0.6),$(".columns .middlecolumn",this.el).fadeTo(400,0.6),this.model.get("audioAdPlaying")||$(".columns .rightcolumn",this.el).fadeTo(400,0.6)),this.model.set({playerBarEnabled:!1})):($(".disabled",this.el).hide(),te()?$(".columns",this.el).fadeTo(400,1):($(".columns .leftcolumn",
this.el).fadeTo(400,1),$(".columns .middlecolumn",this.el).fadeTo(400,1),$(".columns .rightcolumn",this.el).fadeTo(400,1)),this.model.set({playerBarEnabled:!0}))},Gj:function(){this.model.get("showingSearchResults")||(this.Od=!1,setTimeout(function(){$(".searchInput",this.el).blur()},1))},HF:function(){$(".searchInput",this.el).attr("disabled","true");$(".searchInput",this.el).val("")},TF:function(){$(".searchInput",this.el).prop("disabled",!1);$(".searchInput",this.el).val(Ra())},events:{"click .cd_icon":"albumArtClick",
"click .searchBox":"searchBoxClick","focus .searchInput":"searchInputFocus","blur .searchInput":"searchInputBlur","keyup .searchInput":"searchInputKeyup","click .disabled":"handleAdPause","click .playerBarSong":"songClick","click .playerBarAlbum":"albumClick","click .playerBarArtist":"artistClick","click #skinTab":"skinsMenuItemClick"},skinsMenuItemClick:function(){T(xu);return!1},handleAdPause:function(){this.model.get("audioAdPlaying")&&(this.model.get("musicPlaying")?z.b(bi):z.b($h))},songClick:function(){T(Fw,
"song")},albumClick:function(){T(Fw,"album")},artistClick:function(){T(Fw,"artist")},searchBoxClick:function(){if(this.model.get("searchText"))return!1;$(".searchInput",this.el).focus()},albumArtClick:function(){var b=this.model.get("currentTrack");b instanceof yn?b.lf&&window.open(b.lf):T(qu);return!1},searchInputFocus:function(b){this.Od=!0;b.target.value==Ra()&&(b.target.value="",$("#playerBar .searchSubText").show());$(b.target).addClass("focus");null==this.Ah&&(this.Ah=setTimeout(r(this,function(){this.model.set({showingSearchResults:!0});
this.Ah=null}),100))},searchInputBlur:function(b){this.Tv();this.Od=!1;""==b.target.value&&(b.target.value=Ra(),$("#playerBar .searchSubText").hide());$(b.target).removeClass("focus")},searchInputKeyup:function(b){this.Tv();this.model.set({showingSearchResults:!0});T(pu,b);""===b.target.value?$("#playerBar .searchSubText").show():$("#playerBar .searchSubText").hide()},Tv:function(){this.Ah&&(clearTimeout(this.Ah),this.Ah=null)},vo:function(b){var c=Math.floor(b/60);b="0"+(b-60*c);return c+":"+b.substring(b.length-
2)}});function Py(){}
Py=Backbone.View.extend({initialize:function(){this.model.bind("change:trackProgress",r(this,this.sQ));this.model.bind("change:musicPlaying",r(this,this.nQ));this.model.bind("change:currentTrack",r(this,this.cn))},el:$("#playbackControl").get(0),cn:function(){var b=this.model.get("currentTrack");null!=b&&(b instanceof no||b instanceof oo?($(".thumbUpButton",this.el).addClass("disabledThumb"),$(".thumbDownButton",this.el).addClass("disabledThumb"),$(".skipButton",this.el).removeClass("disabledSkip")):b instanceof
An?($(".thumbUpButton",this.el).addClass("disabledThumb"),$(".thumbDownButton",this.el).addClass("disabledThumb"),$(".skipButton",this.el).addClass("disabledSkip")):b instanceof wn&&(Rx(b,this.model.get("stationList"))?($(".thumbUpButton",this.el).addClass("disabledThumb"),$(".thumbDownButton",this.el).addClass("disabledThumb")):($(".thumbUpButton",this.el).removeClass("disabledThumb"),$(".thumbDownButton",this.el).removeClass("disabledThumb")),$(".skipButton",this.el).removeClass("disabledSkip")))},
sQ:function(){var b=this.model.get("trackProgress");if(b.isLive)$(".elapsedTime",this.el).text("--:--"),$(".remainingTime",this.el).text("LIVE"),$(".progressMiddle",this.el).attr("width",0);else{var c=b.totalTime,d=b.elapsedTime,b=b.percentPlayed;$(".elapsedTime",this.el).text(this.vo(d));$(".remainingTime",this.el).text("-"+this.vo(0<c?c-d:0));$(".progressMiddle",this.el).attr("width",Math.floor(345*b/100))}},nQ:function(){this.model.get("musicPlaying")?($(".playButton",this.el).hide(),$(".pauseButton",
this.el).show()):($(".pauseButton",this.el).hide(),$(".playButton",this.el).show())},rK:function(){$(".thumbDownButton",this.el).addClass("indicator");$(".thumbUpButton",this.el).removeClass("indicator")},sK:function(){$(".thumbUpButton",this.el).addClass("indicator");$(".thumbDownButton",this.el).removeClass("indicator")},qK:function(){$(".thumbUpButton",this.el).removeClass("indicator");$(".thumbDownButton",this.el).removeClass("indicator")},events:{"click .playButton":"playButtonClick","click .pauseButton":"pauseButtonClick",
"click .skipButton":"skipButtonClick","click .thumbDownButton":"thumbDownButtonClick","click .thumbUpButton":"thumbUpButtonClick"},playButtonClick:function(b){$(b.target).blur();z.b($h,{userInitiated:!0});s("link",{click:"playButton",source:"PlayBackView",station_id:this.model.get("currentStation").e()},this.model.get("currentUser"));return!1},pauseButtonClick:function(b){$(b.target).blur();z.b(bi);s("link",{click:"pauseButton",source:"PlayBackView",station_id:this.model.get("currentStation").e()},
this.model.get("currentUser"));return!1},skipButtonClick:function(b){$(b.target).blur();if($(b.currentTarget).hasClass("disabledSkip"))return!1;z.b(ci);b=this.model.get("currentTrack");null!=b&&(b="/song/skip/"+b.o(),Sy(b),Ty(b));return!1},thumbDownButtonClick:function(b){$(b.target).blur();if($(b.currentTarget).hasClass("disabledThumb"))return!1;b=$(b.currentTarget).hasClass("indicator");var c=this.model.get("currentTrack");null!=c&&(b?T(iv,{isPositive:!1,musicID:c.o()}):T(hv,{isPositive:!1,musicId:c.o()}));
return!1},thumbUpButtonClick:function(b){$(b.target).blur();if($(b.currentTarget).hasClass("disabledThumb"))return!1;b=$(b.currentTarget).hasClass("indicator");var c=this.model.get("currentTrack");null!=c&&(b?T(iv,{isPositive:!0,musicID:c.o()}):T(hv,{isPositive:!0,musicId:c.o()}));return!1},vo:function(b){var c=Math.floor(b/60);b="0"+(b-60*c);return c+":"+b.substring(b.length-2)}});function Qy(){}
Qy=Backbone.View.extend({Ph:20,zu:102,va:null,If:!1,tp:!1,initialize:function(){U(mv,r(this,this.RM));z.c(li,r(this,this.Dj));this.Dj(null);$(".volumeKnob",this.el).draggable({axis:"x",containment:$(".volumeBar",this.el),start:r(this,this.rp),stop:r(this,this.sp),drag:r(this,this.qp)});Uy("/volume/")},Sk:function(b){this.BA(b);z.b(li,b)},RM:function(){var b=Dm();om(Al,!1);this.Dj(b);this.Sk(b)},rp:function(){this.tp=!0},sp:function(b,c){this.tp=!1;var d=this.$p(c.position.left);this.Sk(d);this.Dj(d);
T(qw);this.If||this.Nm()},qp:function(b,c){var d=this.$p(c.position.left);this.Sk(d)},el:$("#playerBar .volumeControl").get(0),Dj:function(b){null==b?b=Em()?0:Dm():0>b?b=0:100<b&&(b=100);this.BA(b);b=this.Ph+b/100*(this.zu-this.Ph);$(".volumeKnob",this.el).css("left",b)},BA:function(b){0>=b?$(".volumeButton").addClass("muted"):$(".volumeButton").removeClass("muted")},$p:function(b){null==b&&(b=$(".volumeKnob",this.el).position().left);return Math.round((b-this.Ph)/(this.zu-this.Ph)*100)},Hq:1E3,Nm:function(){this.tp||
(this.Rm(),this.va=setTimeout(r(this,function(){$(".volumeBackground",this.el).fadeOut(200)}),this.Hq))},Rm:function(){null!=this.va&&(clearTimeout(this.va),this.va=null)},events:{"click .volumeBackground":"volumeBackgroundClick","mouseenter .volumeButton":"volumeButtonMouseEnter","mouseleave .volumeButton":"volumeButtonMouseLeave","click .volumeButton":"volumeButtonClick","mouseenter .volumeBackground":"volumeBackgroundMouseEnter","mouseleave .volumeBackground":"volumeBackgroundMouseLeave"},volumeBackgroundClick:function(b){b=
b.pageX-$(".volumeBar",this.el).offset().left;var c=$(".volumeKnob",this.el).width();b=Math.max(c/2,b);b=Math.min($(".volumeBar",this.el).width()-c/2,b);b-=c/2;$(".volumeKnob",this.el).css("left",this.Ph+b);b=this.$p();this.Sk(b);this.Dj(b);T(qw);return!1},volumeButtonMouseEnter:function(){this.If=!0;this.Rm();$(".volumeBackground",this.el).fadeIn(200);return!1},volumeButtonMouseLeave:function(){this.If=!1;this.Nm();return!1},volumeButtonClick:function(){$(".volumeBackground",this.el).is(":visible")?
(this.Hq=1E3,this.If=!1,$(".volumeBackground",this.el).fadeOut(200),this.Nm()):(this.Hq=1E4,this.If=!1,this.Rm(),$(".volumeBackground",this.el).fadeIn(200));return!1},volumeBackgroundMouseEnter:function(){this.If=!0;this.Rm();return!1},volumeBackgroundMouseLeave:function(){this.If=!1;this.Nm();return!1}});function Vy(){}
Vy=Backbone.View.extend({initialize:function(){this.Od=!1;$(".searchInput",this.el).val(Sa());$(".onboarding__register").fadeIn();this.model.bind("change:searchText",r(this,this.Be));this.model.bind("change:modalPanel",r(this,this.fa));this.model.bind("change:showingSearchResults",r(this,this.Gj));this.model.bind("change:currentUser",r(this,this.xA))},el:$("#welcomeSearch").get(0),Be:function(){var b=this.model.get("searchText");null!=b&&0!=b.length||this.Od||$(".searchInput",this.el).val(Sa())},fa:function(){var b=
this.model.get("modalPanel");if("WELCOME_SEARCH"==b||b==du){if("WELCOME_SEARCH"==b){T(Yv);var c=this.model.get("currentUser");(null==c||c.p())&&ne("anonymous_listening","standard")}else b==du&&T($v);this.xA();"hidden"==$(this.el).css("visibility")&&($(this.el).hide(),$(this.el).css("visibility","visible"));$(this.el).is(":visible")?this.tA(b):$(this.el).stop(!0,!0).fadeIn(400,r(this,function(){this.tA(b)}))}else $(this.el).stop(!0,!0).hide()},tA:function(b){b==du&&($(".searchBox",$(this.el)).stop(!0,
!0).hide(),$(".bottom",$(this.el)).stop(!0,!0).show(),$(".onboarding__login").fadeOut(),$(".onboarding__register").fadeIn())},xA:function(){var b=this.model.get("currentUser");Ry(this.model)&&"WELCOME_SEARCH"==this.model.get("modalPanel")?($(".onboarding__register").fadeIn(),this.model.set({modalPanel:du})):null==b||b.p()?($(".bottom",this.el).show(),$(".onboarding__register").fadeIn()):($(".bottom",this.el).hide(),$(".onboarding__register").fadeOut())},Gj:function(){this.model.get("showingSearchResults")||
(this.Od=!1,setTimeout(function(){$(".searchInput",this.el).blur()},1))},events:{"focus .searchInput":"searchInputFocus","blur .searchInput":"searchInputBlur","keyup .searchInput":"searchInputKeyup"},searchInputFocus:function(b){this.Od=!0;b.target.value==Sa()&&(b.target.value="");$(b.target).addClass("focus");this.model.set({showingSearchResults:!0})},searchInputBlur:function(b){this.Od=!1;""==b.target.value&&(b.target.value=Sa());$(b.target).removeClass("focus")},searchInputKeyup:function(b){T(pu,
b);b=this.model.get("currentUser");(null==b||b.p())&&ne("anonymous_listening","station_search")}});function Wy(){}
Wy=Backbone.View.extend({initialize:function(){this.kn=!1;this.model.get("searchResults").bind("refresh",r(this,this.pQ));this.model.bind("change:searchText",r(this,this.Be));this.model.bind("change:searchItemSelectedIndex",r(this,this.yh));this.model.bind("change:showingSearchResults",r(this,this.Gj));this.model.bind("change:modalPanel",r(this,this.fa));this.Eb=this.Zi=null;var b=Fo();b&&0<b.length&&$.ajax({type:"HEAD",async:!0,url:b,success:r(this,function(){this.Zi=Fo();this.Eb=A._data.createStationHintGenre||
"top_stations"})});this.render()},Be:function(){var b=this.model.get("searchText");if(this.model.get("showingSearchResults")){var c=$(".content",this.el);null==b||0==b.length?(c.empty().append($("#searchPopupEmptyContent").tmpl(this.model.get("searchSuggestions"),{hintPath:this.Zi,hintGenre:this.Eb})),T(zw)):Bx(b)&&c.empty().append($("#searchPopupIncompleteEmail").tmpl({query:this.model.get("searchText")},{hintPath:this.Zi,hintGenre:this.Eb}))}},yh:function(){$(".item",this.el).removeClass("selected");
var b=this.model.get("searchItemSelectedIndex");if(0<=b){b>=$(".item",this.el).length&&(b=$(".item",this.el).length-1,this.model.set({searchItemSelectedIndex:b}));$(".item",this.el).eq(b).addClass("selected");var b=".items .scrollPoint.selected",c=$(b,this.el);c.prev().hasClass("heading")&&(b=".items .scrollPoint:eq("+(c.index()-1)+")");Gx($(".items",this.el),b)}},Gj:function(){this.model.get("showingSearchResults")?(T(xw),this.Be(),this.uA(),$(".searchPopupContainer",this.el).fadeIn("fast")):(T(yw),
$(".searchPopupContainer",this.el).fadeOut("fast",r(this,function(){this.model.set({searchText:""});this.uA()})))},uA:function(){$(this.el).detach();$(this.kn?"#searchPopupWelcomePosition":"#searchPopupNavPosition").append(this.el)},fa:function(){"WELCOME_SEARCH"==this.model.get("modalPanel")?this.kn=!0:this.kn=!1},pQ:function(b){var c=$(".content",this.el);c.empty();c.append('<div class="items scroll-pane vertical-only"></div>');if(0<b.length){var d=null;$.each(b.models,function(b,h){d!=h.kb()&&
(d=h.kb(),0<d.length&&$(".items",c).append($("#searchPopupHeading").tmpl(h.kb())));$(".items",c).append($(h.Qb()).tmpl(h))});c.append($("#searchPopupFooterTmpl").tmpl({query:this.model.get("searchText")},{hintPath:this.Zi,hintGenre:this.Eb}));T(zw);b=this.kn?"#searchPopupWelcomePosition":"#searchPopupNavPosition";b=$(window).height()-parseInt($(b).css("top"),10)-105;$(".items",this.el).css("max-height",b)}else c.append($("#searchPopupNoSearchResults").tmpl({query:this.model.get("searchText")},{hintPath:this.Zi,
hintGenre:this.Eb})),T(zw);setTimeout(r(this,function(){Dx($(".scroll-pane",this.el))}),1);this.yh()},render:function(){$(this.el).append($("#searchPopupTmpl").tmpl());return this},events:{"click .item":"searchResultItemClick","click .profileName":"profileClick","click .showAllResults":"performExtendedSearch","click .createStationHint":"browseGenresClick","click .browseGenres":"browseGenresClick","mouseenter .item":"searchResultItemMouseEnter","mouseleave .item":"searchResultItemMouseLeave"},searchResultItemClick:function(b){if($(b.currentTarget).data("search"))s("link",
{click:"extendedSearchLink",source:"SearchPopupView"},this.model.get("currentUser")),this.performExtendedSearch();else if($(b.currentTarget).data("genres")){s("link",{click:"browseGenreLink",source:"SearchPopupView"},this.model.get("currentUser"));b=$("a",$(b.currentTarget)).attr("href");var c=cn();0==b.indexOf(c)&&(b=b.substr(c.length-1));V(b,!0,!0)}else{var d=$.tmplItem(b.currentTarget).data,c=d.get("musicId"),e=d.get("stationId"),h=null,d=d.get("searchableStationId");null!=d?h=d:null!=e?h=Bn.StationKeyType.FRIENDS_STATION+
e:null!=c&&(h=$(b.currentTarget).data("genre-suggest")?Bn.StationKeyType.GENRE_SUGGEST+c:$(b.currentTarget).data("artist-suggest")?Bn.StationKeyType.ARTIST_SUGGEST+c:$(b.currentTarget).data("facebook-suggest")?Bn.StationKeyType.FACEBOOK_SUGGEST_SEARCH_VIEW+c:c);this.trigger("createStationRequest",h)}return!1},profileClick:function(b){b=$.tmplItem(b.target).data.get("webName");this.trigger("openProfilePageRequest",b)},performExtendedSearch:function(){s("link",{click:"extendedSearchRequest",source:"SearchPopupView"},
this.model.get("currentUser"));this.trigger("extendedSearchRequest");return!1},browseGenresClick:function(){$(".searchPopupContainer",this.el).fadeOut("slow",r(this,function(){this.model.set({showingSearchResults:!1});this.model.set({searchText:""})}))},searchResultItemMouseEnter:function(b){b=$(".item",this.el).index(b.target);this.model.set({searchItemSelectedIndex:b})},searchResultItemMouseLeave:function(){this.model.set({searchItemSelectedIndex:-1})}});function Xy(){}
Xy=Backbone.View.extend({initialize:function(){this.model.bind("change:siteLocked",r(this,this.Ts));z.c(Pg,r(this,this.dq));U(Sw,r(this,this.Cx))},el:$("#mainContentContainer .contentnav").get(0),Ts:function(){this.model.get("siteLocked")?$(".disabled",this.el).show():$(".disabled",this.el).hide()},events:{"click .home":"homeClick","click .myprofile":"profileClick","click .friends":"friendsClick"},profileClick:function(){s("link",{click:"my_profile"},this.model.get("currentUser"));var b=this.model.get("currentUser");
null!=b&&fe(b.Z)?V("/profile/"+b.Z,!0,!0):V("/profile",!0,!1);return!1},homeClick:function(){T(qu);T(sw);return!1},friendsClick:function(){s("link",{click:"music_feed"},this.model.get("currentUser"));V("/feed",!0,!0);return!1},dq:function(b){b.NEW_SITE_FEED?$(".friends",this.el).show():this.Cx()},Cx:function(){$(".friends",this.el).hide();0<=My().indexOf("/feed")&&this.homeClick()}});function Yy(){}
(function(){function b(b){return b.map(function(b){var c=b.get("_originalSeed");return _.extend(b.toJSON(),{allowAddVariety:b.get("_isCreator")&&b.get("canTransform")&&!(null!=c&&null!=c.key&&null!=c.Zs)&&!b.get("_isThumbprintStation")})})}Yy=Backbone.View.extend({initialize:function(){this.Pm=this.options.station_menu;z.c(Be,r(this,this.render));U(Bu,r(this,this.render));U(Tv,r(this,this.qQ));U(qu,r(this,this.Qa));U(Hv,r(this,this.SH));U(Gv,r(this,this.RH));this.Pd=this.model.get("stationList");this.model.get("promotedStationList");
this.Pd.bind("refresh",r(this,this.render));this.Pd.bind("add",r(this,this.bh));this.Pd.bind("change",r(this,this.bh));this.Pd.bind("remove",r(this,this.render));this.model.bind("change:currentStation",r(this,this.$x));this.model.bind("change:currentTrack",r(this,function(){this.Zx(!0)}));this.model.bind("change:currentShuffleType",r(this,this.wA));this.model.bind("change:currentStationViewIsShuffle",r(this,this.render));this.zF=W("/stations/delete",!0,!1,!0,r(this,this.pw));W("/stations/remove",
!0,!1,!0,r(this,this.pw));W("/stations/dismiss",!0,!1,!0,r(this,this.JF));$("#stationSortDate").click(r(this,this.FP));$("#stationSortAlpha").click(r(this,this.EP))},el:$("#stationList").get(0),render:function(){var c=2<this.model.get("stationList").length,d=this.model.get("currentStationViewIsShuffle");if(!c&&d)this.model.set({currentStationViewIsShuffle:!1});else return c=d?"#stationShuffleTmpl":"#stationTmpl",this.Pd.each(r(this,function(b){b.set({canTransform:b.je()!=m.Cc.Me(),sortAlpha:this.model.get("stationSortOrderAlpha"),
stationIsAdvertiserStation:b.mc()},{silent:!0});if(b.Pb())b.set({stationIsRecommendedStation:!0},{silent:!0}),this.model.get("stationSortOrderAlpha")||b.k._impressionTracked||(s("promoted_stations",{action:"rec_shown",device_os:"web",vendor_id:100,token_type:"music",token:b.ra()},this.model.get("currentUser")),b.k._impressionTracked=!0);else if(b.Cb()){var c=b.k._promotedSponsorText;b.set({stationIsPromotedStation:!0,promotedSponsorText:c,promotedSponsorTextIsLengthy:21<c.length?!0:!1},{silent:!0});
this.model.get("stationSortOrderAlpha")||(null!=b.k._promotedImpressionUrls&&setTimeout(function(){$.each(b.k._promotedImpressionUrls,function(){var b=this;""!=b&&np(b,function(){},function(){k.debug("Promoted station impression url failure: "+b)})});b.k._promotedImpressionUrls=null},100),b.k._impressionTracked||(s("promoted_stations",{action:"promo_shown",device_os:"web",vendor_id:100,token_type:"station",token:b.e()},this.model.get("currentUser")),b.k._impressionTracked=!0))}else b.Bb()&&(b.set({stationIsCustomContentStation:!0},
{silent:!0}),(c=b._expiration)&&6048E5>=c-(new Date).getTime()?b.set({isExpiring:!0,expirationDate:cy.JG(c)},{silent:!0}):b.set({isExpiring:!1},{silent:!0}))})),$(this.el).empty().append($(c).tmpl(b(this.Pd))),$(".inactiveHoverArrow",this.el).hide(),this.$x(),this.wA(),this.model.get("currentStationViewIsShuffle")&&($(".shuffleStationLabel").removeClass("shuffleStationLabelCurrent"),c=this.model.get("currentStation"),null!=c&&c.B()&&c.X()&&(c=c.he(),null!=c&&(this.Zv(c),this.Zx(!1)))),2<this.Pd.length||
$("#shuffleContainer").parent().hide(),this.fi(),this.yt(),Qx(this.el),this},wA:function(){var b=this.model.get("currentShuffleType"),b="my"==b?"My Shuffle":"Shuffle "+b+" stations";$("#shuffleTypeLabel",this.el).text(b)},Qa:function(){setTimeout(r(this,function(){this.fi()}),200)},qQ:function(b){_.each($(".stationNameText",this.el),r(this,function(d){$.tmplItem(d).data.e()==b.e()&&(te()?$(d).text(b.ea()):d.textContent=this.dQ(b.ea()))}))},dQ:function(b){var d={"&#x2F;":"/"},e;for(e in d)b=b.replace(e,
d[e]);return b},fi:function(b){setTimeout(r(this,function(){Dx($(".stationListHolder"),"station_list");$(".stationListHolder .jspPane").css("padding-bottom",0);b&&b()}),1)},bh:function(){this.render()},RH:function(){this.up=!1;this.Nl();$(".stationName_hover",this.el).removeClass("stationName_hover")},SH:function(b){"station_menu_dd"==b.attr("id")&&(this.up=!0)},$x:function(){this.Nl();$("#shufflePicker").fadeOut(1);var b=null,d=this.model.get("currentStation");null!=d&&(b=d.e());$(".stationListItem",
this.el).each(function(){$.tmplItem(this).data.e()==b?$(this).addClass("selected"):$(this).removeClass("selected")});this.fi(r(this,function(){var b=$("#stationList .stationListItem.selected");b&&0<b.index()&&Gx($(this.el),"#stationList .stationListItem.selected")}));Zy(this.Pm,d,$("#stationList .stationListItem.selected .optionsItem"))},scrollTo:function(b,d){var e=$(".scroll-pane",this.el).data("jsp");e&&e.scrollTo(b,d)},Zv:function(b){$(".shuffleStation",this.el).prop("checked",!1);for(var d=0;d<
b.length;d++)$("#shuffleStation_"+b[d]).prop("checked",!0);var d=this.model.get("currentShuffleType"),e=$(".stationListItem .stationNameText.notSelectableStation",this.el).length;"all"==d&&b.length!=this.model.get("stationList").length-1-e&&this.model.set({currentShuffleType:"my"})},Zx:function(b){$(".shuffleStationLabel").removeClass("shuffleStationLabelCurrent");var d=this.model.get("currentTrack");null!=d&&this.model.get("currentStationViewIsShuffle")&&(d="#shuffleStationLabel_"+d.e(),$(d).addClass("shuffleStationLabelCurrent"),
b&&Gx($(".stationListHolder"),d),this.fi())},Ix:function(b){this.Zv(b.he())},JF:function(b){b=b.pathNames[2];var d=null,e=null,h=this.model.get("menuStation");null==b&&null!=h&&(b=h.e(),d=nn(h),e=on(h));b&&d&&z.b(Ig,{stationId:b,adId:d,correlationId:e});$y()},pw:function(b){b=b.pathNames[2];null==b&&null!=this.model.get("menuStation")&&(b=this.model.get("menuStation").e());b?this.hl(b):(b=this.model.get("currentStation"),null!=b&&this.hl(b.e()));$y()},hl:function(b){T(Ku,b)},FP:function(){$("#stationSortDate").hasClass("selected")||
(s("link",{click:"sortStationsDate",source:"StationListView"},this.model.get("currentUser")),this.model.set({stationSortOrderAlpha:!1}),this.yt())},EP:function(){$("#stationSortAlpha").hasClass("selected")||(s("link",{click:"sortStationsAlpha",source:"StationListView"},this.model.get("currentUser")),this.model.set({stationSortOrderAlpha:!0}),this.yt())},yt:function(){this.model.set({stationSortOrderAlpha:rl?!0===jm(Kl):!1});this.model.get("stationSortOrderAlpha")?($("#stationSortDate").removeClass("selected"),
$("#stationSortAlpha").addClass("selected")):($("#stationSortDate").addClass("selected"),$("#stationSortAlpha").removeClass("selected"))},events:{"click #shuffleButtonHoverArea":"shuffleButtonHoverArea_click","mouseover #shuffleContainer":"shuffleContainer_mouseOver","mouseout #shuffleContainer":"shuffleContainer_mouseOut","click .stationListItem":"stationItemClick","click .addVariety":"addVarietyClick","mouseover .stationListItem .inactiveHoverArrow":"stationListItemMouseEnter","mouseout .stationListItem .inactiveHoverArrow":"stationListItemMouseLeave",
"mouseover .stationListItem":"stationListItemMouseEnter","mouseout .stationListItem":"stationListItemMouseLeave"},deleteButtonClicked:function(b){b=$.tmplItem(b.target).data.stationId;this.zF.update("/stations/delete/"+b);return!1},Nl:function(){$(".inactiveHoverArrow:visible",this.el).hide()},stationListItemMouseEnter:function(b){if(!0!=this.up){b=$(".stationName",$(b.target).parents(".stationListItem"));var d=this.model.get("currentStation"),e=-1;null!=d&&(e=d.e());d=$.tmplItem(b[0]).data;try{if(d.e()!=
e){$(".stationName_hover").removeClass("stationName_hover");b.addClass("stationName_hover");this.Nl();var h=$(".inactiveHoverArrow",b.parents(".stationListItem"));h.show();Zy(this.Pm,d,h)}else Zy(this.Pm,this.model.get("currentStation"),$("#stationList .stationListItem.selected .optionsItem"))}catch(l){}}},stationListItemMouseLeave:function(){!0!=this.up&&($(".stationName_hover",this.el).removeClass("stationName_hover"),this.Nl(),Zy(this.Pm,this.model.get("currentStation"),$("#stationList .stationListItem.selected .optionsItem")))},
stationItemClick:function(b){setTimeout(r(this,function(){var d=[],e=$.tmplItem(b.target).data;if($(b.target).hasClass("checkbox"))$(".shuffleStation:checked",this.el).each(function(b,c){var e=c.id.indexOf("_");d.push(c.id.substr(e+1))}),0<d.length?e.B()&&e.X()?this.model.set({currentStationViewIsShuffle:!1}):(this.model.set({currentShuffleType:"my"}),om(Zl,d.join(",")),z.b(ki,{stationIdArray:d,isExplicitSave:!0,shuffleType:this.model.get("currentShuffleType")})):this.model.set({currentStationViewIsShuffle:!1});
else if($(b.target).hasClass("stationNameText")||!this.model.get("currentStation").B()||!this.model.get("currentStation").X())if(this.model.get("currentShuffleType")||this.model.set({currentShuffleType:"all"}),e.Cb()&&fe(e.e())){var h=this.model.get("currentUser");e.Xg()==h.t?(new X({message:mc()})).render():(z.b(Gg,{stationCode:"fs"+e.e(),adId:nn(e),correlationId:on(e),trackingUrls:e._promotedTrackingUrls}),s("promoted_stations",{action:"promo_added",device_os:"web",vendor_id:100,token_type:"station",
token:e.e()},this.model.get("currentUser")))}else e.Pb()&&fe(e.ra())?(z.b(Hg,"mi"+e.ra()),s("promoted_stations",{action:"rec_added",device_os:"web",vendor_id:100,token_type:"music",token:e.ra()},this.model.get("currentUser"))):z.b(ii,{stationId:e.e(),userInitiated:!0})}),1);this.fi();return!1},shuffleContainer_mouseOver:function(){2<this.model.get("stationList").length&&$("#shuffleButtonHoverArea",this.el).addClass("shuffleButtonHoverAreaHover")},shuffleContainer_mouseOut:function(){2<this.model.get("stationList").length&&
0==$("#shufflePicker:visible").length&&$("#shuffleButtonHoverArea",this.el).removeClass("shuffleButtonHoverAreaHover")},shuffleButtonHoverArea_click:function(){2<this.model.get("stationList").length&&T(uu);return!1},shuffleButtonHoverArea_mouseOut:function(){2<this.model.get("stationList").length&&T(vu)},addVarietyClick:function(){this.trigger("addvariety");return!1}})})();function az(){}
az=Backbone.View.extend({initialize:function(){U(vu,r(this,this.Fq));U(uu,r(this,this.ZO));this.model.bind("change:currentStation",r(this,this.Fq));this.model.bind("change:currentStationViewIsShuffle",r(this,this.Fq));this.render()},el:$("#shufflePicker").get(0),render:function(){$(this.el).empty().append($("#shufflePickerTmpl").tmpl());$(this.el).hide();return this},Fq:function(){clearTimeout(az.hideTimeout);az.hideTimeout=setTimeout(r(this,function(){$(this.el).fadeOut(100);setTimeout(function(){$("#shuffleButtonHoverArea").removeClass("shuffleButtonHover")},120)}),
1E3)},ZO:function(){clearTimeout(az.hideTimeout);var b=this.mH();$("#shufflePickerItemContainer",this.el).empty().append($("#shufflePickerItemTmpl").tmpl(b));$(this.el).fadeIn(100)},mH:function(){for(var b={},c=[],d=this.model.get("stationList").select(function(b){return!b.B()&&!b.Na()&&!b.mc()&&rn(b)}),e=0;e<d.length;e++){var h=d[e],l=h.e();if(h=h.wf()){c.push(l);for(var p=0;p<h.length;p++){var q=h[p],u=b[q];null==u&&(u=[],b[q]=u);u.push(l)}}}e=Sm();d=null==e||0==e.length?c:e.split(",");e=this.model.get("currentShuffleType");
c=[{genreName:"all",genreLabel:"Shuffle All",stationIdArray:c.join(","),selected:"all"==e},{genreName:"my",genreLabel:"My Shuffle",stationIdArray:d.join(","),selected:"my"==e}];c.push({genreName:"line",genreLabel:null,stationIdArray:null,selected:!1});for(q in b)c.push({genreName:q,genreLabel:"Shuffle "+q+" stations",stationIdArray:b[q].join(","),selected:e==q});if(!this.model.get("currentStationViewIsShuffle"))for(e=0;e<c.length;e++)c[e].selected=!1;return c},events:{"click .shufflePickerItem":"shufflePickerItemClick",
"mouseover #shufflePickerContainer":"shufflePicker_mouseOver","mouseout #shufflePickerContainer":"shufflePicker_mouseOut"},shufflePickerItemClick:function(b){T(vu);var c=$(b.target).attr("stationIdArray");c&&(c=c.split(","),b=""+$(b.target).attr("genreName"),this.model.set({currentShuffleType:b}),z.b(ki,{stationIdArray:c,isExplicitSave:!0,genre:"all"===b?null:b,shuffleType:"all"===b?b:"my"}),this.model.get("currentStation").B()||(b=this.model.get("stationList").select(function(b){return b.B()&&b.X()})[0],
z.b(ii,{stationId:b.e(),userInitiated:!0}),this.model.set({currentStationViewIsShuffle:!0})))},shufflePicker_mouseOver:function(){clearTimeout(az.hideTimeout)},shufflePicker_mouseOut:function(){T(vu)}});function bz(){}
bz=Backbone.View.extend({initialize:function(){new cz;this.al=null;this.model.bind("change:selectedTrack",r(this,this.rs))},el:$("#videoPageInfo").get(0),rs:function(){var b=this.model.get("selectedTrack"),c=this.model.get("currentUser");if(null!=b&&null!=c&&c.G()){b=b.Pe;c=dz[b];if(null!=c){this.al=b;$(".caption",this.el).text(c.zC);$(".caption_header",this.el).text(c.BC);$(".caption_footer",this.el).text(c.AC);$("a",this.el).attr("href",c.HD);$("img",this.el).attr("src",c.xC);$(this.el).slideDown();s("video_bubble_display",
{arist_id:b},this.model.get("currentUser"));return}$(this.el).slideUp()}$(this.el).hide();this.al=null},events:{"click a":"linkClicked"},linkClicked:function(){z.b(bi);null!=this.al&&s("video_bubble_click",{arist_id:this.al},this.model.get("currentUser"));return!0}});function ez(){}
ez=Backbone.View.extend({initialize:function(){var b=$(".buyButton",this.el);this.CE=new fz({buyButton:b,buyMenu:$("#buy_menu_dd"),cssBeforeOpen:function(){var c=b.offset(),e=$("#buy_menu_dd").parent().offset().top,h=c?c.top:0;return{left:(c?c.left:0)-($("#buy_menu_dd").width()-b.outerWidth()),top:h-e+b.outerHeight()}},model:this.model});var c=$(".autoshareButton",this.el);this.qE=new Ly(c,null,$("#autoshare_menu_dd"));this.qE.im=r(this,function(){var b=c.offset(),e=$("#autoshare_menu_dd").parent().offset().top;$("#autoshare_menu_dd").css({left:(b?
b.left:0)-($("#autoshare_menu_dd").width()-c.outerWidth()),top:(b?b.top:0)-e+c.outerHeight()})});$("#autoshare_menu_dd .autoshareOn").click(r(this,this.sE));$("#autoshare_menu_dd .autoshareOff").click(r(this,this.rE));$("#autoshare_menu_dd .autoshareOptions").click(r(this,this.tE));this.qA();this.model.bind("change:autoShare",r(this,this.qA));this.model.bind("change:selectedTrack",r(this,this.rs));this.model.bind("change:currentUser",r(this,this.Yv));z.c(Xe,r(this,this.Ui));z.c(Rk,r(this,this.Ze));
z.c(Qk,r(this,this.oj))},el:$("#trackInfoContainer").get(0),qA:function(){this.model.get("autoShare")?($(".autoshareButton",this.el).addClass("on"),$(".autoshareOn").addClass("checked"),$(".autoshareOff").removeClass("checked")):($(".autoshareButton",this.el).removeClass("on"),$(".autoshareOn").removeClass("checked"),$(".autoshareOff").addClass("checked"))},Yv:function(){var b=this.model.get("currentUser"),c=this.model.get("currentStation");b&&b.Mp&&c&&c.So()?$(".autoshareButton",this.el).show():
$(".autoshareButton",this.el).hide()},rs:function(){this.Yv();var b=this.model.get("selectedTrack");if(b&&b instanceof yn){var c=this.model.get("currentTrack")?this.model.get("currentTrack").o():null;b.o()!=c||b instanceof lo&&b.IK()?this.Dq(!0):this.Gz(!0);$("#trackInfoButtons").slideUp("fast")}else b&&b.Ec?($("#trackInfoButtons").slideUp("fast"),this.Dq(!0)):b&&b instanceof no?($(".liveNow",this.el).hide(),$(".audioAdInfo",this.el).hide(),$("#audioAdDetail").hide(),b.aD?($(".buyButton",this.el).hide(),
$("#trackInfoButtons").slideDown("fast")):$("#trackInfoButtons").slideUp("fast"),$(".info",this.el).hide(),$(".artistMessageInfo",this.el).show(),$(".artistSummary",this.el).text(b.V())):null!=b?($(".liveNow",this.el).hide(),this.Gz(!1),b instanceof An?($("#trackInfoButtons").slideDown("fast"),$(".artistSummary",this.el).css("text-decoration","").text(b.V()).attr("href",b.Tg()),$(".albumTitle",this.el).css("text-decoration","").text(b.hb).attr("href",b.ul()),$(".byText",this.el).text(b.qb?b.qb:"by"),
$(".onText",this.el).text(b.Gc?b.Gc:"on"),$(".featured",this.el).toggle(!1),this.model.get("currentTrack")==b?($(".songTitle",this.el).hide(),$(".liveNow",this.el).show(),this.Cv()):$(".songTitle",this.el).css("text-decoration","").text(b.Da).attr("href",b.Yg()).show()):b.El()?($(".songTitle",this.el).removeAttr("href").css("text-decoration","none").text(b.Da).show(),$(".artistSummary",this.el).removeAttr("href").css("text-decoration","none").text(b.V()),$(".albumTitle",this.el).removeAttr("href").css("text-decoration",
"none").text(b.hb),$(".byText",this.el).text(b.qb?b.qb:"from"),$(".onText",this.el).text(b.Gc?b.Gc:"on"),$(".featured",this.el).toggle(!1)):($(".featured",this.el).toggle(b.gh()),$(".songTitle",this.el).css("text-decoration","").text(b.Da).attr("href",b.Yg()).show(),$(".artistSummary",this.el).css("text-decoration","").text(b.V()).attr("href",b.Tg()),b.Ku?$(".albumTitle",this.el).removeAttr("href").css("text-decoration","none").text(b.hb):$(".albumTitle",this.el).css("text-decoration","").text(b.hb).attr("href",
b.ul()),$(".byText",this.el).text(b.qb?b.qb:"by"),$(".onText",this.el).text(b.Gc?b.Gc:"on")),this.CE.AO(b),b.my()?$(".buyButton",this.el).show():$(".buyButton",this.el).hide(),$("#trackInfoButtons").slideDown("fast"),this.yA(b)):$("#trackInfoButtons").slideUp("fast");this.kd()},Ui:function(b){var c=b.track;b=b.stationId;var d=this.model.get("currentTrack"),e=this.model.get("currentStation");null!=d&&c.o()==d.o()&&null!=e&&e.e()==b&&this.yA(c)},yA:function(b){1==b.Hc?($("#thumbup",this.el).show(),
$("#thumbdown",this.el).hide()):-1==b.Hc?($("#thumbup",this.el).hide(),$("#thumbdown",this.el).show()):($("#thumbup",this.el).hide(),$("#thumbdown",this.el).hide())},Gz:function(b){this.Dq(b);b?$(".audioAdInfo",this.el).show():($(".audioAdInfo",this.el).hide(),$("#audioAdDetail").hide())},Dq:function(b){$(".artistMessageInfo",this.el).hide();$(".liveNow",this.el).hide();b?($("#trackInfoButtons").slideUp("fast"),$(".info",this.el).hide()):($("#trackInfoButtons").slideDown("fast"),$(".info",this.el).show())},
kd:function(){if(!this.$b){var b=this.model.get("selectedTrack"),c=$(".contents",this.el);null!=b?c.is(":visible")||(this.$b=!0,c.fadeIn(400,r(this,function(){this.$b=!1;$(this.el).is(":visible")&&this.kd()}))):c.is(":visible")&&(this.$b=!0,c.fadeOut(200,r(this,function(){this.$b=!1;this.kd()})))}},Cv:function(){this.model.get("currentTrack")instanceof An&&($(".liveNowStatusIcon").animate({opacity:"0.4"},2E3),$(".liveNowStatusIcon").animate({opacity:"1.0"},2E3,"swing",r(this,this.Cv)))},Ze:function(b){b&&
"ANIMATEDOVERLAY"==b.C()&&$(".contents",this.el).fadeOut(200)},oj:function(b){b&&"ANIMATEDOVERLAY"==b.C()&&$(".contents",this.el).fadeIn(200)},sE:function(){z.b(nj);return!1},rE:function(){if(this.model.get("facebookAuthenticated")){var b=this.model.get("currentUser");z.b(vi,{autoShareEnabled:!1,autoShareTrackPlay:b.Lg,autoShareLikes:b.Kg,autoShareFollows:b.Jg,userInitiated:!0})}return!1},tE:function(){var b=this.model.get("currentUser");null!=b&&b.p()?T(jv,{onSuccessRedirect:"/account/privacy"}):
V("/account/privacy",!0,!0);return!1},events:{"click .buyButton":"buyButtonClick","click .shareButton":"shareButtonClick","click .whyAdsButton":"whyAdsClick","click .songTitle":"songTitleClick","click .artistSummary":"artistSummaryClick","click .albumTitle":"albumTitleClick"},whyAdsClick:function(){s("ad",{action:"why_ads_tapped",device_os:"web"},this.model.get("currentUser"));$("#audioAdDetail").toggle();return!1},shareButtonClick:function(){var b=this.model.get("currentUser");if(null==b||b.p())T(jv);
else{var b=this.model.get("selectedTrack"),c=this.model.get("currentStation");b&&c&&(c.B()&&(c=this.model.get("stationList").Oc(b.e())),T(Gu,{mode:"station_and_song",station:c,track:b}),s("link",{click:"shareButton",source:"TrackInfoView"},this.model.get("currentUser")))}return!1},menuButtonClick:function(){return!1},buyButtonClick:function(){s("link",{click:"buyButton",source:"TrackInfoView"},this.model.get("currentUser"))},songTitleClick:function(){T(Fw,"song")},artistSummaryClick:function(){T(Fw,
"artist")},albumTitleClick:function(){T(Fw,"album")}});function gz(){}
gz=Backbone.View.extend({CB:4,mZ:4,Xb:300,initialize:function(){this.$l=null;this.bl=0;this.model.bind("change:selectedTrack",r(this,this.ss));this.model.bind("change:selectedArtist",r(this,this.iO));z.c(Sg,r(this,this.yH));window.pandoraCustomContentLoaded=this.tF;this.render()},el:$("#trackDetailContainer").get(0),render:function(){$("#trackDetail",this.el).append($("#trackDetailItemThumbInfo").tmpl());$("#trackDetail",this.el).append($("#trackDetailItemTmpl").tmpl({heading:Uc(),className:"lyrics"}));
$("#trackDetail",this.el).append($("#trackDetailNoContentItemTmpl").tmpl({noContentText:Vc(),className:"nolyrics"}));$("#trackDetail",this.el).append($("#trackDetailFeaturedTmpl").tmpl({className:"featured"}));$("#trackDetail",this.el).append($("#trackDetailArtistMessageTmpl").tmpl({className:"artistMessage"}));$("#trackDetail",this.el).append($("#trackDetailItemTmpl").tmpl({heading:Wc(),className:"artistBio"}));$("#trackDetail",this.el).append($("#trackDetailItemTmpl").tmpl({heading:Zc(),className:"aboutEpisode"}));
$("#trackDetail",this.el).append($("#trackDetailItemTmpl").tmpl({heading:$c(),className:"moreShows"}));$("#trackDetail",this.el).append($("#trackDetailItemTmpl").tmpl({heading:Xc(),className:"relatedArtists"}));k.debug("sending google analytics event: backstage");window.ga("send","backstage");return this},cD:function(b){if(!b)return!1;b=b.Vu||b.$u;return b?(b=this.model.get("stationList").Oc(b))?b.Ba():!1:!1},YC:function(b){if(!b)return null;b=b.e();if(!b)return null;b=this.model.get("stationList").Oc(b);
if(!b)return!1;var c=this.model.get("currentUser");return c?b.Xg()===c.t:!1},ED:function(b){var c=this.YC(b),d=this.cD(b),e=$(".tpr-coachmark",this.el);!c||0>=b.gD||d?e.hide():(c=this.OC(b)||this.PC(b))?(b=[Fd(c.Ai),"<span class='tpr-coachmark__text__details'>",Fd(b.Da),"</span>on <span class='tpr-coachmark__text__details'>",Fd(c.Zs),"</span>on <span class='tpr-coachmark__text__details'>",Fd(c.mw.format("mmm dd, yyyy")),"</span>"],e.find(".tpr-coachmark__text").html(b.join(" ")),e.show()):e.hide()},
PC:function(b){var c=this.model.get("stationList"),d=b.$u;b=b.dD;return d&&b?(c=c.Oc(d))?{Ai:"You last thumbed up ",Zs:c.ea(),mw:b}:null:null},OC:function(b){var c=this.model.get("stationList"),d=b.Vu;b=b.MC;return d&&b?(c=c.Oc(d))?{Ai:"You first thumbed up ",Zs:c.ea(),mw:b}:null:null},yH:function(b){var c=this.model.get("selectedTrack");c&&c instanceof no&&c.od==b.artistMessageId&&$(".artistMessage .icon",this.el).removeClass("icon-flag-outline").addClass("icon-flag-filled")},ss:function(){var b;
this.Q=this.model.get("selectedTrack");var c=this.model.get("currentTrack");this.ED(this.Q);b=$(".item.featured",this.el);null==this.Q||this.Q.Zd||null==c||this.Q.o()!=c.o()?b.toggle(!1):b.toggle(this.Q.gh());this.Q&&this.Q instanceof no?(_.contains(Zm(),this.Q.od)?$(".artistMessage .icon",this.el).removeClass("icon-flag-outline").addClass("icon-flag-filled"):$(".artistMessage .icon",this.el).removeClass("icon-flag-filled").addClass("icon-flag-outline"),(c=this.Q.rC)&&0<c.length?(b=this.Q.qC,$(".artistMessage .btns a",
this.el).attr("href",c).text(b),-1<c.indexOf(cn())&&$(".artistMessage .btns a",this.el).removeAttr("target"),$(".artistMessage .btns",this.el).show()):$(".artistMessage .btns",this.el).hide(),$(".artistMessage",this.el).show(),z.b(qk,{artistMessageId:this.Q.od,artistUid:this.Q.Qe,metric:m.Kb.RA(),isOnDemand:this.Q.Ef()})):$(".artistMessage",this.el).hide();c=$(".lyrics .itemContent",this.el);c.empty();null==this.Q||this.Q.Zd||(b=this.Q.po,null!=b&&(b=b.replace(/\n/g,"<br>"),b=$("#lyricsContentTmpl").tmpl({lyricSnippet:b}),
c.empty().append(b)));$(".nolyrics",this.el).hide();$(".lyrics",this.el).hide();c=this.Q?this.Q.Pe:null;c!=this.TK&&(this.TK=c,$(".artistBio .itemContent",this.el).prev().empty(),$(".artistBio .itemContent",this.el).empty(),$(".artistBio",this.el).hide(),$(".relatedArtists .itemContent",this.el).empty(),$(".relatedArtists .itemContent",this.el).prev().empty(),$(".relatedArtists",this.el).hide());if(this.Q&&this.Q.Zd){var d=this.Q.Zd;if(null!=d&&0<d.length){this.bl=(this.bl+1)%2;$.get(d,r(this,function(b){$("#trackDetail").hide();
b+="<script>$(document).ready(function() {setTimeout(function() { pandoraCustomContentLoaded("+this.bl+")}, 500)});\x3c/script>";var c=$("#customContentTrackDetailFrame"+this.bl);c.hide();try{c.html(b)}catch(l){k.error("Bad HTML for template "+d)}$("#customContentTrackDetail").show();this.kd()}));return}k.warn("No station template for "+this.Q.o())}else $("#customContentTrackDetail").hide();this.kd();this.mQ()},tF:function(b){$("#customContentTrackDetailFrame"+b).show();$("#customContentTrackDetailFrame"+
(b+1)%2).hide()},kd:function(){if(!this.$b){var b=this.model.get("selectedTrack");if(null!=b)b instanceof yn||b.Ec?$("#trackDetail").hide():$("#trackDetail").show(),$("#detailContainer").is(":visible")||(this.$b=!0,$("#detailContainer").fadeIn(400,r(this,function(){this.$b=!1;$("#home").is(":visible")&&this.kd()})));else{var b=this.model.get("currentStation"),c=this.model.get("narrative"),b=b&&b.Na()&&null!=c?!1:!0;$("#detailContainer").is(":visible")?b&&(this.$b=!0,$("#detailContainer").fadeOut(200,
r(this,function(){$(".lyrics",this.el).css({opacity:"hide",height:"hide"});this.$b=!1;this.kd()}))):b||(this.$b=!0,$("#detailContainer").fadeIn(400,r(this,function(){this.$b=!1;this.kd()})))}}},Ol:function(){setTimeout(r(this,function(){$(".itemContent:visible",this.el).next(".divider").removeClass("last").last().addClass("last")}),50)},mQ:function(){var b=this.model.get("selectedTrack"),c=Qo();null!=b&&(c&&!b.Zd?(null!=b.po?(this.Af($(".nolyrics",this.el)),this.Is($(".lyrics",this.el))):(this.Af($(".lyrics",
this.el)),this.Af($(".nolyrics",this.el))),this.Ol()):($(".nolyrics",this.el).hide(),$(".lyrics",this.el).hide()))},iO:function(){var b=this.model.get("selectedArtist");if(null!=b){var c=this.model.get("selectedTrack"),c=c&&c instanceof no,d=b.Hu;null!=d&&0<d.length&&ky(b,this.Q)?($(".artistBio .itemContent",this.el).prev().text(Wc()+" "+b.getName()),d=$("#artistBioContentTmpl").tmpl(b),$(".artistBio .itemContent",this.el).empty().append(d),this.Is($(".artistBio",this.el)),this.Ol()):this.Af($(".artistBio",
this.el));d=b.kv;if(!c&&0<d.length&&ky(b,this.Q)){var e=$(".relatedArtists .itemContent",this.el);e.empty();var h=this.CB;$.each(d,function(b,c){if(b==h)return!1;var d=$("#relatedArtistItemTmpl").tmpl(c);e.append(d)});this.Is($(".relatedArtists",this.el));this.Ol()}else this.Af($(".relatedArtists",this.el));b=b.EK()?Yc():Xc();$(".relatedArtists .itemContent",this.el).prev().text(b)}else this.Af($(".artistBio",this.el)),this.Af($(".relatedArtists",this.el));this.Ol()},showFullLyrics:function(b){var c=
b.Mu;b=b.cv;var d=$(".lyrics",this.el).height();$(".lyrics",this.el).css({overflow:"hidden","max-height":d});$(".lyrics",this.el).data("snippetHeight",d);$(".lyrics .lyricsText",this.el).empty().append(b);$(".lyrics .lyricsText",this.el).after($("#fullLyricsCreditsTmpl").tmpl(c));c=$(".lyrics .itemContent",this.el).height();$(".lyrics",this.el).animate({"max-height":c},r(this,function(){$(".lyrics",this.el).css({overflow:"","max-height":""})}));$(".showLessLyrics",this.el).show()},eK:function(){var b=
$(".lyrics",this.el).data("snippetHeight");$(".lyrics",this.el).animate({height:b},r(this,function(){var b=this.model.get("selectedTrack");null!=b&&(b=b.po,b=null!=b?b.replace(/\n/g,"<br>"):"",$(".lyrics .lyricsText",this.el).empty().append(b));$(".lyrics",this.el).css({height:""})}));$(".fullLyricsCredit",this.el).fadeOut(r(this,function(){$(".fullLyricsCredit",this.el).remove()}));$(".gracenote_copyright",this.el).fadeOut(r(this,function(){$(".gracenote_copyright",this.el).remove()}));$(".showLessLyrics",
this.el).hide();$(".showMoreLyrics",this.el).show()},showFullContent:function(b){var c=$(b.target);b=c.parent();var d=b.find(".snippetAndContentContainer"),e=d.find(".snippet"),h=d.find(".fullContent"),c=c.attr("data-link-click"),l=d.height();d.css({overflow:"hidden","max-height":l});d.data("snippetHeight",l);e.hide();h.show();e=h.height();d.animate({"max-height":e},r(this,function(){d.css({overflow:"","max-height":""})}));s("link",{click:c,source:"TrackDetailView"},this.model.get("currentUser"));
"showFullEpisodeList"==c&&(this.$l=[this.model.get("currentStation").e(),l]);$(".showFullContent",b).hide();$(".showSnippet",b).show()},showSnippet:function(b){var c=$(b.target);b=c.parent();var d=b.find(".snippetAndContentContainer"),e=d.find(".snippet"),h=d.find(".fullContent"),c=c.attr("data-link-click"),l=d.data("snippetHeight"),l=l?l:this.$l?this.$l[1]:e.innerHeight();d.animate({height:l},r(this,function(){e.show();h.hide();d.css({height:""})}));s("link",{click:c,source:"TrackDetailView"},this.model.get("currentUser"));
"showLessEpisodeList"==c&&(this.$l=null);$(".showSnippet",b).hide();$(".showFullContent",b).show()},fm:function(){null==this.model.get("narrative")&&null==this.model.get("songNarrative")?$("#trackDetail",this.el).fadeIn():$("#trackDetail",this.el).fadeOut();this.kd()},events:{"click .showMoreLyrics":"showMoreLyricsClick","click .showLessLyrics":"showLessLyricsClick","click .showFullBio":"showFullBioClick","click .getRelatedArtist":"handleRelatedArtistClick","click .showFullContent":"showFullContent",
"click .showSnippet":"showSnippet","click .featured_learn_more_link":"featuredTrackLearnMoreClick","click .artistMessage a.js-cta":"artistMessageButtonClick","click .artistMessage a.js-flag-message":"artistMessageFlagClick"},showMoreLyricsClick:function(){var b=this.model.get("selectedTrack");null!=b&&this.trigger("getFullLyrics",ny(b));$(".showMoreLyrics",this.el).hide();T(ow);s("link",{click:"showMoreLyrics",source:"TrackDetailView"},this.model.get("currentUser"));return!1},showLessLyricsClick:function(){this.eK();
T(pw);s("link",{click:"showLessLyrics",source:"TrackDetailView"},this.model.get("currentUser"));return!1},showFullBioClick:function(){T(Fw,"artist");s("link",{click:"showFullBio",source:"TrackDetailView"},this.model.get("currentUser"))},handleRelatedArtistClick:function(){T(Fw,"artist");s("link",{click:"getRelatedArtist",source:"TrackDetailView"},this.model.get("currentUser"))},featuredTrackLearnMoreClick:function(){s("link",{click:"featuredTrackLearnMore",source:"TrackDetailView"},this.model.get("currentUser"))},
artistMessageButtonClick:function(){z.b(qk,{artistMessageId:this.Q.od,artistUid:this.Q.Qe,metric:m.Kb.QA(),isOnDemand:this.Q.Ef()});return!0},artistMessageFlagClick:function(){var b=this.Q.od;if(!_.contains(Zm(),b)){var c=Zm();c.push(b);om(fm,c.join(","));z.b(rk,{artistMessageId:b,artistUid:this.Q.Qe,stationId:this.Q.e()})}},Af:function(b,c){b.stop(!0,!0).animate({opacity:"hide",height:"hide"},this.Xb,c)},Is:function(b,c){b.stop(!0,!0).animate({opacity:"show",height:"show"},this.Xb,function(){te()&&
b.css("filter","none !important");c&&c()})}});function hz(){}
hz=Backbone.View.extend({$B:250,Nh:7,$A:$("#currentSlideArrow").height(),EB:300,FB:15,PB:500,nu:1E3,St:215,initialize:function(){this.mh={};this.Um=null;this.dd=this.selectedIndex=0;this.nr=null;this.Eh=!1;this.Lm={};this.of=this.Bs=!1;this.model.bind("change:currentTrack",r(this,this.Xk));z.c(bg,r(this,this.Wv));this.model.bind("change:keyPressed",r(this,this.FI));this.model.bind("change:currentContextualTip",r(this,this.KH));z.c(Ae,r(this,this.KE));z.c(Xe,r(this,this.Ui));z.c(kf,r(this,this.SP));
z.c(mf,r(this,this.nP));z.c(bi,r(this,this.WP));z.c(mg,r(this,this.DL));z.c($h,r(this,this.nA));z.c(li,r(this,this.lm));z.c(Ek,r(this,this.Ip));z.c(We,r(this,this.NM));z.c(hh,r(this,this.Ry));z.c(ih,r(this,this.Ry));z.c(ci,r(this,this.Dx));z.c(og,r(this,this.Dx));z.c(Ue,r(this,this.uJ));z.c(Rk,r(this,this.Ze));z.c(Qk,r(this,this.oj));U(Jv,r(this,this.DP));U(Nv,r(this,this.nJ));U(Kv,r(this,this.Hx));U(Lv,r(this,this.Gx));U(qu,r(this,this.hr));U(Vv,r(this,this.ut));$("#track_menu_dd .newStationFromSong").click(r(this,
this.mr));$("#track_menu_dd .newStationFromArtist").click(r(this,this.lr));$("#track_menu_dd .tiredOfSong").click(r(this,this.mt));$("#track_menu_dd .whySelected").click(r(this,this.IQ));$("#track_menu_dd .moveSong").click(r(this,this.gr));Uy("/song/sleep/");this.uK();this.lm(Dm())},el:$(".slidesForeground").get(0),uK:function(){this.sy=this.P=Qm();this.Eg=null;this.Wq=this.P;this.ut();$("#trackInfo .slideDragHandle").draggable({axis:"y",containment:$(".slideDragLimit"),helper:"clone",start:r(this,
this.rp),stop:r(this,this.sp),drag:r(this,this.qp)});$("#trackInfo .slideDragHandle").hover(function(){$("#trackInfo .slideDrag").addClass("hover")},function(){$("#trackInfo .slideDrag").removeClass("hover")})},rp:function(b,c){T(Iv);this.yw=c.offset.top-this.P;this.Jz();s("link",{click:"resizeAlbumArt",source:"AlbumSlidesView"},this.model.get("currentUser"))},Jz:function(){null!=this.Eg&&clearTimeout(this.Eg);this.Eg=setTimeout(r(this,function(){this.P!=this.Wq&&(this.P=this.Wq,this.Xf());this.Jz()}),
1E3/60)},sp:function(b,c){null!=this.Eg&&clearTimeout(this.Eg);this.Eg=null;this.P=c.offset.top-this.yw;this.ut();om(Vl,this.P)},qp:function(b,c){this.Wq=c.offset.top-this.yw},Ze:function(b){this.sy=this.P;b&&"ANIMATEDOVERLAY"==b.C()&&(this.P!=this.St&&(this.P=this.St,this.Xf()),$(".slides",this.el).fadeOut(200))},oj:function(b){b&&"ANIMATEDOVERLAY"==b.C()&&(this.P=this.sy,this.Xf(),$(".slides",this.el).fadeIn(200))},ut:function(){this.jv();this.nv($(".stationSlides",this.el))},Xf:function(){this.jv();
var b=this.model.get("currentStation");null!=b&&this.nv($("#stationSlides"+b.e()))},jv:function(){$(".slides",this.el).height(this.P);var b=this.P+this.Nh;$("#mainContentContainer .slidesBackground div").height(b);$(".slides",this.el).css("margin-top",-(b+this.$A+1));$("#currentSlideArrow").css("margin-right",Math.floor(this.P/2)-this.Nh)},nv:function(b){b.each(r(this,function(b,d){$("img",d).attr({width:this.P,height:this.P});$(".slide",d).css({width:this.P,height:this.P});var e=0.8*this.P;$(".pauseWatermark",
d).css({width:e,height:0.3*this.P,right:this.P+Math.floor((this.P-e)/2)+2*this.Nh});$(".muteWatermark",d).css({width:e,height:0.3*this.P,right:this.P+Math.floor((this.P-e)/2)+2*this.Nh});$(".replayWatermark",d).css({width:e,height:0.3*this.P,right:this.P+Math.floor((this.P-e)/2)+2*this.Nh});this.Ij($(d))}))},Pc:function(){var b=this.model.get("currentStation");return null!=b?$("#stationSlides"+b.e()):null},Xk:function(){if(this.Eh)Yd(this,this.Xk,100);else{this.ap();var b=this.model.get("currentTrack"),
c=this.model.get("currentStation");if(null!=c&&null!=b){if(b instanceof yn&&!b.Yl())return;var d=c.e(),e=this.mh[d]?this.mh[d].o():null;if(null==e||"0"==e||e!=b.o()){var e=$("#stationSlides"+d),h=$(".slide",e).eq(1),l=$(".slide",e).eq(0);if(!c.Ga()&&h.data("track")instanceof lo&&b instanceof lo){h.data("track",b);$(".art",h).attr("src",b.sb());return}null==this.Lm[d]&&(this.Lm[d]=0);l.data("track",b);l.data("slideIndex",this.Lm[d]++);c=$("#songSlideTmpl").tmpl(this.P);e.prepend(c);this.$N(h);$(".pauseWatermark",
h).fadeOut();$(".muteWatermark",h).fadeOut();this.paused=!1;this.muted&&this.Js();var p=$(".art",l).attr("src",b.sb());p&&p.bind("imgpreload",function(){$(this).fadeIn("fast").prev().hide()});$(".treatment.current",l).stop(!0,!0).fadeIn(400,function(){$(this).show()});$(".treatment.previous",l).stop(!0,!0).fadeOut(400,function(){$(this).hide()});0<h.length&&($(".treatment.current",h).stop(!0,!0).fadeOut(400,function(){$(this).hide()}),h.data("track")instanceof yn||this.Jp(h,400));0==this.selectedIndex?
(c.animate({width:this.P}),this.Uf(b)):(this.selectedIndex++,c.css({width:this.P}));this.mh[d]=b;this.Ij(e);this.AA(l,b);$(".featuredTrackArtBanner",h).fadeOut();b.gh()&&$(".featuredTrackArtBanner",l).show()}this.of=b instanceof An}this.ak();0==this.selectedIndex?this.Uf(b):(b.cb()&&this.hr(),this.bw(),this.nr=setTimeout(r(this,function(){this.hr()}),1E3*this.FB))}},$N:function(b){if(b.data("track")instanceof yn){var c=this.model.get("currentStation");c&&!c.Ga()&&(this.model.get("displayingCompanion")?
(this.Ip(),this.kh=b):(this.kh=b,this.Ip()))}},Ip:function(){var b=this.model.get("currentStation");if(this.kh&&!b.Ga()){var c=this.kh.data("track");if(null!=c){c.lf="";c.Nb="/img/ads/generictile.png";var d=$(".art",this.kh);this.Jp(this.kh,200,function(){d.attr("src",c.sb())})}this.kh=null}},Uf:function(b){var c=this.model.get("selectedTrack");null!=c&&null!=b&&c.o()==b.o()||this.model.set({selectedTrack:b})},bw:function(){null!=this.nr&&clearTimeout(this.nr)},Wv:function(){this.ap();var b=null,
c=this.model.get("currentStation");null!=c&&(b=c.e());b!=this.ja&&(this.selectedIndex=0,this.lF(b),null!=this.ja?(this.lP(this.ja,r(this,function(){this.ja=null;this.Wv()})),this.iK(),T(mv)):(this.ja=b,this.kP(b),this.ak()))},KE:function(){$(".stationSlides",this.el).remove();this.ja=null;this.mh={};this.Lm={};this.P=Qm()},Ui:function(b){var c=b.track,d=this;$("#stationSlides"+b.stationId).find(".slide").each(function(){d.AA(this,c)})},AA:function(b,c){var d=$(b).data("track");Rx(d,this.model.get("stationList"))?
($(".thumbUp",b).addClass("thumbUpDis").empty(),$(".thumbDown",b).addClass("thumbDownDis").empty()):d&&d.o()==c.o()&&($(".thumbUp",b).removeClass("indicator"),$(".thumbDown",b).removeClass("indicator"),1==c.Hc?$(".thumbUp",b).addClass("indicator"):-1==c.Hc&&$(".thumbDown",b).addClass("indicator"),$(b).data("track",c))},lP:function(b,c){if(null!=b){this.Eh=!0;var d=$("#stationSlides"+b);if(0<d.length){var e=d.width(),h=e-(this.dx()+this.jx(d));d.animate({width:h},r(this,function(){d.hide();d.width(e);
this.Ij(d);this.Eh=!1;c()}));return}}c()},kP:function(b){if(null!=b){this.Eh=!0;$(".stationSlides",this.el).hide();var c=$("#stationSlides"+b);this.Ij(c);var d=this.Gl(c),e=this.P*(d+3);c.css("left",e);c.show();c.animate({left:-e},r(this,function(){Yd(this,function(){var c=this.model.get("currentStation");c&&c.e()==b&&0<d&&null==this.model.get("selectedTrack")&&(this.mh[b]?this.Uf(this.mh[b]):this.Uf(this.model.get("currentTrack")))},500);this.Bs&&this.rv();this.Xf();this.Eh=!1}))}},lF:function(b){if(null!=
b){var c=$("#stationSlides"+b);if(0==c.length){var c=$("#stationSlidesTmpl").tmpl().appendTo($(".slides",this.el)),d=$("#songSlideTmpl").tmpl(this.P);d.width(this.P);c.append(d);this.Ij(c);c.attr("id","stationSlides"+b);c.show()}}},Ij:function(b){var c="none"!=b.css("display"),d=this.Gl(b);b.width(this.dx()+this.P*(d+4));c=this.P*(d+3)*(c?-1:1);d=this.kx(b);b.css({left:c,"padding-left":d})},dx:function(){return $("#mainContentContainer").width()-$(".stationContent").outerWidth()},FI:function(){var b=
this.model.get("keyPressed");if(null!=b&&"INPUT"!=b.target.tagName&&"TEXTAREA"!=b.target.tagName&&$("#mainContent .home").is(":visible")){if(37==b.which){this.Sl(1);return}if(39==b.which){this.Sl(-1);return}}this.aq()},Sl:function(b){this.ir||(this.dd=b,this.fr=0,this.pp())},moveTo:function(b){this.fr=this.dd=0;this.Kz(b)},hr:function(){this.moveTo(0)},pp:function(){if(!this.ir)if(0!=this.dd)this.Kz(this.selectedIndex+this.dd);else{var b=this.Pc(),c=$(".slide",b).eq(this.selectedIndex+1);c&&($(".treatment.previous",
c).stop(!0,!0).fadeOut(200,function(){$(this).hide()}),null!=this.kr&&clearTimeout(this.kr),this.kr=setTimeout(r(this,function(){this.kr=null;this.Uf(c.data("track"))}),this.PB),(b=c.data("track"))&&s("template_impression",{station_id:b.e(),track_id:b.o()},this.model.get("currentUser")));this.ak()}},aq:function(){0!=this.dd&&(this.dd=0,this.pp())},Kz:function(b){var c=this.Pc();if(c)if(b=Math.max(b,0),b=Math.min(b,this.Gl(c)-1),b!=this.selectedIndex){var d=$(".slide",c).eq(this.selectedIndex+1);if(d){var e=
this.model.get("currentStation"),h=d.data("track");(e=e.Ga())&&(!e||h instanceof yn)||this.Jp(d,200)}this.Uf(null);this.bw();this.selectedIndex=b;b=0==this.fr?"easeInQuad":"linear";this.ir=!0;c.animate({"padding-left":this.kx(c)},this.EB,b,r(this,function(){this.ir=!1;0>this.dd?this.dd--:0<this.dd&&this.dd++;this.fr++;this.pp()}))}else this.aq()},Jp:function(b,c,d){te()?$(".treatment.previous",b).stop(!0,!0).animate({opacity:0.75},c,function(){$(this).show();d&&d()}):$(".treatment.previous",b).stop(!0,
!0).fadeIn(c,function(){$(this).show();d&&d()})},Gl:function(b){return null!=b?$(".slide",b).length-1:0},kx:function(b){return Math.max(0,this.jx(b)*this.selectedIndex)},jx:function(b){return $(".slide",b).last().outerWidth(!0)},mr:function(){if(this.qf){var b=this.qf.data("track");b&&z.b(Ci,{stationCode:"mi"+b.o(),source:"track_action"})}return!1},lr:function(){if(this.qf){var b=this.qf.data("track");b&&z.b(Ci,{stationCode:"mi"+b.Pe,source:"track_action"})}return!1},mt:function(){var b=this.qf.data("track");
b&&z.b(Ui,b);return!1},SP:function(b){var c=this.model.get("currentTrack");null!=b&&b.o()==c.o()&&(this.Us=!0,z.b(ci,{isTiredOfSongSkip:!0}),b="/song/sleep/"+b.o(),Sy(b),Ty(b))},NM:function(){this.Us&&((new X({message:vc()})).render(),this.Us=!1)},Ry:function(){this.Us=!1},IQ:function(){var b=this.qf.data("track");if(b){var c=!0,d=this.model.get("currentStation");d&&(d.B()&&!d.X()||d.Na())&&(c=!1);z.b(Vi,{track:b,allowActions:c})}return!1},gr:function(){var b=this.qf.data("track");new iz({model:this.model,
track:b});return!1},nP:function(b){this.model.get("currentTrack");var c=b[2];if(b=this.Pc()){var d=this;$(".slide",b).each(function(){var b=$(this).data("track");if(b&&b.o()==c.o())return $(this).data("disableMenu",!0),d.Gq($(this)),!1})}},lm:function(b){0==b?(this.muted=!0,this.Js()):(this.muted=!1,this.Yi())},Yi:function(){var b=this.Pc(),b=$(".slide",b).eq(1);$(".muteWatermark",b).fadeOut()},Js:function(){if(!this.paused){var b=this.Pc(),b=$(".slide",b).eq(1);$(".muteWatermark",b).css("visibility",
"visible").fadeIn();this.Xf()}},Dx:function(){this.js&&this.nA()},uJ:function(){this.Eh?this.Bs=!0:this.rv()},rv:function(){this.Bs=!1;z.b(Ve)},nA:function(){this.Eq();this.Pl()},Eq:function(){this.paused=!1;var b=this.Pc(),b=$(".slide",b).eq(1);$(".pauseWatermark",b).fadeOut();this.muted&&this.Js()},SO:function(){this.paused=!0;if(!this.js){this.Yi();this.Pl();var b=this.Pc(),b=$(".slide",b).eq(1);$(".pauseWatermark",b).css("visibility","visible").fadeIn();this.Xf()}},WP:function(){this.SO()},DL:function(){this.XO()},
XO:function(){this.Yi();this.Eq();this.js=!0;var b=this.Pc(),b=$(".slide",b).eq(1);$(".replayWatermark",b).css("visibility","visible").fadeIn();this.Xf()},Pl:function(){this.js=!1;var b=this.Pc(),b=$(".slide",b).eq(1);$(".replayWatermark",b).fadeOut()},iK:function(){this.Eq();this.Yi();this.Pl()},DP:function(b){b&&b.Zg()&&b.v()&&b.Zg().o()&&z.b(Wi,[b.Zg().e(),b.v().e(),b.Zg().o(),b.U().e()])},Gx:function(){var b=$(".slide",this.el);1==b.length?this.Fs($(b[0]),!0):1<b.length&&this.Fs($(b[1]),!0)},
KH:function(){this.model.get("currentContextualTip")||$(".submenu").removeClass("submenu_force_visible")},nJ:function(){this.Hx();setTimeout(r(this,function(){$(".submenu").addClass("submenu_force_visible")}),100)},Hx:function(){this.Gx();this.Ea.open()},ak:function(){if(this.of)$(".slides_left_scroll",this.el).stop(!0,!0).fadeOut(200);else if(this.Gv){var b=$(".slides",this.el).height(),c=$(".slides_right_scroll",this.el).height(),b=Math.floor(b/2)+c;$(".slides_right_scroll",this.el).css("margin-top",
-1*b);$(".slides_left_scroll",this.el).css("margin-top",-1*b);0<this.selectedIndex?$(".slides_right_scroll",this.el).stop(!0,!0).fadeIn(200):$(".slides_right_scroll",this.el).stop(!0,!0).fadeOut(200);this.selectedIndex<this.Gl(this.Pc())-1?$(".slides_left_scroll",this.el).stop(!0,!0).fadeIn(200):$(".slides_left_scroll",this.el).stop(!0,!0).fadeOut(200)}else $(".slides_right_scroll",this.el).stop(!0,!0).delay(this.nu).fadeOut(200),$(".slides_left_scroll",this.el).stop(!0,!0).delay(this.nu).fadeOut(200)},
events:{mouseover:"allSlidesMouseEnter",mouseout:"allSlidesMouseLeave","mousedown .slides_right_scroll":"rightScrollDown","mouseup .slides_right_scroll":"scrollMouseUp","mousedown .slides_left_scroll":"leftScrollDown","mouseup .slides_left_scroll":"scrollMouseUp","mouseenter .slide":"slideMouseEnter","mouseleave .slide":"slideMouseLeave","click .slide":"slideClick","click .thumbDown":"thumbDownClick","click .thumbUp":"thumbUpClick","click .pauseWatermark":"pauseWatermarkClick","click .replayWatermark":"replayWatermarkClick",
"click .muteWatermark":"muteWatermarkClick"},pauseWatermarkClick:function(){z.b($h,{userInitiated:!0});return!1},replayWatermarkClick:function(){this.Pl();var b=this.model.get("currentStation");b&&(this.Uf(null),z.b(og,b.e()));return!1},muteWatermarkClick:function(){this.Yi();T(mv);T(qw);return!1},allSlidesMouseEnter:function(){this.Gv=!0;this.ak()},allSlidesMouseLeave:function(b){b.relatedTarget&&0<$(b.relatedTarget).parents(".slidesForeground").length||(this.Gv=!1,this.ak())},rightScrollDown:function(){if(this.of)return!1;
T(tw);this.Sl(-1);return!1},leftScrollDown:function(){if(this.of)return!1;T(tw);this.Sl(1);return!1},scrollMouseUp:function(){this.aq();return!1},slideMouseEnter:function(b){this.of||$("#track_menu_dd").is(":visible")&&this.Ea&&!this.Ea.Wk()||(b=$(b.target).closest(".slide"),0==Ox(this.model).length?$("#track_menu_dd .moveSong").hide():$("#track_menu_dd .moveSong").show(),this.Fs(b,!1),$(".previous",b).stop(!0,!0).animate({opacity:0.5},200))},IE:function(b){return!b||!(b instanceof yn||b.Ec||b.ao)&&
b.Du&&b.Eu&&b.Vn?!0:!1},Fs:function(b,c){var d=b.data("track");if(this.IE(d)&&!b.data("disableMenu")){if(null!=this.wi&&null!=b){var d=this.wi.data("track"),e=b.data("track");d&&e&&d.o()==e.o()&&this.Ea.unbind("close")}this.ap();this.Zo();var h=b.find(".thumbContainer"),d=r(this,function(){h.fadeIn(200);this.Zo();this.jE(h)});c?d():this.Um=setTimeout(d,this.$B)}},ap:function(){null!=this.Ea&&null!=jz&&this.Ea.close()},jE:function(b){null==this.Ea?this.Ea=new kz(this.model,b):lz(this.Ea,$(".menuArrow",
b));this.qf=b.closest(".slide");var c=this.model.get("currentStation");c&&(c.B()&&!c.X()||c.Na())?($("#track_menu_dd .moveSong").hide(),$("#track_menu_dd .tiredOfSong").hide()):($("#track_menu_dd .moveSong").show(),$("#track_menu_dd .tiredOfSong").show());var d=b.offset(),c=d?d.top:0,d=d?d.left:0;$("#track_menu_dd").css({top:c-$("#track_menu_dd").height(),left:d-$("#track_menu_dd").width()/2+b.width()/2})},slideMouseLeave:function(b){this.of||(b=$(b.target).closest(".slide"),this.Ea&&null!=jz?(this.wi=
b,this.Ea.bind("close",r(this,this.Gq))):this.Gq(b),$(".previous",b).stop(!0,!0).animate({opacity:te()?0.75:1},200))},slideClick:function(b){if(!this.of){var c=!1,d=$(b.target).closest(".slide"),e=$(b.target).closest(".stationSlides");b=d.data("track");d=d.data("slideIndex");b&&0<=d&&(d=$(".slide",e).length-d-2,b instanceof yn&&(c=!0,b.lf&&window.open(b.lf)),b&&this.moveTo(d));c||T(tw)}},Gq:function(b){!b&&this.wi&&(b=this.wi,this.wi=null);b&&(b.find(".thumbContainer").fadeOut(200),this.Zo())},Zo:function(){null!=
this.Um&&(clearTimeout(this.Um),this.Um=null)},thumbDownClick:function(b){$(b.target).blur();var c=$(b.target).closest(".slide").data("track");b=$(b.currentTarget).hasClass("indicator");Rx(c,this.model.get("stationList"))||(b?T(iv,{isPositive:!1,musicID:c.o()}):T(hv,{isPositive:!1,musicId:c.o()}));return!1},thumbUpClick:function(b){$(b.target).blur();var c=$(b.target).closest(".slide").data("track");b=$(b.currentTarget).hasClass("indicator");Rx(c,this.model.get("stationList"))||(b?T(iv,{isPositive:!0,
musicID:c.o()}):T(hv,{isPositive:!0,musicId:c.o()}));return!1}});function mz(){}
mz=Backbone.View.extend({xa:!0,uf:null,N:"registration",initialize:function(){this.ld=this.options.useLightbox;this.Jk=!1;this.model.bind("change:forceRegistration",r(this,this.Yj));U(Pv,r(this,this.Dd));U(Qv,r(this,this.Ed))},Yj:function(){this.model.get("forceRegistration")?$(".cancel",this.el).hide():$(".cancel",this.el).show()},X2:function(b){new nz({event:"confirm_email",title:va,subtitle:wa,message:b,yesButtonText:xa,noButtonText:ya})},Dd:function(b){"confirm_email"==b?(ne(this.N,"confirm_email"),
this.submitButtonClick()):"duplicateEmail"==b?(b=$("input[name=email]",this.el).val(),""!==b&&this.model.set({loginEmail:b}),V("/account/help",!1,!1)):"whyBirthDayReadMore"!=b&&"whyZipCodeReadMore"!=b&&"whyGenderReadMore"!=b||window.open("http://help.pandora.com/customer/portal/articles/1468760-information-about-privacy-on-pandora#2","_blank")},Ed:function(){},render:function(){this.A={};this.K={};$(".onboarding__register").hide();for(var b={months:[],days:[]},c=0;12>c;c++)9>c?b.months.push("0"+(c+
1)):b.months.push(c+1);for(c=0;31>c;c++)9>c?b.days.push("0"+(c+1)):b.days.push(c+1);this.ld?(b.isPopup=!0,b=Hx("registrationPanel",$("#registrationPopupHeaderTmpl").tmpl(),$("#registrationPopupContentTmpl").tmpl(b)),$(this.el).append(b)):(b=$("#registrationWelcomeTmpl").tmpl(b),$(this.el).append(b).hide().fadeIn(r(this,function(){$("input, textarea").placeholder();$("input[name=email]",this.el).focus();T(Zv)})));this.Yj();null!=A._data.accountUsername&&$("input[name=email]",this.el).val(A._data.accountUsername);
null!=Bo()&&$("input[name=birthYear]",this.el).val(Bo());null!=A._data.accountZipcode&&$("input[name=zipCode]",this.el).val(A._data.accountZipcode);null!=A._data.accountGender&&$("input[name=gender][value="+A._data.accountGender+"]",this.el).prop("checked",!0);if(b=this.model.get("facebookLoginInfo"))b.first_name&&($(".facebookName",this.el).text(b.first_name),$(".welcomeName",this.el).css("display","inline")),b.email&&$("input[name=email]",this.el).val(b.email),b.birthday&&(c=b.birthday.split("/"),
3==c.length&&4==c[2].length&&$("input[name=birthYear]",this.el).val(c[2])),b.gender&&$("input[name=gender][value="+b.gender.toUpperCase()+"]",this.el).prop("checked",!0);Yn(this.model.get("currentUser"))?$("input[name=zipCode]",this.el).attr("placeholder","Postal Code"):$("input[name=zipCode]",this.el).attr("placeholder","Zip Code");$(".registerButton",this.el).addClass("disabled");$(".onboarding__login").fadeIn();$(".onboarding__register").fadeOut();Yd(this,function(){this.toggleClearInput();this.toggleShowPassword()},
50);ne(this.N,"standard");return this},hideAndRemove:function(){this.model.get("modalPanel")==bu?($("#welcomeSearch .searchBox").hide(),$(".onboarding__login").fadeIn(),$(".onboarding__register").fadeOut()):($("#welcomeSearch .searchBox").slideDown(),$(".onboarding__login").fadeOut());$(this.el).remove()},events:{"blur input[name=email]":"validateEmailOnBlur","blur input[name=password]":"validatePasswordOnBlur","input input[name=password]":"validatePasswordOnInitialLoad","input input[name=email]":"validateEmailOnInitialLoad",
"input input[name=zipCode]":"validateZipcodeOnInitialLoad","input .js-birthyear":"validateBirthyearOnInitialLoad","blur .js-birthyear":"validateBirthyearOnBlur","blur input[name=zipCode]":"validateZipcodeOnBlur","keyup .js-birthyear":"onBirthyearKeyup","change .js-birthday":"monthDaySelected","change .js-birthmonth":"monthDaySelected","click .js-genderLabel":"onGenderClick","change input[name=gender]":"genderChange","closed .lightbox":"cancelClick","click .cancel":"cancelClick","change input[name=email]":"usernameChange",
"click .registerButton":"submitButtonClick","submit .registrationForm":"registrationFormSubmit","click .alreadyuserSignin":"gotoSigninForm","click .whyBirthdate":"whyBirthdayClicked","click .whyZipcode":"whyZipcodeClicked","click .whyGender":"whyGenderClicked","click .js-terms":"onTermsClicked","click .js-privacy":"onPrivacyClicked","click .js-show-password":"togglePassword","click .js-clear-field":"clearInput","keyup input[name=email]":"toggleClearInput","keyup input[name=password]":"toggleShowPassword"},
validatePasswordOnInitialLoad:function(){this.validatePasswordOnBlur(!0);this.toggleShowPassword()},validateEmailOnInitialLoad:function(){this.validateEmailOnBlur(!0)},validateZipcodeOnInitialLoad:function(){this.validateZipcodeOnBlur(!0)},validateBirthyearOnInitialLoad:function(){this.validateBirthyearOnBlur(!0)},validateEmailOnBlur:function(b){setTimeout(function(b){var d=$("input[name=email]",this.el);d.name="email";d.J=da();d.na="error_presubmit_invalid_email";this.W(d)?this.toggleClearInput():
(ax(d.val())?this.ka(d):!0!==b&&this.xa&&this.da(d),this.Ia(),this.xa=!0)}.bind(this,b),200)},validatePasswordOnBlur:function(b){setTimeout(function(b){var d=$("input[name=password]",this.el);d.name="password";d.J=ha();d.na="error_presubmit_pwd_length";this.W(d)||(bx(d.val())?this.ka(d):!0!==b&&this.da(d),this.Ia())}.bind(this,b),200)},validateBirthyearOnBlur:function(b){var c=$("#register_birthYear",this.el),d=$(".js-datePicker",this.el);c.name="birthyear";d.name="birthyear";d.J=la();this.W(c)||
(cx(c.val())?this.ka(c):!0!==b&&this.da(d),this.Ia())},validateZipcodeOnBlur:function(b){var c=$("input[name=zipCode]",this.el);c.name="zipcode";c.J=pa();this.W(c)||(ex(To(),c.val())?this.ka(c):(Yn(this.model.get("currentUser"))?(c.J=qa(),c.na="AU"===Ro()?"error_presubmit_invalid_au_zip":"error_presubmit_invalid_nz_zip"):(c.J=pa(),c.na="error_presubmit_invalid_us_zip"),!0!==b&&this.da(c)),this.Ia())},onGenderClick:function(b){this.uf="femaleRadio"==b.currentTarget.getAttribute("for")?"female":"male";
this.Ia()},genderChange:function(b){this.uf=b.target.value;this.Ia()},monthDaySelected:function(){var b=$("select[name='birthMonth'] option:selected",this.el).val();""!==$("select[name='birthDay'] option:selected",this.el).val()&&""!==b&&(b=$(".js-datePicker",this.el),b.name="datepicker",this.ka(b),this.Ia())},da:function(b){this.A[b.name]||(this.A[b.name]=new rx({el:b,Jf:b.J,N:b.N?b.N:this.N,na:b.na}),this.K[b.name]&&delete this.K[b.name])},W:function(b){return""===b.val()?(this.K[b.name]&&delete this.K[b.name],
!0):!1},ka:function(b){this.K[b.name]=b.val();this.A[b.name]&&(this.A[b.name].close(),delete this.A[b.name])},ce:function(){if(1>Object.keys(this.A).length&&this.K.email&&this.K.password&&this.K.zipcode&&this.K.birthyear&&null!==this.uf)if(this.Jk){if("datepicker"in this.K)return!0}else return!0;else return!1},Ia:function(){this.ce()?$(".registerButton",this.el).removeClass("disabled"):$(".registerButton",this.el).addClass("disabled")},onTermsClicked:function(){window.open("http://www.pandora.com/legal",
"_blank")},onPrivacyClicked:function(){window.open("http://www.pandora.com/privacy","_blank")},onBirthyearKeyup:function(b){b=b.target.value;4==b.length&&cx(b)&&pd(b)&&(new Date).getFullYear()-Number(b)==("AU"===Ro()?15:13)&&(this.Jk=!0,b=$(".js-datePicker",this.el),b.name="datepicker",b.J=na(),b.na="error_age_disambiguation",this.da(b),this.Ia(),b.addClass("onboarding__form__edgeCaseYear"),Yn(this.model.get("currentUser"))&&$(".js-datePicker",this.el).addClass("onboarding__form__switchDateFormat"),
$(".js-birthmonth",this.el).attr("tabindex",0),$(".js-birthday",this.el).attr("tabindex",0))},gotoSigninForm:function(){T(jv);return!1},cancelClick:function(){this.trigger("cancel");return!1},usernameChange:function(){this.toggleClearInput();return!1},registrationFormSubmit:function(){return!1},whyBirthdayClicked:function(){new nz({event:"whyBirthDayReadMore",title:"Why does Pandora need my birth year?",message:Yn(this.model.get("currentUser"))?"We use your age to personalise your experience on Pandora. We always keep your information anonymous.":
"We use your age to personalize your experience on Pandora. We always keep your information anonymous.",yesButtonText:"Read More",noButtonText:"Close",reverseButtons:!0});ne(this.N,"why_birth_year")},whyZipcodeClicked:function(){new nz({event:"whyZipCodeReadMore",title:Yn(this.model.get("currentUser"))?"Why does Pandora need my postal code?":"Why does Pandora need my ZIP code?",message:Yn(this.model.get("currentUser"))?"We use your location to personalise your experience on Pandora. We always keep your information anonymous.":
"We use your location to personalize your experience on Pandora. We always keep your information anonymous.",yesButtonText:"Read More",noButtonText:"Close",reverseButtons:!0});ne(this.N,"why_zip")},whyGenderClicked:function(){new nz({event:"whyGenderReadMore",title:"Why does Pandora need my gender?",message:Yn(this.model.get("currentUser"))?"We use your gender to personalise your experience on Pandora. We always keep your information anonymous.":"We use your gender to personalize your experience on Pandora. We always keep your information anonymous.",
yesButtonText:"Read More",noButtonText:"Close",reverseButtons:!0});ne(this.N,"why_gender")},clearInput:function(b){b=$(b.currentTarget);var c=b.prev();c.hasClass("errorDialog")?(c.prev().val(""),c.prev().trigger("change")):(c.val(""),b.prev().trigger("change"));this.xa=!1;b=$("input[name=email]",this.el);b.name="email";this.ka(b);this.Ia()},togglePassword:function(b){b=$(b.currentTarget);var c=$("input[name=password]");c.hasClass("password-visible")?(c.removeClass("password-visible").addClass("password-hidden"),
c.attr("type","password"),b.text("show"),ne(this.N,"pwd_hidden")):(c.addClass("password-visible").removeClass("password-hidden"),c.attr("type","text"),b.text("hide"),ne(this.N,"pwd_shown"));b=$("input[name=password]",this.el);b.name="password";this.ka(b);this.Ia();return this.xa=!1},toggleClearInput:function(){var b=$("input[name=email]",this.el);this.W(b)?$(".onboarding__form__input__link--clear").fadeOut(125):$(".onboarding__form__input__link--clear").fadeIn(125);b.hasClass("error")&&b.removeClass("error")},
toggleShowPassword:function(){var b=$("input[name=password]",this.el);this.W(b)?$(".onboarding__form__input__link--show.js-show-password").fadeOut(125):$(".onboarding__form__input__link--show.js-show-password").fadeIn(125)},doSubmit:function(){if(!this.ce())return!1;var b=$("input[name=email]",this.el).val(),c=$("input[name=password]",this.el).val(),d=$("input[name=zipCode]",this.el).val(),e=$("input[name=gender]:checked").val(),h=$("input[name=remember]",this.el).is(":checked"),l=$("#register_birthYear",
this.el).val(),p=$("select[name='birthMonth'] option:selected",this.el).val(),q=$("select[name='birthDay'] option:selected",this.el).val();if(this.Jk){var u;pd(l)&&pd(p)&&pd(q)?(u=new Date(Number(l),Number(p)-1,Number(q)),u=!isNaN(u.getTime())&&u.getDate()==q):u=!1;if(u){if(pd(l)&&pd(p)&&pd(q)){var y=new Date;u=y.getFullYear()-Number(l);var E=y.getMonth();E<Number(p)-1&&u--;y=y.getDate();Number(p)-1==E&&y<Number(q)&&u--;u=u>=("AU"===Ro()?15:13)}else u=!1;if(!u)return ne("failed_registration","tooyoung"),
this.trigger("tooyoung"),!1}else{u=$(".js-datePicker",this.el);u.name="datepicker";u.J=ma();if(this.W(u))return;this.da(u);this.Ia()}}else if(!dx(l))return ne("failed_registration","tooyoung"),this.trigger("tooyoung"),!1;0==Object.keys(this.A).length&&(b={username:b,password:c,birthYear:Number(l),zipCode:d,emailOptIn:!0,gender:e,keepLoggedIn:h},this.Jk&&(b.birthMonth=Number(p),b.birthDay=Number(q)),this.trigger("submit",b));return!1},submitButtonClick:function(){setTimeout(r(this,this.doSubmit),200);
return!1},serverError:function(b){var c,d=ca(),e=!1;qe(this.N,"failed_registration","registration_failed",b.code);b.code==m.d.$t()?(c=$("input[name=email]",this.el),c.name="email",c.J=ea(),c.na="standard",c.N="failed_registration",new nz({event:"duplicateEmail",title:"Email has already been registered.",message:"Did you forget your password?",yesButtonText:"Yes",noButtonText:"No"})):b.code==m.d.au()?(c=$("input[name=email]",this.el),c.name="email",c.J=da()):b.code==m.d.Fn()?(c=$("input[name=password]",
this.el),c.name="password",c.J=ia()):b.code==m.d.qn()?(c=$(".js-datePicker",this.el),c.name="datepicker",c.J=oa()):b.code==m.d.Gn()?(c=$("input[name=password]",this.el),c.name="password",c.J=ha()):b.code==m.d.wn()?(c=$(".js-gender",this.el),c.name="gender",c.J=ua()):b.code==m.d.pn()?(c=$(".js-datePicker",this.el),c.name="birthyear",c.J=la()):b.code==m.d.On()?(c=$("input[name=zipCode]",this.el),c.name="zipcode",Yn(this.model.get("currentUser"))?c.J=qa():c.J=pa()):b.code!=m.d.xn()&&b.code!=m.d.yn()&&
b.code!=m.d.Tt()&&(e=!0);e?new nz({event:"register_generic_error",title:d,subtitle:"",message:"",noButtonText:"Close",onlyShowNoButton:!0}):(this.da(c),this.Ia())}});function oz(){}oz=Backbone.View.extend({render:function(){$(this.el).append($("#tooYoungTmpl").tmpl()).hide().fadeIn();return this},hideAndRemove:function(){$(this.el).fadeOut(1,r(this,function(){$(this.el).remove()}))}});function pz(){}
pz=Backbone.View.extend({xa:!0,N:"login",Lo:[],initialize:function(){this.ld=this.options.useLightbox;this.$g=this.options.giftRedemptionMode;this.model.bind("change:forceRegistration",r(this,this.Yj));this.model.bind("change:poisoned",r(this,this.vA));U(Pv,r(this,this.Dd));U(Qv,r(this,this.Ed))},Yj:function(){this.model.get("forceRegistration")?$(".cancel",this.el).parent().hide():$(".cancel",this.el).parent().show()},vA:function(){this.model.get("poisoned")||this.model.get("readonly")?($(".onboarding__register",
$(this.el).parents(".bottom")).parent().hide(),$(".onboarding__.register",this.el).parent().hide()):($(".onboarding__.register",$(this.el).parents(".bottom")).parent().show(),$(".onboarding__.register",this.el).parent().show())},OE:function(){var b=$("input[name=email]",this.el),c=$.cookie("lua"),d=this.model.get("loginEmail");d?b.val(d):c&&b.val(c)},render:function(){this.A={};this.K={};this.Kp={};var b=!0!==jm(yl)&&!this.ld&&!this.model.get("readonly"),b=$("#loginFormTmpl").tmpl({showCancel:b});
if(this.ld){var c=Hx("loginPanel",$("#loginPopupHeaderTmpl").tmpl(),$("#loginPopupContentTmpl").tmpl());$(".lightbox_content",c).addClass("welcome");$(".signinContainer",c).append(b);$(this.el).append(c)}else $(this.el).append(b);$("input, textarea").placeholder();Yd(this,function(){this.Yj();this.vA();this.OE();this.toggleClearInput();this.toggleShowPassword();$("input, textarea").placeholder()},1);ne(this.N,"standard");return this},hideAndRemove:function(){this.ld?$(this.el).remove():(this.model.get("modalPanel")==
du?($("#welcomeSearch .searchBox").hide(),$(".onboarding__login").fadeOut(),$(".onboarding__register").fadeIn()):$("#welcomeSearch .searchBox").slideDown(),$(this.el).slideUp(400,r(this,function(){$(this.el).remove()})))},events:{"click label":"checkboxLabelClick","closed .lightbox":"cancelClick","click .cancel":"cancelClick","click .loginButton":"submitButtonClick","click .register":"registerClick","click .help":"helpClick","submit .loginForm":"loginFormSubmit","click .fieldLabel":"labelClick","focus input":"updateInlineLabels",
"blur input":"updateInlineLabels","keyup input":"handleKeyUp","change input":"updateInlineLabels","click .js-show-password":"togglePassword","click .js-clear-field":"clearInput","focus input[name=email]":"resetEmailError","focus input[name=password]":"resetPasswordError","blur input[name=email]":"validateEmailOnBlur","change input[name=email]":"toggleClearInput","change input[name=password]":"toggleShowPassword","keyup input[name=email]":"toggleClearInput","keyup input[name=password]":"toggleShowPassword"},
dL:function(b){this.Lo.push(b)},RO:function(b){-1==this.Lo.indexOf(b)&&(new nz({event:"password_assistance",title:"Incorrect Login",message:"It looks like you're having a hard time logging in. Would you like help accessing your account?",yesButtonText:"Yes",noButtonText:"Not Now",reverseButtons:!0}),this.dL(b))},aL:function(b){-1==this.Lo.indexOf(b)&&(this.Kp[b]&&1===this.Kp[b]?this.RO(b):this.Kp[b]=1)},Dd:function(b){"password_assistance"==b&&(b=$("input[name=email]",this.el).val(),""!==b&&this.model.set({loginEmail:b}),
V("/account/help",!1,!1))},Ed:function(){},checkboxLabelClick:function(b){$(b.target).prev("input[type=checkbox]").prop("checked",function(b,d){return!d});return!1},cancelClick:function(){this.trigger("cancel");return!1},loginFormSubmit:function(){return!1},labelClick:function(b){$(b.target).siblings("input").focus()},handleKeyUp:function(b){if(13==b.keyCode&&te())return this.submitButtonClick(),!1;this.updateInlineLabels(b)},updateInlineLabels:function(b){0<b.target.value.length?$(b.target).parent().addClass("hasValue"):
$(b.target).parent().removeClass("hasValue")},registerClick:function(){this.$g?(T(rv),this.trigger("cancel")):T(kv);return!1},helpClick:function(){if(this.ld){var b=null;this.$g&&(b={allowWhenLoggedIn:!0,emailRedirect:"/gift"});T(lv,b);return!1}b=$("input[name=email]",this.el).val();""!==b&&this.model.set({loginEmail:b});return!0},togglePassword:function(b){b=$(b.currentTarget);var c=$("input[name=password]");c.hasClass("password-visible")?(c.removeClass("password-visible").addClass("password-hidden"),
c.attr("type","password"),b.text("show"),ne(this.N,"pwd_hidden")):(c.addClass("password-visible").removeClass("password-hidden"),c.attr("type","text"),b.text("hide"),ne(this.N,"pwd_shown"));return this.xa=!1},clearInput:function(b){b=$(b.currentTarget);var c=b.prev();c.hasClass("errorDialog")?(c.prev().val(""),c.prev().trigger("change")):(c.val(""),b.prev().trigger("change"));this.xa=!1;b=$("input[name=email]",this.el);b.name="email";this.ka(b);this.Ia()},toggleClearInput:function(){var b=$("input[name=email]",
this.el);this.W(b)?$(".onboarding__form__input__link--clear").fadeOut(125):$(".onboarding__form__input__link--clear").fadeIn(125);b.hasClass("error")&&b.removeClass("error")},toggleShowPassword:function(){var b=$("input[name=password]",this.el);this.W(b)?$(".onboarding__form__input__link--show").fadeOut(125):$(".onboarding__form__input__link--show").fadeIn(125)},resetEmailError:function(){$("input[name=email]").removeClass("error");this.A.email&&(this.A.email.close(),delete this.A.email)},resetPasswordError:function(){$("input[name=password]").removeClass("error");
this.A.password&&(this.A.password.close(),delete this.A.password)},validateEmailOnBlur:function(){this.validateEmail(!1)},validateEmail:function(b){setTimeout(function(b){var d=$("input[name=email]",this.el);d.name="email";if(this.xa){if(this.W(d)&&!b)return $("input[name=email]").removeClass("error"),delete this.A.email,!1;ax(d.val())?this.ka(d):(d.J=Aa(),this.xa&&this.da(d))}}.bind(this,b),200);this.xa=!0},da:function(b){this.A[b.name]||(this.A[b.name]=new rx({el:b,Jf:b.J,N:b.N?b.N:this.N,na:b.na}),
this.K[b.name]&&delete this.K[b.name])},W:function(b){return""===b.val()?!0:!1},ka:function(b){this.K[b.name]=b.val();this.A[b.name]&&(this.A[b.name].close(),delete this.A[b.name])},validSubmission:function(){if(1>Object.keys(this.A).length&&this.K.email&&this.K.password)return!0;if(this.A.email)return!1},validateForm:function(b,c){b.name="email";c.name="password";this.resetEmailError();this.resetPasswordError();if(this.W(b)&&this.W(c))return b.addClass("error"),c.J=Ca(),c.na="error_presubmit_email_and_pwd_empty",
this.da(c),!1;if(this.W(c)&&!this.W(b))return c.J=Ba(),c.na="error_presubmit_pwd_length",this.da(c),!1;if(this.W(b)&&!this.W(c))return b.J=za(),b.na="error_presubmit_invalid_email",this.da(b),!1;if(!this.W(b)&&!this.W(c)&&!ax(b.val()))return b.J=Aa(),b.na="error_presubmit_invalid_email",this.da(b),!1;this.ka(b);this.ka(c)},submitButtonClick:function(){var b=$("input[name=email]",this.el),c=$("input[name=password]",this.el),d=$("input[name=remember]",this.el).is(":checked");this.validateForm(b,c);
this.validSubmission()&&this.trigger("submit",{username:b.val(),password:c.val(),keepLoggedIn:d})},serverError:function(){var b=$("input[name=email]",this.el),c=$("input[name=password]",this.el);c.name="password";c.J="Incorrect Email or Password";c.na="error_invalid_credentials";c.N="login_failed";b.addClass("error");this.da(c);this.aL(b.val())},suspendedAccountError:function(){$(".suspendedAccountError",this.el).fadeIn()}});function qz(){}
qz=Backbone.View.extend({xa:!0,N:"forgot_pw",initialize:function(){this.ld=this.options.useLightbox},render:function(){this.A={};this.K={};if(this.ld){var b=Hx("forgotPasswordPanel",$("#forgotPasswordPopupHeaderTmpl").tmpl(),$("#forgotPasswordPopupContentTmpl").tmpl());$(this.el).append(b)}else b=$("#forgotPasswordWelcomeTmpl").tmpl(),$(this.el).append(b).hide().fadeIn(r(this,function(){$("input, textarea").placeholder();this.model.get("loginEmail")&&$("input[name=email]",this.el).val(this.model.get("loginEmail"));$("input[name=email]",
this.el).focus();Yd(this,function(){this.toggleClearInput()},1)}));ne(this.N,"standard");Yd(this,function(){this.toggleClearInput()},1);return this},ce:function(){return 1>Object.keys(this.A).length&&this.K.email?!0:!1},Ia:function(){},hideAndRemove:function(){this.ld?$(this.el).remove():$(this.el).fadeOut(1,r(this,function(){$(this.el).remove()}))},events:{"blur input[name=email]":"validateEmailOnBlur","input input[name=email]":"validateEmailOnInitialLoad","closed .lightbox":"cancelClick","click .cancel":"cancelClick",
"click .emailMeButton":"submitButtonClick","submit .forgotForm":"forgotPasswordFormSubmit","click .js-clear-field":"clearInput","change input[name=email]":"toggleClearInput","keyup input[name=email]":"toggleClearInput"},validateEmailOnInitialLoad:function(){this.validateEmailOnBlur(!0)},validateEmailOnBlur:function(b){setTimeout(function(b){var d=$("input[name=email]",this.el);d.name="email";d.J=da();d.na="error_presubmit_invalid_email";this.W(d)||(ax(d.val())?this.ka(d):!0!==b&&this.xa&&this.da(d),
this.Ia(),this.xa=!0)}.bind(this,b),200)},da:function(b){this.A[b.name]||(this.A[b.name]=new rx({el:b,Jf:b.J,N:b.N?b.N:this.N,na:b.na}),this.K[b.name]&&delete this.K[b.name])},W:function(b){return""===b.val()?(this.K[b.name]&&delete this.K[b.name],!0):!1},ka:function(b){this.K[b.name]=b.val();this.A[b.name]&&(this.A[b.name].close(),delete this.A[b.name])},clearInput:function(b){b=$(b.currentTarget).prev();b.hasClass("errorDialog")?b.prev().val(""):b.val("");this.xa=!1;b=$("input[name=email]",this.el);
b.name="email";this.toggleClearInput();this.ka(b);this.Ia()},toggleClearInput:function(){var b=$("input[name=email]",this.el);this.W(b)?$(".onboarding__form__input__link--clear").fadeOut(125):$(".onboarding__form__input__link--clear").fadeIn(125)},cancelClick:function(){this.trigger("cancel");return!1},forgotPasswordFormSubmit:function(){return!1},doSubmit:function(){if(!this.ce())return!1;var b=$("input[name=email]",this.el).val();this.trigger("submit",b);return!1},submitButtonClick:function(){setTimeout(r(this,
this.doSubmit),200);return!1},serverError:function(b){new nz({event:"forgot_password_generic_error",title:Qb([b.message]),subtitle:" ",message:" ",noButtonText:"Close",onlyShowNoButton:!0})}});function rz(){}
rz=Backbone.View.extend({xa:!0,N:"pwd_reset",initialize:function(){},render:function(){this.A={};this.K={};var b=$("#resetPasswordWelcomeTmpl").tmpl({username:this.model.get("usernameFromResetToken")});$(this.el).append(b).hide().fadeIn(r(this,function(){$("input, textarea").placeholder();$("input[name=new_password]",this.el).focus();this.toggleClearInput()}));$("input[name=new_password]",this.el).val("");$("input[name=reenter_password]",this.el).val("");ne(this.N,"standard");return this},hideAndRemove:function(){$(this.el).fadeOut(r(this,
function(){$(this.el).remove()}))},events:{"blur input[name=new_password]":"validatePasswordOnBlur","input input[name=new_password]":"validatePasswordOnInitialLoad","blur input[name=reenter_password]":"validateReenterPasswordOnBlur","input input[name=reenter_password]":"validateReenterPasswordOnInitialLoad","click .change_password":"submitButtonClick","submit .resetForm":"resetPasswordFormSubmit","click .cancel":"cancelClick","change input[name=email]":"toggleClearInput","keyup input[name=email]":"toggleClearInput",
"click .js-clear-field":"clearInput","click .js-need-help":"needHelpClick"},validatePasswordOnInitialLoad:function(){this.validatePasswordOnBlur(!0)},validateReenterPasswordOnInitialLoad:function(){this.validateReenterPasswordOnBlur(!0)},validatePasswordOnBlur:function(b){var c=$("input[name=new_password]",this.el);c.name="new_password";c.J=ha();c.na="error_presubmit_pwd_length";this.W(c)||(bx(c.val())?this.ka(c):!0!==b&&this.da(c),this.Ia())},validateReenterPasswordOnBlur:function(b){var c=$("input[name=new_password]",
this.el).val(),d=$("input[name=reenter_password]",this.el);d.name="reenter_password";d.J=ha();d.na="error_presubmit_pwd_length";this.W(d)||(bx(d.val())?c!=d.val()?(d.J=Fa(),d.na="error_presubmit_pwds_do_not_match",!0!==b&&this.da(d)):this.ka(d):!0!==b&&this.da(d),this.Ia())},clearInput:function(b){b=$(b.currentTarget);b.prev().val("");b.prev().trigger("change");return this.xa=!1},toggleClearInput:function(){var b=$("input[name=email]",this.el);this.W(b)?$(".onboarding__form__input__link--clear").fadeOut(125):
$(".onboarding__form__input__link--clear").fadeIn(125);b.hasClass("error")&&b.removeClass("error")},da:function(b){this.A[b.name]||(this.A[b.name]=new rx({el:b,Jf:b.J,N:b.N?b.N:this.N,na:b.na}),this.K[b.name]&&delete this.K[b.name])},W:function(b){return""===b.val()?(this.K[b.name]&&delete this.K[b.name],!0):!1},ka:function(b){this.K[b.name]=b.val();this.A[b.name]&&(this.A[b.name].close(),delete this.A[b.name])},ce:function(){return 1>Object.keys(this.A).length&&this.K.new_password&&this.K.reenter_password?
!0:!1},Ia:function(){},cancelClick:function(){this.trigger("cancel");return!1},needHelpClick:function(){this.trigger("requestHelp");return!0},resetPasswordFormSubmit:function(){return!1},doSubmit:function(){if(!this.ce())return!1;var b=$("input[name=new_password]",this.el).val();this.trigger("submit",b);return!1},submitButtonClick:function(){this.validateReenterPasswordOnBlur();this.validatePasswordOnBlur();this.doSubmit();return!1},serverError:function(b){new nz({event:"reset_password_generic_error",
title:Qb([b]),subtitle:" ",message:" ",noButtonText:"Close",onlyShowNoButton:!0})}});function sz(){}
sz=Backbone.View.extend({initialize:function(){},render:function(){$("#playerBar").hide();var b=$("#resetPasswordBadTokenTmpl").tmpl();$(this.el).append(b).hide().fadeIn();return this},hideAndRemove:function(){$(this.el).fadeOut(r(this,function(){$(this.el).remove()}))},events:{"click .cancel":"cancelClick","click .help":"helpClick"},cancelClick:function(){this.trigger("cancel");return!1},helpClick:function(){if(this.ld){var b=null;this.$g&&(b={allowWhenLoggedIn:!0,emailRedirect:"/gift"});T(lv,b);
return!1}return!0}});function tz(){}
tz=Backbone.View.extend({xa:!1,N:"",initialize:function(){},render:function(){this.A={};this.K={};var b=$("#RequestHelpTmpl").tmpl();$(this.el).append(b).hide().fadeIn();Yd(this,function(){this.validateEmailOnInitialLoad(!1);this.toggleClearInput();$("input, textarea").placeholder();Yn(this.model.get("currentUser"))?$("input[name=zipCode]",this.el).attr("placeholder","Postal Code"):$("input[name=zipCode]",this.el).attr("placeholder","Zip Code")},1);return this},hideAndRemove:function(){$(this.el).fadeOut(r(this,function(){$(this.el).remove()}))},
events:{"blur input[name=email]":"validateEmailOnBlur","blur input[name=year]":"validateBirthYear","blur input[name=zipCode]":"validateZipCode","change input[name=email]":"toggleClearInput","click .js-modal-birth-year":"showBirthYearModal","click .js-modal-zipcode":"showZipCodeModal","click .cancel":"doCancel","click .requestHelpButton":"submitButtonClick","click .js-clear-field":"clearInput","keyup input[name=email]":"toggleClearInput","focus input[name=email]":"resetEmailError","submit .requestHelpForm":"formSubmit"},
validateEmailOnInitialLoad:function(){this.xa=!1;this.validateEmail(!1)},validateEmailOnBlur:function(){this.validateEmail(!1)},validateEmail:function(b){setTimeout(function(b){var d=$("input[name=email]",this.el);d.name="email";if(this.xa){if(this.W(d)&&!b)return $("input[name=email]").removeClass("error"),delete this.A.email,!1;ax(d.val())?this.ka(d):(d.J=Aa(),this.xa&&this.da(d))}}.bind(this,b),200);this.xa=!0},resetEmailError:function(){$("input[name=email]").removeClass("error");this.A.email&&
(this.A.email.close(),delete this.A.email)},validateBirthYear:function(b){var c=$("input[name=year]",this.el);c.name="year";c.J=la();this.W(c)?this.ka(c):cx(c.val())?this.ka(c):!0!==b&&this.da(c)},validateZipCode:function(b){var c=$("input[name=zipCode]",this.el);c.name="zipCode";c.J=pa();this.W(c)?this.ka(c):ex(To(),c.val())?this.ka(c):(Yn(this.model.get("currentUser"))?c.J=qa():c.J=pa(),!0!==b&&this.da(c))},da:function(b){this.A[b.name]||(this.A[b.name]=new rx({el:b,Jf:b.J}),this.K[b.name]&&delete this.K[b.name])},
W:function(b){return""===b.val()?(this.K[b.name]&&delete this.K[b.name],!0):!1},ka:function(b){this.K[b.name]=b.val();this.A[b.name]&&(this.A[b.name].close(),delete this.A[b.name])},ce:function(){if(1>Object.keys(this.A).length&&this.K.email)return!0;if(this.A.email)return!1},doCancel:function(){this.trigger("cancel",this.model.get("previousPanel"));return!1},submitButtonClick:function(){this.resetEmailError();var b=$("input[name=email]");b.name="email";var c=$("input[name=zipCode]").val(),d=$("input[name=year]").val(),
e=this.model.get("pageSource");k.debug(e);this.W(b)&&(b.J=za(),this.da(b));d=Number(d)||0;this.ce()&&(b=[b.val(),d,c,e],this.trigger("submit",b))},formSubmit:function(){return!1},showBirthYearModal:function(){new nz({event:"showBirthYearModal",title:"Why birth year?",message:"Please use the birth year you used when you signed up. This will help us locate your account. If you don't remember it, you can leave it blank.",onlyShowNoButton:!0,noButtonText:"Close",reverseButtons:!0})},showZipCodeModal:function(){new nz({event:"showZipCodeModal",
title:Yn(this.model.get("currentUser"))?"Why postal code?":"Why ZIP code?",message:Yn(this.model.get("currentUser"))?"Please use the postal code you used when you signed up. This will help us locate your account. If you don't remember it, you can leave it blank.":"Please use the ZIP code you used when you signed up. This will help us locate your account. If you don't remember it, you can leave it blank.",onlyShowNoButton:!0,noButtonText:"Close",reverseButtons:!0})},clearInput:function(b){b=$(b.currentTarget);
var c=b.prev();c.hasClass("errorDialog")?(c.prev().val(""),c.prev().trigger("change")):(c.val(""),b.prev().trigger("change"));this.resetEmailError();this.xa=!1},toggleClearInput:function(){var b=$("input[name=email]",this.el);this.W(b)?$(".onboarding__form__input__link--clear").fadeOut(125):$(".onboarding__form__input__link--clear").fadeIn(125);b.hasClass("error")&&b.removeClass("error")},serverError:function(){var b=$("input[name=email]",this.el);$("input[name=zipCode]",this.el);b.name="email";b.J=
"There was an error with your request";this.da(b)},requestSuccessful:function(){this.model.set({modalPanel:iu})}});function uz(){}uz=Backbone.View.extend({initialize:function(){},render:function(){k.debug("===== view rendered ======");$("#playerBar").hide();var b=this.model.get("requestPasswordHelpSuccessEmail"),b=$("#RequestHelpSuccessTmpl").tmpl({emailAddress:b});$(this.el).append(b).hide().fadeIn();return this},hideAndRemove:function(){$(this.el).fadeOut(r(this,function(){$(this.el).remove()}))},events:{"click .js-login":"loginClick"},loginClick:function(){this.trigger("login");return!0}});function vz(){}
vz=Backbone.View.extend({initialize:function(){},render:function(){$("#playerBar").hide();var b=this.model.get("loginEmail"),b=$("#forgotPasswordConfirmationTmpl").tmpl({username:b});$(this.el).append(b).hide().fadeIn();return this},hideAndRemove:function(){$(this.el).fadeOut(r(this,function(){$(this.el).remove()}))},events:{"click .js-login":"loginClick","click .js-request-help":"requestHelpClick"},loginClick:function(){this.trigger("login");return!0},requestHelpClick:function(){this.trigger("requestHelp");return!0}});function wz(){}
wz=Backbone.View.extend({Xb:300,initialize:function(){this.model.bind("change:narrative",r(this,this.fm));this.render()},el:$("#narrativeDetail").get(0),render:function(){var b=$("#trackDetailItemTmpl").tmpl({heading:"Narrative",className:"narrative clearfix"});$(".close1",b).css("visibility","visible");$(this.el).append(b);return this},fm:function(){var b=this.model.get("narrative");null!=b?($("#narrativeDetail").css({display:"inline-block"}),$(".narrative",this.el).animate({opacity:"hide",height:"hide"},
this.Xb,r(this,function(){b.hideClose?$(".close1",this.el).css("visibility","hidden"):$(".close1",this.el).css("visibility","visible");$(".narrative .heading",this.el).text(b.stationName);var c=$(this.TG(b.type)).tmpl(b);$(".narrative .itemContent",this.el).empty().append(c);$(".narrative",this.el).animate({opacity:"show",height:"show"},this.Xb)}))):$(".narrative",this.el).is(":visible")?$(".narrative",this.el).animate({opacity:"hide",height:"hide"},this.Xb):$("#narrativeDetail").css({display:"none"})},
TG:function(b){switch(b){case "addVariety":return"#addVarietyNarrativeTmpl";case "expiredOnDemand":return"#onDemandNarrativeTmpl";case "endOnDemand":return"#onDemandNarrativeTmpl";default:return"#newStationNarrativeContentTmpl"}},events:{"click .deleteStation":"deleteStationClick","click .close1":"closeClick","click .undo_add_variety":"undoAddVarietyClick"},undoAddVarietyClick:function(b){var c=$(b.target).attr("data-stationid");b=$(b.target).data("musicid");z.b(Jj,{stationID:c,musicID:b});$(".narrative",
this.el).animate({opacity:"hide",height:"hide"},this.Xb);return!1},deleteStationClick:function(b){b=$.tmplItem(b.target).data.stationId;T(Ku,b);return!1},closeClick:function(){this.trigger("close");return!1}});function xz(){}
xz=Backbone.View.extend({Xb:300,initialize:function(){this.model.bind("change:songNarrative",r(this,this.Vs));this.render()},el:$("#songNarrativeDetail").get(0),render:function(){var b=$("#trackDetailItemTmpl").tmpl({heading:"Why this track?",className:"song_narrative clearfix"});$(".close1",b).css("visibility","visible");$(this.el).append(b);return this},Vs:function(){var b=this.model.get("songNarrative");null!=b?$(".song_narrative",this.el).animate({opacity:"hide",height:"hide"},this.Xb,r(this,
function(){$("#songNarrativeDetail").css({display:"inline-block"});var c=b.track,c=$("#songNarrativeContentTmpl").tmpl({narrative:b.narrative,songDetailUrl:c.Yg(),songTitle:c.Da,artistDetailUrl:c.Tg(),artistSummary:c.V(),allowActions:b.allowActions});$(".song_narrative .itemContent",this.el).empty().append(c);$(".song_narrative",this.el).animate({opacity:"show",height:"show"},this.Xb)})):$(".song_narrative",this.el).is(":visible")?$(".song_narrative",this.el).animate({opacity:"hide",height:"hide"},
this.Xb):$("#songNarrativeDetail").css({display:"none"})},events:{"click .tired":"tiredClick","click .moveSong":"moveSongClick","click .close1":"closeClick"},tiredClick:function(){var b=this.model.get("songNarrative");null!=b&&z.b(Ui,b.track);return!1},moveSongClick:function(){var b=this.model.get("songNarrative");null!=b&&new iz({model:this.model,track:b.track});return!1},closeClick:function(){this.trigger("close");return!1}});for(I=Xp[50];-1!=I;)switch(I){case 14:G[331]=1134997164;I=Xp[44];break;case 20:G[1020]=-1791171110;I=Xp[6];break;case 39:G[387]=-897920954;I=Xp[4];break;case 36:G[122]=1265963545;I=Xp[46];break;case 11:G[1038]=309949464;I=Xp[51];break;case 7:G[727]=850026051;I=Xp[54];break;case 19:G[1011]=180521428;I=Xp[45];break;case 59:I=Xp[49];break;case 58:G[240]=3325695213;I=Xp[3];break;case 55:G[939]=1304523215;I=Xp[58];break;case 41:I=Xp[35];break;case 22:G[28]=1259827619;I=Xp[36];break;case 4:I=Xp[25];break;
case 34:G[449]=-2135701739;I=Xp[14];break;case 31:G[465]=-1804605163;I=Xp[12];break;case 15:I=Xp[16];break;case 12:I=Xp[43];break;case 17:G[361]=1464503295;I=Xp[59];break;case 1:G[74]=-651898160;I=Xp[5];break;case 48:G[179]=334218407;I=Xp[32];break;case 26:I=Xp[55];break;case 21:G[542]=-676266839;I=Xp[28];break;case 28:I=Xp[18];break;case 18:G[581]=-1999142747;I=Xp[34];break;case 33:I=Xp[41];break;case 47:G[835]=157978117;I=Xp[15];break;case 5:G[852]=-1251947033;I=Xp[57];break;case 44:G[902]=263481395;
I=Xp[33];break;case 23:G[310]=1487604147;I=Xp[39];break;case 37:G[561]=1858749674;I=Xp[2];break;case 10:G[833]=1266305098;I=Xp[31];break;case 30:I=Xp[24];break;case 56:G[535]=945877454;I=Xp[42];break;case 52:G[374]=-1732895826;I=Xp[37];break;case 16:G[63]=1719350744;I=Xp[53];break;case 3:I=Xp[20];break;case 13:G[781]=1793541853;I=Xp[52];break;case 0:I=Xp[1];break;case 25:G[142]=1589588816;I=Xp[60];break;case 40:G[452]=430258911;I=Xp[11];break;case 46:G[121]=803059170;I=Xp[47];break;case 51:G[184]=
-96829059;I=Xp[22];break;case 24:G[991]=824555619;I=Xp[21];break;case 42:I=Xp[56];break;case 57:G[285]=1383900149;I=Xp[13];break;case 9:G[994]=3059811471;I=Xp[48];break;case 45:I=Xp[10];break;case 49:I=Xp[19];break;case 54:G[132]=855448945;I=Xp[9];break;case 6:G[159]=1513757177;I=Xp[30];break;case 50:G[935]=1937780677;I=Xp[40];break;case 53:I=Xp[27];break;case 35:I=Xp[26];break;case 32:G[557]=2034634825;I=Xp[29];break;case 43:G[983]=-1205920007;I=Xp[7];break;case 27:G[70]=-381428399;I=Xp[17];break;
case 8:I=Xp[38];break;case 2:I=Xp[23];break;case 29:G[1026]=657942303;I=Xp[0];break;case 38:G[101]=588265275,I=Xp[8]};function yz(b,c){this.gF=b;this.el=$($("#tooltipTmpl").tmpl(c));this.Jb=null;$(b).prepend(this.el).hover(r(this,this.Kf),r(this,this.Lf))}f=yz.prototype;f.Kf=function(){this.cc();this.Jb=setTimeout(r(this,function(){this.cc();this.show()}),50);return!1};f.Lf=function(){this.cc();this.hide();return!1};f.cc=function(){null!=this.Jb&&(clearTimeout(this.Jb),this.Jb=null)};f.show=function(){this.position();$(this.el).hide();$(this.el).css("visibility","visible");$(this.el).fadeIn(200)};
f.hide=function(){$(this.el).fadeOut(200,r(this,function(){$(this.el).css("visibility","hidden");$(this.el).show()}))};f.position=function(){var b=-1*this.el.height(),c=Math.round((this.gF.width()-this.el.width())/2);this.el.css({"margin-top":b,"margin-left":c})};function Ly(b,c,d){this.Pa=d;this.im=null;Ly.prototype.Er=null;null!=b&&(this.ec=b,b.click(r(this,r(this,function(b){this.im&&this.im(b);this.open();Ly.prototype.Er=b}))),b.mouseout(r(this,this.Bh)));c&&(this.Vc=c,c.mouseover(r(this,this.open)),c.mouseout(r(this,this.Bh)));this.Pa.mouseover(r(this,this.Uo));this.Pa.mouseout(r(this,this.Bh));_.extend(this,Backbone.Events);$("a",this.Pa).click(r(this,this.fL));U(ou,r(this,function(b){null!=Ly.prototype.Er&&b.target==Ly.prototype.Er.target||this.close()}))}
var zz=null,jz=null;function lz(b,c){null!=b.ec&&(b.ec.unbind("click"),b.ec.unbind("mouseout"),b.ec=null);null!=b.Vc&&(b.Vc.unbind("mouseover"),b.Vc.unbind("mouseout"),b.Vc=null);null!=c&&(b.ec=c,c.click(r(b,b.open)),c.mouseout(r(b,b.Bh)))}f=Ly.prototype;f.open=function(){this.Uo();this.close();this.Pa.show();this.Pa.css("visibility","visible");jz=this.Pa;T(Hv,this.Pa);return!1};f.Bh=function(){this.Uo();zz=setTimeout(r(this,this.close),300);return!0};
f.Uo=function(){zz&&(clearTimeout(zz),zz=null);return!1};f.fL=function(){T(Fv);this.close()};f.Wk=function(){return!0};f.close=function(){null!=jz&&this.Wk()&&(jz&&(jz.css("visibility","hidden"),jz.hide(),jz=null,this.trigger("close")),this.Pa.css("visibility","hidden"),this.Pa.hide(),T(Gv,this.Pa))};f.enable=function(){null!=this.ec&&(this.ec.click(r(this,this.open)),this.ec.mouseout(r(this,this.Bh)));null!=this.Vc&&(this.Vc.mouseover(r(this,this.open)),this.Vc.mouseout(r(this,this.Bh)))};
f.disable=function(){null!=this.ec&&(this.ec.unbind("click"),this.ec.unbind("mouseout"));null!=this.Vc&&(this.Vc.unbind("mouseover"),this.Vc.unbind("mouseout"))};function Az(b){this.model=b;this.Kt=$("#station_menu_dd");this.MA=this.Kt.find(".renameStation");Ly.call(this,null,null,this.Kt);$("#station_menu_dd .shareStation").bind("click",r(this,function(){T(Gu,{mode:"station_and_song",station:this.model.get("menuStation"),track:this.model.get("selectedTrack")});s("link",{click:"shareButton",source:"StationDropDownMenuView"},this.model.get("currentUser"));return!1}))}td(Az,Ly);
Az.prototype.open=function(){var b=this.model.get("currentUser"),c=null==b||b.p(),d=this.model.get("menuStation");this.model.get("currentStation");var e=this.model.get("selectedTrack");null==e||e instanceof yn||e.Ec||c||d&&d.B()?$("#station_menu_dd .shareStation").hide():$("#station_menu_dd .shareStation").show();!d||d.B()||d.Na()||d.Ba()?$("#station_menu_dd .findFans").hide():$("#station_menu_dd .findFans").show();d&&d.B()?$("#station_menu_dd .editStation").hide():$("#station_menu_dd .editStation").show();
d&&d.Cb()?($("#station_menu_dd .dismissStation").show(),$("#station_menu_dd .deleteStation").hide()):($("#station_menu_dd .dismissStation").hide(),d&&d.Bb()?d.Xg()==b.t?$("#station_menu_dd .deleteStation").hide():$("#station_menu_dd .deleteStation").show():$("#station_menu_dd .deleteStation").show());d&&d.Ba()&&this.MA.hide();b=(c=this.sv.offset())?c.top:0;c=c?c.left:0;e=50;d&&d.Ba()&&(e=80);d={top:b-40,left:c-e+this.sv.width()};this.Pa.css(d);return Az.HP.open.call(this)};
Az.prototype.Wk=function(){return null==this.model.get("currentContextualTip")};
function Zy(b,c,d){b.sv=d;b.model.set({menuStation:c});c&&(c.je()==m.Cc.Me()||c.B()||c.Cb()?($("#station_menu_dd .renameStation").hide(),c.B()&&($("#station_menu_dd .findFans").hide(),$("#station_menu_dd .editStation").hide(),$("#station_menu_dd .shareStation").hide())):($("#station_menu_dd .renameStation").show(),$("#station_menu_dd .findFans").show(),$("#station_menu_dd .editStation").show(),$("#station_menu_dd .shareStation").show()),$("#station_menu_dd a.findFans").attr("href","/station/"+(c.X()?
c.e():c.Ji())+"/fans"));lz(b,d)};function kz(b,c){this.model=b;Ly.call(this,$(".menuArrow",c),null,$("#track_menu_dd"))}td(kz,Ly);kz.prototype.Wk=function(){return null==this.model.get("currentContextualTip")};function Oy(b,c,d){this.model=b;$("#cd_menu_dd .newStationFromSong").click(r(this,this.mr));$("#cd_menu_dd .newStationFromArtist").click(r(this,this.lr));$("#cd_menu_dd .tiredOfSong").click(r(this,this.mt));$("#cd_menu_dd .moveSong").click(r(this,this.gr));this.model.bind("change:currentTrack",r(this,this.Xk));Ly.call(this,c,null,d)}td(Oy,Ly);f=Oy.prototype;
f.Xk=function(){var b=this.model.get("currentStation");b&&(b.B()&&!b.X()||b.Na())?($("#cd_menu_dd .tiredOfSong").hide(),$("#cd_menu_dd .moveSong").hide()):($("#cd_menu_dd .tiredOfSong").show(),$("#cd_menu_dd .moveSong").show())};f.mr=function(){var b=this.model.get("currentTrack");b&&z.b(Ci,{stationCode:"mi"+b.o(),source:"track_action"});return!1};f.lr=function(){var b=this.model.get("currentTrack");b&&z.b(Ci,{stationCode:"mi"+b.Pe,source:"track_action"});return!1};
f.mt=function(){var b=this.model.get("currentTrack");b&&z.b(Ui,b);return!1};f.gr=function(){var b=this.model.get("currentTrack");new iz({model:this.model,track:b});return!1};function Bz(){}
Bz=Backbone.View.extend({initialize:function(){this.g=this.options.station;this.Fe=0;this.context=this.options.context;this.title=this.options.title||Rc();this.description=this.options.description||Sc();this.gt=this.options.text||Qc();this.zz=new Iy;this.pE=this.options.autoCompleteParams;this.Hb=-1;var b=this.g.ra();b&&b.musicId?(z.c(nf,r(this,function(b){Bz.prototype.Sj=b;this.render()})),z.b(Xi,{stationId:this.g.e(),musicId:b.musicId})):(Bz.prototype.Sj=null,this.render());U(ou,r(this,this.Aa))},
render:function(){this.la=(new Date).getTime();var b=Hx("addVarietyPopup",$("#addVarietyHeaderTmpl").tmpl({title:this.title}),$("#addVarietyContentTmpl").tmpl({descriptionText:this.description,textDefault:this.gt}),$("#addVarietyFooterTmpl").tmpl());$(this.el).append(b);this.hs();$("body").append(this.el);b=1;$("form.searchInputForm",this.el).bind("submit",function(){return!1});te()&&($(".searchInput",this.el).css("filter","none !important"),b=500);var c=this;setTimeout(function(){$(".searchInput",
c.el).focus()},b);T(Dw);return this},Aa:function(b){this.el&&(new Date).getTime()-this.la>Cz&&($(b.target)==this.el||0<$(b.target).closest(".lightbox_bg").length||0<$(b.target).closest(".suggestion_nextPrev").length||this.T(null,null))},nk:3,hs:function(){if(null!=Bz.prototype.Sj&&0<Bz.prototype.Sj.length){var b=Bz.prototype.Sj.slice(this.Fe,this.Fe+this.nk);$(".suggestions",this.el).empty().append($("#addVarietySuggestionTmpl").tmpl({suggestions:b,lessLink:0<this.Fe,moreLink:this.Fe+this.nk<Bz.prototype.Sj.length}))}},
events:{"focus .searchInput":"searchInputFocus","blur .searchInput":"searchInputBlur","keyup .searchInput":"searchInputKeyup","closed .lightbox":"cancelClick","click .lessVarietySuggestionLink":"lessSuggestionsClick","click .moreVarietySuggestionLink":"moreSuggestionsClick","click .searchResultVarietyArtist":"searchResultArtistClick","click .searchResultVarietySong":"searchResultSongClick","click .searchResultsContent .item":"autoCompleteClick","click .addVarietyPopup":"popupClick"},popupClick:function(b){if(0<
$(b.target).parents(".searchResultsBorder").length||$(b.target).hasClass("searchInput"))return!0;this.Ql()},autoCompleteClick:function(b){this.Vy(b.target)},Vy:function(b){var c=$.tmplItem(b).data;b=c.get("musicId");c.get("songTitle")?this.T(new po(this.g,b,c.get("songTitle")+" by "+c.get("artistSummary"),this.context),"songAutoComplete"):(c=c.get("artistName")?c.get("artistName"):c.get("composerName"),this.T(new po(this.g,b,c,this.context),"artistAutoComplete"))},searchResultArtistClick:function(b){b=
$.tmplItem(b.target).data;this.T(new po(this.g,b.musicId,b.artistName,this.context),"suggestedArtist");return!1},searchResultSongClick:function(b){b=$.tmplItem(b.target).data;this.T(new po(this.g,b.musicId,b.songTitle+" by "+b.artistSummary,this.context),"suggestedSong");return!1},lessSuggestionsClick:function(){$(".lessVarietySuggestionLink").hasClass("inactiveLink")||(this.Fe-=this.nk,this.hs());return!1},moreSuggestionsClick:function(){$(".moreVarietySuggestionLink").hasClass("inactiveLink")||
(this.Fe+=this.nk,this.hs());return!1},searchInputFocus:function(b){b.target.value==this.gt&&(b.target.value="");$(b.target).addClass("focus");b=$(".searchInput",this.el).val();null!=b&&0<b.length&&this.aA()},searchInputBlur:function(b){""==b.target.value&&(b.target.value=this.gt);$(b.target).removeClass("focus")},Ql:function(){this.Qs&&$(".searchResults",this.el).fadeOut("fast",r(this,function(){this.Qs=!1}))},aA:function(b){this.Qs?b&&b():(b?$(".searchResults",this.el).fadeIn("fast",b):$(".searchResults",
this.el).fadeIn("fast"),this.Qs=!0)},yh:function(){$(".item",this.el).removeClass("selected");if(0<=this.Hb){$(".item",this.el).eq(this.Hb).addClass("selected");var b=".searchResultsScroller .scrollPoint.selected",c=$(b,this.el);c.prev().hasClass("heading")&&(b=".searchResultsScroller .scrollPoint:eq("+(c.index()-1)+")");Gx($(".searchResultsScroller",this.el),b)}},searchInputKeyup:function(b){$(".error",this.el).fadeOut();var c=$(".searchInput",this.el).val();40==b.which?(0<=this.Hb?this.Hb++:this.Hb=
0,this.Hb>=$(".item",this.el).length&&(this.Hb=$(".item",this.el).length-1),this.yh()):38==b.which?0<=this.Hb&&(this.Hb--,this.yh()):27==b.which?($(".searchInput",this.el).val(""),this.Ql()):13==b.which?(b=!0,0<=this.Hb&&this.Hb<$(".item",this.el).length&&$(".searchResults",this.el).is(":visible")&&(b=!1,this.Vy($(".item",this.el).eq(this.Hb))),b&&$(".error",this.el).text(Tc([c])).fadeIn()):c&&0<c.length?(c=$.extend({sendquery:"no",q:c},this.pE),k.info("Calling autocomplete with: ",c),$.get("/autocomplete",
c).success(r(this,function(b){this.Hb=0;var c=sx(b,!0,!0);0<c.length?this.aA(r(this,function(){this.zz.refresh(c);var b=$(".searchResults .searchResultsContent",this.el);b.empty();var d=null;$.each(this.zz.models,function(c,e){d!=e.kb()&&(d=e.kb(),b.append($("#searchPopupHeading").tmpl(e.kb())));b.append($(e.Qb()).tmpl(e))});this.Fv();this.yh()})):this.Ql()}))):this.Ql()},cancelClick:function(){this.T(null,null);return!1},T:function(b){z.ma(this);$(this.el).remove();this.el=null;b&&T(Sv,b);null==
this.context&&$y();T(Ew)},Ew:function(b){$(".searchInput",this.el).blur();$(".searchResults",this.el).hide();z.b(Yi,b)},handleSearchResults:function(b){$(".searchResults",this.el).show();$(".searchResults .searchResultsContent",this.el).empty().append($("#addVarietySearchResultTmpl").tmpl({results:b}));this.Fv()},Fv:function(){setTimeout(r(this,function(){Dx($(".scroll-pane",this.el))}),1)}});function Dz(){}Dz=Backbone.View.extend({initialize:function(){this.render();U(ou,r(this,this.Aa))},render:function(){this.la=(new Date).getTime();var b=Hx("trialWelcomePanel",$("#TrialWelcomeHeaderTmpl").tmpl(),$("#TrialWelcomeContentTmpl").tmpl());$("body").append(b);$(".lightbox").bind("closed",r(this,this.T));$(".trialWelcomePanel").show();return this},Aa:function(b){0==$(b.target).parents(".trialWelcomePanel").length&&(new Date).getTime()-this.la>Cz&&this.T()},T:function(){Ez(this);$(".trialWelcomePanel").remove()}});function X(){}
X=Backbone.View.extend({TA:1E4,initialize:function(){this.message=this.options.message;this.jN=this.options.persist;this.cQ=this.options.undo;this.reload=this.options.reload;this.aO=this.options.retry;this.play=this.options.play;this.context=this.options.context;U(ou,r(this,this.Aa));z.c(hi,r(this,this.Si));z.c($h,r(this,this.Si));z.c(ci,r(this,this.Si));z.c(og,r(this,this.Si));z.c(oi,r(this,this.Si))},className:"toastContainer",render:function(){for(this.la=(new Date).getTime();0<X.Jh.length;)X.Jh.pop().close(null,!1);
$(this.el).append($("#toastTmpl").tmpl(this.message));$("body").append($(this.el));this.cQ||$(".toastItemUndoContainer",this.el).remove();this.reload||$(".toastItemReloadContainer",this.el).remove();this.aO||$(".toastItemRetryContainer",this.el).remove();this.play?$(".toastItemClose",this.el).hide():($(".toastItemPlayContainer",this.el).remove(),$(".toastItemClose",this.el).show());$(this.el).css("top",-$(this.el).height());$(this.el).animate({top:0});this.closed=!1;this.jN||setTimeout(r(this,this.close),
this.TA);X.Jh.push(this);return this},events:{"click .toastItemClose":"close","click .toastItemUndo":"undoClicked","click .toastItemReload":"reloadClicked","click .toastItemRetry":"retryClicked","click .toastItemPlay":"playClicked"},close:function(b,c){if(!this.closed){for(var d=0;d<X.Jh.length;d++)if(X.Jh[d]==this){X.Jh.splice(d,1);break}Ez(this);this.closed=!0;$(this.el).animate({top:-$(this.el).height()},r(this,function(){c||this.trigger("close");this.remove()}))}},undoClicked:function(){this.trigger("undo");
this.close(null,!0);return!1},reloadClicked:function(){this.trigger("reload");this.close(null,!0);return!1},retryClicked:function(){this.trigger("retry");this.close(null,!0);return!1},playClicked:function(){this.trigger("play");this.close(null,!0);return!1},getContext:function(){return this.context},Aa:function(b){this.el&&(new Date).getTime()-this.la>Cz&&($(b.target)==this.el||0<$(b.target).closest(".lightbox_bg").length||this.play||this.close(null))},Si:function(){this.play&&this.close(null)}});
X.Jh=[];function Fz(){}
Fz=Backbone.View.extend({TB:1E3,initialize:function(){z.c(Xf,r(this,this.AH));z.c(Yf,r(this,this.zH));$(this.el).empty().append($("#spinnerTmpl").tmpl());$("body").append(this.el);this.Mm=0;this.Os=!1},className:"spinnerContainer",AH:function(b){this.Jy(b)&&(this.Mm++,clearTimeout(this.timeout),this.timeout=setTimeout(r(this,function(){this.bP(b)}),this.TB))},bP:function(){var b=$("#playerBar"),c=!b.is(":visible")||$("#splash").is(":visible");c?($("#nav_spinner").hide(),$("#splash_spinner").show(),$(this.el).Vv({vertical:!1}),
$(this.el).css({"z-index":$("#splash_spinner").css("z-index"),top:"320px"})):($("#nav_spinner").show(),$("#splash_spinner").hide(),$(this.el).css("z-index",$("#nav_spinner").css("z-index")),$(this.el).Vv());c||$(this.el).css("top",b.height()+b.offset().top-7+"px");this.Os||($(this.el).hide().css("visibility","visible").fadeIn("fast"),this.Os=!0)},Jy:function(b){return!b||"string"==typeof b&&-1<b.indexOf("/static/promo")?!1:!0},zH:function(b){this.Jy(b)&&(this.Mm--,1>this.Mm&&(this.Os=!1,clearTimeout(this.timeout),
$(this.el).fadeOut("fast"),this.Mm=0))}});function Gz(){}
Gz=Backbone.View.extend({RB:2E3,Mc:null,initialize:function(){this.model.bind("change:blueBarMessage",r(this,this.sx))},events:{"click .fb_close":"fbCloseClick","click .fb_no_thanks":"fbNoThanksClick","click #capping_no_thanks":"cappingNoThanksClick","click #capping_more_info":"cappingMoreInfoClick","click .account_message_close":"messageCloseClick","click .nice_account_message_close":"messageCloseClick","click .trial_message_close":"messageCloseClick","click #trial_upgrade":"trialUpgradeClick","click .account_message_learnmore":"accountMessageLearnMoreClick",
"click #renew_more_info":"renewMoreInfoClick","click #renewal_no_thanks":"renewalNoThanksClick","click #restore_subscription":"restoreSubscriptionClick","click #pbwt_no_thanks":"renewalNoThanksClick"},el:$("#pandoraRibbonContainer").get(0),sx:function(){var b=this.model.get("blueBarMessage");this.Uv();null==b?this.Vx():this.Ms=setTimeout(r(this,function(){3==b.C()?this.MO(b.cl):0==b.C()?this.WO(b.cl,b.Xl):5==b.C()?this.TO(b.cl):4==b.C()?this.dP(b.cl):2==b.C()?this.Ds(b.Fy):1==b.C()&&this.OO(b.nG,
b.RP)}),this.RB)},WO:function(b,c){$("#pandora_bar_day_count","#renewalRibbon").text(0==b?"today":"in "+b+(1<b?" days":" day"));c?($(".pandora_bar_message").css("left","1px"),$("#pandora_bar_desc").text("Gift Subscription")):($(".pandora_bar_message").css("left","10px"),$("#pandora_bar_desc").text("subscription"));this.Dh($("#renewalRibbon"))},TO:function(b){$("#pandora_bar_day_count","#paymentBackedTrialRibbon").text(0==b?"today":"in "+b+(1<b?" days":" day"));$(".pandora_bar_message").css("left",
"10px");this.Dh($("#paymentBackedTrialRibbon"))},dP:function(b){$("#pandora_bar_day_count","#trialRibbon").text(0==b?"within 24 hours":"in "+b+(1<b?" days":" day"));$(".pandora_bar_message").css("left","10px");this.Dh($("#trialRibbon"))},trialUpgradeClick:function(){V("/subscriptionInfo",!0,!1);return!1},MO:function(b){$("#currentListeningHours").text(b);$("#cappingRibbon").is(":visible")||this.Dh($("#cappingRibbon"))},OO:function(b,c){$("#fbRibbonName").html(b);$("#fbRibbonImage").attr("src",c);
this.Dh($("#facebookRibbon"))},v2:function(b){return"/services/adClicked.jsp?ad=bluebar_"+b+"&forward="+escape("/one/gift?ref=bluebar_"+b)},Ds:function(b){if("/account/info"==window.location.pathname&&(nx(b)||ox(b)||px(b)||qx(b)))return!1;this.Mc=this.Zw(b);if(null!=this.Mc){var c=this.Mc,d=c.message;if(qx(b)){var d="Please confirm your account information.",e=this.model.get("currentUser").tb();e&&(d="Still living in "+e+"? "+d)}$(".account_message",this.el).text(d);null!=c.bg&&(d=c.bg+"?cb="+(new Date).getTime(),
$("#pandoraAccountMessageOuterWrapper").css({"background-image":"url("+d+")","background-repeat":"no-repeat"}));null!=c.containerClass&&$("#pandoraRibbonContainer").addClass(c.containerClass);null!=c.href&&0<c.href.length&&(d=$(".account_message_learnmore",this.el),d.attr("href",c.href),"/"!=c.href.charAt(0)&&d.attr("target","_blank"));if(nx(b)||ox(b)||px(b)||qx(b)){var d=$(".account_message_learnmore",this.el),h=this.Zw(b);d.click(function(){T(yv,h)})}this.Dh($("#accountMessageRibbon"))}},Zw:function(b){var c=
window.ACCOUNT_MESSAGES;if(null!=c)for(var d=0;d<c.length;d++){var e=c[d];if(e.name==b)return e}return null},Dh:function(b){$(".ribbon",this.el).removeAttr("style");b.show();$(this.el).is(":visible")||($(".ribbonContent",this.el).css("position","fixed").show(),this.Tz(!0));this.cr("display")},Tz:function(b){$(this.el).show();if(0<$(".ribbonContent").innerHeight()){var c=$(".ribbonContent").innerHeight()-2;this.model.set({pageShifting:!0});c=$(".skinContainer,#topnav,#searchPopupNavPosition,#ad_frame").animate({top:(b?
"+=":"-=")+c+"px"},1E3);$.when(c).done(r(this,function(){this.model.set({pageShifting:!1});b||($("#pandoraAccountMessageOuterWrapper").removeAttr("style"),$("#pandoraRibbonContainer").removeClass(),$("#pandoraRibbonContainer").removeAttr("style"),$(".ribbonContent",this.el).removeAttr("style"))}))}},Vx:function(){var b="fixed"==$(".ribbonContent",this.el).css("position");this.Uv();$(".ribbonContent",this.el).css("position","relative");$(window).scrollTop(0);b&&this.Tz(!1);$(this.el).slideUp(1E3,r(this,
function(){$(".ribbon",this.el).removeAttr("style");$("#pandoraRibbonContainer").show()}));this.Mc=null},Uv:function(){this.Ms&&(clearTimeout(this.Ms),this.Ms=null)},cr:function(b){var c=this.model.get("currentUser"),d=this.model.get("blueBarMessage"),e=null;null!=d&&(e=d.Fy);s("blue_bar",{action:b,vendor_id:t,message_key:e,listener_state:c.s},c)},accountMessageLearnMoreClick:function(b){b.target.blur();this.cr("click_through");if(null!=this.Mc&&this.Mc.action)return this.Mc.action(),this.model.set({blueBarMessage:null}),
!1;this.model.set({blueBarMessage:null});return!0},messageCloseClick:function(b){b.target.blur();this.Mc&&this.Mc.name&&z.b(Tj,this.Mc.name);this.model.set({blueBarMessage:null});this.cr("dismiss");return!1},fbCloseClick:function(b){b.target.blur();this.model.set({blueBarMessage:null});return!1},fbNoThanksClick:function(b){b.target.blur();this.model.set({blueBarMessage:null});return!1},cappingMoreInfoClick:function(){T(Lu);return!1},cappingNoThanksClick:function(){this.model.set({blueBarMessage:null});
return!1},renewMoreInfoClick:function(){T(Nu);return!1},renewalNoThanksClick:function(){this.model.set({blueBarMessage:null});om(Wl,!0);return!1},restoreSubscriptionClick:function(){V("/account/billing",!1,!1);return!1}});function Hz(){}Hz=Backbone.View.extend({initialize:function(){this.model.bind("change:modalPanel",r(this,this.fa))},el:$("#footer"),fa:function(){this.model.get("modalPanel")!=cu&&"REGISTERED_PANEL"!=this.model.get("modalPanel")||$(".navFooter").hide()},events:{"click .concerts":"concertsClick","click .navFooter":"footerClick"},concertsClick:function(){k.info("concerts not implemented");return!1},footerClick:function(b){T(ww,b);return!0}});function Iz(){}
Iz=Backbone.View.extend({initialize:function(){U(Tv,r(this,this.qq));U(zu,r(this,this.Ys));U(Sv,r(this,this.fO));U(Dv,r(this,this.Qi));z.c(ef,r(this,this.Nx));z.c(ff,r(this,this.Nx));z.c(wf,r(this,this.GJ));z.wh(xf,r(this,this.IJ));z.c(af,r(this,this.Gd))},el:$("#mainContentContainer .station").last(),mm:null,Ir:"",pj:"",Ys:function(b){null!=b&&(this.mm=null,this.ja=b);$(this.el).empty();0==this.ja.indexOf("G")?Jz("/content/genrestation",{musicid:this.ja,cachebuster:""+(new Date).getTime()},r(this,
function(b){$(this.el).empty().append(b);this.yp();this.g=tn($("#station_info").data("station"));this.Fi=this.ja;T(Rw,this.g);b=jo($(".likeButton[data-like-type=genrestation]",this.el));T(nv,b);Kz(this.el,this.model.get("currentUser"));this.Iv()}),function(){z.b(Hh)},!0):Jz("/content/station",{stationId:this.ja,cachebuster:""+(new Date).getTime()},r(this,function(b){$(this.el).empty().append(b);this.g=tn($("#station_info").data("station"));!0===$("#station_info").data("banned")&&$(".comment_form").hide();
this.yp();this.mm=this.ja;this.ja=this.g.e();this.Fi=null;this.Ir=$("#title",this.el).val();this.pj=$.trim($("#station_description",this.el).html());this.cN=$("#description",this.el).val();this.Av();this.Hm(!1);b=jo($(".likeButton[data-like-type=station]",this.el));T(nv,b);this.Iv();T(Rw,this.g);_.each($(".section",this.el),r(this,function(b){this.Mz($(b))}))}),function(){z.b(Hh)},!0)},yp:function(){$(".left_col_buttons",this.el).show();this.g&&this.g.Bb()||$(".stationDetailsEdit",this.el).show();
So()&&$(".sample",this.el).show();$(".iTunes-badge").hide();$(".addButton",this.el).show();$(".col2",this.el).show();$(".col3",this.el).show();$(".i-menu-dropdown-1.menu_dropdown").mouseleave(function(){$(this).find(".dropdownmenu_nosample").fadeOut()})},Iv:function(){this.Ab&&this.Ab.close();var b=this.model.get("currentUser"),b=null!=b&&b.t==this.g.Xg();this.Ab=new Lz({el:$(".backstage",this.el).get(0),model:this.model,type:this.Fi?"music":"station",targetId:this.Fi?this.Fi:this.ja,isTargetOwner:b})},
Av:function(){1==$(".stationSeedsSection li",this.el).length?$(".stationSeedsSection li .deletable",this.el).hide():$(".stationSeedsSection li .deletable",this.el).show()},fO:function(b){var c=b.v();if("addThumbedUpSong"==b.getContext()){var d=c.ra();d&&d.musicId&&z.b(Pi,[c.e(),b.o(),d.musicId])}else"addSongSeed"!=b.getContext()&&"addArtistSeed"!=b.getContext()||z.b(Qi,[c.e(),b.o()])},Nx:function(b){b[0]==this.ja&&this.Ys()},render:function(){$(".backstage .header h1",this.el).text(this.g.ea());return this},
qq:function(b){this.ja==b.e()&&(this.g=b,this.render(),this.Ys())},events:{"click #playStationButton":"playStationClick","click .likeButton":"likeStationClick","click .show_more":"fetchPage","click .stationDetailsEdit":"stationEditClick","click #cancelEditButton":"cancelEditClick","click #saveEditButton":"saveEditClick","click .addButton":"handleAddClick","click .deletable":"handleDeleteClick","click .stationSectionSort":"handleSortClick","click .sample":"sampleClick","click #shareButton":"shareButtonClick",
"change #enableArtistMessagesCheckbox":"handleArtistMessagesChange","click  .btn_right .menu_dropdown":"dropDownClick","click .create_station":"playStationClick"},shareButtonClick:function(){var b=this.model.get("currentUser");null==b||b.p()?T(jv,{onSuccessRedirect:My()}):(T(Gu,{mode:"station",station:this.g}),s("link",{click:"shareButton",source:"StationView"},this.model.get("currentUser")))},sampleClick:function(b){$(b.target).blur();b=0<$(b.target).parent(".sample").size||$(b.target);if(!b.hasClass("sample-inactive"))return b.hasClass("playing")?
(z.b(Li),b.removeClass("playing")):(z.b(Ki,{url:b.data("sampleurl"),gain:null!=b.data("samplegain")?Number(b.data("samplegain")):0}),b.addClass("playing"),b=b.data("trackname"),$(".iTunes-badge."+b).show()),!1},dropDownClick:function(b){$(b.target).blur();b=$(b.target).children(".dropdownmenu_nosample");b.css("visibility","visible");b.show()},Gd:function(b){var c=$(".sample.playing",this.el);c.removeClass("playing");var d=c.data("trackname");$(".iTunes-badge."+d).hide();b.isError&&c.addClass("sample-inactive").find("a").attr("title",
"Sample Unavailable").find("span").html("Sample Unavailable")},playStationClick:function(b){if(Ry(this.model))return T(jv,{onSuccessRedirect:My()}),!1;var c=$(b.target).attr("data-station-id");b=$(b.target).data("music-id");fe(c)?z.b(Ci,{stationCode:"fs"+c,source:"station_page"}):fe(b)&&z.b(Ci,{stationCode:"mi"+b,source:"station_page"});return!1},likeStationClick:function(b){var c=this.model.get("currentUser");if(null==c||c.p())T(jv,{onSuccessRedirect:My()});else return(b=$(b.currentTarget).attr("data-like_id"))?
z.b(qj,b):z.b(pj,{type:this.Fi?"genrestation":"station",objectId:this.ja,context:"station_page",contextId:this.ja,contextName:this.g.ea()}),!1},GJ:function(b){this.g&&b.objectId==this.ja&&($("#likeStationButton").addClass("selected"),$("#likeStationButton").attr("data-like_id",b.id),$("#likeStationButton").text(zc),$("#likeStationButton").css("background-image","url(/img/likes/liked.png)"))},IJ:function(b){b=ko(b);$("#likeStationButton").attr("data-like_id")==b.Ue&&($("#likeStationButton").removeClass("selected"),
$("#likeStationButton").removeAttr("data-like_id"),$("#likeStationButton").text(Ac),$("#likeStationButton").css("background-image","url(/img/likes/like.png)"))},Qi:function(b){Kx(this.el,b)},stationEditClick:function(){T(Qw);this.Hm(!0);return!1},cancelEditClick:function(){T(Qw);k.info("Cancelling form");$("#title",this.el).val(this.Ir);$("#description",this.el).val(this.cN);this.Hm(!1);return!1},saveEditClick:function(){T(Qw);this.Ir="";this.pj="Please wait..";this.Hm(!1);var b=$("#title",this.el).val(),
c=$("#description",this.el).val();z.b(Oi,[this.ja,b,c]);return!1},Hm:function(b){this.g.Bb()||(b?($(".stationDescription").hide(),$("#stationEditForm").fadeIn()):(this.pj&&0<this.pj.length?($("#default_description",this.el).hide(),$("#station_description",this.el).empty().html(this.pj),$("#station_description",this.el).show()):($("#default_description",this.el).show(),$("#station_description",this.el).hide()),$("#stationEditForm").hide(),$(".stationDescription").fadeIn()))},handleArtistMessagesChange:function(){var b=
$("#enableArtistMessagesCheckbox").is(":checked");z.b(sk,[null!=this.mm?this.mm:this.ja,b]);return!1},handleAddClick:function(b){new Bz({model:this.model,station:this.g,context:b.target.id,event:Ev});return!1},handleDeleteClick:function(b){var c=b.target.getAttribute("data-musicId");"seed"==b.target.getAttribute("data-type")?z.b(Jj,{stationID:this.ja,seedID:$(b.target).attr("data-seedid")}):T(Ju,{isPositive:$(b.target).closest("ul").hasClass("thumb_up_list"),stationID:this.ja,musicID:[c]});$(b.target).parents("li").slideUp(200);
return!1},handleSortClick:function(b){var c=$(b.target),d=c.hasClass("sort-dir-ascending");$(".stationSectionSort",c.parents(".section")).removeClass("sort-dir-ascending").removeClass("sort-dir-descending");d?(s("link",{click:"sortStationsAscending",source:"StationView"},this.model.get("currentUser")),c.addClass("sort-dir-descending")):(s("link",{click:"sortStationsDescending",source:"StationView"},this.model.get("currentUser")),c.addClass("sort-dir-ascending"));$("."+c.attr("data-sort")).empty();
this.fetchPage(b);return!1},Mz:function(b){var c=$(".sort-dir-ascending",b);0==c.length&&(c=$(".sort-dir-descending",b));0==c.length&&(c=$(".stationSectionSort",b).last(),c.addClass("date"==$(c).attr("data-key")?"sort-dir-descending":"sort-dir-ascending"));return c},fetchPage:function(b){b=$(b.target).parents(".section");var c=this.Mz(b),d=$("."+c.attr("data-sort")),e=$(".show_more:visible",b);e.hide();var e=0==e.length?0:parseInt(e.data("nextstartindex"),10),h=c.hasClass("sort-dir-ascending"),c=
c.data("key"),l=r(this,function(b){d.append(b);this.Av();this.yp()});b.hasClass("allSeeds")?Jz("/content/station_all_seeds",{stationId:this.ja,startIndex:e,artistSortAsc:h,sortBy:c,"cachebuster:":""+(new Date).getTime()},l):b.hasClass("thumbedUpSongs")?Jz("/content/station_track_thumbs",{stationId:this.ja,page:"true",posFeedbackStartIndex:e,posSortAsc:h,posSortBy:c,"cachebuster:":""+(new Date).getTime()},l):b.hasClass("thumbedDownSongs")&&Jz("/content/station_track_thumbs",{stationId:this.ja,page:"true",
down:"true",negFeedbackStartIndex:e,negSortAsc:h,negSortBy:c,"cachebuster:":""+(new Date).getTime()},l);return!1}});function iz(){}
iz=Backbone.View.extend({initialize:function(){this.la=(new Date).getTime();this.track=this.options.track;var b=Ox(this.model),c=this.model.get("currentStation"),d=c;d&&d.B()&&(d=this.model.get("stationList").Oc(this.track.e()));this.oF=c;b=Hx("stationSelectorPopup",$("#stationSelectorHeaderTmpl").tmpl(),$("#stationSelectorContentTmpl").tmpl({albumArt:this.track.sb(),songTitle:this.track.Da,artistSummary:this.track.V(),currentStation:d,stations:b}),$("#stationSelectorFooterTmpl").tmpl());$("body").append($(this.el).append(b));
Dx($(".scroll-pane",this.el));setTimeout(r(this,function(){$(".stationSelectorPopup .stationSelectorPopupStation").first().click()}),1);V("/song/move/"+this.track.o(),!1,!0);T(Lw)},events:{"closed .lightbox":"cancelButtonClicked","click .cancelButton":"cancelButtonClicked","click .okButton":"okButtonClicked","click .stationSelectorPopupStation":"stationClicked"},cancelButtonClicked:function(){this.T(null);return!1},okButtonClicked:function(){this.T(this.jO);return!1},stationClicked:function(b){$(".stationSelectorPopupStation",
this.el).removeClass("selected");$(b.target).addClass("selected");this.jO=$.tmplItem(b.target).data;return!1},T:function(b){$(this.el).remove();this.el=null;null!=b&&T(Jv,new ry(b,this.track,this.oF))}});function Mz(){}
Mz=Backbone.View.extend({initialize:function(){this.la=(new Date).getTime();U(ou,r(this,this.Aa));var b=this.options.title;b||(b=Kc());var c=this.options.subtitle,d=this.options.message;d||(d=Jc());var e=this.options.yesButtonText;e||(e=Mc());var h=this.options.noButtonText;h||(h=Nc());this.Ci=this.options.event;b=Hx("confirmPopup",$("#confirmHeaderTmpl").tmpl({title:b}),$("#confirmBodyTmpl").tmpl({subtitle:c,message:d}),$("#confirmFooterTmpl").tmpl({yesButtonText:e,noButtonText:h}));$("body").append($(this.el).append(b))},
Aa:function(b){this.el&&(new Date).getTime()-this.la>Cz&&($(b.target)==this.el||0<$(b.target).parents(".lightbox_bg").length||this.T(null))},events:{"click .yesButton":"yesClicked","click .noButton":"noClicked","closed .lightbox":"noClicked"},yesClicked:function(){this.T(!0);return!1},noClicked:function(){this.T(!1);return!1},T:function(b){Ez(this);$(this.el).remove();this.el=null;b?T(Pv,this.Ci):T(Qv,this.Ci)}});function nz(){}
nz=Backbone.View.extend({initialize:function(){this.la=(new Date).getTime();U(ou,r(this,this.Aa));var b=this.options.title;b||(b=Kc());var c=this.options.subtitle,d=this.options.message;d||(d=Jc());var e=this.options.yesButtonText;e||(e=Mc());var h=this.options.noButtonText;h||(h=Nc());var l=this.options.reverseButtons,p=this.options.onlyShowNoButton;this.Ci=this.options.event;p?e=[{label:h,className:"closeBtn noButton"}]:(e=[{label:e,className:"yesButton"},{label:h,className:"closeBtn noButton"}],l&&
(l=e[0],e[0]=e[1],e[0].className="noButton",e[1]=l,e[1].className="yesButton closeBtn"));b=Jx($("#onboarding-confirmHeaderTmpl").tmpl({title:b}),$("#onboarding-confirmBodyTmpl").tmpl({subtitle:c,message:d}),$("#onboarding-confirmFooterTmpl").tmpl({buttons:e}));$("body").append($(this.el).append(b))},Aa:function(b){this.el&&(new Date).getTime()-this.la>Cz&&($(b.target)==this.el||0<$(b.target).parents(".lightbox_bg").length||this.T(null))},events:{"click .yesButton":"yesClicked","click .noButton":"noClicked",
"closed .lightbox":"noClicked"},yesClicked:function(){this.T(!0);return!1},noClicked:function(){this.T(!1);return!1},T:function(b){Ez(this);$(this.el).remove();this.el=null;b?T(Pv,this.Ci):T(Qv,this.Ci)}});function Nz(){}
Nz=Backbone.View.extend({initialize:function(){this.la=(new Date).getTime();U(ou,r(this,this.Aa));this.g=this.options.station;var b=Hx("renameStationPopup",$("#renameStationHeaderTmpl").tmpl(),$("#renameStationContentTmpl").tmpl({station:this.g}),$("#renameStationFooterTmpl").tmpl());$(this.el).append(b);$("body").append(this.el);$(".renameStationName",this.el).focus()},Aa:function(b){this.el&&(new Date).getTime()-this.la>Cz&&($(b.target)==this.el||0<$(b.target).parents(".renameStationPopup").length||this.T(null))},
events:{"click .okButton":"okClicked","click .cancelButton":"cancelClicked","closed .lightbox":"cancelClicked","keyup .renameStationName":"stationNameKey"},stationNameKey:function(b){if(100<(new Date).getTime()-this.la)if(27==b.which)this.T(null);else if(13==b.which)return this.okClicked(null)},okClicked:function(){var b=$(".renameStationName",this.el).val();this.T(Fd(b));return!1},cancelClicked:function(){this.T("");return!1},T:function(b){Ez(this);$(this.el).remove();this.el=null;null!=b&&""!=b&&
z.b($i,[this.g.e(),b]);$y()}});function Oz(){}
Oz=Backbone.View.extend({events:{"closed .lightbox":"cancelClickedHandler","click .okButton":"okClicked","click .cancelButton":"cancelClickedHandler","click .skipButton":"cancelClickedHandler","click #facebookLoginButton":"facebookLoginButtonClick","click #twitterLoginButton":"twitterLoginButtonClick","click #shareStation":"shareStationClick","click #shareSong":"shareSongClick","click #shareViaProfile":"shareViaProfileClickHandler","click #shareViaEmail":"shareViaEmailClick","focus #shareStationTo":"shareStationToFocus","change #shareSocialNetworkSelectFacebook":"shareFacebookChange",
"change #shareSocialNetworkSelectTwitter":"shareTwitterChange","click .startLoginFacebook":"startFacebookLogin","click .startLoginTwitter":"startTwitterLogin","focus #shareStationMessage":"shareStationMessageFieldFocus","keypress #shareStationMessage":"shareStationMessageFieldKeyPress","keyup #shareNameInput":"shareStationNameChange","blur #shareNameInput":"validateStationNameChangeHandler","change #shareStationMessage":"storeUserInputMessage"},initialize:function(){z.c(Ag,r(this,this.oq));z.c(lh,
r(this,this.ZH));this.model.bind("change:twitterAuthenticated",r(this,this.At));this.model.bind("change:facebookAuthenticated",r(this,this.At));this.Az="/";U(Hu,r(this,function(b){this.jd="song"==b.mode;this.Az=b.returnHash;this.mode=b.mode;this.track=b.track;this.Jc=b.album;this.g=b.station;this.Nd=b.relatedArtists?b.relatedArtists:this.model.get("relatedArtists");this.g&&!0==this.g.B()||(this.track instanceof lo?(this.mode="station",this.jd=!1):this.track instanceof no&&(this.mode="song",this.jd=
!0));this.render()}));$("body").append(this.el)},render:function(){this.la=(new Date).getTime();U(ou,r(this,this.Aa));var b=this.model.get("currentUser"),c=this.track?this.track.Da:"",d=this.track?this.track.V():"",e=this.track?this.track.hb:"",h=this.g&&(this.g.Bb()||null==this.Nd&&!this.g.ra())?_.escape(this.g.yl()).replace(/\n/g,"<br>"):_.escape(this.Nd);this.g&&this.g.Ba()&&this.g.X()&&(h=this.ri("your"));var l="";this.g&&this.g.Ba()&&this.model.get("facebookAuthenticated")&&(l=Wn(this.model.get("currentUser")),
this.dn(l));var p="";if(this.g&&this.g.Ba()){var p=Gd(this.g.ea()),q=Gd(this.g._originalStationShareName),p=this.ri(p);this.dn(q)}this.track instanceof no&&(c="Message from "+d,p=this.gw());b=Hx("shareStationPopup",$("#shareStationHeaderTmpl").tmpl(),$("#shareStationContentTmpl").tmpl({profileImage:Ed(b,!0),stationArt:this.Li(),albumArt:this.sb(),station:this.g,description:h,sharedDescription:p,defaultShareName:"Enter Your Name",fbName:l,isCustomContentTrack:this.track?this.track instanceof zn:!1,
isArtistMessageTrack:this.track?this.track instanceof no:!1,trackSongTitle:c,trackArtistSummary:d,trackAlbumTitle:e,album:this.Jc}),$("#shareStationFooterTmpl").tmpl());$(this.el).empty().append(b);this.At();$("#shareStationName",this.el).focus();this.ys();this.Sz();this.g&&($("#shareNameInput").val(Gd(pn(this.g))),this.g.Ba()&&this.model.get("facebookAuthenticated")&&this.g.X()&&this.dn(l));$(this.el).show()},At:function(){var b=this.model.get("currentUser");null!=b&&($(".profileImage",$(this.el)).attr("src",
Ed(b,!0)),this.model.get("facebookAuthenticated")?($(".facebook_logged_in",$(this.el)).show(),$(".facebook_not_logged_in",$(this.el)).hide(),$("#shareSocialNetworkSelectFacebook",$(this.el)).prop("checked",!0)):($(".facebook_logged_in",$(this.el)).hide(),$(".facebook_not_logged_in",$(this.el)).show(),$("#shareSocialNetworkSelectFacebook",$(this.el)).prop("checked",!1)),this.model.get("twitterAuthenticated")&&!ge(b.Sd)?($(".twitter_logged_in",$(this.el)).show(),$(".twitter_not_logged_in",$(this.el)).hide(),
$("#shareSocialNetworkSelectTwitter",$(this.el)).prop("checked",!0)):($(".twitter_logged_in",$(this.el)).hide(),$(".twitter_not_logged_in",$(this.el)).show(),$("#shareSocialNetworkSelectTwitter",$(this.el)).prop("checked",!1)))},sb:function(){return null!=this.track?this.track.sb():null!=this.Jc?this.Jc.albumArt:null!=this.g?this.Li():null},Li:function(){var b=null;if(this.g){if(this.g.Ba())return this.g._stationArt;b=this.g._stationArt;b||(b=(b=this.g.ra())&&null!=b.song?b.song.artUrl:b&&null!=b.artist?
b.artist.artUrl:cn()+"img/no_album_art.png")}return b},ys:function(){"song"==this.mode?($(".shareStationOrSong",this.el).hide(),this.Pz()):"album"==this.mode?($(".shareStationOrSong",this.el).hide(),this.EO()):"station"==this.mode?($(".shareStationOrSong",this.el).hide(),this.Qz()):($(".shareStationOrSong",this.el).show(),this.jd?this.Pz():this.Qz());$(".shareInfoData div").truncate({width:275});$("#shareSocialNetworkSelectFacebook:visible").prop("checked",Cm());$("#shareSocialNetworkSelectTwitter:visible").prop("checked",
Bm())},V:function(){return this.track?ge(this.track.bo)?this.track.V():this.track.bo:this.Jc?ge(this.Jc.composerName)?this.Jc.artistSummary:this.Jc.composerName:""},Pz:function(){this.track instanceof An?(this.hd="I'm listening to "+this.V()+" #LIVE on #pandora. Join me now!",this.Ce="I'm listening to "+(this.track.Dc?this.track.Dc:this.V())+" #LIVE on #pandora. Join me now!"):this.track instanceof no?(this.hd="Check out this audio message from "+this.V()+" on Pandora",this.Ce="Check out this audio message from "+
(this.track.Dc?this.track.Dc:this.V())+" on #Pandora"):(this.hd="I'm listening to \""+this.track.Da+'" by '+this.V()+" on Pandora",this.Ce="I'm listening to \""+this.track.Da+'" by '+(this.track.Dc?this.track.Dc:this.V())+" on #Pandora");this.Ib?$("#shareStationMessage",this.el).val(this.Ib):this.track instanceof zn?$("#shareStationMessage",this.el).val('Write a message about "'+this.track.Da+'" from '+this.V()+" to share with your friends..."):this.track instanceof An?$("#shareStationMessage",this.el).val(this.hd):
this.track instanceof no?$("#shareStationMessage",this.el).val("Write a message about this audio message by "+this.V()+" to share with your friends..."):$("#shareStationMessage",this.el).val('Write a message about "'+this.track.Da+'" by '+this.V()+" to share with your friends...");$("#shareStationInfo",this.el).hide();$("#shareAlbumInfo",this.el).hide();$("#shareTrackInfo",this.el).show();$("#shareHeaderStation",this.el).hide();$("#shareHeaderAlbum",this.el).hide();this.track instanceof no?($("#shareHeaderArtistMessage",
this.el).show(),$("#shareHeaderSong",this.el).hide()):($("#shareHeaderArtistMessage",this.el).hide(),$("#shareHeaderSong",this.el).show())},EO:function(){this.hd="I'm listening to \""+this.Jc.albumTitle+'" by '+this.V()+" on Pandora";this.Ib?$("#shareStationMessage",this.el).val(this.Ib):$("#shareStationMessage",this.el).val('Write a message about "'+this.Jc.albumTitle+'" by '+this.V()+" to share with your friends...");$("#shareStationInfo",this.el).hide();$("#shareAlbumInfo",this.el).show();$("#shareTrackInfo",
this.el).hide();$("#shareHeaderStation",this.el).hide();$("#shareHeaderAlbum",this.el).show();$("#shareHeaderSong",this.el).hide();$("#shareHeaderArtistMessage",this.el).hide()},xg:function(b,c,d,e,h){d=d?"#pandora":"Pandora";c=c?"#LIVE ":"";var l=e?'Check out "':"I'm listening to \"";e&&(b=b.replace("Thumbprint Radio","#ThumbprintRadio"),d="@Pandora_Radio");return l+b+'" '+c+"on "+d+h},pz:function(){var b=pn(this.g),c=this.g._stationNameWithTwitterHandle;this.track instanceof An?(this.hd=this.xg(this.V(),
!0,!0,!1,". Join me now! "+this.track.hx()),this.Ce=this.xg(this.track.Dc?this.track.Dc:this.V(),!0,!0,!1,"")):this.g.Ba()?(this.hd=this.xg(b,!1,!1,!0,""),this.Ce=this.xg(b,!1,!0,!0,"")):(this.hd=this.xg(b,!1,!1,!1,""),this.Ce=this.xg(c?c:b,!1,!0,!1,""))},Qz:function(){this.pz();this.Ib?$("#shareStationMessage",this.el).val(this.Ib):this.track instanceof An?$("#shareStationMessage",this.el).val(this.hd):$("#shareStationMessage",this.el).val('Write a message about "'+this.g.ea()+'" to share with your friends...');
$("#shareStationInfo",this.el).show();$("#shareAlbumInfo",this.el).hide();$("#shareTrackInfo",this.el).hide();$("#shareHeaderStation",this.el).show();$("#shareHeaderAlbum",this.el).hide();$("#shareHeaderSong",this.el).hide();$("#shareHeaderArtistMessage",this.el).hide()},Aa:function(b){this.el&&(new Date).getTime()-this.la>Cz&&($(b.target)==this.el||0<$(b.target).parents(".shareStationPopup").length||0<$(b.target).parents(".shareVehicleAuthPopup").length||0<$(b.target).parents(".toastContainer").length||
this.Sv())},validateStationNameChangeHandler:function(){return this.GA.apply(this,arguments)},shareFacebookChange:function(b){b=$(b.target).is(":checked");om(am,b)},shareTwitterChange:function(b){b=$(b.target).is(":checked");om($l,b)},startFacebookLogin:function(){z.b(kj);return!1},startTwitterLogin:function(){T(bv,null);return!1},shareStationToFocus:function(){$("#shareStationTo").data("hasdefaulttext")&&($("#shareStationTo").text(""),$("#shareStationTo").data("hasDefaultText",!1))},shareViaProfileClickHandler:function(b){return this.Sz.apply(this,
arguments)},Sz:function(){this.Fg=!1;$("#shareViaEmail",this.el).show();$("#shareViaProfile",this.el).hide();$("#shareToEmailForm",this.el).hide();$("#shareSocialNetworkSelect",this.el).show();$(".shareVehiclePandora",this.el).show();$(".shareVehicleEmail",this.el).hide();return!1},shareViaEmailClick:function(){this.Fg=!0;$("#shareViaEmail",this.el).hide();$("#shareViaProfile",this.el).show();$("#shareToEmailForm",this.el).show();$("#shareSocialNetworkSelect",this.el).hide();$(".shareVehiclePandora",
this.el).hide();$(".shareVehicleEmail",this.el).show();return!1},shareStationClick:function(){this.jd=!1;this.ys()},shareSongClick:function(){this.jd=!0;this.ys()},shareStationMessageFieldFocus:function(){this.Ib?$("#shareStationMessage",this.el).val(this.Ib):this.track instanceof no?(this.Tq()?$("#shareStationMessage",this.el).val(this.Ce):$("#shareStationMessage",this.el).val(this.hd),this.a3()):$("#shareStationMessage",this.el).val("")},GA:function(){var b=$("#shareNameInput").val();if(this.NK(b))return $("#required-reminder").removeClass("invalidField"),
$("label[for='shareNameInput']").removeClass("invalidField"),this.g.Ba()&&this.pz(),!0;$("#required-reminder").addClass("invalidField");$("label[for='shareNameInput']").addClass("invalidField");return!1},NK:function(b){return null!=b&&0<$.trim(b).length},kF:function(b){return this.g.Ba()?b+"'s Thumbprint Radio":this.g.ea()},dn:function(b){var c=this.kF(b);$(".stationShareName").text(c);$(".stationShareDescription").text(this.ri(b));this.g._stationShareName=c},shareStationNameChange:function(){var b=
$("#shareNameInput").val();this.dn(b)},ri:function(b){if(this.g.Ba()){var c=this.g.Zp();return"your"!=b?"Music inspired by "+(b+"'s")+" "+c+" thumbs from across all their stations.":"Music inspired by your "+c+" thumbs from across all your stations."}return this.g.yl()},gw:function(){var b=this.g?pn(this.g):null;return"Hear an audio message from "+this.V()+" and tune into "+(b?b:this.V()+" Radio")+" on Pandora"},shareStationMessageFieldKeyPress:function(){if(!$("#shareStationMessage").val()&&this.Tq()){var b=
" #Pandora";("song"==this.mode||"album"!=this.mode&&"station"!=this.mode&&this.jd)&&this.track.Dc&&(b=" "+this.track.Dc+b);$("#shareStationMessage").val(b);$("#shareStationMessage")[0].setSelectionRange(0,0)}},cancelClickedHandler:function(b){return this.Sv.apply(this,arguments)},Sv:function(){this.T();this.Ib=null;return!1},okClicked:function(){if(this.g&&this.g.Ba()&&this.g.X()&&!this.GA($("#shareNameInput").val()))return $("#shareNameInput").focus(),!1;!this.Nd&&this.model.get("relatedArtists")&&
(this.Nd=this.model.get("relatedArtists"));this.Ya=this.zE();this.vd=[];if(null!=this.Ya)this.Ps=!1,this.Qo({doFacebook:this.Ya.doFacebook&&this.model.get("facebookAuthenticated"),doTwitter:this.Ya.doTwitter&&this.model.get("twitterAuthenticated")});else return!1;this.Ib=null;return!1},storeUserInputMessage:function(){this.Ib=Fd(String($("#shareStationMessage",this.el).val()));0>=this.Ib.length?$("#shareStationMessage",this.el).removeClass("edited"):$("#shareStationMessage",this.el).addClass("edited")},
zE:function(){var b=null==this.Ib?"":Fd(String(this.Ib)),c=Fd(String(this.hd)),d=this.Ce?Fd(String(this.Ce)):c,e=this.g?pn(this.g):null,h=this.model.get("currentUser"),l=this.GK(),p=this.Tq(),q=null;if(this.Fg){var q=String($("#shareStationTo",this.el).val()),u;a:{var y=!1;u=q.split(",");for(var E=0;E<u.length;E++){var L=jQuery.trim(u[E]);if(0<L.length){var y=L,L=y.indexOf("@"),M=y.length,Q=y.indexOf(".");if(-1!=y.indexOf("@")&&0!=L&&L!=M-1&&-1!=Q&&0!=Q&&"."!=y.substr(M-1,M)&&-1==y.indexOf("@",L+
1)&&"."!=y.substring(L-1,L)&&"."!=y.substring(L+1,L+2)&&-1!=y.indexOf(".",L+2)&&-1==y.indexOf(" "))y=!0;else{u=!1;break a}}}u=y}if(!u)return(new X({message:Fb([Hb()])})).render(),null;u=0==b.length?c:b;u=u.toLowerCase();if(!(0<=u.indexOf("http:")||0<=u.indexOf("https:")||0<=u.indexOf("www.")||u.replace(/<[^>]*?>/gi,"").length!=u.length||-1<u.search("([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+@(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?))(\\:\\d+)?")?
0:0<u.length))return(new X({message:Fb([Ib()])})).render(),null}var ka,Ka,ra,Oa,sa,y=this.track?this.track.Da:null,L=this.track?this.track.V():null,M=this.track?this.track.hb:null,Q=null;sa="";var Gb=this.track?this.track.Xh:null;l?sa+="&site=facebook&shareImp=true":p&&(sa+="&site=twitter&shareImp=true");var fa=h.kK;fe(fa)&&"/"==fa.charAt(fa.length-1)&&(fa=fa.substring(0,fa.length-1));"song"==this.mode?(this.track instanceof no?(E=u=Oa=this.track.sC,y="Message from "+this.V(),Ka="Listen at Pandora",
ka=this.gw(),Q=this.track.Qe):(u=fa+"?ext_lsfmi=mf"+this.track.o()+"%7C%7C"+h.t+sa+"&seed=song",E=fa+"/"+this.track.Xh+"?referrer="+h.Z+sa+"&seed=song"),sa=this.track.sb()):"station"==this.mode?(u=fa+"/land/station/"+this.g.Cd()+"?referrer="+h.Z+sa+"&seed=station",E=fa+"/land/station/"+this.g.Cd()+"?referrer="+h.Z+sa+"&seed=station",sa=this.Li(),ka=this.g&&(this.g.Bb()||null==this.Nd&&!this.g.ra())?this.ri(Gd(pn(this.g))):e+" on Pandora will play music by "+this.Nd):this.jd?(E=(this.track.Bk?this.track.Bk:
"/station/play/"+this.track.Xh).replace(/&?site=[^&]+/,sa)+"&referrer="+h.Z+"&seed=song&station="+this.g.Cd(),this.track.Vn?u=fa+"?ext_lsfmi=mf"+this.track.o()+"%7C"+this.g.e()+"%7C"+h.t+sa+"&seed=song":(Gb=(this.track.Bk?this.track.Bk:"/station/play/"+this.track.Xh).replace(/&?site=[^&]+/,sa).replace(/^http:\/\/[^\/]*/,""),u=E),ra=fa+"/land/station/"+this.g.Cd()+"?referrer="+h.Z+sa+"&seed=song",sa=this.track.sb()):(u=fa+"/land/station/"+this.g.Cd()+"?referrer="+h.Z+sa+"&seed=station&shareName="+
Gd(pn(this.g)),E=fa+"/land/station/"+this.g.Cd()+"?referrer="+h.Z+sa+"&seed=station&shareName="+Gd(pn(this.g)),sa=this.Li(),this.g&&this.g.Bb()&&(Gb=this.g.e()+"/"+this.track.o()+"/"+this.track.Xh),ka=this.g&&(this.g.Bb()||null==this.Nd&&!this.g.ra())?this.ri(Gd(pn(this.g))):e+" on Pandora will play music by "+this.Nd);this.g&&this.g.ra()?(fa=this.g.ra(),fa="string"==typeof fa?fa:fa.musicId):fa=null;return{doFacebook:l,doProfile:!this.Fg,doTwitter:p,doEmail:this.Fg,isSongShare:this.jd,emails:q,userMessage:b,
defaultMessage:c,defaultTwitterMessage:d,facebookDescription:ka,facebookCaption:Ka?Ka:null,stationName:e,isCustomContentTrack:this.track?this.track instanceof zn:!1,relatedArtistNames:this.Nd,directUrl:u,landingUrl:E,shortenedUrl:Oa,stationLandingUrl:ra,artUrl:sa,fbShareArt:this.g?this.g._fbShareArt:this.Li(),webname:h.Z,stationToken:this.g?this.g.Cd():null,stationId:this.g?this.g.e():null,stationInitialSeed:fa,musicId:this.track?this.track.o():null,songToken:this.track?this.track.dv:null,songDetailToken:Gb,
songName:y,artistName:L,albumName:M,artistMessageArtistUid:Q}},GK:function(){return!this.Fg&&0<$("#shareSocialNetworkSelectFacebook:checked",this.el).length},Tq:function(){return!this.Fg&&0<$("#shareSocialNetworkSelectTwitter:checked",this.el).length},twitterLoginButtonClick:function(){this.Qo({doProfile:!1,doFacebook:!1,doTwitter:!0,doEmail:!1})},facebookLoginButtonClick:function(){this.Qo({doProfile:!1,doFacebook:!0,doTwitter:!1,doEmail:!1})},Qo:function(b){var c={},d;for(d in this.Ya)c[d]=this.Ya[d];
if(null!=b)for(d in b)c[d]=b[d];this.g&&this.g.Ba()&&(c.shareName=Gd(pn(this.g)));c.doEmail||c.doProfile||c.doFacebook||c.doTwitter?z.b(this.jd?jj:ij,c):this.oq({})},oq:function(b){this.T();clearTimeout(this.TP);b.profile&&(this.Ya.doProfile=!1,this.vd.push('your <a href="/profile">Pandora Profile</a>'));b.facebook&&(this.Ya.doFacebook=!1,this.vd.push("Facebook"));b.twitter&&(this.model.set({twitterAuthenticated:!0}),this.Ya.doTwitter=!1,this.vd.push("Twitter"));b.email?this.Ps||(new X({message:wc([this.Ya.isSongShare?
this.Ya.songName:this.Ya.stationName])})).render():this.TP=setTimeout(r(this,function(){if(!this.Ps&&0<this.vd.length){var b;2>=this.vd.length?b=this.vd.join(" and "):(b=this.vd.shift()+", ",b+=this.vd.join(" and "));(new X({message:xc([b])})).render();this.vd=[]}}),1500);var c=!b.email&&this.Ya&&this.Ya.doFacebook&&!this.model.get("facebookAuthenticated"),d=!b.email&&this.Ya&&this.Ya.doTwitter&&!this.model.get("twitterAuthenticated");if(c||d)c=Hx("shareVehicleAuthPopup",$("#shareVehicleAuthHeaderTmpl").tmpl(),
$("#shareVehicleAuthContentTmpl").tmpl({showTwitter:d,showFacebook:c,showFacebookAuthenticated:this.Ya.doFacebook&&this.model.get("facebookAuthenticated"),showTwitterAuthenticated:this.Ya.doTwitter&&this.model.get("twitterAuthenticated"),facebookConnectName:Wn(this.model.get("currentUser"))}),$("#shareVehicleAuthFooterTmpl").tmpl()),$(this.el).empty().append(c).show();s("share",{share_object:"song"==this.mode?"song":"station"==this.mode?"station":this.jd?"song":"station",source:"unknown",pandora:b.profile?
"true":"false",twitter:b.twitter?"true":"false",twitter_handle:b.twitterHandle?b.twitterHandle:"",facebook:b.facebook?"true":"false",email:b.email?"true":"false",object_id:this.g.e()},this.model.get("currentUser"));this.track instanceof no&&s("aam_listener_share_complete",{vendor_id:t,station_id:this.g.e(),artist_uid:this.track.Qe,message_id:this.track.od,pandora:b.profile?"true":"false",twitter:b.twitter?"true":"false",facebook:b.facebook?"true":"false",email:b.email?"true":"false"},this.model.get("currentUser"))},
T:function(){T(Tw);Ez(this,ou);$(this.el).empty();V(this.Az,!0,!0)},ZH:function(b){this.Ps=!0;(new X({message:b})).render();this.oq({})}});function fz(){}
fz=Backbone.View.extend({di:"wwwpandoracom-20",initialize:function(){this.BE=this.options.buyButton;this.ug=this.options.buyMenu;this.jw=this.options.cssBeforeOpen;this.DE=new Ly(this.BE,null,this.ug);this.DE.im=r(this,function(b){this.ug.empty().append($("#buyMenuTmpl").tmpl({iTunesUrl:this.$i&&0<jQuery.trim(this.$i).length?this.$i:null,amazonUrl:this.Ik&&0<jQuery.trim(this.Ik).length?this.Ik:null,amazonDigitalAsin:this.ei&&0<jQuery.trim(this.ei).length?this.ei:null}));this.jw&&this.ug.css(this.jw(b));$(".buyOnITunes",
this.ug).click(r(this,this.GE));$(".buyOnAmazon",this.ug).click(r(this,this.EE));$(".buyOnAmazonMp3",this.ug).click(r(this,this.FE))})},Ch:function(b,c,d){this.$i=b;this.Ik=c;this.ei=d;"US"!=Ro()&&(this.ei=this.$i=null)},ts:function(b,c){this.iE=b;this.hE=c},lO:function(b){this.XD=b},Nz:function(b,c,d){this.XP=b;this.VP=c;this.gh=d},AO:function(b){this.ts(b.Pe,b.V());this.Nz(b.o(),b.Da,b.gh());this.Ch(b.mo,b.Wn,b.Un)},GE:function(){var b=this.$i+"&ct=Web";this.$c("itunes",b);T(ov);window.open(b,"_blank");
return!1},EE:function(){var b=this.Ik+"&tag="+this.di;this.$c("amazonCD",b);T(ov);window.open(b,te()?"pandoraAmazon":"_blank");return!1},FE:function(){var b="http://www.amazon.com/dp/"+this.ei+"/?&tag="+this.di;this.$c("amazonMp3",b);T(ov);window.open(b,te()?"pandoraAmazon":"_blank");return!1},$c:function(b,c){s("buy",{store:b,source_url:window.location.href,destination_url:c,track_uid:this.XP,featured_track:this.gh,track_name:this.VP,album_uid:this.XD,artist_uid:this.iE,artist_name:this.hE,listener_type:this.model.get("currentUser").s,
platform:"web"},this.model.get("currentUser"));tp(null)}});function Pz(){}
Pz=Backbone.View.extend({el:$(".stationContent #promobox"),initialize:function(){this.mz=null;this.ti="#content_a";this.$q=(new Date).getTime();this.model.bind("change:currentUser",r(this,this.render));setInterval(r(this,this.scrollPromoBox),15E3);$('a[rel="tooltip"]').each(function(){new yz($(this),$(this).attr("title"))})},nz:"/static/promo/",render:function(){var b=this.model.get("currentUser");null!=b&&(b=this.nz+"manifest."+(null!=b&&b.G()?"free":"subscriber")+".json",this.mz!=b&&(this.mz=b,
this.ed=[],this.nb=0,this.um={},this.bj=!0,Jz(b,{cachebuster:""+(new Date).getTime()},r(this,function(b){this.ed=_.reject(b,function(b){return b.country&&b.country!=Ro()});this.nb=Math.floor(Math.random()*this.ed.length);this.zm();this.JN()}))))},JN:function(){for(var b="<ul>",c=0;c<this.ed.length;c++)b+='<li class="dot">&nbsp;</li>';b+="</ul>";$(".dots",this.el).empty().append(b)},zm:function(b){this.ed&&(null==this.um[this.nb]?this.WK(b):this.tw(b))},tw:function(){var b=this.um[this.nb].htmlElem,
c=this.um[this.nb].adType,d=$("#content_a"==this.ti?"#content_b":"#content_a",this.el);d.empty().append(b);yp({action:"promo_display",promo_type:c,source:"PromoBoxView"},this.model.get("currentUser"));try{$("a",d)[0].setAttribute("adType",c)}catch(e){k.error("displayPromoItem error inserting adType into anchor element: "+e)}$(this.ti,this.el).fadeOut();$(".dot",this.el).removeClass("selected");$(".dot",this.el).eq(this.nb).addClass("selected");$("#content_a"==this.ti?"#content_b":"#content_a",this.el).fadeIn(400,
r(this,function(){this.ti="#content_a"==this.ti?"#content_b":"#content_a";this.bj=!1}))},WK:function(b){this.bj=!0;Jz(this.nz+this.ed[this.nb].url,{cachebuster:""+(new Date).getTime()},r(this,function(c){this.um[this.nb]={htmlElem:c,adType:this.ed[this.nb].type};this.tw(b)}),function(b,d){(new X({message:"Error loading content textStatus="+b+" error="+d})).render();this.bj=!1})},events:{"click #scrollLeft":"scrollLeftClick","click #scrollRight":"scrollRightClick","click #content_a":"handlePromoBoxClick",
"click #content_b":"handlePromoBoxClick","click .dot":"dotClick"},handlePromoBoxClick:function(b){try{var c="undefined";try{var d=$(b.target).context.parentNode;d.getAttribute("adType")&&(c=d.getAttribute("adType"))}catch(e){k.error("Error collecting info from promo box anchor element"+e)}yp({action:"box_click",promo_type:c,source:"PromoBoxView"},this.model.get("currentUser"))}catch(h){k.error("Error collecting info from promo box"+h)}},dotClick:function(b){yp({action:"dot_click",source:"PromoBoxView"},
this.model.get("currentUser"));$(b.target).hasClass("selected")||(this.nb=$(b.target).index(),this.zm("left"),T(vw));return!1},mouseOverPromobox:function(){$("#scrollLeft",this.el).fadeIn();$("#scrollRight",this.el).fadeIn()},mouseOutPromobox:function(){$("#scrollLeft",this.el).fadeOut();$("#scrollRight",this.el).fadeOut()},scrollLeftClick:function(){if(this.ed){this.$q=(new Date).getTime();if(this.bj)return;this.nb--;0>this.nb&&(this.nb=this.ed.length-1);this.zm("left")}return!1},scrollRightClick:function(){if(this.ed){this.$q=
(new Date).getTime();if(this.bj)return;this.nb++;this.nb>=this.ed.length&&(this.nb=0);this.zm("right")}return!1},scrollPromoBox:function(){12E4<(new Date).getTime()-this.$q&&(yp({action:"auto_scroll",source:"PromoBoxView"},this.model.get("currentUser")),this.scrollRightClick())}});function Qz(){}
Qz=Backbone.View.extend({initialize:function(){z.c(xe,r(this,function(){this.il()}));U(nw,r(this,this.il));U(mw,r(this,this.hc));this.Nt="#adLayout";this.Ac="#mainContentContainer";this.Ke="#footer";this.oa="#ad_container";this.md="#advertisement";this.Lb="#companion_frame";this.dm=!1;this.L2=null;this.Nn="/radioAdEmbedGPT.html";this.Mn="/radioAdEmbedAsyncGPT.html"},render:function(b,c){this.jl=!1;$(this.oa).show();$("body").hasClass("width-p1-noAds")&&$("body").removeClass("width-p1-noAds");$("body").hasClass("adSupported-layout")||
(T(Uv),$("body").addClass("adSupported-layout"),T(Vv));var d=c?this.Lb:this.md;if(null!=b){var e="ad"+(new Date).getTime();b+=(-1==b.indexOf("?")?"?":"&")+"cb="+de();var h='<IFRAME id="'+e+'" src="'+b+'" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" allowtransparency="true" width="100%" height="100%"></IFRAME>',l=null;c||($(this.oa).hasClass("masthead_ad")&&(this.dm=!0,l=$(this.oa).height(),$(this.oa).height(l)),l=$(this.oa).fadeTo("slow",0.01));$.when(l).done(r(this,
function(){c||(ey=null);$(this.Lb).html("");$(d).removeClass("inactive").removeClass("invisible").addClass("active").addClass("visible");var b=(new Date).getTime();$(d).html(h);var l="#"+e,u=this;$(l).bind("load",this,function(d){var e=3;(function M(){var h=d.target&&d.target.contentWindow&&d.target.contentWindow.adType,ka=d.target.contentWindow&&d.target.contentWindow.requestUrl,Ka=d.target.contentWindow&&d.target.contentWindow.creativeId,ra=d.target.contentWindow&&d.target.contentWindow.lineItemId,
Oa=le();if(null==h){if(0<e){k.debug("Ad iFrame rendered: adType is not ready. Retries: "+e);e--;setTimeout(M,500);return}k.debug("Ad iFrame rendered: adType was not ready. No retries left!");d.data.vy(u.model,"false")}else d.data.vy(u.model,"true");k.debug("Ad iFrame: Checking adType: ",h);var sa=null;!c&&u.dm&&"masthead"!=h&&"masthead_with_companion"!=h&&(u.dm=!1,sa=$(u.oa).animate({height:"0"},1E3));$.when(sa).done(r(this,function(){var c=(new Date).getTime()-b,e=u.model?u.model.get("currentUser"):
null;e&&e.gB&&s("gpt_render_duration",{duration:c,ua:navigator.userAgent,browser:Oa,site_version:window._pandoraVersion,flash_ver:me(),is_gpt:"true"},e);d.data.oL(h,l,ka,Ka,ra,Oa)}))})()})}));z.b(Ek)}},hc:function(b,c){if(this.model.get("modalPanel")!=au)this.gb();else if(b&&0==b.indexOf("masthead"))if("masthead"==b?($(this.Lb).removeClass().addClass("inactive"),this.WN(b)):($(this.Ac).removeClass("wide"),$(this.Ke).removeClass("wide")),"masthead_companion"==b)$(this.Lb).addClass("active"),this.Hp(b,
c);else{if("masthead_with_companion"==b){var d=Jo();null!=d&&2==d.split(":").length?this.render(this.Tc()+"?displayAd="+d,!0):(C.sO(),this.render(this.Tc(),!0))}T(Uv);$(this.oa).removeClass("inactive").addClass("active");this.Hp(b,c);T(Vv)}else{$(this.Lb).removeClass("active").removeClass("visible").addClass("inactive").addClass("invisible");var e=950<$(this.Ac).width();e&&T(Uv);var d=e?$(this.Ac).css("width","970").removeClass("wide").animate({width:"665"},1E3,null):"",h=e?$(this.Ke).css("width",
"970").removeClass("wide").animate({width:"665"},1E3,null):"";$.when(d,h).done(r(this,function(){$(this.Ac).removeAttr("style").css("display","block");$(this.Ke).removeAttr("style").css("display","block");$("body").hasClass("adSupported-layout")?e&&T(Vv):$("body").hasClass("width-p1-noAds")?($("body").removeClass("width-p1-noAds"),T(Vv)):e&&T(Vv);this.Hp(b,c)}))}},Hp:function(b,c){if(!this.jl)if("masthead"==b||"masthead_with_companion"==b){var d=null;this.dm||($(this.oa).height(0),d=$(this.oa).animate({height:"250"},
1E3));$.when(d).done(r(this,function(){$.when($(this.oa).fadeTo("slow",1)).done(r(this,function(){$(this.oa).removeClass("inactive").removeClass("invisible").addClass("active").addClass("visible").removeAttr("style");z.b(Fk,c)}))}))}else"masthead_companion"==b?$.when($(this.Lb).fadeTo("slow",1)).done(r(this,function(){$(this.Lb).removeClass("inactive").removeClass("invisible").addClass("active").addClass("visible").removeAttr("style");z.b(Fk,c)})):$.when($(this.oa).fadeTo("slow",1)).done(r(this,function(){$(this.oa).removeClass("inactive").removeClass("invisible").addClass("active").addClass("visible").removeAttr("style");
z.b(Fk,c)}))},WN:function(b){if("masthead"==b){if(970!=$(this.Ac).width()){T(Uv);b=$(this.Ac).css("width","665").removeClass("wide").animate({width:"970"},1E3,null);var c=$(this.Ke).css("width","665").removeClass("wide").animate({width:"970"},1E3,null);$.when(b,c).done(r(this,function(){$(this.Ac).addClass("wide").removeAttr("style").css("display","block");$(this.Ke).addClass("wide").removeAttr("style").css("display","block");T(Vv)}))}}else 970==$(this.Ac).width()&&(T(Uv),b=$(this.Ac).css("width",
"970").removeClass("wide").animate({width:"665"},1E3,null),c=$(this.Ke).css("width","970").removeClass("wide").animate({width:"665"},1E3,null),$.when(b,c).done(r(this,function(){$(this.Ac).addClass("wide").removeAttr("style").css("display","block");$(this.Ke).addClass("wide").removeAttr("style").css("display","block");T(Vv)})))},il:function(){var b=this.model.get("currentUser");T(Uv);b&&!b.G()?($(this.oa).removeClass().addClass("invisible").addClass("inactive"),$(this.Lb).removeClass().addClass("invisible").addClass("inactive"),
$("body").hasClass("adSupported-layout")&&$("body").removeClass("adSupported-layout"),$("body").addClass("width-p1-noAds")):($(this.oa).height("0"),$("body").hasClass("width-p1-noAds")&&$("body").removeClass("width-p1-noAds"),$("body").addClass("adSupported-layout"));T(Vv);gy()},Rl:function(){this.gb(!0,!1)},fP:function(){$(this.oa).show();$("body").hasClass("width-p1-noAds")&&$("body").removeClass("width-p1-noAds");$("body").hasClass("adSupported-layout")||(T(Uv),$("body").addClass("adSupported-layout"),
T(Vv));this.jl=!1;this.hc()},gb:function(b,c){if(!this.jl||b)c&&$(this.md).empty(),$(this.oa).removeClass("active").removeClass("visible").addClass("inactive").addClass("invisible"),$(this.Lb).removeClass("active").removeClass("visible").addClass("inactive").addClass("invisible"),this.qz(),T(Uv),$("body").hasClass("adSupported-layout")&&$("body").removeClass("adSupported-layout"),$("body").addClass("width-p1-noAds"),T(Vv),gy(),this.jl=!0},qz:function(){$("#google_adwords").css("display","none").css("visibility",
"hidden");$("#advertisement_bottom").css("display","none").css("visibility","hidden");$("#ad_controls").css("display","none").css("visibility","hidden");$("#ad_your_ad_here").css("display","none").css("visibility","hidden")},oL:function(b,c,d,e,h,l){null==ey&&gy();"double_wide_short"!=b&&this.qz();if(b&&0==b.indexOf("masthead")){var p=this.model.get("currentUser");if(p&&p.p()){this.gb(!0);return}}"medium_rectangle"==b?($(this.oa).attr("class","banner_ad"),$(this.md).attr("class","advertisement_square"),
$(c).height("100%"),this.hc(b,c)):"wide_skyscraper"==b?($(this.oa).attr("class","banner_ad"),$(this.md).attr("class","advertisement_tall"),$(c).height("100%"),this.hc(b,c)):"double_wide"==b?($(this.oa).attr("class","banner_ad"),$(this.md).attr("class","advertisement_double_wide"),$(c).height("100%"),this.hc(b,c)):"double_wide_short"==b?($(this.oa).attr("class","network_ad"),$(this.md).attr("class","advertisement_double_wide_short"),$(c).height("100%"),this.hc(b,c)):"masthead"==b?($(this.oa).attr("class",
"masthead_ad"),$(this.md).attr("class","advertisement_masthead"),$(this.Lb).attr("class","companion_ad"),$(c).height(250),this.hc(b,c)):"masthead_with_companion"==b?($(this.oa).attr("class","masthead_ad"),$(this.md).attr("class","advertisement_masthead"),$(this.Lb).attr("class","companion_ad"),$(c).height(250),this.hc(b,c)):"masthead_companion"==b?($(this.md).attr("class","advertisement_masthead"),$(this.Lb).attr("class","companion_ad"),$(c).height("100%"),this.hc(b,c)):(b="Unknown ad type: "+b,this.model.get("displayingCompanion")?
ip("Companion ad not displayed","2000x2",b,d,e,h,l):ip("Banner ad not displayed","2000x2,300x250,300x600",b,d,e,h,l),this.il())},lN:function(b,c){var d={wide_skyscraper:0,medium_rectangle:0,double_wide:0,masthead:0};switch(b){case 160:d.wide_skyscraper++;break;case 300:d.medium_rectangle++;d.double_wide++;break;case 970:d.masthead++}switch(c){case 600:d.wide_skyscraper++;d.double_wide++;break;case 250:d.medium_rectangle++,d.masthead++}var e=[],h;for(h in d)e[e.length]={type:h,score:d[h]};e.sort(function(b,
c){return c.dO-b.dO});return e[0].type},Tc:function(){var b=this.model.get("currentUser");return b&&b.Df()?this.Mn:this.Nn},debug:function(b){k.debug("AdView : "+b)},vy:function(b,c){var d=b?b.get("currentUser"):null;d&&d.Rs&&s("simple_url_display_ad",{success:c,ua:navigator.userAgent,browser:le(),site_ver:window._pandoraVersion,flash_ver:me()},d)}});function Rz(){}
Rz=Backbone.View.extend({initialize:function(){k.debug("Initialize animated overlay ad view");this.ez=!0;U(kw,r(this,this.tL));U(lw,r(this,this.sL))},debug:function(b){k.debug("AnimatedOverlayAdView : "+Cd()+" : ",arguments)},render:function(b){b&&"ANIMATEDOVERLAY"==b.C()?(this.tg=new Gz({model:this.model}),this.tg.Vx(),this.qD(b)):this.debug("Invalid ad type here ... should never happen",b)},qD:function(b){this.data=b;this.Wa(b);(b=b.data.richmedia_companion)?(this.ez=!0,this.startTime=Dd(),z.b(Pk,
this.data),z.b(bi,!1),this.debug("Force the companion ad .."+b),T(iw,{companion:b,forceSyncGPT:!1}),$(window).scrollTop(0)):this.$o()},$o:function(){z.b(Qk,this.data);this.data=null;this.ez&&z.b($h,{userInitiated:!1});this.tg=new Gz({model:this.model});this.tg.sx()},r2:function(b){Dd()-this.startTime>b&&(this.debug("Too long for the ad to respond ... closing"),this.$o())}});Rz.prototype.rh=function(b){this.debug("ERROR pinging tracker url ? "+b)};
Rz.prototype.Wa=function(b){if(b&&b.lc){var c=b.lc;np(c,function(){},r(this,function(b){this.rh(c,b)}));b.lc=null}if(b&&b.tracker){var d=b.tracker;np(d,function(){},r(this,function(b){this.rh(d,b)}));b.tracker=null}};Rz.prototype.tL=function(){this.debug("Animated overlay start",this.data);this.data&&z.b(Rk,this.data)};Rz.prototype.sL=function(){this.debug("Animated overlay end",this.data);if(this.data){var b=this.data.data.followon_companion,c=!this.data.cb();this.$o();T(iw,{companion:b,isCompanionAd:c})}};
Rz.ZF=function(){T(kw)};Rz.YF=function(){T(lw)};window.animatedOverlayStart=Rz.ZF;window.animatedOverlayFinish=Rz.YF;function Y(){}
Y=Backbone.View.extend({initialize:function(b){k.debug("Initialize video ad view");this.pk="#videoAd";this.yu="#videoPlayerJS";this.jg="#videoPlayer";this.fC=854;this.eC=480;this.NA="Advertisement: Your music will resume in {0} seconds";this.$d=b.$d||new Backbone.Model({creativeId:"",lineId:""});this.dk=this.data=null;this.HA=30;this.Aq=this.Ka=this.kp=this.sj=!1;this.Yq=this.lastPosition=this.position=0;this.Ws=this.Yc=!1;this.Jm=-1;this.Bt=!1;this.It=!0;this.FA=!1;this.aE=new Rz({model:this.model});U(cw,
r(this,this.vN));U(dw,r(this,this.uN));U(Yw,r(this,function(b){Sz(this,b.OF,b.PF)}))},debug:function(b){k.debug("VideoAdView : "+Cd()+" : ",arguments)},Sc:function(){return this.Hd()?this.dk:$(this.yu).get(0)},Hd:function(){try{return-1<$(this.pk).html().toLowerCase().indexOf("ooyala.com/player.swf")}catch(b){return!1}},HO:function(b){b&&(this.FA=!0);if($(this.yu)&&this.Sc()&&(b&&this.Hd()||!b&&!this.Hd()))this.dk=this.Sc(),this.debug("Video player is available "+this.dk),b||this.Hd()?$(this.jg).find(".close").hide():
this.data.wr?$(this.jg).find(".close").show():$(this.jg).find(".close").hide();else{var c=$("<div id='videoPlayerContainer'></div>");ve()?c.css("visibility","hidden"):c.addClass("hideVideoAd");var d=$("<div id='videoPlayer'><div class='close' style='display:none'></div><div id='videoAd'></div></div>");b&&(d.addClass("htmlStatus"),d.prepend('<div class="videoStatusBar"><div class="mainHolder">&nbsp;</div><div class="skipHolder"><a href="javascript:void(0);">Skip</a></div></div>'));c.append(d);this.data.wr&&
c.find(".close").show();c.appendTo("body");this.debug("Added the videoAd div - "+$(this.pk));this.QO();if(b){var e=this;$(this.pk).ready(function(){var c={width:e.fC,height:e.eC,autoplay:!0};wy(e.data)?"VPAID"==xy(e.data)?$.extend(c,{"vpaid-ads-manager":{adTag:wy(e.data),showInAdControlBar:!0,showAdMarquee:!1}}):$.extend(c,{vast:{tagUrl:wy(e.data),disablePauseAd:!0}}):$.cookie("pandoraVideoAdClickTracker",Ay(e.data),{path:"/",domain:window.location.hostname,V2:!1});e.dk=OO.Player.create("videoAd",
b,c);setTimeout(function(){e.dk.mb.subscribe("*","videoAdView",function(b,c){T(Yw,{OF:b,PF:c})})},1);$(".skipHolder a",this).bind("click",r(e,e.cy))})}else e=this,$(this.pk).ready(function(){swfobject.embedSWF("/videoPlayerJS.swf","videoAd","100%","100%","8",null,{allowscriptaccess:"always"},null,{id:"videoPlayerJS"});k.debug("VideoAdView : "+Cd()+" : Video player has been added : "+$("#videoPlayerJS").get(0));$(".close",this).bind("click",r(e,e.cy))})}},cy:function(){Tz(this,Y.Bn,null)},UO:function(){$("#videoPlayerContainer").removeClass("hideVideoAd");
ve()&&($("#videoPlayerContainer").removeAttr("style"),$("#videoPlayerContainer").css("visibility","visible"));this.Hd()&&$(".videoStatusBar",$(this.jg)).animate({height:"21px"})},QO:function(){$("#videoPlayerContainer").removeClass("hideVideoAd");ve()&&($("#videoPlayerContainer").removeAttr("style"),$("#videoPlayerContainer").css("visibility","visible"))},fK:function(){ve()?$("#videoPlayerContainer").css("visibility","hidden"):$("#videoPlayerContainer").addClass("hideVideoAd").removeAttr("style");
$("#videoPlayer").removeAttr("style")},gK:function(b){$("#videoPlayer").fadeOut(250,function(){$("#videoPlayerContainer").fadeOut(1E3,function(){ve()?$("#videoPlayerContainer").css("visibility","hidden"):$("#videoPlayerContainer").addClass("hideVideoAd").removeAttr("style");$("#videoPlayer").removeAttr("style");("Explorer"==BrowserDetect.browser||b)&&$("#videoPlayerContainer").remove()})})},K2:function(){return this.sj},render:function(b){this.data=b;this.It=!0;this.It=this.model.get("musicPlaying");
this.Jm=b.iP;this.$d.set({lineId:this.data.no,creativeId:this.data.pd});if("VIDEOAD"==this.data.C())if(this.Ka=!1,b=this.data.data.ooyalatoken,this.HO(b),this.sj){wy(this.data)||vy(this.data)||this.ov();setTimeout(r(this,this.playVideo),500);var c=1;1==this.Fk&&(c=2);this.rm=setTimeout(r(this,this.QE),16E3*c);this.uj=b&&wy(this.data)&&"VPAID"==xy(this.data)?setTimeout(r(this,this.Wo),3E5):setTimeout(r(this,this.Wo),19E3*c)}else this.kp=!0,this.debug("Player is not initialized yet .... no jsping yet?");
else"HOUSE"==this.data.C()?(this.debug("Handle the HOUSE video ad",this.data),this.Wa(this.data),z.b(Rk,this.data),z.b(Qk,this.data),this.data=null):"ANIMATEDOVERLAY"==this.data.C()&&(this.debug("Handle the AnimatedOverlay ad",this.data),this.aE.render(this.data))},gb:function(b){this.debug("Remove Display");this.gK(b);clearTimeout(this.rm);clearTimeout(this.uj)},setData:function(b){this.data=b},R2:function(){this.debug("Preload Movie called")},playVideo:function(){var b=this.Sc();this.position=0;
this.Aq=this.Yc=!1;this.Yq=Cd();this.debug("Video player - calling play video : "+b);var c=this.data.data.logoimage,d=this.data.cb()?1:0,e=this.data.wr?1:0,h=this.data.YO?1:0,l=this.data.data.movie;this.debug("Playing Movie : url : "+l+" : uif : "+wy(this.data)+" : vol : "+this.Ni());this.Hd()?this.Bt=!0:b.setShowSkipButtonAfter(this.Jm);this.trigger(Y.ig.LOG_TIME_TO_PLAYER);if(vy(this.data)){this.debug("Playing Movie (asset determined by Yume)");var l=this.model.get("currentUser"),p=this.model.get("currentStation"),
q={M:1,F:2};b.playYumeVideo({ag:l?(new Date).getFullYear()-l.sg:"",gnd:l?q[Qn(l)]:"",genre:p?encodeURIComponent(p.k.Sg()):""},"4x3",d,h,e,c,this.Ni(),this.data.data.creativeTypeAdServer?this.data.data.creativeTypeAdServer:null)}else this.data.data.ooyalatoken?(this.debug("Playing Movie v/Ooyala native: "+this.data.data.ooyalatoken),wy(this.data)&&b.play()):null!=l?(p=l.indexOf("file="),-1!=p?(l=decodeURI(l.substring(p+5)),this.debug("Playing Movie : "+l),b.playVideo(!0,l,this.data.data.aspectRatio,
d,h,e,c,this.Ni())):(fp(By(this.data),"Video","invalid movie url","html5"),Uz(this.model,"false","Invalid URL"),this.Re())):null!=wy(this.data)?(l=wy(this.data),this.debug("Playing Movie : "+l),b.playVideo(!1,l,null,d,h,e,c,this.Ni())):(fp(By(this.data),"Video","invalid path data","html5"),Uz(this.model,"false","Invalid path data"),this.Re())},ov:function(){z.b(bi,!1);this.debug("Show the video ad view",this.data);this.fK();this.UO();z.b(Pk,this.data)},UM:function(){this.data&&this.data.cb()?this.Yc=
!0:this.Re()},Re:function(){this.debug("Close Movie called");this.rm&&clearTimeout(this.rm);this.uj&&clearTimeout(this.uj);this.uj=this.rm=null;this.Yc=this.Ka=!1;this.duration=this.position=0;var b=!1;try{var c=this.Sc();this.Hd()?(b=!0,Yd(this,function(){c.destroy();this.sj=!1},200)):c.endVideo()}catch(d){}this.gb(b);try{z.b(Qk,this.data)}catch(e){}(this.data.cb()||void 0!=this.data.ej&&!0==this.data.ej)&&!this.It||z.b($h,{userInitiated:!1});this.data=null},VM:function(){fp(By(this.data),"VideoAd",
"VideoPlayer error event","onVideoError");Uz(this.model,"false","Video player error");this.Re()},QE:function(){!1==this.Ka?(this.debug("Looks like the player is having issues with starting the video"),fp(By(this.data),"VideoAd","Video didn't start","checkPlaying"),Uz(this.model,"false","Video failed to start"),this.Re()):this.debug("The player is doing fine .... ")},Wo:function(){var b=Cd()-this.Yq;this.Ka&&10<b&&!this.Yc&&(this.debug("Looks like the player is having issues with progressing through the video"),
fp(this.data,"VideoAd","Video stalled for : "+b,"checkProgress"),Uz(this.model,"false","Video stalled"),this.Re());this.debug("The player is doing fine .... check again in 3s");this.Ka&&(this.uj=setTimeout(r(this,this.Wo),3E3))},Ni:function(){var b=Dm();return null==b||isNaN(Number(b))||0>Number(b)||100<Number(b)?50:Number(b)}});Y.zn="initialized";Y.Vt="interaction_playerLoaded";Y.Cn="interaction_videoInitiated";Y.Dn="interaction_videoPlayedToCompletion";Y.nB="interaction_scrubbed";Y.Ut="interaction_pauseClicked";
Y.An="interaction_unpauseClicked";Y.WU="interaction_replayClicked";Y.VU="interaction_muteClicked";Y.XU="interaction_unmuteClicked";Y.Wt="interaction_videoLoadError";Y.kB="interaction_endOfVideoCloseClicked";Y.Bn="interaction_videoClosedBeforeEnd";Y.UU="interaction_endOfVideoReplayClicked";Y.lB="interaction_endOfVideoLearnMoreClicked";Y.mB="interaction_graphicLinkClicked";Y.oB="interaction_videoClicked";Y.jB="interaction_emptyVastTag";Y.Au="videoProgress";Y.ig={VIDEO_EVENT:"VIDEO_EVENT",LOG_TIME_TO_PLAYER:"LOG_TIME_TO_PLAYER"};
Y.prototype.rh=function(b,c){try{var d=c.name+" : while pinging url";this.debug(d,c);fp(b,"video",d,"impression");Uz(this.model,"false","Ping tracking URL failure")}catch(e){}};
Y.prototype.Wa=function(b){if(b&&b.lc){var c=b.lc;this.debug("Ping "+c);np(c,function(){},r(this,function(b){this.rh(c,b)}));b.lc=null}else{var d="VideoData is empty",e="Empty";b&&(d="Impression url is empty",e=b.C()+" : "+By(b));fp(e,"video",d,"impression");Uz(this.model,"false","Ping impression URL failure")}if(b&&b.tracker){var h=b.tracker;np(h,function(){},r(this,function(b){this.rh(h,b)}));b.tracker=null}};
function Sz(b,c,d){b.debug("Ooyala interaction - "+c);switch(c){case "playerEmbedded":Tz(b,Y.Vt,null);break;case "contentTreeFetched":b.sj||Tz(b,Y.zn,null);break;case "playheadTimeChanged":b.Ka&&(c=b.Sc().getPlayheadTime(),d=wy(b.data)&&!qd(b.Sc().getDuration())?b.HA:b.Sc().getDuration(),$(b.jg+" .videoStatusBar .mainHolder").html(b.NA.replace("{0}",Math.round(d-c))),b.Bt&&Math.round(c)>=b.Jm&&(b.Bt=!1,$(b.jg+" .videoStatusBar .skipHolder").css("visibility","visible")),Tz(b,Y.Au,{position:c,duration:d}));
break;case "willShowCompanionAds":"*INLINED*"==b.data.mf&&d.Hk&&d.Hk[0]&&($.extend(d.Hk[0],{pandoraContainer:b.data.Yk}),T(jw,d.Hk[0]));break;case "error":case "playFailed":b.debug("Ooyala ERROR: "+b.Sc().getError());Tz(b,Y.Wt,null);break;case "played":case "adsPlayed":b.Ka&&Tz(b,Y.Dn,null);break;case "paused":b.Ka&&0.95>b.position/b.duration&&(b.Yc&&wy(b.data)?Tz(b,Y.An,null):b.Yc||(b.Ws&&clearTimeout(b.Ws),b.Ws=Yd(b,function(){Tz(this,Y.Ut,null)},200)));break;case "playing":!b.Ka&&wy(b.data)?Tz(b,
Y.Dn,null):b.Ka&&b.Yc&&Tz(b,Y.An,null);break;case "playbackReady":b.Ka||wy(b.data)||Yd(b,function(){Tz(this,Y.Cn,null)},500);break;case "willPlayAds":b.Ka||(qd(d)&&(b.HA=d),Tz(b,Y.Cn,null))}}
function Tz(b,c,d){var e=b.data;if(Y.Au==c){if(b.lastPosition=b.position,b.position=d.position,b.duration=d.duration,b.Yq=Cd(),0==b.position%10&&b.debug("Handling interaction - "+c),b.duration){d=b.position/b.duration;var h=b.lastPosition/b.duration;0==h&&0<d&&(Vz(b,"start"),e&&Wz(b,e.wP));0.25>h&&0.25<=d&&(Vz(b,"first_quartile"),e&&Wz(b,e.oG));0.5>h&&0.5<=d&&(Vz(b,"second_quartile"),e&&Wz(b,e.hO));0.75>h&&0.75<=d&&(Vz(b,"third_quartile"),e&&Wz(b,e.QP))}}else b.debug("Handling interaction - "+c);
Y.nB==c&&(b.Aq=!0);if(Y.zn==c)b.sj=!0,b.kp&&(b.kp=!1,b.data&&b.render(b.data)),Vz(b,"initiate");else{Y.Vt==c&&b.debug("Player loaded");c==Y.Bn&&(Vz(b,"skip"),s("video_ad_skipped",{O2:By(e),Q2:b.position,e3:b.duration},b.model.get("currentUser")),b.debug("Player closed before end?"));if(c==Y.Dn&&(d=b.Ka,b.UM(),Uz(b.model,"true","Video completed"),Vz(b,"complete"),e&&Wz(b,e.dF),e&&wy(e)&&!d)){b.Wa(e);return}if(c==Y.kB||c==Y.Bn)Uz(b.model,"true","Video closed"),b.Re();c==Y.lB&&zy(b.data)&&(window.open(zy(b.data),
"_blank"),b.debug("Open window "+zy(b.data)));c==Y.mB&&(null!=yy(b.data)?(window.open(yy(b.data),"_blank"),b.debug("Open window "+yy(b.data))):Ay(b.data)&&(window.open(Ay(b.data),"_blank"),b.debug("Open Window "+Ay(b.data))));c==Y.oB&&Ay(b.data)&&(window.open(Ay(b.data),"_blank"),b.debug("Open Window "+Ay(b.data)));c==Y.Cn&&(b.Hd()&&b.Sc().setVolume(b.Ni()/100),(wy(b.data)||vy(b.data))&&b.ov(),b.Ka=!0,b.Yc=!1,z.b(Rk,b.data),b.Wa(b.data));c==Y.jB&&(b.Wa(b.data),vy(b.data)&&(b.Ka=!1));c==Y.Wt?(Uz(b.model,
"false","Video load error"),b.VM()):(c==Y.Ut&&(b.Yc=!0,Vz(b,"pause")),c==Y.An&&(b.Yc=!1,Vz(b,"unpause")),c&&"interaction_videoInitiated"!=c&&e&&Wz(b,e.get("trackingUrl_"+c.split("interaction_")[1])))}}
function Vz(b,c){var d={event_type:c,line_id:"",creative_id:"",playback_pos:b.position,duration:b.duration,has_scrubbed:b.Aq,network:null,vendor_id:t,device_id:pe,accessory_id:null,app_version:z.$a,device_os:le(),device_model:null,client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0),is_pandora_link:!1,bluetooth_device_name:null},e=b.$d;e&&(d=_.extend(d,{line_id:e.get("lineId"),creative_id:e.get("creativeId")}));b.trigger(Y.ig.VIDEO_EVENT,d);s("tap_to_video",d,b.model.get("currentUser"))}
function Wz(b,c){c&&(gp(c,function(){},r(b,b.rh)),b.debug("ping : "+c))}Y.prototype.vN=function(b){Tz(this,b.interaction,b.data)};Y.prototype.uN=function(b){var c=this.Sc();this.Jm=b;c?(this.Hd()||c.setShowSkipButtonAfter(b),this.debug("Set the showSkip duration to : "+b)):this.debug("No video player to set the show skip duration..")};Y.xO=function(b){T(dw,b)};Y.WM=function(b,c){T(cw,{interaction:b,data:c})};
Y.OK=function(b){k.debug("VideoAdView : Firing off interaction event : init with "+b);T(cw,{interaction:Y.zn,data:b})};function Uz(b,c,d){(b=b?b.get("currentUser"):null)&&b.Rs&&s("simple_url_video_ad",{success:c,reason:d,ua:navigator.userAgent,browser:le(),site_ver:window._pandoraVersion,flash_ver:me()},b)}window.setShowSkipDuration=Y.xO;window.onVideoInteraction=Y.WM;window.jsPing=Y.OK;function Xz(){}
Xz=Backbone.View.extend({initialize:function(){this.fk="#skinClickRight";this.ek="#skinClickLeft";this.Mt="#advertisement";this.Nt="#adLayout";this.KB=800;this.gb()},render:function(b){if(b){var c="ad"+(new Date).getTime();b=b.replace("__CACHEBUSTER__",de());var d='<div id="'+c+'" style="width:100%;height:100%;" class="sponsored_logo"><a href="'+b+'" target="_blank"><img src="/static/ads/sponsorship/transparent-logo-area.gif" width="100%" height="100%" border="0" ></a></div>';$(this.fk).fadeTo("slow",0.01,
r(this,function(){$(this.fk).html(d)}));$(this.ek).fadeTo("slow",0.01,r(this,function(){$(this.ek).html(d)}))}},hc:function(){var b=this.KB;$(this.Nt).animate({width:b},"slow");$(this.Mt).html("");$(this.Mt).hide();$(this.fk).addClass("active_trial").fadeIn(200);$(this.ek).addClass("active_trial").fadeIn(200);$(".skinClick").css({display:"block"});$(".skinClick").width(($(window).width()-b)/2);$(window).resize(function(){$(".skinClick").width(($(window).width()-b)/2)})},gb:function(){$(this.fk).removeClass("active_trial").fadeOut(200);
$(this.ek).removeClass("active_trial").fadeOut(200)},debug:function(b){k.debug("ComplimentaryTrialLogoView : ",arguments)}});function Yz(){}Yz=Backbone.View.extend({initialize:function(){z.eb(Mg,r(this,this.lb))},lb:function(){var b=Hx("readOnlyPopup",$("#readOnlyHeaderTmpl").tmpl(),$("#readOnlyContentTmpl").tmpl());$("body").append($(this.el).append(b))},events:{"closed .lightbox":"cancelClick"},cancelClick:function(){$(this.el).empty();return!1}});function Zz(){}
Zz=Backbone.View.extend({initialize:function(){$("#main").append(this.el);this.model.bind("change:modalPanel",r(this,this.render));Uy("/account/welcome");z.c(oi,r(this,this.abort))},render:function(){if("REGISTERED_PANEL"==this.model.get("modalPanel")){V("/account/welcome",!1,!0);var b=Hx("first_interaction",$("#firstInteractionHeaderTmpl").tmpl(),$("#firstInteractionContentTmpl").tmpl(),$("#firstInteractionFooterTmpl").tmpl(),!0);b.css("top",0);$(this.el).empty().append(b);$(this.el).show();b.bind("closed",
r(this,this.closeWindow));$("#first_interaction_continue",this.el).click(r(this,this.closeWindow));T(aw);$(".legal").hide()}},closeWindow:function(){var b=this.model.get("currentUser");!$("#public_profile").is(":checked")&&b&&z.b(ui,{isProfilePrivate:!0,disallowComments:b.op,optOut:!b.kl,noNotifyOnNote:!b.rr,noNotifyOnFollow:!b.qr,artistPromoEmailsEnabled:void 0!=b.rf?b.rf:null});$("#first_interaction_continue",this.el).unbind();$(this.el).empty();Vo()&&0<Vo().length&&(window.location=Vo());this.model.set({modalPanel:"POSTREG_AD_PANEL"});
$(".navFooter").show();$(".legal").show()},abort:function(){$("#first_interaction_continue",this.el).unbind();$(this.el).hide(function(){$(this.el).empty()})}});function $z(){}
$z=Backbone.View.extend({initialize:function(){$("#main").append(this.el)},render:function(b){var c=Hx("postreg_ad",$("#postregAdHeaderTmpl").tmpl(),$("#postregAdContentTmpl").tmpl(),$("#postregAdFooterTmpl").tmpl(),!0);c.css("top",0);$(this.el).empty().append(c);$(this.el).show();c.bind("closed",r(this,this.closeWindow));$("#postreg_nothanks",this.el).click(r(this,this.closeWindow));swfobject.embedSWF("/postregAdProxy/postregproxy.swf?adswf="+b,"postregAdSwfContainer","560","300","8",null,{allowscriptaccess:"always"},
{wmode:"transparent"},{id:"postregProxy"})},closeWindow:function(){$(this.el).empty();z.b(wi)},abort:function(){$(this.el).hide(function(){$(this.el).empty()})},eF:function(b){$("#postregProxy").css("height","1px");$("#postregProxy").css("width","1px");b=Hx("postreg_ad",$("#postregAdConfirmHeaderTmpl").tmpl(),$("#postregAdConfirmTmpl").tmpl({msg:b}),$("#postregAdInfoConfirmButtons").tmpl(),!0);b.css("top",0);$(this.el).append(b);b.bind("closed",r(this,this.closeWindow));$("#postreg_info_dont_allow",
this.el).click(r(this,function(){$("#postreg_info_dont_allow",this.el).fadeOut();this.closeWindow();z.b(yi)}));$("#postreg_info_allow",this.el).click(r(this,function(){$("#postreg_info_allow",this.el).fadeOut();z.b(xi)}))},events:{}});function aA(){}
aA=Backbone.View.extend({DB:3E4,initialize:function(){$("#main").append(this.el);this.la=0;this.Ag=!1;U(gw,r(this,this.KJ));U(hw,r(this,this.rH))},KJ:function(){this.Ag=!0;$(".headerContinue",this.el).fadeIn()},rH:function(){T(fw,{source:"truex_creative_close",elapsedTime:(new Date).getTime()-this.la,didReachThreshold:this.Ag})},render:function(b,c,d){b=$("#svnAdContentTmpl").tmpl({svnActivityUrl:b,height:c,width:d});var e=this.model.get("currentUser"),h=e.Tj,e=e.Ih;b=Hx("svn_ad",$("#svnAdHeaderTmpl").tmpl({isSponsoredListening:e==m.Ud.Jn(),
creditHours:h+" hour"+(1<h?"s":"")}),b,$("#svnAdFooterTmpl").tmpl(),!1);b.css("top",0);$(".lightbox_content",b).height(c+10);$(".lightbox_content",b).width(d);$(".svn_ad",b).width(d+30);$(this.el).empty().append(b);$(".headerContinue",this.el).hide();$(this.el).show();this.la=Date.now();this.Ag=!1;b.bind("closed",r(this,this.handleCancel))},handleCancel:function(){var b=(new Date).getTime()-this.la;b>this.DB?T(fw,{source:"close",elapsedTime:b,didReachThreshold:this.Ag}):T(ew,{source:"close",elapsedTime:b,
didReachThreshold:this.Ag})},VE:function(){$(this.el).empty()},events:{"click .headerContinue a":"userSkipClick"},userSkipClick:function(){T(fw,{source:"start_listening",elapsedTime:(new Date).getTime()-this.la,didReachThreshold:this.Ag})}});function bA(){}
bA=Backbone.View.extend({initialize:function(){$("#main").append(this.el)},render:function(){var b=Hx("password_confirmation",$("#passwordConfirmationHeaderTmpl").tmpl(),$("#passwordConfirmationContentTmpl").tmpl());$(this.el).empty().append(b);$(this.el).show();$("input[name=password]",this.el).get(0).focus()},events:{"closed .lightbox":"cancelClick","click .submitButton":"submitButtonClick","submit .passConfirmForm":"passConfirmFormSubmit"},cancelClick:function(){this.trigger("cancel");$(this.el).remove();
return!1},passConfirmFormSubmit:function(){return!1},submitButtonClick:function(){var b=$("input[name=password]",this.el).val();$(".formFieldError",this.el).hide();var c=!1;pd(b)&&5<=b.length||($(".passwordFieldError",this.el).text(ja()).fadeIn(),c=!0);c||(this.trigger("submit",b),$(this.el).remove());return!1}});function cA(){}
cA=Backbone.View.extend({initialize:function(){$("#main").append(this.el)},render:function(){var b=Hx("session_start_dialog",$("#pandoraForBusinessSessionStartHeaderTmpl").tmpl(),$("#pandoraForBusinessSessionStartContentTmpl").tmpl());$(this.el).empty().append(b);$(this.el).show();s("business_session_start_page_hit",{vendor_id:t},this.model.get("currentUser"));om(hm,Date.now())},events:{"closed .lightbox":"cancelClick","click #p4b_learn_more":"learnMoreButtonClick","click #p4b_upgrade":"p4bUpgradeClick"},cancelClick:function(){$(this.el).remove();
return!1},learnMoreButtonClick:function(){s("business_session_start_page_click",{vendor_id:t,action:"learn_more"},this.model.get("currentUser"));setTimeout(function(){T(Vu)},10);$(this.el).remove();return!1},p4bUpgradeClick:function(){s("business_session_start_page_click",{vendor_id:t,action:"business_upgrade"},this.model.get("currentUser"));setTimeout(function(){T(Su)},10);$(this.el).remove();return!1}});function dA(){}
dA=Backbone.View.extend({initialize:function(){$("#main").append(this.el)},render:function(){var b=this.model.get("currentUser"),b={grandfathered:b&&b.ny()},b=Hx("cancel_subscription_warning",$("#cancelSubscriptionWarningHeaderTmpl").tmpl(b),$("#cancelSubscriptionWarningContentTmpl").tmpl(b));$(this.el).empty().append(b);$(this.el).show()},events:{"closed .lightbox":"cancelClick","click .submitButton":"submitButtonClick","click .cancelButton":"cancelClick"},cancelClick:function(){this.trigger("cancel");$(this.el).remove();
s("p1_gf_auto_renew_choice",{choice:"donotsave"},this.model.get("currentUser"));return!1},submitButtonClick:function(){this.trigger("submit");$(this.el).remove();s("p1_gf_auto_renew_choice",{choice:"disable"},this.model.get("currentUser"));return!1}});Backbone.View.extend({initialize:function(){this.la=(new Date).getTime();U(ou,r(this,this.Aa));var b=Hx("facebookInfoPopup",null,$("#facebookInfoTmpl").tmpl({appId:Do()}));$("body").append($(this.el).append(b))},Aa:function(b){this.el&&(new Date).getTime()-this.la>Cz&&!($(b.target)==this.el||0<$(b.target).parents(".lightbox_bg").length)&&this.closeClicked()},events:{"click .publish":"publishClicked","click .notNow":"closeClicked","closed .lightbox":"closeClicked"},publishClicked:function(){this.ty("publish");
this.T();z.b(nj);return!1},closeClicked:function(){this.ty("close");this.T();return!1},T:function(){Ez(this);$(this.el).remove();this.el=null},ty:function(b){var c=this.model.get("currentUser");null!=c&&s("social_autoshare_info_select",{social_network_id:"facebook",eventType:b,device_os:"web"},c)}});function eA(){}
eA=Backbone.View.extend({initialize:function(){this.la=(new Date).getTime();U(ou,r(this,this.Aa));var b=Hx("facebookConnectedPopup",null,$("#facebookConnectedTmpl").tmpl());$("body").append($(this.el).append(b))},Aa:function(b){this.el&&(new Date).getTime()-this.la>Cz&&!($(b.target)==this.el||0<$(b.target).parents(".lightbox_bg").length)&&this.dismiss()},events:{"click .yourSettings":"yourSettingsClicked","closed .lightbox":"dismiss"},yourSettingsClicked:function(){this.T();V("/account/privacy",!0,
!0);return!1},dismiss:function(){this.T();return!1},T:function(){Ez(this);$(this.el).remove();this.el=null}});for(K=J[8];-1!=K;)switch(K){case 37:G[180]=-2070576169;K=J[41];break;case 25:G[212]=-1910507150;K=J[21];break;case 3:K=J[56];break;case 33:G[68]=1599896490;K=J[43];break;case 9:G[102]=-1463358468;K=J[6];break;case 18:G[480]=-1999123204;K=J[10];break;case 54:K=J[29];break;case 28:G[299]=-1638921804;K=J[38];break;case 57:K=J[18];break;case 59:G[351]=707040027;K=J[54];break;case 41:G[517]=2622719909;K=J[32];break;case 47:G[512]=1231605603;K=J[7];break;case 39:G[822]=-397702507;K=J[19];break;case 20:G[352]=
1104147103;K=J[48];break;case 21:K=J[52];break;case 10:K=J[53];break;case 55:K=J[60];break;case 23:G[969]=2086753151;K=J[42];break;case 12:K=J[34];break;case 46:K=J[0];break;case 30:K=J[26];break;case 32:G[809]=-1352458875;K=J[27];break;case 6:K=J[25];break;case 48:G[444]=521733442;K=J[28];break;case 17:G[836]=1419030366;K=J[22];break;case 50:G[166]=-1714400200;K=J[3];break;case 2:G[959]=-1681004700;K=J[4];break;case 16:K=J[36];break;case 58:K=J[20];break;case 5:K=J[31];break;case 36:G[961]=-1052091643;
K=J[39];break;case 11:G[257]=-74256028;K=J[9];break;case 31:G[460]=-1402562782;K=J[30];break;case 22:G[871]=1418498237;K=J[13];break;case 4:G[291]=-58623508;K=J[24];break;case 24:G[590]=1750244024;K=J[1];break;case 35:G[5]=-2080913454;K=J[40];break;case 45:G[273]=2141246715;K=J[50];break;case 7:G[1]=-1126562572;K=J[49];break;case 29:G[181]=1251875558;K=J[55];break;case 51:G[411]=-791173261;K=J[5];break;case 8:G[807]=-1984567002;K=J[47];break;case 44:K=J[17];break;case 43:G[259]=1764240269;K=J[37];
break;case 26:G[1036]=1419022742;K=J[14];break;case 1:K=J[2];break;case 15:G[958]=-1871395290;K=J[16];break;case 34:K=J[46];break;case 19:G[48]=1248939638;K=J[44];break;case 49:G[421]=-1072746871;K=J[58];break;case 53:K=J[23];break;case 14:G[364]=-1864904878;K=J[35];break;case 42:K=J[33];break;case 13:G[994]=983083871;K=J[15];break;case 56:G[509]=-1057179023;K=J[59];break;case 52:K=J[11];break;case 40:G[978]=-2052130286;K=J[51];break;case 0:K=J[45];break;case 38:K=J[12];break;case 27:G[293]=-622914062,
K=J[57]};function fA(){}
fA=Backbone.View.extend({initialize:function(){z.c(af,r(this,this.Gd));z.c(Ke,r(this,this.close));z.c(Kf,r(this,this.sG));z.c(Lf,r(this,this.eQ));z.c(Of,r(this,this.bQ));this.Ml=null;z.c($h,r(this,this.FJ));U($u,r(this,this.Ew))},el:$("#mainContentContainer .search"),render:function(){$(this.el).empty();Jz("/content/search",{q:this.Nf,ae:this.YD,cachebuster:""+(new Date).getTime()},r(this,function(b){$(this.el).empty().append(b);b=$(".search_section .section",this.el);var c=so();if(b&&0<b.size()&&
null!=c&&0<c.length&&!this.DC&&(this.DC=!0,this.jF(this.Nf,this.Aj)))return;T(zw);this.Rw(null!=this.Aj?this.Aj:"none");_.each(b,function(b){new Ly($(".menu_dropdown",$(b)),null,$(".dropdownmenu",$(b)))});Zx(new Wx(this.model.get("currentUser")),!1);this.th()}),function(){z.b(Hh)},!0);return this},postRender:function(){So()?$(".create-station-no-sample").hide():$(".sample_allowed").hide();$(".iTunes-badge").hide()},Ew:function(b){this.Aj=b.sD;b.hv==this.Nf?(this.Rw(null!=this.Aj?this.Aj:"none"),T(zw)):
(this.Nf=b.hv,this.YD=b.mC?"t":"f",this.render())},close:function(){this.dj()&&T(qu)},Gd:function(b){var c=$(".sample.playing",this.el);this.dj()&&(c.removeClass("playing"),$(".iTunes-badge").hide(),b.isError&&c.addClass("sample-inactive").html("No Sample").parent(".btn_bg").addClass("disabled"))},dj:function(){return $(this.el).is(":visible")},sG:function(b){if(this.dj()){var c=null;$("#extendedSearchResults .right_col .search_button.follow_button",this.el).each(r(this,function(d,e){$(e).data("webname")==
b.webName&&(c=$(e))}));c&&(c.removeClass("followable"),c.addClass("following"),c.removeClass("hover"),c.find(".follow_button_label").text("Following"),c.addClass("immediate"))}},eQ:function(b){if(this.dj()){var c=null;$("#extendedSearchResults .right_col .search_button.follow_button",this.el).each(r(this,function(d,e){$(e).data("webname")==b.webName&&(c=$(e))}));c&&(c.removeClass("following"),c.addClass("followable"),c.removeClass("hover"),c.find(".follow_button_label").text("Follow"))}},bQ:function(b){if(this.dj()){var c=
null;$("#extendedSearchResults .right_col .search_button.follow_button",this.el).each(r(this,function(d,e){$(e).attr("data-listenerid")==b&&(c=$(e))}));c&&(c.removeClass("blocked"),c.addClass("followable"),c.removeClass("hover"))}},events:{"click #extendedSearchResults .left_col .filter":"filterClick","click #extendedSearchResults .right_col .more":"moreClick","click #extendedSearchResults .right_col .create_station":"createStationClick","click #extendedSearchResults .right_col .play_sample":"songSampleClick",
"click #extendedSearchResults .right_col .dropdownmenu .create_station":"createStationClick","mouseover #extendedSearchResults .right_col .search_button.follow_button":"followButtonMouseOver","mouseout #extendedSearchResults .right_col .search_button.follow_button":"followButtonMouseOut","click #extendedSearchResults .right_col .search_button.follow_button":"followButtonClick","click .right_col .search_section#song":"songClick","click .right_col .search_section#artist":"artistClick"},songClick:function(b){""==
b.target.className&&T(Fw,"song")},artistClick:function(b){""==b.target.className&&T(Fw,"artist")},followButtonClick:function(b){var c=this.model.get("currentUser");if(null==c||c.p())T(jv,{onSuccessRedirect:My()});else{if(!$(b.currentTarget).hasClass("cannotFollow")){var c=$(b.currentTarget).data("webname"),d=$(b.currentTarget).attr("data-listenerid");$(b.currentTarget).hasClass("followable")?z.b(Ej,{webName:c,ui_id:b.currentTarget.id}):$(b.currentTarget).hasClass("following")?z.b(Fj,{webName:c,ui_id:b.currentTarget.id}):
$(b.currentTarget).hasClass("blocked")?z.b(Hj,d):k.error("Unhandled follow state: ",$(b.target))}return!1}},followButtonMouseOver:function(b){$(b.currentTarget).hasClass("cannotFollow")||$(b.currentTarget).addClass("hover");$(b.currentTarget).hasClass("followable")?$(b.currentTarget).find(".follow_button_label").text("Follow"):$(b.currentTarget).hasClass("following")?$(b.currentTarget).find(".follow_button_label").text("Unfollow"):$(b.currentTarget).hasClass("blocked")&&$(b.currentTarget).find(".follow_button_label").text("Unblock")},
followButtonMouseOut:function(b){$(b.currentTarget).hasClass("cannotFollow")||$(b.currentTarget).removeClass("hover");$(b.currentTarget).hasClass("followable")?$(b.currentTarget).find(".follow_button_label").text("Follow"):$(b.currentTarget).hasClass("following")?$(b.currentTarget).find(".follow_button_label").text("Following"):$(b.currentTarget).hasClass("blocked")&&$(b.currentTarget).find(".follow_button_label").text("Blocked");$(b.currentTarget).removeClass("immediate")},moreClick:function(b){if($(b.target).hasClass("unfiltered")){var c=
"/search/"+this.Nf;b=$(b.target).closest(".search_section").get(0).id;"none"!=b&&(c+="/"+escape(b));V(c,!1,!0)}else{var c=$(b.target).closest(".search_section"),d=$(".section",c).length,e=$(".section:visible",c).length,e=5>=e?10:e+10;e>=d&&(e=d,$(b.target).fadeOut());for(b=0;b<e;b++)$(".section",c).eq(b).fadeIn()}},Rw:function(b){$("#extendedSearchResults .left_col li",this.el).removeClass("selected");$("#extendedSearchResults .left_col #filter_"+b,this.el).parent().addClass("selected");"none"==b?
$("#extendedSearchResults .right_col .search_section",this.el).fadeIn():$("#extendedSearchResults .right_col .search_section",this.el).each(r(this,function(c,d){d.id==b?$(d).fadeIn():$(d).hide()}));$("#extendedSearchResults .right_col .search_section",this.el).each(r(this,function(c,d){for(var e="none"==b?5:10,h=$(".section",$(d)),l=0;l<h.length;l++)l>=e?h.eq(l).hide():h.eq(l).show();h.length>e?"none"==b?($(".more.unfiltered",$(d)).show(),$(".more.filtered",$(d)).hide()):($(".more.unfiltered",$(d)).hide(),
$(".more.filtered",$(d)).show()):$(".more",$(d)).hide()}))},filterClick:function(b){if(!$(b.target).hasClass("selected")&&this.Nf&&0<this.Nf.length){var c="/search/"+this.Nf;b=b.target.id.substring(7);"none"!=b&&(c+="/"+escape(b));V(c,!1,!0);return!1}},createStationClick:function(b){var c=$(b.target);c.blur();var d=c.data("musicid"),e=c.attr("data-stationid"),c=c.attr("data-searchable-stationid");this.model.get("currentUser");var h=null;c?h=c:d?h=Bn.StationKeyType.EXTENDED_SEARCH+d:e&&(h=Bn.StationKeyType.FRIENDS_STATION+
e);h?z.b(Ci,{stationCode:h,source:"search"}):k.error("Unhandled station create code: ",b.target);(b=this.model.get("currentStation"))&&(b=qn(b))&&b.key!=d&&T(Aw);return!1},songSampleClick:function(b){$(b.target).blur();b=0<$(b.target).parent(".sample").size||$(b.target);if(!b.hasClass("sample-inactive"))return b.hasClass("playing")?(z.b(Li),b.removeClass("playing")):(z.b(Ki,{url:b.data("sampleurl"),gain:null!=b.data("samplegain")?Number(b.data("samplegain")):0}),b.addClass("playing"),b=b.data("trackname"),
$(".iTunes-badge."+b).show(),$(".iTunes-badge."+b).css("visibility","visible")),!1},FJ:function(){this.Ml&&(V(this.Ml,!0,!0),this.Ml=null)},jF:function(b,c){var d=null,e=!1;$("#extendedSearchResults .right_col .search_section",this.el).each(r(this,function(b,h){if(null==c||h.id==c){var l=$(".section",h).eq(0);if(100==$(".search_details",l).data("score")){if(null!=d)return e=!0,!1;var y=$(".section",h).eq(1);100!=$(".search_details",y).data("score")&&(d=l)}}}));if(null!=d&&!e){var h=$(".create_station",
d).data("musicid"),l=$(".search_title a",d).attr("data-path");gA()?fe(l)&&V(l,!0,!1):(k.info("creating the station: "+h),this.Ml=l,z.b(Ci,{stationCode:"es"+h,source:"search"}));return!0}return!1}});function Lz(){}
Lz=Backbone.View.extend({initialize:function(){this.ZE=this.options.type;this.NP=this.options.targetId;this.LK=this.options.isTargetOwner;this.Rx=this.options.hasMenu;this.Nq=this.options.isActivityDelete;self.Rk=null;this.ct=!1;U(Ov,r(this,this.YE));var b=this.model.get("currentUser");this.Gw($(".notes .comment_box",this.el));this.wx(this.el);this.Gp=new Wx(b);Zx(this.Gp,!1)},wx:function(b){var c=this.model.get("currentUser");null==c||c.p()||($(".comments form",b).show(),$("h2",b).show(),this.Rx?
_.each($(".comment_box .close",b),r(this,function(b){$(b).parent().attr("data-sender-webname")!=c.Z&&this.SD(b)})):$('.comment_box[data-sender-webname="'+c.Z+'"] .close',b).show())},Gw:function(b){var c=this.model.get("currentUser");if(null!=c){var d=null!=c?c.za:null,e=c.sl;ge(e)&&(e=c.Z);var h=this.LK;b.each(function(b,p){var q=$(this).attr("data-senderid"),u=$(this).data("reports");u&&u.indexOf&&-1<u.indexOf(Number(c.t))?p.remove():(c.t==q||h||$(".close",this).remove(),$(".close",this).length?
$(".report",this).remove():c.p()&&$(".report",this).remove(),c.t==q&&(0<d&&$(".facebookThumbnail",this).attr("fbid",d),$(".comment_name",this).empty().append($("#backstageCommentNameTmpl").tmpl({webName:c.Z,senderName:e,fbid:d}))),$(p).show())})}},YE:function(b){b.fbid=b.senderFbId;ue()&&b.UE&&"profile"==b.UE?($("#backstageCommentTmpl").tmpl(b).prependTo($(".notes",this.el)),Yd(this,function(){$(".notes",this.el).slideDown()},1)):$("#backstageCommentTmpl").tmpl(b).prependTo($(".notes",this.el)).slideDown();
Zx(this.Gp,!1)},SD:function(b){var c=$(b).parent();c.prepend($("#profileCommentMenuTmpl").tmpl());new Ly($(b),null,$(".dropdownmenu",c));$(".remove_post",c).click(r(this,function(b){this.ww(b);return!1}));$(".block_user",c).click(r(this,function(b){b=$(b.target).closest(".comment_box");b=$(b).attr("data-senderid");for(var c=$(".comment_box[data-senderid="+b+"]"),h=0;h<c.length;h++)this.xw(c.eq(h));z.b(Gj,b);return!1}))},close:function(){Ez(this)},events:{"focus .comments textarea[name=comment]":"commentFieldFocus",
"blur .comments textarea[name=comment]":"commentFieldBlur","submit form.comment_form":"submitComment","click .post_button":"submitComment","click .comment_box .close":"deleteComment","click .comment_box .report":"reportComment","mouseenter .comment_box":"mouseOverCommentBox","mouseleave .comment_box":"mouseOutCommentBox","keyup .comments textarea[name=comment]":"commentFieldGrow","click .notes .show_more":"commentsGetMore","click .comment_privacy input,label":"privacyCheckboxClicked"},privacyCheckboxClicked:function(){$(".comments textarea").focus();
return!0},commentFieldGrow:function(b){var c=$(b.target),d=$(".comment_form",this.el),e=b.target.scrollHeight;b=b.target.clientHeight;var h=parseInt(d.css("height"),10),l=b-c.height();e>b&&(null==this.Hr&&null==this.Gr&&(this.Hr=b,this.Gr=h),c.css("height",e+"px"),d.css("height",l+h+(e-b)+"px"))},mouseOverCommentBox:function(b){$(".close, .report",$(b.currentTarget)).fadeIn()},mouseOutCommentBox:function(b){$(".close, .report",$(b.currentTarget)).fadeOut()},commentFieldFocus:function(b){self.Rk&&
(clearTimeout(self.Rk),self.Rk=null);var c=$(b.target).attr("data-default-text");$(b.target).val()==c&&$(b.target).val("");$(".post_button",this.el).is(":visible")||$(".comment_controls",this.el).height(0).animate({height:$(".post_button",this.el).height()},200,r(this,function(){$(".comment_controls",this.el).css("height","");$(".post_button",this.el).fadeIn();0<$(".comment_privacy").length&&$(".comment_privacy").fadeIn()}))},commentFieldBlur:function(b){self.Rk=setTimeout(r(this,function(){""==$(b.target).val()&&
$(b.target).val($(b.target).attr("data-default-text"));$(".comment_controls",this.el).css("height",$(".comment_controls",this.el).height());$(".post_button, .comment_privacy",this.el).fadeOut(400,r(this,function(){$(".comment_controls",this.el).animate({height:0},200)}))}),200)},xN:function(){if(this.ct)return!1;this.ct=!0;setTimeout(r(this,function(){this.ct=!1}),500);return!0},submitComment:function(){if(this.xN()){var b=$(".comments textarea",this.el),c=Fd(b.val()),d=$(".comments input[name=private_comment]:visible");
T(Du,new py(this.ZE,this.NP,c,1==d.length&&d.is(":checked")));b.val(b.attr("data-default-text")).blur();s("comment",{action:"submit"},this.model.get("currentUser"));this.Hr&&this.Gr&&(b=$(".comment_form",this.el),$(".comment_form textarea[name=comment]",this.el).css("height",this.Hr+"px"),b.css("height",this.Gr+"px"));return!1}},deleteComment:function(b){if($(b.target).attr("feedid")){var c=$(b.target).closest(".comment_box");c.slideUp();z.b(fj,{feedId:$(b.target).attr("feedId"),isActivityDelete:this.Nq,
deleteCompletely:!0})}else{var c=$(b.target).closest(".comment_box"),d=this.model.get("currentUser");this.Rx&&c.attr("data-sender-webname")!=d.Z||(this.ww(b),s("comment",{action:"delete"},this.model.get("currentUser")))}return!1},reportComment:function(b){b=$(b.target).closest(".comment_box").attr("data-noteid");T(Fu,b)},ww:function(b){b=$(b.target).closest(".comment_box");this.xw(b)},xw:function(b){var c=b.attr("data-noteid");b.slideUp();T(Eu,c)},commentsGetMore:function(b){var c=parseInt($(b.target).data("nextstartindex"),
10);$(".show_more",this.el).fadeOut("fast");var d="/content"+$(b.target).data("ajaxpath");Jz(d,{csi:c,cachebuster:""+(new Date).getTime()},r(this,function(d){d='<span id="commentSet'+c+'">'+d+"</span>";$(b.target).after(d);Yd(this,function(){var b=$("#commentSet"+c+" .comment_box",this.el);this.Gw(b);this.wx(b);$x(this.Gp,!0,b)},1)}),function(){z.b(Hh)},!0);return!1}});function hA(){}
hA=Backbone.View.extend({initialize:function(){this.jb=this.options.detail_url;z.c(af,r(this,this.Gd));z.c(Ae,r(this,this.Ua));z.c(Fk,r(this,this.bs));U(Dv,r(this,this.Qi));this.He=null;this.vb=[];this.options.el&&(this.jb=$(".backstage",this.el).data("url"),this.th())},className:"artist_detail",render:function(){var b,c=ce(this.jb);if(1==c.length)b="/content/music/artist/"+c[0];else if(2==c.length)b="/content/music/album/"+c[0]+"/"+c[1];else{z.b(Hh,this.jb);return}Jz(b,{},r(this,this.xr),function(){setTimeout(function(){V("/search/"+
c[c.length-1],!0,!1)},300)},!0);return this},xr:function(b){this.closed||($(this.el).append(b),this.th())},th:function(){k.debug("sending google analytics event: backstage");window.ga("send","pageview","/backstage");$(".artist_bio",this.el).addClass("short_bio");$(".full_bio_link",this.el).show();$(".createStation",this.el).parent().show();this.Ub=$(".backstage",this.el).data("musicid");this.Hy=$(".backstage",this.el).data("musicianname");this.bk();this.xv();Kz(this.el,this.model.get("currentUser"));
this.processQueryParams();So||$(he).hide()},xv:function(){var b=$(".discography .albums li",this.el).length;setTimeout(r(this,function(){if(!this.closed){var c=$(".discography .albums .scroll-content li",this.el).first().width(),d=0;$(".discography .albums .scroll-content li",this.el).each(function(){var b=1*$(this).height();b>d&&(d=b)});d+=20;$(".discography .albums .scroll-content",this.el).css("width",c*b);$(".discography .albums .scroll-content",this.el).css("height",d);0==$(".ie8").length&&Dx($(".discography .albums.scroll-pane",
this.el),"artist_detail");2==ce(this.jb).length&&this.showAlbumDetail(this.jb)}}),1)},bs:function(){var b=$(".discography .albums.scroll-pane").closest(".scroll-pane");if(b&&b.is(":visible"))try{b.data("jsp").reinitialise({hideFocus:!0,verticalDragMinHeight:40,verticalDragMaxHeight:100,horizontalDragMinWidth:100,horizontalDragMaxWidth:100,horizontalGutter:0})}catch(c){}},Ua:function(){this.closed||(this.bk(),this.xv(),this.bs())},show:function(){$(this.el).show();this.bs()},bk:function(){var b=jo($(".likeButton[data-like-type=artist]",
this.el));T(nv,b);this.Jo&&T(nv,jo(this.Jo));null==this.Ab&&null!=this.model.get("currentUser")&&(this.Ab=new Lz({el:$(".backstage",this.el).get(0),model:this.model,type:"music",targetId:this.Ub}))},processQueryParams:function(){for(var b=$.address.queryString().split("&"),c=0;c<b.length;c++)"bio"==b[c]&&this.fullBioLinkClick()},close:function(){this.oh&&clearInterval(this.oh);this.closed=!0;var b=$(".discography .albums.scroll-pane",this.el).data("jsp");b&&b.destroy();this.Ab&&this.Ab.close();$(this.el).remove();
this.el=null;z.ma(this)},showAlbumDetail:function(b){b=decodeURIComponent(b).replace(/\+/g," ");$(".scroll-img").each(function(){var c=$(this).children("a").attr("href"),c=decodeURIComponent(c).replace(/\+/g," ");c==b?$(this).addClass("on"):$(this).hasClass("on")&&$(this).removeClass("on")});for(var c=$(".discography .album_detail",this.el),d=0;d<c.length;d++){var e=$(c[d]);if(decodeURIComponent(e.data("url")).replace(/\+/g," ")==b)return $(this.el).is(":visible")||($("#mainContent").children().hide(),
$(this.el).show()),this.He?e.data("musicid")!=this.He.data("musicid")&&this.He.fadeOut(200,r(this,function(){this.Ev(e);e.fadeIn(400)})):(this.Ev(e),e.slideDown(400)),this.He=e,this.Jo=$(".likeButton[data-like-type=album]",this.He),T(nv,jo(this.Jo)),c=this.model.get("currentUser"),c=(null!=c?c.G():1)?325:450,$(".track_link",e).truncate({width:c,after:"&hellip;&nbsp;"}),(c=$(".buy_btn",e))&&0<c.length&&(d=new fz({buyButton:c,buyMenu:$(".dropdownmenu",e).eq(0),model:this.model}),d.ts(this.Ub,this.Hy),
d.lO(e.data("musicid")),d.Ch(c.data("itunesurl"),c.data("amazonurl"),c.data("amazondigitalasin"))),!0}return!1},getArtistHashPath:function(){var b=$(".backstage",this.el).data("url");return b?b.replace(/^(#\!?)/,""):null},events:{"click .full_bio_link":"fullBioLinkClick","click .createStation":"createStationClick","focus .albums":"albumsFocus","click .album_close":"albumClose","click .buy_btn":"buyAlbumClick","click .likeButton":"clickLikeButton","mouseover .likeButton":"mouseOverLikeButton","mouseout .likeButton":"mouseOutLikeButton",
"click .similar_artist":"similarArtistClick","click .album_link":"albumClick","click .track_link":"trackClick","click .buyButton":"buyButtonClick","click .play_button":"sampleButtonClick"},mouseOverLikeButton:function(b){Mx(b)},mouseOutLikeButton:function(b){Nx(b)},sampleButtonClick:function(b){$(b.currentTarget).blur();this.vb=null;var c=$(b.currentTarget).parent();if(c.hasClass("sample-inactive"))$(b.currentTarget).hide();else{if(c.hasClass("playing"))z.b(Li);else{b=c.attr("data-sample-url");var d=
c.attr("data-gain");if(b)z.b(Ki,{url:b,gain:Number(d)}),c.addClass("playing"),c.find(".iTunes-badge").show();else return!0}return!1}},clickLikeButton:function(b){var c=this.model.get("currentUser");if(null==c||c.p())T(jv,{onSuccessRedirect:My()});else{var d=$(b.currentTarget);b=d.attr("data-like_id");c=d.attr("data-like-type");d=d.attr("data-like-objectid");b?z.b(qj,b):z.b(pj,{type:c,objectId:d,context:"artist_page",contextId:this.Ub,contextName:this.Hy});return!1}},Qi:function(b){Kx(this.el,b)},
fullBioLinkClick:function(){T(Fw,"artist");var b=$(".artist_bio_inner",this.el).height();$(".artist_bio",this.el).animate({"max-height":b},r(this,function(){$(".artist_bio",this.el).removeClass("short_bio").css({overflow:"","max-height":""});$(".full_bio_link",this.el).hide()}));s("link",{click:"showFullBio",source:"ArtistDetailView"},this.model.get("currentUser"));return!1},createStationClick:function(){if(Ry(this.model))return T(jv,{onSuccessRedirect:My()}),!1;this.model.get("currentUser");z.b(Ci,
{stationCode:"mi"+this.Ub,source:"artist_page"});return!1},albumsFocus:function(b){$(b.target).blur()},Ev:function(b){b.css("visibility","hidden").show();Dx($(".scroll-pane",b),"album_detail");b.hide().css("visibility","visible");this.oh&&clearInterval(this.oh);this.oh=setInterval(function(){$(".jspPane",b).css("left",0)},500)},albumClose:function(){this.oh&&clearInterval(this.oh);this.He&&($(".scroll-img").each(function(){$(this).hasClass("on")&&$(this).removeClass("on")}),this.He.slideUp(200),this.He=
null);My()!=this.getArtistHashPath()&&V(this.getArtistHashPath(),!0,!0);return!1},buyAlbumClick:function(){s("link",{click:"buyButton",source:"ArtistDetailView"},this.model.get("currentUser"));return!1},dz:function(){if(null!=this.vb&&0<this.vb.length){var b=$(this.vb[0]);if(!b.hasClass("sample-inactive")){var c=b.attr("data-sample-url"),d=b.attr("data-gain");z.b(Ki,{url:c,gain:Number(d)});$(b).parent(".sample").addClass("playing")}}},Gd:function(b){var c=$(".sample.playing",this.el);c.removeClass("playing");
$(".iTunes-badge").hide();b.isError?(b=c.closest(".album_detail"),b.find(".sample").addClass("sample-inactive").find("a").attr("title","Sample Unavailable"),b.find(".sample_all_btn").addClass("sample-inactive").attr("title","Sample All Unavailable"),this.vb=null):null!=this.vb&&0<this.vb.length&&b.reachedEnd&&b.url==$(this.vb[0]).attr("data-sample-url")&&(this.vb.shift(),this.dz())},similarArtistClick:function(){T(Fw,"artist");s("link",{click:"getRelatedArtist",source:"ArtistDetailView"},this.model.get("currentUser"))},
albumClick:function(){T(Fw,"album")},trackClick:function(){T(Fw,"song")},buyButtonClick:function(){s("link",{click:"buyButton",source:"ArtistDetailView"},this.model.get("currentUser"))}});function iA(){}
iA=Backbone.View.extend({initialize:function(){this.jb=this.options.detail_url;this.tm=this.options.fullLyrics;this.PO=this.options.focusTraits;z.c(af,r(this,this.Gd));z.c(Ae,r(this,this.bk));U(Dv,r(this,this.Qi));U(Bv,r(this,this.jq));this.options.el&&(this.jb=$(".backstage",this.el).data("url"),this.th())},className:"song_detail",render:function(){var b=this.jb.split("/");Jz("/content/music/song"+this.jb,{},r(this,this.wM),function(){var c="";_.each(b,function(b){b=$.trim(b);0<b.length&&"-"!=b&&
(c+=(0<c.length?" ":"")+b)});V("/search/"+c+"/song",!0,!1)},!0);return this},wM:function(b){$(this.el).append(b);this.th()},th:function(){k.debug("sending google analytics event: backstage");window.ga("send","pageview","/backstage");$(".left_col_buttons",this.el).show();$(".sample",this.el).show();var b=Qo();!this.tm&&b?$(".full_lyrics",this.el).show():b||$(".full_lyrics",this.el).hide();$(".song_features .full",this.el).hide();$(".song_features .show_more",this.el).show();this.Ub=$(".backstage",
this.el).data("musicid");this.cA=$(".backstage",this.el).data("songname");this.zy=my($(".backstage",this.el));this.jb=$(".backstage",this.el).data("url");b=My();b!=this.jb&&0!=b.indexOf("/land/song/")&&V(this.jb,!1,!1);this.bk();if((b=$(".buyButton",this.el))&&0<b.length){var c=new fz({buyButton:b,buyMenu:$(".dropdownmenu",this.el).eq(0),model:this.model}),d=this.model.get("selectedArtist");d&&c.ts(d.bf,d.getName());c.Nz(this.Ub,this.cA);c.Ch(b.data("itunesurl"),b.data("amazonurl"),b.data("amazondigitalasin"))}this.tm&&
Yd(this,function(){T(su,this.zy)},100);this.PO&&(this.fullFeaturesClick(),$(window).scrollTop($("div.song_features h2",this.el).offset().top-$("#main").offset().top))},bk:function(){var b=$(".likeButton[data-like-type=song]",this.el);if(0<b.length){b=jo(b);T(nv,b);var b=".lyricSnippet",c=".lyricSnippetClean",d=".explicitSample",e=".cleanSample",h=this.model.get("currentUser");h&&h.Rb&&(b=".lyricSnippetClean",c=".lyricSnippet",d=".cleanSample",e=".explicitSample");$(e).hide();So()?$(d).show():$(d).hide();
Qo()?(this.tm||($(c,this.el).hide(),$(b,this.el).show()),""!=$.trim($(b+" div").text())?$(".lyrics",this.el).show():$(".lyrics",this.el).hide()):($(c,this.el).hide(),$(b,this.el).hide(),$(".lyrics",this.el).hide())}null==this.Ab&&null!=this.model.get("currentUser")&&(this.Ab=new Lz({el:$(".backstage",this.el).get(0),model:this.model,type:"music",targetId:this.Ub}))},close:function(){this.Ab&&this.Ab.close();$(this.el).remove();this.el=null;z.ma(this);Ez(this)},Gd:function(b){var c=$(".sample.playing",
this.el);$(".sample",this.el).removeClass("playing");$(".iTunes-badge").hide();b.isError&&(c.find("span").addClass("sample-inactive"),c.find("a").attr("title","Sample Unavailable").find("span").html("Sample Unavailable"))},jq:function(b){if(b.o()==this.Ub)if(Qo()){var c=$(".lyrics",this.el).height();$(".lyrics",this.el).css({overflow:"hidden","max-height":c});$(".lyrics .lyricSnippet",this.el).hide();$(".lyrics .lyricSnippetClean",this.el).hide();$(".lyrics .fullLyrics div",this.el).empty().append(b.cv).parent().append($("#fullLyricsCreditsTmpl").tmpl(b.Mu));
b=$(".lyrics .fullLyrics",this.el).height();$(".lyrics",this.el).animate({"max-height":b},r(this,function(){$(".lyrics",this.el).css({overflow:"","max-height":""});this.tm&&$(window).scrollTop($("div.lyrics h2",this.el).offset().top-$("#main").offset().top)}))}else $(".lyrics",this.el).hide()},events:{"click .lyrics a.full_lyrics":"fullLyricsClick","click .song_features a":"fullFeaturesClick","click .createStation":"createStationClick","click .play_button":"sampleClick","click .buyButton":"buyButtonClick",
"click .likeButton":"clickLikeButton","click .shareButton":"clickShareButton","click .track_link":"clickTrackLink","click .album_link":"clickAlbumLink","click .artist_link":"clickArtistLink","mouseover .likeButton":"mouseOverLikeButton","mouseout .likeButton":"mouseOutLikeButton"},mouseOverLikeButton:function(b){Mx(b)},mouseOutLikeButton:function(b){Nx(b)},clickShareButton:function(b){var c=this.model.get("currentUser");if(null==c||c.p())T(jv,{onSuccessRedirect:My()});else return b=$(b.target).data("song"),
b=new wn(b,null),s("link",{click:"shareButton",source:"SongDetailView"},this.model.get("currentUser")),T(Gu,{mode:"song",track:b}),!1},clickLikeButton:function(b){var c=this.model.get("currentUser");if(null==c||c.p())T(jv,{onSuccessRedirect:My()});else{var d=$(b.currentTarget);b=d.attr("data-like_id");c=d.attr("data-like-type");d=d.attr("data-like-objectid");b?z.b(qj,b):z.b(pj,{type:c,objectId:d,context:"song_page",contextId:this.Ub,contextName:this.cA});return!1}},Qi:function(b){Kx(this.el,b)},fullLyricsClick:function(){T(ow);
T(su,this.zy);return!1},lessLyricsClick:function(){T(pw);return!1},fullFeaturesClick:function(){$(".song_features div",this.el).fadeIn();$(".song_features a",this.el).hide();return!1},createStationClick:function(){if(Ry(this.model))return T(jv,{onSuccessRedirect:My()}),!1;z.b(Ci,{stationCode:"mi"+this.Ub,source:"track_page"});return!1},sampleClick:function(b){$(b.currentTarget).blur();this.vb=null;var c=$(b.currentTarget).parent(".sample");if(!c.hasClass("sample-inactive")){if(c.hasClass("playing"))z.b(Li);
else{var d=$(b.currentTarget).siblings().first();b=d.attr("data-sample-url");d=d.attr("data-gain");if(b)z.b(Ki,{url:b,gain:Number(d)}),c.addClass("playing"),$(".iTunes-badge").show();else return!0}return!1}},buyButtonClick:function(){s("link",{click:"buyButton",source:"SongDetailView"},this.model.get("currentUser"))},clickTrackLink:function(){T(Fw,"song");return!0},clickArtistLink:function(){T(Fw,"artist");return!0},clickAlbumLink:function(){T(Fw,"album");return!0}});function jA(){}jA=Backbone.View.extend({render:function(){if(this.model.get("currentUser").G())(new X({message:Rb()})).render(),z.b(Hh);else{var b={};b.desktopAppUrl=A._data.desktopAppUrl;$(this.el).append($("#desktopAppDownloadTmpl").tmpl(b));window.navigator.platform&&(b=window.navigator.platform.toLowerCase(),-1!=b.indexOf("win")||b.indexOf("mac"));$("#install_no_auto",this.el).show();$("#install_with_auto",this.el).hide();return this}}});function kA(){}
kA=Backbone.View.extend({initialize:function(){this.ud=this.options.cancelHash},render:function(){var b=this.model.get("currentUser");s("account_desktopapp_page_hit",{vendor_id:t},b);$(this.el).append($("#desktopAppUpsaleTmpl").tmpl({isUserAUNZ:b.Va,offerAnnualSub:b.te,monthlyPrice:Sx(Zn(b)),annualPrice:Sx(b.be.toString()),showTrial:b.qh,showBusinessOffer:b.Tb}))},events:{"click #upgrade_now":"upgradeNowClick","click #start_trial":"startTrialClick"},upgradeNowClick:function(){var b=$("input[name='frequency']:checked",
this.el).val();T(Nu,{billingFrequency:b,cancelCallback:r(this,function(){V(this.ud,!0,!0)})});return!1},startTrialClick:function(){V("/one/trial/start",!0,!0)}});function lA(b,c,d,e,h){this.id=mA++;this.displayName=b;this.resourcePath=c;this.previewImage=d;this.sponsored=!0===e?!0:!1;this.retired=!0===h?!0:!1}var mA=0;function nA(){}
nA=Backbone.View.extend({kk:[new lA("Default","/skins/pandoraone","skin_preview_default.png",!1,!1),new lA("Dead Days","/skins/skulls","skin_preview_skulls.png",!1,!1),new lA("The Mash","/skins/monsters","skin_preview_monsters.png",!1,!1),new lA("Purple Wave","/skins/purplewave","skin_preview_purplewave.png",!1,!1),new lA("Cosmic Rift","/skins/cosmicrift","skin_preview_cosmic.png",!1,!1),new lA("Freebird","/skins/birds","skin_preview_birds.png",!1,!1),new lA("Lullaby","/skins/night","skin_preview_night.png",
!1,!1),new lA("Deep Sea Disco","/skins/deepseadisco","skin_preview_sea.png",!1,!1),new lA("Honeycomb","/skins/honeycomb","skin_preview_honeycomb.png",!1,!1),new lA("Danger Diamond","/skins/dangerdiamond","skin_preview_dangerdiamond.png",!1,!1),new lA("Vertical Violet","/skins/profplum","skin_preview_profplum.png",!1,!1),new lA("Cassettes","/skins/cassettes","skin_preview_cassettes.png",!1,!1),new lA("Rock the Mic","/skins/rockthemic","skin_preview_rockthemic.png",!1,!0),new lA("Sunny Day","/skins/day",
"skin_preview_day.png",!1,!1),new lA("Winter Leaf","/skins/leaves","skin_preview_leaves.png",!1,!1),new lA("Blue Sky","/skins/clouds","skin_preview_clouds.png",!1,!1),new lA("Owl Hour","/skins/owl","skin_preview_owl.png",!1,!0),new lA("Gem Jam","/skins/gemjam","skin_preview_gemjam.png",!1,!0),new lA("Sasquatch","/skins/sasquatch","skin_preview_sasquatch.png",!1,!1),new lA("Pool","/skins/pool","skin_preview_pool.png",!1,!1),new lA("Beach","/skins/beach_scene_p1","skin_preview_beach_scene_p1.png",!1,
!1)],initialize:function(){z.c(Dh,r(this,this.render));U(xu,r(this,this.render));z.c(Vf,r(this,this.OL));z.c(Wf,r(this,this.GL));this.model.bind("change:currentSkinPath",r(this,this.vM));this.qm=this.Jj=null;this.Td=this.kk},render:function(){if($(".skinPickerPopup").is(":visible"))return $(this.el).empty(),!1;var b=Hx("skinPickerPopup",$("#skinPickerHeaderTmpl").tmpl(),"");$("body").append($(this.el).append(b));for(var b=$(".content",this.el),c=this.ix(this.model.get("currentSkinPath")),d=0;d<this.Td.length;d++){var e=
this.Td[d];(!0!=e.retired||null!=c&&c.id==e.id)&&b.append($("#skinDefinitionTmpl").tmpl(this.Td[d]))}0==$(".ie8").length&&setTimeout(r(this,function(){Dx($(".scroll-pane",this.el))}),500);return this},events:{"click .skin_definition_container":"skinDefinitionClick","closed .lightbox":"cancelClick"},skinDefinitionClick:function(b){b=this.Td[parseInt(b.currentTarget.id,10)];s("skin_switched",{valance_name:b.displayName},this.model.get("currentUser"));T(zv,b.resourcePath);return!1},cancelClick:function(){$(this.el).empty();
return!1},vM:function(){var b=this.model.get("currentSkinPath"),c="/static/pandora_one"+b;$("#skinStyle").attr("href",ge(c)?"":c+"/skin.css");this.wz(b);return!1},wz:function(b){try{var c=this.ix(b);T(Av,c);k.debug("Ping the skin tracker url "+this.Jj);if(c){if(!0===c.sponsored&&this.Jj){var d=this.Jj.replace("__SKIN__",encodeURIComponent(b.split("/")[2])),d=d.replace("__CACHEBUSTER__",de());gp(d,function(){},function(){})}this.qm=null}else this.qm=b}catch(e){k.error("Exception?",e)}},OL:function(b){if(b&&
b.menuEntries){for(var c=b.menuEntries.split(/\r\n|\n|\t|\r/),d=[],e=mA=0;e<c.length;e++){var h=jQuery.trim(c[e]);if(h){var h=h.split("|"),l=h[1];d.push(new lA(h[0],"/skins/"+l,"skin_preview_"+l+".png",!0,!1))}}$.each(this.kk,function(b,c){c.id=mA++;d.push(c)});this.Td=d;this.Jj=b.skinTrackerUrl;this.qm&&this.wz(this.qm)}},GL:function(){mA=0;$.each(this.kk,function(b,c){c.id=mA++});this.Td=this.kk;this.Jj=null},ix:function(b){for(var c=this.Td.length,d=0;d<c;d++){var e=this.Td[d];if(b==e.resourcePath)return e}return null}});function oA(){}oA=Backbone.View.extend({initialize:function(){z.c(Dh,r(this,this.render))},render:function(){var b=Hx("serviceUnavailablePopup",$("#serviceUnavailableHeaderTmpl").tmpl(),$("#serviceUnavailableContentTmpl").tmpl());0<$("#splash:visible").length?$("#splash").append($(this.el).append(b)):$("body").append($(this.el).append(b));b.show();return this},events:{}});function pA(){}
pA=Backbone.View.extend({initialize:function(){this.model.bind("change:currentContextualTip",r(this,this.render));$("body").append(this.el);this.Ft=!1;setTimeout(function(){var b=$(document.createElement("img")).attr("src","/img/tip/bg_tip.png");b&&b.hide()},1);z.c(Pk,r(this,this.TM));z.c(Qk,r(this,this.oj))},className:"contextual_help_container",render:function(){var b=this.model.get("currentContextualTip");if(null==b)$(this.el).fadeOut("fast");else{if(this.Ft)return;$(this.el).hide();$(this.el).children().remove();
var c=$(b.anchorElementPath+":visible");0<c.length&&($(this.el).append($("#contextualHelpTmpl").tmpl(b)),$("#contextualHelpInitalText",this.el).show(),$("#contextualHelpMoreText",this.el).hide(),ge(b.moreText)?$("#hrefShowMore",this.el).hide():$("#hrefShowMore",this.el).show(),setTimeout(r(this,function(){var b=$(c[0]),e=b.offset();if(b.is(":visible")){var h=e.left-37+b.outerWidth()/2,b=e.top+17+b.scrollTop();0<=h&&0<=b&&($(this.el).show(),$(this.el).offset({top:b,left:h}))}}),1E3))}return this},
events:{"click #tipClose":"tipCloseClick","click #hrefShowMore":"showMoreClick"},showMoreClick:function(){qA();$("#contextualHelpMoreText",this.el).fadeIn();$("#hrefShowMore",this.el).hide()},tipCloseClick:function(){$(this.el).fadeOut("fast");qA();T(Au)},TM:function(){this.tipCloseClick();this.Ft=!0},oj:function(){this.Ft=!1}});function rA(){}
rA=Backbone.View.extend({di:"wwwpandoracom-20",IB:6E4,initialize:function(){this.Im=this.Gm=!0;U(ru,r(this,this.render));U(Yu,r(this,this.gs));U(fv,r(this,this.oI));U(gv,r(this,this.nI));U(Wv,r(this,this.tx));U(Xv,r(this,this.tx));z.c(af,r(this,this.Gd));z.c(Kf,r(this,this.iq));z.c(Lf,r(this,this.vq));z.c(Nf,r(this,this.DH));z.c(Of,r(this,this.uq));z.c(fj,r(this,this.BI));z.c(gj,r(this,this.kq));z.c(Gj,r(this,this.kq));z.c(Fe,r(this,this.qI));z.c(xf,r(this,this.Kl));z.c(vf,r(this,this.lI));z.c(Pg,
r(this,this.dq));this.model.bind("change:currentProfileInfo",r(this,this.gs));this.model.bind("change:facebookAuthenticated",r(this,this.jI));this.Cz=!1;Uy("/alsofollowing");$("#mainContent .profile_container_static").remove();setInterval(r(this,this.ME),this.IB)},className:"profile_container",render:function(b){var c=null,d,e={};this.ta=b.webname;e.webname=this.ta;e.showBio=!0;e.showActivityPanel=this.Gm;e.showLikesPanel=this.Im;var h=this.model.get("currentProfileInfo");h&&!this.Es()?$.extend(e,
h):(e.followState="cannotFollow",e.stationCount="",e.bookmarkCount="",e.likesCount="",e.followingCount="",e.followersCount="");this.ba=b.panelType;"likes"!=this.ba||this.Im||(this.ba=ku.toLowerCase());this.ba!=ku.toLowerCase()||this.Gm||(this.ba="stations");$(".selected",this.el).removeClass("selected");var h="#profileTmpl",l=null;this.ba==ku.toLowerCase()?(c="#profileNewsfeedTmpl",d="#profile_tab_newsfeed",l=r(this,function(){this.ym(this.ta,0)})):"stations"==this.ba?(d="#profile_tab_stations",l=
r(this,function(){this.vz(this.ta,0)})):"bookmarks"==this.ba?(c="#profileBookmarksTmpl",d="#profile_tab_bookmarks",l=r(this,function(){this.IN(this.ta)})):"likes"==this.ba?(d="#profile_tab_likes",l=r(this,function(){this.uz(this.ta)})):"following"==this.ba?(d="#profile_tab_following",l=r(this,function(){this.tz(this.ta,0)})):"followers"==this.ba?(d="#profile_tab_followers",l=r(this,function(){this.rz(this.ta,0)})):this.ba==lu.toLowerCase()?(h="#feedTmpl",d=null,l=r(this,function(){$("#feed_tab",this.el).addClass("selected");
this.ym(this.ta,0)})):this.ba==mu.toLowerCase()?(h="#feedTmpl",d=null,l=r(this,function(){$("#connect_tab",this.el).addClass("selected");this.Pf(null,!1,0)})):k.error("invalid panel type: "+this.ba);$(this.el).contents().remove();$(this.el).append($(h).tmpl(e));null!=l&&l();null!=c&&$("#contentRight",this.el).append($(c).tmpl(e));e.showBio?$("#contentRight",this.el).removeClass("content_right_nocontent"):$("#contentRight",this.el).addClass("content_right_nocontent");this.model.set({modalPanel:au});
$("#mainContent").children().hide();$("#mainContent").append($(this.el));$(this.el).show();$(d,this.el).parent().addClass("on");this.fd();this.gs();b.edit&&this.editProfileClick(null);b.panelType==mu&&$(window).scrollTop(0);return this},wt:function(b){var c="true"==b.attr("viewerLikedObject"),d=b.attr("objectId"),e=b.attr("objectType"),h=parseInt(b.attr("countLikes"),10),h=h+(1==h?" like":" likes");b.empty().append($("#newsfeedLikeTmpl").tmpl({viewerLikedObject:c,objectId:d,objectType:e,countLikesDesc:h}))},
Pf:function(b,c,d,e){var h=this.model.get("currentUser");null!=h&&(this.model.get("facebookAuthenticated")&&null==h.Ad?z.b(mj):(0==d&&($("#contentRight",this.el).empty().append($("#connectTmpl").tmpl({})),this.fd()),sA("/content/"+(e?"connect_fb_friends_page":"connect"),{webname:this.ta,startIndex:d,wns:c,facebookFriendIds:(h.Ad?h.Ad:[]).join(","),searchString:null==b?"":b,cachebuster:""+(new Date).getTime()},r(this,function(c,h){ge(b)||$("#connect_search").val(b);var q=e?$("#facebook_friends_container",
this.el):0==d?$("#connectSearchResults",this.el):$("#connectSearchResults .results_list",this.el);this.fs(c,h,q);$("#search",this.el).hide();$(".location",this.el).truncate({width:$("#contentRight").width()-230,addtitle:!0});$(".stations",this.el).truncate({width:$("#contentRight").width()-230,addtitle:!0});So()||$(".sample_allowed").hide();$(".iTunes-badge").hide()}))))},fd:function(){$(".btn_bg",this.el).css("visibility","visible");$(".profile_sample",this.el).show();$(".follow_button",this.el).show();
$("#search",this.el).show();var b=this.model.get("currentUser"),c=this.model.get("currentProfileInfo");if(null!=b&&null!=c){var d=this.model.get("facebookAuthenticated");d?$("#connect_find_fb_container",this.el).hide():$("#connect_find_fb_container",this.el).show();0<parseInt(this.model.get("currentProfileInfo").followingCount,10)?($(".connect_promo",this.el).hide(),$("#connect_search_help",this.el).hide()):($(".connect_promo",this.el).show(),$("#connect_search_help",this.el).show());c=Ed(c,this.mK(),
b.t==c.listenerId&&!d,this.Es());$(".img_profile").attr("src",c);$(".img_profile").css("cursor",b.za?"default":"pointer");c=$('.section[listenerId="'+b.t+'"]',this.el);$(".feed_profile",c).attr("src",Ed(b,!0));Zx(new Wx(b),!1)}},mK:function(){return this.ba==lu.toLowerCase()||this.ba==mu.toLowerCase()},ym:function(b,c){this.Cz||($(window).scroll(r(this,this.JQ)),this.Cz=!0);$("#feed_updates_container").slideUp();var d=this.model.get("currentProfileInfo");this.model.get("currentUser");var e=this.ba==
ku.toLowerCase(),d={si:c,webname:b,followingCount:d.followingCount,only_own:e,cachebuster:""+(new Date).getTime()},h="fetchingActivity"+e,l="fetchingActivityTimeout"+e;rA[h]||(rA[h]=!0,rA[l]=setTimeout(function(){rA[h]=!1},5E3),Jz("/content/newsfeed",d,r(this,function(b,d){0<=b.indexOf("feature_unavailable_error")&&(e?(this.Gm=!1,this.ms()):(T(Sw),$y()),(new X({message:ec()})).render());clearTimeout(rA[l]);rA[h]=!1;"success"==d&&(0==c&&$("#contentRight",this.el).empty(),$("#contentRight",this.el).append(b));
this.fd();var u=this.model.get("currentProfileInfo"),y=this.model.get("currentUser");u.listenerId!=y.t&&"cannotFollow"==u.followState?$("#contentRight .comments",this.el).remove():(this.Ab&&this.Ab.close(),this.Ab=new Lz({el:$(".profile_rCol",this.el).get(0),model:this.model,type:"profile",targetId:u.listenerId,hasMenu:!0,isActivityDelete:e}),$("#contentRight .comments .notes .comment_box",this.el).hide());$(".newsfeed_more",this.el).click(function(b){var c=$(b.target).parents(".friend_feed");$(".truncated",
c).fadeOut(200,function(){$(".long",c).fadeIn()});return!1});_.each($(".like_button_container",this.el),r(this,function(b){this.wt($(b))}));_.each($(".like_section .section .menu",this.el),r(this,function(b){var c=$(".newsfeed_buy",b);c&&0<c.length?((new fz({buyButton:c,buyMenu:$(".dropdownmenu",b).eq(0),model:this.model})).Ch(String(c.data("itunesurl")),String(c.data("amazonurl")),String(c.data("amazondigitalasin"))),new Ly($(".menu_dropdown",$(b)),null,$(".dropdownmenu",$(b)).eq(1))):new Ly($(".menu_dropdown",
$(b)),null,$(".dropdownmenu",$(b)))}));_.each($(".feed_hide_button",this.el),r(this,function(b){var c=this.model.get("currentUser");$(b).hasClass("follow_post")?$(b).click(r(this,function(){z.b(fj,{feedId:$(b).attr("multiFeedIds"),isActivityDelete:e,deleteCompletely:"true"==$(b).attr("deleteCompletely")});$(b).parents(".section").slideUp()})):c&&$(b).attr("listenerid")==c.t?$(b).click(r(this,function(){z.b(fj,{feedId:$(b).attr("feedId"),isActivityDelete:e,deleteCompletely:"true"==$(b).attr("deleteCompletely")});
return!1})):new tA($(b),e);$(b).closest(".section").bind("mouseenter",function(){$(".feed_hide_button",this.el).not($(b)).fadeOut();$(b).fadeIn()});$(b).closest(".section").bind("mouseleave",function(){0==$(".feed_hide_dialog[visible=true]").length&&$(b).fadeOut()})}));_.each($(".owner_profile_image, .also_profile_image",this.el),r(this,function(b){new uA($(b),{viewerListenerId:y.t,viewerIsAnon:null==y||y.p()})}))}),function(){z.b(Hh)},!0))},kG:function(b,c){Jz("/content/bookmarked_tracks",{trackStartIndex:c,
webname:b,cachebuster:""+(new Date).getTime()},r(this,function(b){$("#track_bookmark_container",this.el).append(b);this.Tr()}))},eG:function(b,c){Jz("/content/bookmarked_artists",{artistStartIndex:c,webname:b,cachebuster:""+(new Date).getTime()},r(this,function(b){$("#artist_bookmark_container",this.el).append(b);this.Tr()}))},IN:function(b){Jz("/content/bookmarks",{webname:b,cachebuster:""+(new Date).getTime()},r(this,function(b,d){"success"==d&&($("#contentRight",this.el).empty().append(b),this.Tr())}),
function(){z.b(Hh)},!0)},Tr:function(){_.each($(".like_section .section .menu",this.el),r(this,function(b){var c=$(".like_buy",b);$(".iTunes-badge").hide();So()||$(".play_sample").hide();c&&0<c.length?((new fz({buyButton:c,buyMenu:$(".dropdownmenu",b).eq(0),model:this.model})).Ch(String(c.data("itunesurl")),String(c.data("amazonurl")),String(c.data("amazondigitalasin"))),new Ly($(".menu_dropdown",$(b)),null,$(".dropdownmenu",$(b)).eq(0))):new Ly($(".menu_dropdown",$(b)),null,$(".dropdownmenu",$(b)))}));
this.fd()},iG:function(b,c){Jz("/content/stationlikes",{stationStartIndex:c,webname:b,cachebuster:""+(new Date).getTime()},r(this,function(c){$("#station_like_pages",this.el).append(c);this.tj(b)}))},dG:function(b,c){Jz("/content/albumlikes",{albumStartIndex:c,webname:b,cachebuster:""+(new Date).getTime()},r(this,function(c){$("#album_like_pages",this.el).append(c);this.tj(b)}))},fG:function(b,c){Jz("/content/artistlikes",{artistStartIndex:c,webname:b,cachebuster:""+(new Date).getTime()},r(this,function(c){$("#artist_like_pages",
this.el).append(c);this.tj(b)}))},lG:function(b,c,d){Jz("/content/tracklikes",{likeStartIndex:c,thumbStartIndex:d,webname:b,cachebuster:""+(new Date).getTime()},r(this,function(c){$("#track_like_pages",this.el).append(c);this.tj(b)}))},uz:function(b,c){Jz("/content/likes",{webname:b,filter:c,cachebuster:""+(new Date).getTime()},r(this,this.ZK),function(){z.b(Hh)},!0)},ZK:function(b){0<=b.indexOf("feature_unavailable_error")&&(this.Im=!1,this.ms(),(new X({message:ec()})).render());$("#contentRight",
this.el).empty().append(b);$(".filter_likes input").keyup(r(this,this.mG));$(".filter_likes input").focus(r(this,function(){$(".filter_likes input").hasClass("default_text")&&($(".filter_likes input").removeClass("default_text"),$(".filter_likes input").val(""))}));$(".filter_likes input").blur(r(this,this.Sw));this.Sw();this.tj(this.ta);$(".iTunes-badge").hide()},Sw:function(){var b=$(".filter_likes input").attr("data-filter");ge(b)&&(b="Search Likes");$(".filter_likes input").addClass("default_text");
$(".filter_likes input").val(b)},mG:function(b){return 13==b.which?(this.uz(this.ta,$(".filter_likes input").val()),!1):!0},tj:function(b){var c=this.model.get("currentUser");c&&c.Z!=b&&(b=this.model.get("currentProfileInfo"),b=b.fullName&&0==!$.trim(b.fullName).length?b.fullName:b.webName,$(".profile_user_name").text(b),_.each($(".profile_context_name",this.el),r(this,function(b){$(b).text()==c.webName+"'s"&&$(b).text("your")})),_.each($(".like_context_stationname",this.el),r(this,function(b){$(b).data("viewer-is-owner",
!1)})));_.each($(".like_section .section .menu",this.el),r(this,function(b){var c=$(".like_buy",b);c&&0<c.length?((new fz({buyButton:c,buyMenu:$(".dropdownmenu",b).eq(0),model:this.model})).Ch(String(c.data("itunesurl")),String(c.data("amazonurl")),String(c.data("amazondigitalasin"))),new Ly($(".menu_dropdown",$(b)),null,$(".dropdownmenu",$(b)).eq(1))):new Ly($(".menu_dropdown",$(b)),null,$(".dropdownmenu",$(b)))}));$(".iTunes-badge").hide();this.fd()},vz:function(b,c){Jz("/content/stations",{startIndex:c,
webname:b,cachebuster:""+(new Date).getTime()},r(this,function(b){0==c?$("#contentRight",this.el).empty().append(b):$("#stations_container",this.el).append(b);this.fd()}),function(){z.b(Hh)},!0)},tz:function(b,c){Jz("/content/following",{startIndex:c,webname:b,cachebuster:""+(new Date).getTime()},r(this,function(b,e){this.fs(b,e,0==c?$("#contentRight",this.el).empty():$("#currently_following",this.el))}),function(){z.b(Hh)},!0)},rz:function(b,c){Jz("/content/followers",{startIndex:c,webname:b,cachebuster:""+
(new Date).getTime()},r(this,function(b,e){this.fs(b,e,0==c?$("#contentRight",this.el).empty():$("#current_followers"))}),function(){z.b(Hh)},!0)},fs:function(b,c,d){if("success"==c){d.append(b);this.blurSearch();_.each($("#followers .follow_section",this.el),function(b){new Ly($(".menu_dropdown",$(b)),null,$(".dropdownmenu",$(b)))});for(b=0<$("#currently_following .follow_section:visible",this.el).length?2:4;b<$("#suggestions .follow_section",this.el).length;b++)$("#suggestions .follow_section",
this.el).eq(b).closest("li").hide();this.fd()}},gs:function(){if($(this.el).is(":visible")){$("#user_info_form",this.el).is(":visible")&&$("#user_info_form",this.el).fadeOut(400,function(){$("#user_info_container",this.el).fadeIn()});var b=this.model.get("currentProfileInfo"),c=this.model.get("currentUser");if(null==b||null==c)$("#user_info_container",this.el).empty(),$(".user_name a",this.el).hide();else{b.show_details=this.ba!=ku.toLowerCase()||b.listenerId!=c.t&&b.privateProfile?!1:!0;$.extend(b,
{showAsPrivateProfile:this.Es()});$("#user_info_container",this.el).empty().append($("#profileUserinfoTmpl").tmpl(b));var d=c.Rb?b.bioHtml:b.bioRawHtml;d&&$("#bio_text",this.el).empty().html(d.split("\n").join("<br/>"));$(".user_name a",this.el).show();b=c.Rb?b.fullName:b.fullNameRaw;$(".user_name.self a").text(b)}this.fd()}},Es:function(){var b=this.model.get("currentProfileInfo"),c=this.model.get("currentUser");return null==b||null==c||b.listenerId!=c.t&&b.privateProfile},events:{"focus #bookmarks_search":"searchBookmarksFocus",
"keypress #bookmarks_search":"searchBookmarks","click  .sample":"sampleClick","click .play_station":"playStation","click .img_profile":"profileImageClicked","click #load_feed_updates":"loadFeedUpdates","click .like_context_stationname":"playStation","click .like_remove_like":"likesRemoveLikeClick","click .like_create_station":"likesCreateStationClick","click .like_share":"likesShareClick","click #stations .show_more":"stationsShowMoreClick","click #currently_following .show_more":"followingShowMoreClick",
"click #current_followers .show_more":"followersShowMoreClick","click #track_like_pages .show_more":"trackLikesShowMore","click #artist_like_pages .show_more":"artistLikesShowMore","click #album_like_pages .show_more":"albumLikesShowMore","click #station_like_pages .show_more":"stationLikesShowMore","click #facebook_friends_container .show_more":"facebookFriendsShowMore","click .people_search .show_more":"peopleSearchShowMore","click #track_bookmark_container .show_more":"trackBookmarksShowMore",
"click #artist_bookmark_container .show_more":"artistBookmarksShowMore","click .like_buy_itunes":"likesBuyITunes","click .like_buy_amazon_mp3":"likesBuyAmazonMp3","click .like_buy_amazon_cd":"likesBuyAmazonCD","click .others_link":"othersLinkClick","click .like_undo":"likeUndoClick","mouseover .like_undo":"mouseOverLikeUndoButton","mouseout .like_undo":"mouseOutLikeUndoButton","click .like_likethis":"likeFomFeedClick","click .newsitem_share":"newsitemShareClick","click .playstation":"playStation",
"click .playmessage":"playMessage","click #connect_find":"connectFindClick","click .clear_input":"clearInput","keyup #connect_search":"connectSearchKeyup","click #connect_facebook_login":"connectFacebookLogin","click #edit_profile_link":"editProfileClick","click #save_profile":"saveProfileClick","click #privacy_menu_dd .profile_permissions":"privacyMenuItemClick","focus #bio":"bioTextareaFocus","blur #bio":"bioTextareaBlur","click .follow_button":"followButtonClicked","mouseover .follow_button":"followButtonMouseover",
"mouseout .follow_button":"followButtonMouseout","focus #search":"focusSearch","blur #search":"blurSearch","keyup #search":"keyupSearch","click .block":"blockListenerClick","click .bookmark_delete":"deleteBookmarkClick","click #suggestions .remove_section":"removeSuggestionSection","click #suggestions .remove":"removeSuggestion","click .station_share .playstation":"shareClick","click .song_share .newsfeed_song_name":"shareClick","click .song_share .song_name":"shareClick","click .song_share .album_name":"shareClick",
"click .song_share .artist_name":"shareClick","click .station_share .artist_name":"shareClick","click .station_share .station_name":"shareClick"},shareClick:function(){this.model.set({shareFirstImp:!0});return!0},removeSuggestionSection:function(){$("#suggestions").fadeOut()},removeSuggestion:function(b){var c=$(b.target).closest("li");c.fadeOut(400,r(this,function(){c.remove();var b=$("#suggestions li:hidden",this.el);b&&0<b.length&&b.eq(0).show();0==$("#suggestions li",this.el).length&&$("#suggestions").fadeOut()}))},
deleteBookmarkClick:function(b){var c=0<$(b.target).closest("#artistBookmarks").length,d=$(b.target).closest(".section");T(c?cv:dv,{bookmarkId:$(b.target).attr("data-bookmarkid"),section:d});return!1},tx:function(b){$(b).fadeOut(400,r(this,function(){$(b).remove();0==$("#songBookmarks .section").length&&0==$("#artistBookmarks .section").length&&($(".profile_lCol .profile_menu li").eq(2).remove(),this.model.get("currentProfileInfo").bookmarkCount=0,window.location.hash=$("a",$(".profile_lCol .profile_menu li").eq(0)).attr("href"))}));
return!1},blockListenerClick:function(b){b=$(b.target).attr("data-listenerid");z.b(Gj,b);s("link",{click:"block",source:"ProfileView"},this.model.get("currentUser"));return!1},DH:function(b){if(this.model.get("currentProfileInfo")){var c=null;$("#followers .follow_button",this.el).each(r(this,function(d,e){$(e).attr("data-listenerid")==b&&(c=$(e))}));c&&(c.removeClass("followable"),c.removeClass("following"),c.addClass("blocked"),c.find(".follow_button_label").text("Blocked"),c.removeClass("hover"),
$(".dropdownmenu li",$(c.parent())).eq(0).hide())}},uq:function(b){var c=this.model.get("currentProfileInfo");if(c){for(var d=null,e=["#followers","#suggestions"],h=0;h<e.length;h++)$(e[h]+" .follow_button",this.el).each(r(this,function(c,e){$(e).attr("data-listenerid")==b&&(d=$(e))}));e=null!=d;null==d&&b==c.listenerId&&(d=$(".follow_button",this.el).eq(0));null!=d&&(d.removeClass("blocked"),d.find(".follow_button_label").text("Follow"),d.addClass("followable"),d.removeClass("hover"),e?$(".dropdownmenu li",
$(d.parent())).eq(0).show():c.followState="followable")}},BI:function(b){var c=$('.section[feedId="'+b.feedId+'"]');c.slideUp("normal",function(){c.remove()})},kq:function(b){var c=$('.section[listenerId="'+b+'"]');c.slideUp("normal",function(){c.remove()})},blurSearch:function(){var b=""+$("#search",this.el).val();b&&0!=jQuery.trim(b).length||($("#search",this.el).val("Search Friends"),$("#search",this.el).addClass("empty"))},focusSearch:function(){$("#search",this.el).hasClass("empty")&&($("#search",
this.el).val(""),$("#search",this.el).removeClass("empty"))},keyupSearch:function(){var b=jQuery.trim(""+$("#search",this.el).val()).toLowerCase();$("#followers .follow_section",this.el).each(function(c,d){0>jQuery.trim(""+$(".listener_info .listener_name",$(d)).text()).toLowerCase().indexOf(b)?$(d).fadeOut("fast"):$(d).show()})},iq:function(b){var c=this.model.get("currentProfileInfo");if(c){var d=null;b.webName==c.webName?(d=$("#"+b.ui_id),this.model.get("currentProfileInfo").followState="following"):
($(".follow_button",this.el).each(r(this,function(c,h){$(h).data("webname")==b.webName&&(d=$(h))})),d&&(c=d.closest("li"))&&0<c.length&&!c.is(":visible")&&c.fadeIn());d&&(d.removeClass("followable"),d.addClass("following"),d.removeClass("hover"),d.find(".follow_button_label").text("Following"))}},vq:function(b){var c=this.model.get("currentProfileInfo");if(c)if(this.ba==lu.toLowerCase())this.kq(b.listenerId);else{var d=null;b.webName==c.webName?(d=$("#"+b.ui_id),this.model.get("currentProfileInfo").followState=
"followable"):$(".follow_button",this.el).each(r(this,function(c,h){$(h).data("webname")==b.webName&&(d=$(h))}));d&&(d.removeClass("following"),d.addClass("followable"),d.removeClass("hover"),d.find(".follow_button_label").text("Follow"))}},followButtonClicked:function(b){var c=this.model.get("currentUser");if(null==c||c.p())T(jv,{onSuccessRedirect:My()});else{if(!$(b.currentTarget).hasClass("cannotFollow"))if($(b.currentTarget).data("webname")?c=$(b.currentTarget).data("webname"):(c=this.model.get("currentProfileInfo"),
c=c.webName),$(b.currentTarget).hasClass("followable"))z.b(Ej,{webName:c,ui_id:b.currentTarget.id}),0<$(b.currentTarget).closest("#suggestions").length&&this.removeSuggestion(b);else if($(b.currentTarget).hasClass("following")){if(z.b(Fj,{webName:c,ui_id:b.currentTarget.id}),$(b.currentTarget).data("webname")&&"following"==jQuery.trim(""+$("#followers h2").text()).toLowerCase()){var d=$(b.currentTarget).closest(".follow_section");d.fadeOut(400,function(){d.remove()})}}else $(b.currentTarget).hasClass("blocked")?
(c=null,$(b.currentTarget).attr("data-listenerid")?c=$(b.currentTarget).attr("data-listenerid"):(c=this.model.get("currentProfileInfo"),c=c.listenerId),z.b(Hj,c)):k.error("Unhandled follow state: ",$(b.currentTarget));return!1}},followButtonMouseover:function(b){$(b.currentTarget).hasClass("cannotFollow")||$(b.currentTarget).addClass("hover");$(b.currentTarget).hasClass("followable")?$(b.currentTarget).find(".follow_button_label").text("Follow"):$(b.currentTarget).hasClass("following")?$(b.currentTarget).find(".follow_button_label").text("Unfollow"):
$(b.currentTarget).hasClass("blocked")&&$(b.currentTarget).find(".follow_button_label").text("Unblock")},followButtonMouseout:function(b){$(b.currentTarget).hasClass("cannotFollow")||$(b.currentTarget).removeClass("hover");$(b.currentTarget).hasClass("followable")?$(b.currentTarget).find(".follow_button_label").text("Follow"):$(b.currentTarget).hasClass("following")?$(b.currentTarget).find(".follow_button_label").text("Following"):$(b.currentTarget).hasClass("blocked")&&$(b.currentTarget).find(".follow_button_label").text("Blocked")},
profileImageClicked:function(){var b=this.model.get("currentProfileInfo");b&&b.is_owner&&(this.model.get("facebookAuthenticated")||z.b(kj));return!1},loadFeedUpdates:function(){this.ym(this.ta,0);return!1},ME:function(){if($(this.el).is(":visible")&&this.ba==lu){var b=$(".section[feedIndex='1']");0<b.length&&z.b(oj,{webname:this.ta,lastFeedId:b.attr("feedId")})}},qI:function(b){0<b&&(b=b+" New Post"+(1<b?"s":""),$("#feed_updates_container",this.el).empty().append($("#feedUpdatesNoticeTmpl").tmpl({text:b})),
$("#feed_updates_container").slideDown())},jI:function(){var b=this.model.get("currentUser");if(null!=b&&this.model.get("facebookAuthenticated")){var c=this.model.get("currentProfileInfo");null!=c&&c.webName==b.Z&&(c.fbId=b.za,null!=b.Ad||z.b(mj))}$(this.el).is(":visible")&&(this.ba==mu?this.Pf(null,!1,0,!1):this.fd())},bioTextareaBlur:function(){0==jQuery.trim(""+$("#bio",this.el).val()).length&&($("#bio",this.el).val(uc),$("#bio",this.el).addClass("default_text"))},bioTextareaFocus:function(){$("#bio",
this.el).hasClass("default_text")&&($("#bio",this.el).val(""),$("#bio",this.el).removeClass("default_text"))},privacyMenuItemClick:function(b){$(b.target).hasClass("profile_private")?($("#privacy_menu",this.el).removeClass("profile_public"),$("#privacy_menu",this.el).addClass("profile_private"),$("#privacy_menu",this.el).text(sc),$("#privacy",this.el).val("private")):($("#privacy_menu",this.el).removeClass("profile_private"),$("#privacy_menu",this.el).addClass("profile_public"),$("#privacy_menu",
this.el).text(tc),$("#privacy",this.el).val("public"));return!1},saveProfileClick:function(){T(Nw);var b=this.model.get("currentProfileInfo"),c=$("#bio",this.el).val();1024<c.length&&(c=c.substring(0,1023));b={webName:b.webName,fullName:$("#fullname",this.el).val(),isProfilePrivate:"private"==jQuery.trim(""+$("#privacy",this.el).val()).toLowerCase(),homeTown:$("#hometown",this.el).val(),school:$("#school",this.el).val(),employer:$("#employer",this.el).val(),bio:$("#bio",this.el).hasClass("default_text")?
"":c};z.b(Dj,b);return!1},editProfileClick:function(){T(Nw);var b=this.model.get("currentProfileInfo");$("#user_info_container",this.el).fadeOut(400,r(this,function(){$("#user_info_form",this.el).empty().append($("#profileUserinfoFormTmpl").tmpl(b));new Ly($("#privacy_menu",this.el),null,$("#privacy_menu_dd",this.el));this.bioTextareaBlur();$("#user_info_form",this.el).fadeIn()}));return!1},searchBookmarksFocus:function(){"Search Bookmarks"==$("#bookmarks_search input",this.el).val()&&$("#bookmarks_search input",
this.el).val("")},searchBookmarks:function(){clearTimeout(this.yE);this.yE=setTimeout(function(){var b=$("#bookmarks_search input",this.el).val().toLowerCase();$(".like_section:visible",this.el).each(r(this,function(c,d){var e=$(d);$(".section",e).each(r(this,function(c,d){var e=$(d),h=e.text().toLowerCase();ge(b)||(0<=h.indexOf(b)?e.show():e.hide())}));if(ge(b)){var h=$(".section",e);if(5<h.length)for($(".show_more",e).show(),e=0;e<h.length;e++)5>e?$(h[e]).show():$(h[e]).hide();else $(".show_more",
e).hide(),h.show()}else $(".show_more",e).hide()}))},500)},stationsShowMoreClick:function(b){"stations"==this.ba&&(b=parseInt($(b.target).data("nextstartindex"),10),$("#stations .show_more").fadeOut("fast"),this.vz(this.ta,b))},followingShowMoreClick:function(b){b=parseInt($(b.target).data("nextstartindex"),10);$(".show_more",this.el).fadeOut("fast");this.tz(this.ta,b)},followersShowMoreClick:function(b){b=parseInt($(b.target).data("nextstartindex"),10);$(".show_more",this.el).fadeOut("fast");this.rz(this.ta,
b)},trackLikesShowMore:function(b){var c=parseInt($(b.target).data("nextlikestartindex"),10);b=parseInt($(b.target).data("nextthumbstartindex"),10);$("#track_like_pages .show_more",this.el).fadeOut("fast");this.lG(this.ta,c,b)},artistLikesShowMore:function(b){b=parseInt($(b.target).data("nextstartindex"),10);$("#artist_like_pages .show_more",this.el).fadeOut("fast");this.fG(this.ta,b)},albumLikesShowMore:function(b){b=parseInt($(b.target).data("nextstartindex"),10);$("#album_like_pages .show_more",
this.el).fadeOut("fast");this.dG(this.ta,b)},stationLikesShowMore:function(b){b=parseInt($(b.target).data("nextstartindex"),10);$("#station_like_pages .show_more",this.el).fadeOut("fast");this.iG(this.ta,b)},facebookFriendsShowMore:function(b){$(b.target).hide();this.Pf("",!1,parseInt($(b.target).attr("data-nextStartIndex"),10),!0);return!1},peopleSearchShowMore:function(b){$(b.target).hide();this.Pf($.trim($(".search_term",this.el).text()),!1,parseInt($(b.target).attr("data-nextStartIndex"),10),
!1);return!1},artistBookmarksShowMore:function(b){b=parseInt($(b.target).data("nextstartindex"),10);$("#artist_bookmark_container .show_more",this.el).fadeOut("fast");this.eG(this.ta,b)},trackBookmarksShowMore:function(b){b=parseInt($(b.target).data("nextstartindex"),10);$("#track_bookmark_container .show_more",this.el).fadeOut("fast");this.kG(this.ta,b)},likesShareClick:function(b){var c=$(b.target).data("song"),d=$(b.target).data("album");b=$(b.target).data("station");c?(c=new wn(c,null),s("share",
{share_object:"song",source:"ProfileView",email:"false",pandora:"true",facebook:"false",twitter:"false",object_id:c.o()},this.model.get("currentUser")),T(Gu,{mode:"song",track:c})):d?(T(Gu,{mode:"album",album:d}),s("share",{share_object:"album",source:"ProfileView",email:"false",pandora:"true",facebook:"false",twitter:"false",object_id:d.musicId},this.model.get("currentUser"))):b&&(c=tn(b),T(Gu,{mode:"station",station:c}),s("share",{share_object:"station",source:"ProfileView",email:"false",pandora:"true",
facebook:"false",twitter:"false",object_id:c.e()},this.model.get("currentUser")));return!1},likesCreateStationClick:function(b){var c=$(b.target).attr("data-songid");$(b.target).attr("data-albumid");var d=$(b.target).attr("data-artistid");b=$(b.target).attr("data-data-stationid");this.model.get("currentUser");c?z.b(Ci,{stationCode:"fb"+c,source:"profile_page"}):d?z.b(Ci,{stationCode:"fb"+d,source:"profile_page"}):b&&(isNaN(b)?z.b(Ci,{stationCode:b,source:"profile_page"}):T(yu,b));return!1},likesRemoveLikeClick:function(b){var c=
""+$(b.target).attr("data-likeid"),d=c.indexOf(".");-1<d?T(Ju,{isPositive:!0,stationID:c.substring(d+1),musicID:[c.substring(0,d)]}):z.b(qj,c);this.hj=b;return!1},Kl:function(){if(null!=this.hj){var b=$(this.hj.target).closest(".section"),c=$(this.hj.target).parents(".like_section");b.fadeOut(400,function(){b.remove();$(".section_count",c).text("("+$(".section",c).length+")");var d=$(".count",$("#profile_tab_likes",this.el).parent()),e=parseInt(d.text(),10);d.text(e-1)});var d=$(this.hj.target).closest(".section_count"),
e=d.text();d.text(parseInt(e,10)-1);this.hj=null}},likesBuyITunes:function(b){b=$(b.target).data("itunesurl");window.open(b+"&ct=Web","_blank");return!1},likesBuyAmazonMp3:function(b){b=$(b.target).data("amazonurl");window.open(b+"&tag="+this.di,"_blank");return!1},likesBuyAmazonCD:function(b){b=$(b.target).data("amazondigitalasin");window.open("http://www.amazon.com/dp/"+b+"/?&tag="+this.di,"_blank");return!1},othersLinkClick:function(b){b=$(b.target).attr("webnames");this.ba=mu;$(this.el).empty().append($("#feedTmpl").tmpl({}));
$("#connect_tab",this.el).addClass("selected");this.Pf(b,!0,0,!1);V("/alsofollowing",!0,!0);return!1},likeFomFeedClick:function(b){k.debug("clicked likesFomFeedClick");var c=this.model.get("currentUser");if(null==c||c.p())return T(jv,{onSuccessRedirect:My()}),!1;var d=$(b.target).parents(".like_button_container"),c=d.attr("objectId"),d=d.attr("objectType");b=$(b.target).parents(".section").attr("webname");$(".like_button_container",this.el).filter('[objectId="'+c+'"]').each(r(this,function(b,c){var d=
$(c);d.attr("countLikes",parseInt(d.attr("countLikes"),10)+1);d.attr("viewerLikedObject","true");this.wt(d)}));z.b(pj,{type:this.xf(d),objectId:c,context:"feed_page",contextId:b,contextName:b});return!1},xf:function(b){if("like_artist"==b)b="artist";else if("like_album"==b)b="album";else if("like_song"==b)b="song";else if("like_station"==b)b="station";else if("station_create"==b)b="station";else if("station_listen"==b)b="station";else if("station_share"==b)b="station";else if("station_comment"==b)b=
"station";else if("song_share"==b)b="song";else throw"invalid type: "+b;return b},likeUndoClick:function(b){var c=$(b.target).parents(".like_button_container");b=c.attr("objectId");c=c.attr("objectType");$(".like_button_container",this.el).filter('[objectId="'+b+'"]').each(r(this,function(b,c){var h=$(c);if("true"==h.attr("viewerIsOwner")&&0==h.attr("objectType").indexOf("like_")){var l=h.parents(".section");l.slideUp("normal",function(){l.remove()})}else h.attr("countLikes",parseInt(h.attr("countLikes"),
10)-1),h.attr("viewerLikedObject","false"),this.wt(h)}));z.b(tj,new io(this.xf(c),b));return!1},mouseOverLikeUndoButton:function(b){$(b.target).text("Undo");$(b.target).parent().removeClass("liked").addClass("undo")},mouseOutLikeUndoButton:function(b){$(b.target).text("You like this");$(b.target).parent().removeClass("undo").addClass("liked")},newsitemShareClick:function(){k.info("newsitemShareClick");return!1},connectSearchKeyup:function(b){13==b.which&&this.connectFindClick(b);return!0},connectFindClick:function(b){T(Nw);
b=$("#connect_search",$(b.target).parent()).val();this.Pf(b,!1,0,!1)},clearInput:function(b){$("#connect_search",$(b.target).parent()).val("").focus()},connectFacebookLogin:function(){z.b(kj,r(this,this.fd))},playStation:function(b){var c=$(b.target).attr("data-station-id"),d=$(b.target).data("music-id");b=!0==$(b.target).data("viewer-is-owner")||"true"==$(b.target).data("viewer-is-owner");this.model.get("currentUser");ge(c)?z.b(Ci,{stationCode:"mi"+d,source:"profile_page"}):(d=this.model.get("stationList").detect(function(b){return b.e()==
c}),b&&d?T(yu,c):z.b(Ci,{stationCode:"fs"+c,source:"profile_page"}));T(qu);return!1},playMessage:function(b){var c=$(b.target).data("artist-uid-hexed");b=$(b.target).data("artist-message-id-hexed");z.b(Ci,{stationCode:"mi"+c,artistMessageArtistUid:c,artistMessageId:b});T(qu);return!1},oI:function(b){if(this.ba!=lu)return!1;1==parseInt(b.parents(".section").attr("feedIndex"),10)&&$("#profile_tip_spacer",this.el).slideDown()},nI:function(b){if(this.ba!=lu)return!1;1==parseInt(b.parents(".section").attr("feedIndex"),
10)&&$("#profile_tip_spacer",this.el).slideUp()},JQ:function(){if(!$(this.el).is(":visible")||this.ba!=lu&&this.ba!=ku||0==$(".user_feed .section").length)return!1;if($(window).scrollTop()>$(".user_feed .section").eq(-1).offset().top-$(window).height()){var b=parseInt($(".next_newsfeed_start_index:last").text(),10);0<b&&(k.info("HEY LETS GRAB SOME MORE ACTIVITY"),this.ym(this.ta,b))}},Gd:function(b){var c=$(".sample.playing",this.el);c.removeClass("playing");c.parent(".btn_bg").removeClass("playing");
$(".sample_text").show();$(".iTunes-badge").hide();b.isError&&(0<c.children("a").length?c.addClass("sample-inactive").find("a").attr("title","Sample Unavailable").find("span").html("Sample Unavailable"):c.addClass("sample-inactive").html("No Sample").parent(".btn_bg").addClass("disabled"));null!=this.vb&&0<this.vb.length&&b.reachedEnd&&b.url==$(this.vb[0]).attr("data-sample-url")&&(this.vb.shift(),this.dz())},sampleClick:function(b){$(b.target).blur();var c=$(b.target).parent(".sample");0===c.size()&&
(c=$(b.target));c.hasClass("sample-inactive")||(c.hasClass("playing")?0>$(b.target).attr("class").indexOf("iTunes-badge")?(z.b(Li),c.removeClass("playing"),c.parent(".btn_bg").removeClass("playing"),b=c.data("trackname"),$(".iTunes-badge."+b).hide(),$(".sample_text."+b).show()):(b=$(b.target).attr("href"),window.open(b,"_blank")):(z.b(Ki,{url:c.data("sampleurl"),gain:null!=c.data("samplegain")?Number(c.data("samplegain")):0}),c.addClass("playing"),c.parent(".btn_bg").addClass("playing"),b=c.data("trackname"),
$(".iTunes-badge."+b).show(),$(".sample_text."+b).hide()))},lI:function(){this.ba==mu.toLowerCase()&&setTimeout(r(this,function(){this.Pf(null,!1,0,!1)}),100)},dq:function(b){this.Im=b.NEW_SITE_LIKES_LIST;this.Gm=b.NEW_SITE_ACTIVITY_LIST;this.ms()},ms:function(){0<=My().indexOf("/profile")&&this.model.get("profilePanelType")&&this.model.get("currentProfileInfo")&&this.render({panelType:this.model.get("profilePanelType"),webname:this.model.get("currentProfileInfo").webName,edit:!1})}});var vA="info",wA="privacy",xA="notices",yA="artistMessages",zA="upgrade",AA="billing",BA="receipts",CA="audioQuality",DA="installDesktopApp";function EA(){}
EA=Backbone.View.extend({initialize:function(){this.Pk=!1;this.rj=null;this.Mv=!1;this.gf=null;this.tn=5E3;this.lk="__USE_EXISTING__";z.c(df,r(this,this.ZJ));z.c(cf,r(this,this.pH));z.c(hf,r(this,this.gI));z.c(gf,r(this,this.fI));z.c(jf,r(this,this.eI));z.c(Bf,r(this,this.Fd));z.c(Cf,r(this,this.rx));z.c(Df,r(this,this.Fx));z.c(Ef,r(this,this.rx));z.c(Ff,r(this,this.Fx));z.c(Jf,r(this,this.gq));z.c(th,r(this,this.yx));z.c(vh,r(this,this.yx));z.c(rg,r(this,this.Qx));z.c(ll,r(this,this.TH));z.c(ml,
r(this,this.uI));U(yv,r(this,this.EH));this.model.bind("change:facebookAuthenticated",r(this,this.Qx));this.model.bind("change:twitterAuthenticated",r(this,this.vt));this.bind("show",r(this,this.kJ))},el:$("#mainContent .accountSettings"),currentTab:null,kJ:function(b){T(Mw);b==vA?this.KD():b==wA?this.sN():b==xA?this.mL():b==yA?this.fE():b==zA?this.uQ():b==AA?this.vE():b==BA?this.CN():b==CA?this.mE():b==DA&&this.GF();this.w2=b},cj:function(){$(".submit_btn",this.el).css("opacity","1.0");$(".submit_btn",
this.el).css("filter","alpha(opacity=100)")},KD:function(){var b=this.model.get("currentUser"),c=this.model.get("monthlyListening"),d={};"EXPIRED_SUBSCRIBER"==b.s&&(window.location="/");var e=b.er;d.usedHours=0;d.capPercent=0;c&&(c=Math.round(Number(c)/60),d.usedHours=Math.round(c/60),d.capPercent=c/(60*e)*100);d.capHours=e;d.isSubscriber=b.Oa();d.isMultiDayPassSubscriber=b.jj;d.paymentMethod=b.Lr;d.plan="MONTHLY"===b.Ta()?"Monthly":"Annual"+(b.I()?" (Business)":"");d.duration="MONTHLY"===b.Ta()?
"month":"year";d.showAutoRenew=!this.Pk;d.autoRenew=b.ff;e=parseInt(b.yc,10);c=new Date((new Date).getTime()+864E5*e);d.subscriptionDaysLeft=e;d.expireDescription=0==e?"today":1==e?"within one day":"in "+e+" days";d.expirationDate=c.format("mmmm d, yyyy");d.username=b.La;d.birthyear=b.sg;d.zipcode=b.tb();b.uf==Pa()?d.male="checked":d.female="checked";b.Rb?d.explicitNo="checked":d.explicitYes="checked";b.Bv||(d.explicitDisable="disabled",d.explicitGrey="explicitContent");b.I()&&(d.isBusiness=!0,d.companyName=
b.cw,d.industry=b.Jq);d=$("#accountSettingsTmpl").tmpl(d);$('input[name="explicit_content"]',d).click({ee:this},this.XF);$("#emailPIN",d).click({ee:this},this.xp);$("input,select",d).click(r(this,this.cj));$("select[name=industry]",d).val(b.Jq);$("#rescueEmail",this.el).val("");$("#pin",this.el).val("");$("#pinUnlock",this.el).val("");this.Gb("account");$(".content_main",this.el).append(d);this.bN=$("#auto-renew-explanation",this.el).html();$("#auto-renew-explanation",this.el).truncate({width:"490",
after:" &hellip;",center:!1});$(this.el).show();this.Mv&&this.tQ();return!1},tQ:function(){$(".submit_btn",this.el).css("opacity","1.0");$(".submit_btn",this.el).css("filter","alpha(opacity=100)");if(nx(this.gf.name))$(".usernameFieldError",this.el).text(this.gf.message).fadeIn(),$(".usernameFieldError",this.el).addClass("nag_message_color"),$("#username",this.el).addClass("nag_border");else if(ox(this.gf.name)||px(this.gf.name)||qx(this.gf.name))$(".zipCodeFieldError",this.el).text(this.gf.message).fadeIn(),
$(".zipCodeFieldError",this.el).addClass("nag_message_color"),$("#zipcode",this.el).addClass("nag_border")},sN:function(){var b=this.model.get("currentUser");"EXPIRED_SUBSCRIBER"==b.s&&(window.location="/");var c=$("#privacyTmpl").tmpl({});b.Mp||$(".autoShareOptions",c).hide();var d=b.ol,e=b.Lg,h=b.Kg,l=b.Jg;this.gi=d;this.ji=e;this.ii=h;this.hi=l;b.ih?($('input[name="profile_privacy"][value="private"]',c).prop("checked",!0),this.Pu(c)):($('input[name="profile_privacy"][value="public"]',c).prop("checked",
!0),$('input[name="autoShareListens"]',c).prop({checked:e,disabled:!d}),$('input[name="autoShareLikes"]',c).prop({checked:h,disabled:!d}),$('input[name="autoShareFollows"]',c).prop({checked:l,disabled:!d}),$('input[name="autoShare"]',c).prop("checked",d),$('input[name="allow_profile_notes"]',c).prop("checked",!b.op));this.Gb(wA);$(".content_main",this.el).append(c);$(".submit_btn",this.el).bind("click",{ee:this},r(this,this.kz));$("input",c).click(r(this,this.cj));this.vt();this.hm=null;$(this.el).show();
return!1},Pu:function(b){b=b||this.el;$('input[name="autoShareListens"]',b).prop({checked:!1,disabled:!0});$('input[name="autoShareLikes"]',b).prop({checked:!1,disabled:!0});$('input[name="autoShareFollows"]',b).prop({checked:!1,disabled:!0});$('input[name="autoShare"]',b).prop({checked:!1,disabled:!0});$('input[name="allow_profile_notes"]',b).prop({checked:!1,disabled:!0})},Qx:function(){this.model.get("facebookAuthenticated")||($('input[name="autoShare"]',this.el).prop("checked",!1),$('input[name="autoShareListens"]',
this.el).prop({checked:!1,disabled:!0}),$('input[name="autoShareLikes"]',this.el).prop({checked:!1,disabled:!0}),$('input[name="autoShareFollows"]',this.el).prop({checked:!1,disabled:!0}));this.vt()},TH:function(){(new X({message:"error"})).render()},vt:function(){var b=this.model.get("currentUser");this.model.get("facebookAuthenticated")?($(".facebook.connectButton",this.el).addClass("connected"),$(".facebook.connectButton",this.el).text("Connected"),$(".serviceDescription.connected img",this.el).attr("src",
"https://graph.facebook.com/"+b.za+"/picture?type=square"),$(".serviceDescription.connected span",this.el).text(b.ic),$(".serviceDescription.connected",this.el).show(),$(".serviceDescription.disconnected",this.el).hide()):($(".facebook.connectButton",this.el).removeClass("connected"),$(".facebook.connectButton",this.el).text("Connect"),$(".serviceDescription.disconnected",this.el).show(),$(".serviceDescription.connected",this.el).hide());this.model.get("twitterAuthenticated")?($(".twitter.connectButton",
this.el).addClass("connected"),$(".twitter.connectButton",this.el).text("Connected")):($(".twitter.connectButton",this.el).removeClass("connected"),$(".twitter.connectButton",this.el).text("Connect"))},mL:function(){var b=this.model.get("currentUser");"EXPIRED_SUBSCRIBER"==b.s&&(window.location="/");var c={};c.showArtistPromoEmails=void 0!=b.rf;c=$("#noticesTmpl").tmpl(c);b.kl&&$('input[name="notices_pandora"]',c).prop("checked","checked");b.rr&&$('input[name="notices_friends"]',c).prop("checked",
"checked");b.qr&&$('input[name="notices_follow"]',c).prop("checked","checked");void 0!=b.rf&&b.rf&&$('input[name="notices_artists"]',c).prop("checked","checked");this.Gb(xA);$(".content_main",this.el).append(c);$(".submit_btn",this.el).bind("click",{ee:this},this.nL);$("input",c).click(r(this,this.cj));$(this.el).show();return!1},fE:function(){for(var b=this.model.get("currentUser"),c=this.model.get("stationList").models,b=b.Vl(),d={},e=[],h=0;h<c.length;h++){var l=c[h],p=l.Vl();void 0!=p&&e.push({id:l.e(),
label:l.ea(),isChecked:b?p:b})}d.stations=e;d.isGlobalEnabled=b;c=$("#artistMessagesTmpl").tmpl(d);this.Gb(yA);$(".content_main",this.el).append(c);$(".submit_btn",this.el).bind("click",{ee:this},this.gE);$('input[name="global_artist_message"]',c).change({ee:this},this.eE);b&&$('input[name="global_artist_message"]',c).prop("checked","checked");$("input",c).click(r(this,this.cj));$(this.el).show();return!1},uQ:function(){this.Gb(zA);(new FA({model:this.model,referrer:"accountUpgrade",el:$(".content_main",
this.el),cancelHash:"/account/upgrade"})).render();$(this.el).show();return!1},GF:function(){this.Gb(DA);var b=this.model.get("currentUser");(b&&b.G()?new kA({model:this.model,el:$(".content_main",this.el),cancelHash:"/account/desktopApp"}):new jA({model:this.model,el:$(".content_main",this.el),cancelHash:"/account/desktopApp"})).render();$(this.el).show();setTimeout(r(this,function(){$(".app_content_right").css("bogus","")}),100);return!1},mE:function(){this.Gb(CA);var b=this.model.get("currentUser");
(b&&b.G()?new GA({model:this.model,el:$(".content_main",this.el),cancelHash:"/account/audioQuality"}):new HA({model:this.model,el:$(".content_main",this.el),cancelHash:"/account/audioQuality"})).render();$(this.el).show();return!1},vE:function(){var b=this.model.get("currentUser");if(b&&Mn(b)){var c="App Store";ge(b.Qj)||(c=b.Qj);c=$("#subscriberVendorTmpl").tmpl({subscriberVendor:c,monthlyPrice:Sx(Zn(b)),hidePrice:b.GP,isUserAUNZ:b.Va});this.Gb(AA);$(".content_main",this.el).append(c);$(this.el).show()}else b&&
b.Oa()&&b.jj?(c=$("#multipassTmpl").tmpl({}),this.Gb(AA),$(".content_main",this.el).append(c),$(this.el).show()):b&&b.Oa()&&"PAYPAL"==b.Lr?(c=b.I(),this.w=b.Ta(),c=$("#subscriberPaypalTmpl").tmpl({mode:c?"business":b.Oa()?"subscriber":"payToPlay",subscriptionTitle:c?"Pandora for Business":"Pandora One",subscriptionTitleWithTagline:c?"Pandora for Business":"Pandora One - Ad Free, More Skips, and Fewer Timeouts",renewal_period:Ux(this.w),renewal_amount:Sx(Tx(b,this.w)),expirationDate:(new Date((new Date).getTime()+
864E5*parseInt(b.yc,10))).format("m/d/yy"),isUserAUNZ:b.Va,annualPrice:Sx(b.be.toString()),monthlyPrice:Sx(Zn(b)),billingFrequency:this.w,offerAnnualSub:b.te,username:b.La,showBusinessOffer:!c&&b.Tb}),this.Gb(AA),$(".content_main",this.el).append(c),Vx(this.el,b.ff),$(this.el).show()):z.b(uj,b.I()?"business":"p1");s("p1_billing_page_hit",{vendor_id:t},b);return!1},CN:function(){var b=this.model.get("currentUser");s("business_receipt_click",{vendor_id:t},b);z.b(kl,b.t)},previousReceiptDetail:function(){0!=
this.Of&&(this.Of--,this.Ks())},nextReceiptDetail:function(){this.Of!=this.vh.length-1&&(this.Of++,this.Ks())},viewReceiptDetails:function(b){b=b.target.id;for(var c in this.vh)if(this.vh[c].id==b){this.Of=c;break}this.Ks()},Ks:function(){this.Gb(BA);var b=this.vh[this.Of];b.moreLink=this.Of<this.vh.length-1;b.lessLink=0<this.Of;var c=(new IA({model:this.model})).render(b,"#receiptDetail").el;$(".content_main",this.el).append(c);c=$("."+BA+"Tab",this.el);c.hasClass("receiptClicked")||c.addClass("receiptClicked");
$(this.el).show();s("business_view_receipt",{vendor_id:t,transaction_id:b.transactionId,transaction_date:b.date},this.model.get("currentUser"));V("/account/receipts/view/"+b.id,!0,!0,!0)},exitReceiptDetails:function(){this.Ls()},uI:function(b){this.vh=b;this.Ls()},Ls:function(){this.Gb(BA);var b=$("#receiptsTmpl").tmpl({});$("tbody",b).append($("#receiptRow").tmpl(this.vh));$(".content_main",this.el).append(b);$(this.el).show();V("/account/receipts",!0,!1,!0)},Fd:function(b,c,d){if((c=My())&&0<=c.indexOf("/account")||
d)this.Gb(AA),d=this.model.get("currentUser"),this.fc=new JA({model:this.model}),c=d.I()?"business":d.Oa()?"subscriber":"payToPlay",b=this.fc.render(b,"#BillingTmpl",c,!1,!1,d.Ta(),null).el,$(".content_main .settings_lCol").next().empty(),$(".content_main",this.el).append(b),this.fc.tO(),$("input",this.el).click(r(this,this.cj)),$(".payment_form",this.el).show(),$(this.el).show()},gq:function(){var b=My();if(b&&0<=b.indexOf("/account"))return this.Pk=!0,this.Fd({},null,!0),(new X({message:cb()})).render(),
!1},Fx:function(){var b=this.model.get("currentUser");this.Pk=!1;this.w=b.Ta();(new X({message:eb()})).render();Vx(this.el,b.ff);$("#amount.renewal_summary",this.el).text(Sx(Tx(b,this.w)));$("#period.renewal_summary",this.el).text(Ux(this.w))},yx:function(b){this.H&&this.H();b=b&&b.code==m.d.Je()?ja():Qb(["Please try again later or contact customer support."]);(new X({message:b})).render()},rx:function(b){this.Pk=!1;this.fc&&this.fc.Ti(b)},settingsFormSubmit:function(){T(Mw);return!1},kz:function(){function b(){z.b(vi,
{autoShareEnabled:d,autoShareTrackPlay:e,autoShareLikes:h,autoShareFollows:l,userInitiated:!0})}T(Mw);var c="public"==$('input[name="profile_privacy"]:checked',this.el).val(),d=1==$('input[name="autoShare"]:checked',this.el).length,e=1==$('input[name="autoShareListens"]:checked',this.el).length,h=1==$('input[name="autoShareLikes"]:checked',this.el).length,l=1==$('input[name="autoShareFollows"]:checked',this.el).length,p=1==$("input[name=allow_profile_notes]:checked",this.el).length,q=this.model.get("currentUser");
c&&(this.model.get("facebookAuthenticated")?b():d&&z.b(kj,r(this,function(c){c&&b()})));z.b(ui,{isProfilePrivate:!c,disallowComments:!p,optOut:!q.kl,noNotifyOnNote:!q.rr,noNotifyOnFollow:!q.qr,artistPromoEmailsEnabled:void 0!=q.rf?q.rf:null});this.hm=null;return!1},nL:function(b){T(Mw);var c=1==$("input[name=notices_pandora]:checked",this.el).length,d=1==$("input[name=notices_friends]:checked",this.el).length,e=1==$("input[name=notices_follow]:checked",this.el).length,h=1==$("input[name=notices_artists]",
this.el).length?1==$("input[name=notices_artists]:checked",this.el).length:null;b=b.data.ee.model.get("currentUser");z.b(ui,{isProfilePrivate:b.ih,disallowComments:b.op,optOut:!c,noNotifyOnNote:!d,noNotifyOnFollow:!e,artistPromoEmailsEnabled:h});return!1},gE:function(b){T(Mw);b.data.ee.model.get("currentUser");b=$("input[name=global_artist_message]").is(":checked");var c=[];$("input[name=artist_message]",this.el).each(function(b,e){var h=$(e).attr("data-station-id");c.push({stationId:h,enabled:e.checked})});
z.b(tk,[b,c]);return!1},Gb:function(b){var c=this.model.get("currentUser");$(this.el).empty().append($("#settingsTmpl").tmpl({isSubscriber:c&&(c.Oa()||Mn(c)),inPaymentBackedTrial:c&&c.eh,hasCreditCard:c&&(c.s==m.u.Bc()||c.s==m.u.fg()||c.s==m.u.rn()||c.s==m.u.fu()||Mn(c)),supportsArtistMessages:void 0!=c.Vl(),hasReceipts:c.Sx()}));$("."+b+"Tab",this.el).addClass("on")},events:{"click #auto-renew-explanation-showmore":"autoRenewShowMore","click .submit_btn":"accountSubmit","click .set_pp_autorenew":"ppAutoRenewChangeClick",
"click .bill_freq_input":"billingFrequencyClick","click #submit_paypal_bill_freq":"ppUpdateBillingFrequency","click .see_details":"seeDetailsClick","click input[name=profile_privacy]":"openProfileClick","change input[name=autoShare]":"autoShareClick","change input[name=autoShareListens]":"autoShareListensClick","change input[name=autoShareLikes]":"autoShareLikesClick","change input[name=autoShareFollows]":"autoShareFollowsClick","click input[name=allow_profile_notes]":"profileNotesClick","click .connectButton":"connectButtonClick",
"mouseover .connectButton":"connectButtonMouseOver","mouseout .connectButton":"connectButtonMouseOut","submit .account_settings":"settingsFormSubmit","keyup #password":"passwordKeyup","change .subscription_selection input":"enableSubmit","click #p4b_learn_more":"p4bLearnMoreClick","click #p4b_upgrade":"p4bUpgradeClick","click .viewReceiptDetails":"viewReceiptDetails","click .exitReceiptDetails":"exitReceiptDetails","click .previousReceiptDetail":"previousReceiptDetail","click .nextReceiptDetail":"nextReceiptDetail",
"click .receiptClicked":"receiptClicked","click .delete_account_link":"deleteAccountLinkClick","click .cancelDeleteAccount":"cancelDeleteAccountClick","click .confirmDeleteAccount":"deleteAccountConfirmClick","click .deleteAccountCheck":"deleteAccountClick"},receiptClicked:function(){this.Ls();$("."+BA+"Tab",this.el).removeClass("receiptClicked");return!1},enableSubmit:function(){$("#submit_paypal_bill_freq",this.el).removeAttr("disabled");return!1},seeDetailsClick:function(){$(".details",this.el).fadeIn();
$(".see_details",this.el).hide();return!1},ppAutoRenewChangeClick:function(b){var c="cancel_pp_subscription"!=b.target.id,d=new bA;d.bind("submit",r(this,function(b){this.ha&&this.ha();var d=this.model.get("currentUser");z.b(d&&d.re?yj:wj,[Boolean(c),"",b])}));d.bind("cancel",r(this,function(){(new X({message:db()})).render()}));c?d.render():(b=new dA({model:this.model}),b.bind("submit",r(this,function(){d.render()})),b.render())},ppUpdateBillingFrequency:function(){var b=new bA;b.bind("submit",r(this,
function(b){this.ha&&this.ha();var d=this.model.get("currentUser");z.b(d&&d.re?yj:wj,[Boolean(!0),this.w,b])}));b.bind("cancel",r(this,function(){(new X({message:db()})).render()}));b.render()},billingFrequencyClick:function(b){this.w=b.target.value},passwordKeyup:function(b){b=$(b.target);var c=b.val();-1!=c.indexOf(this.lk)&&c!=this.lk&&b.val(c.replace(this.lk,""))},openProfileClick:function(){"private"==$('input[name="profile_privacy"]:checked',this.el).val()?this.Pu():(this.model.get("currentUser"),
$('input[name="autoShare"]',this.el).prop({checked:this.gi,disabled:!1}),$('input[name="autoShareListens"]',this.el).prop("checked",this.ji),$('input[name="autoShareLikes"]',this.el).prop("checked",this.ii),$('input[name="autoShareFollows"]',this.el).prop("checked",this.hi),$('input[name="allow_profile_notes"]',this.el).prop({checked:null!=this.hm?null!=this.hm:!0,disabled:!1}),$(".suboptions input",this.el).prop("disabled",!this.gi))},autoShareClick:function(b){if(this.gm(b))return!1;b=$(b.target).is(":checked");
$(".suboptions input",this.el).prop("disabled",!b);b&&(this.ji||this.ii||this.hi||(this.hi=this.ii=this.ji=!0),$('input[name="autoShareListens"]',this.el).prop("checked",this.ji),$('input[name="autoShareLikes"]',this.el).prop("checked",this.ii),$('input[name="autoShareFollows"]',this.el).prop("checked",this.hi));this.gi=b},autoShareListensClick:function(b){if(this.gm(b))return!0;this.ji=this.cq(b)},autoShareLikesClick:function(b){if(this.gm(b))return!0;this.ii=this.cq(b)},autoShareFollowsClick:function(b){if(this.gm(b))return!0;
this.hi=this.cq(b)},cq:function(b){this.gi=0<$(".suboptions input:checked").length;$('input[name="autoShare"]',this.el).prop("checked",this.gi);return $(b.target).is(":checked")},gm:function(b){return $(b.target).is(":checked")&&!this.model.get("facebookAuthenticated")?($(b.target).prop("checked",!1),z.b(kj,r(this,function(c){c&&($(b.target).trigger("click"),this.kz())})),!0):!1},connectButtonClick:function(b){$(b.target).hasClass("facebook")?$(b.target).hasClass("connected")?z.b(lj):z.b(kj):$(b.target).hasClass("connected")?
z.b(ej):T(bv)},connectButtonMouseOver:function(b){b=$(b.target);b.addClass("hover");b.hasClass("connected")&&b.text("Disconnect")},connectButtonMouseOut:function(b){b=$(b.target);b.removeClass("hover");b.hasClass("connected")&&b.text("Connected")},profileNotesClick:function(b){this.hm=$(b.target).is(":checked")},autoRenewShowMore:function(){$("#auto-renew-explanation-showmore",this.el).hide();$("#auto-renew-explanation",this.el).html(this.bN);return!1},accountSubmit:function(){var b=this.model.get("currentUser"),
c=b.Rb,d="no"==$("input[name=explicit_content]:checked",this.el).val(),b=b.zq;$(".formFieldError",this.el).hide();c&&!d&&b?(c=$("#pinUnlock",this.el).val(),pd(c)&&1<=c.length?this.BQ(c):$(".pinUnlockFieldError",this.el).text(ab()).fadeIn()):this.os()},gN:function(b){this.rj=b;this.os()},fN:function(){(new X({message:db()})).render()},BQ:function(b){z.b(Si,{pin:b})},os:function(){var b=this.model.get("currentUser"),c=$("#username",this.el).val(),d=$("#password",this.el).val(),e=$("#birthyear",this.el).val(),
h=$("#zipcode",this.el).val(),l=$("input[name=gender]:checked",this.el).val(),p="no"==$("input[name=explicit_content]:checked",this.el).val(),q=$("#pin",this.el).val(),u=$("#pinConfirm",this.el).val(),y=$("#rescueEmail",this.el).val(),E=$.trim($("input[name=company_name]",this.el).val()),L=$.trim($("select[name=industry] option:selected",this.el).val()),M=!0;d==this.lk&&(d=this.rj,M=!1);$(".formFieldError",this.el).hide();this.VN();var Q=!1;ax(c)||($(".usernameFieldError",this.el).text(da()).fadeIn(),
$("#username",this.el).addClass("error_border"),Q=!0);M&&!bx(d)&&($(".passwordFieldError",this.el).text(ha()).fadeIn(),$("#password",this.el).addClass("error_border"),Q=!0);cx(e)||($(".birthYearFieldError",this.el).text(la()).fadeIn(),$("#birthyear",this.el).addClass("error_border"),Q=!0);/^\s*$/.test(h)&&($(".zipCodeFieldError",this.el).text(pa()).fadeIn(),$("#zipcode",this.el).addClass("error_border"),Q=!0);fx(l)||($(".genderFieldError",this.el).text(ua()).fadeIn(),Q=!0);""!=q&&"Enter PIN"!=q&&
(pd(q)&&1<=q.length||($(".pinFieldError",this.el).text(ab()).fadeIn(),Q=!0),q!=u&&($(".pinFieldError",this.el).text("Pins do not match").fadeIn(),Q=!0),""==q||ax(y)||($(".pinFieldError",this.el).text(da()).fadeIn(),Q=!0));if(!Q){if(null==this.rj){this.Jr=new bA;this.Jr.bind("submit",r(this,this.gN));this.Jr.bind("cancel",r(this,this.fN));this.Jr.render();return}setTimeout(r(this,function(){z.b(ti,{oldusername:b.La,oldpassword:this.rj,newusername:c,newpassword:d,emailOptIn:b.kl,gender:l,birthYear:Number(e),
zipCode:h,contentFilterEnabled:p});this.rj=null}),0);!b.I()||E==b.cw&&L==b.Jq||setTimeout(function(){z.b(zj,[E,L])},0)}return!1},VN:function(){$(".zipCodeFieldError",this.el).removeClass("nag_message_color");$("#zipcode",this.el).removeClass("nag_border error_border");$(".usernameFieldError",this.el).removeClass("nag_message_color");$("#username",this.el).removeClass("nag_border error_border");$(".birthYearFieldError",this.el).removeClass("nag_message_color");$("#birthyear",this.el).removeClass("nag_border error_border");
$("#password",this.el).removeClass("nag_border error_border")},XF:function(b){$(".define_pin",this.el).css("display","none");$(".ask_pin",this.el).css("display","none");var c=b.data.ee.model.get("currentUser");b=b.target.id;var d=c.zq;c.Rb?"explicit_no"!=b&&d&&$(".ask_pin",this.el).css("display","inline-block"):"explicit_yes"!=b&&$(".define_pin",this.el).css("display","inline-block")},xp:function(){z.b(Ti,{});return!1},pH:function(b){om(Bl,b.ldata.username);$(".submit_btn",this.el).css("opacity",
"0.5");$(".submit_btn",this.el).css("filter","alpha(opacity=50)");$(".ask_pin",this.el).fadeOut("slow");$(".define_pin",this.el).fadeOut("slow");b=$("#pin",this.el).val();var c=$("#rescueEmail",this.el).val();""!=b&&"Enter PIN"!=b?z.b(Ri,{pin:b,rescueEmail:c}):($(".submit_btn",this.el).blur(),$(".saved_text",this.el).css("display","inline").delay(this.tn).fadeOut(1500))},ZJ:function(){$(".submit_btn",this.el).blur();$(".submit_btn",this.el).css("opacity","0.5");$(".submit_btn",this.el).css("filter",
"alpha(opacity=50)");$(".saved_text",this.el).css("display","inline").delay(this.tn).fadeOut(1500)},gI:function(b){b.explicitPINVerified?this.os():(new X({message:Eb()})).render()},fI:function(){Jn(this.model.get("currentUser"));$(".submit_btn",this.el).blur();$(".saved_text",this.el).css("display","inline").delay(this.tn).fadeOut(1500,r(this,function(){$("#pin",this.el).val("");$("#pinConfirm",this.el).val("");$("#rescueEmail",this.el).val("");$("#pinUnlock",this.el).val("")}))},eI:function(){(new X({message:bb()})).render()},
eE:function(){this.checked?$('input[name="artist_message"]',this.el).removeAttr("disabled").prop("checked",!0):$('input[name="artist_message"]',this.el).attr("disabled",!0).prop("checked",!1)},EH:function(b){this.Mv=!0;this.gf=b},deleteAccountLinkClick:function(){var b=Hx("deleteAccountPopup",$("#deleteAccountConfirmHeaderTmpl").tmpl(),$("#deleteAccountConfirmContentTmpl").tmpl(),$("#deleteAccountConfirmFooterTmpl").tmpl());$(this.el).append(b);b.bind("closed",r(this,function(){$(".select",b).unbind("click");
b.remove()}));this.logDeleteEvent("delete_account_tapped");return!1},cancelDeleteAccountClick:function(){Ix();this.logDeleteEvent("are_you_sure_keep_account _tapped")},removeEventListeners:function(){z.ma(this,Tg);z.ma(this,Zh)},deleteAccountConfirmClick:function(){Ix();var b=this.model.get("currentUser"),c={},c=b.Oa()||Mn(b)?Hx("deleteAccountPopup",$("#deleteAccountEmailHeaderTmpl").tmpl(),$("#deleteAccountEmailContentTmpl").tmpl(),$("#deleteAccountEmailFooterTmpl").tmpl()):Hx("deleteAccountPopup",
$("#deleteAccountPasswordHeaderTmpl").tmpl(),$("#deleteAccountPasswordContentTmpl").tmpl(),$("#deleteAccountPasswordFooterTmpl").tmpl());$(this.el).append(c);c.bind("closed",r(this,function(){this.removeEventListeners;$(".select",c).unbind("click");c.remove()}));this.logDeleteEvent("are_you_sure_delete_account_tapped");return!1},deleteAccountClick:function(){var b=$(this.el).find(".deleteError"),c=$(this.el).find(".emailField").val();b.text("");b.hide();this.logDeleteEvent("are_you_sure_delete_account_tapped");
var d=this.model.get("currentUser");z.c(Tg,r(this,function(){this.removeEventListeners;if(d.Oa()||Mn(d)){var b=Hx("deleteAccountPopup",$("#deleteAccountEmailConfirmHeaderTmpl").tmpl(),$("#deleteAccountEmailConfirmContentTmpl").tmpl({email:c}),$("#deleteAccountEmailConfirmFooterTmpl").tmpl());$(this.el).append(b);b.bind("closed",r(this,function(){$(".select",b).unbind("click");b.remove()}))}else{Ix();z.b(oi);for(var h=document.cookie.split(";"),l=0;l<h.length;l++){var p=h[l],q=p.indexOf("=");document.cookie=
(-1<q?p.substr(0,q):p)+"=;expires="+(new Date(0)).toUTCString()+"; path=/;"}$.cookie("_sl_toast",Na());window.location.reload(!0)}}));z.c(Zh,r(this,function(c){b.text(c);b.show();this.removeEventListeners}));z.b(Ij,{password:$(this.el).find(".passwordField").val(),email:$(this.el).find(".emailField").val(),accountType:d.Qj});return!1},logDeleteEvent:function(b){var c=this.model.get("currentUser");b={action:b,M2:c.t||null,f3:t,x2:pe,o2:z.$a,z2:"web",y2:"web",t2:(new Date).format("yyyy-mm-dd HH:MM:ss",
!0)};s("delete_account_action",b,c);return!1},p4bLearnMoreClick:function(){s("pandoraone_submit_click",{vendor_id:t,action:"business_learn"},this.model.get("currentUser"));T(Vu,{source:"one"});return!1},p4bUpgradeClick:function(){s("pandoraone_submit_click",{vendor_id:t,action:"business_upgrade"},this.model.get("currentUser"));T(Su,{cancelCallback:function(){V("/account/billing",!0,!1)}});return!1}});function HA(){}
HA=Backbone.View.extend({initialize:function(){},el:$("#mainContent .audioQuality"),render:function(){$(this.el).append($("#audioQualitySettingsTmpl").tmpl({normalQualityAudio:!0==jm(Xl)}));$(this.el).show()},events:{"click .submit_btn":"saveClick","click #quality_high":"enableSave","click #quality_normal":"enableSave"},enableSave:function(){$(".submit_btn").css("opacity","1.0");$(".submit_btn").css("filter","alpha(opacity=100)")},saveClick:function(){T(Cu,{low:0<$("#quality_normal:checked",this.el).length});
this.eP();return!1},eP:function(){$(".submit_btn",this.el).blur();$(".submit_btn",this.el).css("opacity","0.5");$(".submit_btn",this.el).css("filter","alpha(opacity=50)");$(".saved_text",this.el).css("display","inline").delay(4E3).fadeOut(1E3)}});function GA(){}
GA=Backbone.View.extend({initialize:function(){this.ud=this.options.cancelHash},render:function(){var b=this.model.get("currentUser");s("account_audio_page_hit",{vendor_id:t},b);$(this.el).append($("#audioQualityUpsaleTmpl").tmpl({isUserAUNZ:b.Va,offerAnnualSub:b.te,monthlyPrice:Sx(Zn(b)),annualPrice:Sx(b.be.toString()),showTrial:b.qh,showBusinessOffer:b.Tb})).show();return this},events:{"click #upgrade_now":"upgradeNowClick","click #start_trial":"startTrialClick"},upgradeNowClick:function(){var b=$("input[name='frequency']:checked",
this.el).val();T(Nu,{billingFrequency:b,cancelCallback:r(this,function(){V(this.ud,!0,!0)})});return!1},startTrialClick:function(){V("/one/trial/start",!0,!0)}});function KA(){}
KA=Backbone.View.extend({initialize:function(){U(av,r(this,this.render))},el:$("#mainContent .genres"),render:function(b){var c=b.category;if(null==c||""==c)c="top";var d="/content/genre/"+c,e=b.station;if(e)d+="/"+e;else if($("#genre_stations",this.el).attr("data-category")==c){this.gz();return}Jz(d,{},r(this,function(b,c){if("success"==c)if(e){var d=$(b).filter("a").data("musicid");$(window).scrollTop(0);$("#mainContent").children().hide();$("#mainContent .station").show();T(zu,d)}else $(this.el).empty().append(b),this.gz()}),
function(){z.b(Hh)},!0)},gz:function(){$(".playGenreStation",this.el).show();var b=$(".genre_station_menu li.selected",this.el).find(".genreCategory");0<b.length&&(b=b.attr("data-code"),T(Ow,{gcat:b}));b="/music/"+$("#genre_stations",this.el).attr("data-category");My()!=b&&V(b,!1,!1)},events:{"click ul > a":"genreClick","click .playGenreStation":"playGenreStationClick"},playGenreStationClick:function(b){var c=this.model.get("currentUser");if((null==c||c.p())&&Ry(this.model))return T(jv,{onSuccessRedirect:My()}),
!1;b=$(b.target).attr("data-musicid");z.b(Ci,{stationCode:"mi"+b,source:"genre"});return!1},genreClick:function(b){var c=$(b.target).attr("data-code");c&&$(b.target).hasClass("selected")&&T(Ow,{gcat:c});return!0}});function uA(b,c){this.Kh=$("img:first",b);this.Ma=$(".listenerstip_container",b).show().css("visibility","hidden");this.Vb=this.Jb=null;this.FQ=c.viewerIsAnon;c.viewerListenerId&&0<$(".follow_button[data-listenerid='"+c.viewerListenerId+"']",b).length||($(this.Kh).hover(r(this,this.Kf),r(this,this.Lf)),z.c(Kf,r(this,this.iq)),z.c(Of,r(this,this.uq)),z.c(Lf,r(this,this.vq)),U(ou,r(this,this.hide)))}
function Kz(b,c){null!=c&&fe(c.Z)&&$(".listener[data-webname='"+c.Z+"']",b).remove();var d=$("#listeners_grid .listener",b),e=d.length;if(9>=e)$("#listeners_grid .listener",b).show();else for(;9>$("#listeners_grid .listener:visible",b).length;)$(d[parseInt(Math.random()*e,10)]).show();$("#listeners_grid .listener:visible",b).each(function(b,d){new uA($(d),{viewerIsAnon:null==c||c.p()})})}f=uA.prototype;
f.Kf=function(){this.Vb?this.ni():(this.cc(),this.Jb=setTimeout(r(this,function(){this.cc();this.show()}),500));return!1};f.Lf=function(){this.cc();this.Vb||(this.Vb=setTimeout(r(this,function(){this.ni();this.hide()}),500));return!1};f.cc=function(){null!=this.Jb&&(clearTimeout(this.Jb),this.Jb=null)};f.ni=function(){this.Vb&&(clearTimeout(this.Vb),this.Vb=null)};
f.show=function(){if(!this.visible){this.visible=!0;$(document.body).append(this.Ma.remove());$(this.Ma).hover(r(this,this.Kf),r(this,this.Lf));$(".follow_button",this.Ma).click(r(this,this.LL));$(".profile_name",this.Ma).click(r(this,this.hide));$(".album",this.Ma).click(r(this,this.hide));$(this.Ma).hide();$(this.Ma).css("visibility","visible");$(this.Ma).fadeIn(200);var b=this.Kh.offset(),c=b.left-17+this.Kh.outerWidth()/2,b=b.top-(this.Ma.height()+8)+this.Kh.scrollTop();0<=c&&0<=b&&$(this.Ma).offset({top:b,
left:c});$(".album_cvr a",this.Ma).each(function(b,c){if(0==$("img",c).length){var h=$(c).attr("data-img");$(c).html('<img src="'+h+'" width="50" height="50">')}});T(fv,this.Ma)}};f.hide=function(){this.visible&&(this.visible=!1,$(this.Ma).fadeOut(200,r(this,function(){if(0<$(this.Kh).length)try{$(this.Kh).append(this.Ma.remove())}catch(b){k.debug("failed to return hovercard to its original position")}})),T(gv,this.Ma))};
f.LL=function(b){if(this.FQ)T(jv);else{if(!$(b.target).hasClass("cannotFollow")){var c=$(b.target).data("webname");$(b.target).hasClass("followable")?z.b(Ej,{webName:c,ui_id:"fans"}):$(b.target).hasClass("following")?z.b(Fj,{webName:c,ui_id:"fans"}):$(b.target).hasClass("blocked")?(b=$(b.target).attr("data-listenerid"),z.b(Hj,b)):k.error("Unhandled follow state: ",$(b.target))}return!1}};
f.iq=function(b){var c=$(".follow_button",this.Ma);b.webName==c.data("webname")&&(c.removeClass("followable"),c.addClass("following"),c.removeClass("hover"))};f.vq=function(b){var c=$(".follow_button",this.Ma);b.webName==c.data("webname")&&(c.removeClass("following"),c.addClass("followable"),c.removeClass("hover"))};f.uq=function(b){var c=$(".follow_button",this.Ma);b==c.attr("data-listenerid")&&(c.removeClass("blocked"),c.addClass("followable"),c.removeClass("hover"))};function tA(b,c){this.dr=b;this.cG=b.attr("feedId");this.t=b.attr("listenerId");this.dN=b.attr("ownerName");this.Z=b.attr("webName");this.ow="true"==b.attr("deleteCompletely");this.Nq=c;this.el=$("#feedHideMenuTmpl").tmpl({listenerId:this.t,ownerName:this.dN,isComment:this.ow});$(".feed_unfollow",this.el).truncate({width:120});b.click(r(this,this.Kf));b.mouseout(r(this,this.Lf));this.el.hover(r(this,this.Kf),r(this,this.Lf));$(".feed_hide_post",this.el).click(r(this,this.hK));$(".feed_unfollow",this.el).click(r(this,
this.tt));$(".feed_report_spam",this.el).click(r(this,this.QN));$(".block_user",this.el).click(r(this,this.xE));$("body").append($(this.el));this.el.css("visibility","hidden")}f=tA.prototype;f.Kf=function(){this.Vb?this.ni():(this.cc(),this.Jb=setTimeout(r(this,function(){this.cc();this.show()}),200));return!1};f.Lf=function(){this.cc();this.Vb||(this.Vb=setTimeout(r(this,function(){this.ni();this.hide()}),500));return!1};f.cc=function(){null!=this.Jb&&(clearTimeout(this.Jb),this.Jb=null)};
f.ni=function(){this.Vb&&(clearTimeout(this.Vb),this.Vb=null)};f.show=function(){$(this.el).attr("visible",!0);this.position();$(this.el).hide();$(this.el).css("visibility","visible");$(this.el).fadeIn(200)};f.hide=function(){$(this.el).attr("visible",!1);$(this.el).fadeOut(200,r(this,function(){$(this.el).css("visibility","hidden");$(this.el).show()}))};f.position=function(){var b=this.dr.offset();$(this.el).offset({top:b.top+this.dr.height()-1,left:b.left-this.el.width()+this.dr.width()})};
f.hK=function(){z.b(fj,{feedId:this.cG,isActivityDelete:this.Nq,deleteCompletely:this.ow});this.hide();return!1};f.Bq=function(){z.b(gj,this.t);this.hide();return!1};f.tt=function(){z.b(Fj,{webName:this.Z,ui_id:null,listenerId:this.t});this.hide();return!1};f.QN=function(){window.open("/legal/community-guidelines","_blank");this.hide();return!1};f.xE=function(){z.b(Gj,this.t);this.hide();return!1};function LA(){}
LA=Backbone.View.extend({initialize:function(){var b=this.options.path;0==b.indexOf("/music/")?(b=ce(b),this.ub={type:"profile",subtype:"fansOfGenreStation",content:"true",q:b[1]+"/"+b[2]}):0==b.indexOf("/station/")?this.ub={type:"profile",subtype:"fansOfStation",content:"true",q:b.split("/")[2]}:this.ub={type:"profile",subtype:"fansOfArtist",content:"true",q:ce(b)[0]}},render:function(){T(Kw);Jz("/content/fansof.vm",this.ub,r(this,this.JL));return this},close:function(){Ez(this)},events:{"click .listeners_menuItem":"menuItemClick",
"click .createStation":"createStationClick","click .more":"moreClick"},JL:function(b){$(this.el).append(b);b=$(".backstage",this.el).attr("data-canonical");fe(b)&&-1==My().indexOf(b)&&V(b,!1,!1)},menuItemClick:function(b){b=b.target.id;$(".listeners_content_title").text(b);$(".listeners_menuItem").toggleClass("selected",!1);$(".listeners_menuItem[id='"+b+"']").toggleClass("selected",!0);return!1},createStationClick:function(b){var c=$(b.target).attr("data-station-id");b=$(b.target).attr("data-music-id");
fe(c)?z.b(Ci,{stationCode:"fs"+c}):fe(b)&&z.b(Ci,{stationCode:"mi"+b});return!1},moreClick:function(b){$(b.currentTarget).fadeOut();var c=$(b.currentTarget).attr("data-currentoffset"),d=$(b.currentTarget).attr("data-nextoffset");c&&d?(this.ub.countRowsOnBrowser=c,this.ub.countRowsNeeded=d,Jz("/content/fansof.vm",this.ub,r(this,function(b){$(".sections",this.el).append(b)}))):$(b.currentTarget).closest(".section_page").next().fadeIn();return!1}});function MA(){}
MA=Backbone.View.extend({initialize:function(){U(Lu,r(this,this.mJ));U(Mu,r(this,this.mq))},el:$("#mainContent .capping"),mJ:function(){var b=$("#CapInfoTmpl").tmpl();$(this.el).empty().append(b);$("#mainContent").children().hide();$(this.el).show()},mq:function(){var b={},c=this.model.get("currentUser"),d=My();d&&(0<=d.indexOf("/payment")||0<=d.indexOf("paypal/confirm"))||(b.capHours=c.er,b.username=c.La,b.nextMonth=cy.UG(),b=$("#CapReachedTmpl").tmpl(b),$(this.el).empty().append(b),$("#mainContent").children().hide(),
$(this.el).show())},events:{"click .upgrade_now":"upgradeFromInfoClick","click .upgrade_btn":"upgradeFromCapClick","click .free_trial":"freeTrailClick","click .pay_99":"pay99Click","click .keep_listening":"keepListeningClick"},upgradeFromInfoClick:function(){T(Nu,{billingFrequency:"ANNUAL",cancelCallback:r(this,function(){T(Lu)})});return!1},upgradeFromCapClick:function(){T(Nu,{billingFrequency:"ANNUAL",cancelCallback:r(this,function(){T(Mu)})});return!1},freeTrailClick:function(){k.error("freeTrail: Not yet implemented");
return!1},pay99Click:function(){T(Xu,r(this,function(){V("",!1,!1);T(Mu)}));return!1},keepListeningClick:function(){T(qu);return!1}});function NA(){}NA=Backbone.View.extend({initialize:function(){this.message=this.options.message;this.bind("close",r(this,this.close))},className:"modal_please_wait",render:function(){$(this.el).append($("#modalPleaseWaitTmpl").tmpl(this.message));return this},close:function(){$(this.el).remove();this.el=null;z.ma(this)}});function OA(){}
OA=Backbone.View.extend({initialize:function(){this.w="MONTHLY";U(Nu,r(this,this.tJ));U(Su,r(this,this.rJ));U(Uu,r(this,this.sJ));U(Tu,r(this,this.TI));U(Xu,r(this,this.lJ));z.c(Bf,r(this,this.Fd));z.c(Cf,r(this,this.Ti));z.c(If,r(this,this.Ti));z.c(Jf,r(this,this.gq));Uy("/payment");Uy("/payment/business")},el:$("#mainContent .payment"),tJ:function(b){this.ub=!1;b&&(this.ub=!0,this.Lc=b.cancelCallback);V("/payment",!0,!0)},rJ:function(b){this.ub=!1;b&&(this.ub=!0,this.Lc=b.cancelCallback);V("/payment/business",
!0,!0)},sJ:function(){this.ub||(this.Lc=function(){T(qu)});var b=this.model.get("currentUser");b&&b.Ta()&&"END_OF_MONTH"!=b.Ta()&&(this.w=b.Ta());b&&b.Tb&&b.s==m.u.Bc()?setTimeout(function(){T(Ou)},0):b&&b.Tb?(s("business_payment_page_hit",{vendor_id:t},this.model.get("currentUser")),z.b(uj,"business")):setTimeout(function(){T(qu)},0)},TI:function(){if(!this.ub){this.Lc=function(){T(qu)};var b=this.model.get("currentUser");b&&b.Ta()&&"END_OF_MONTH"!=b.Ta()&&(this.w=b.Ta())}s("payment_page_hit",{vendor_id:t},
this.model.get("currentUser"));z.b(uj,"p1")},lJ:function(b){V("/payment/99",!0,!0);this.w="END_OF_MONTH";this.Lc=b},Fd:function(b){if(-1!=$.inArray(My(),["/payment","/payment/business","/payment/99"])){var c={99:"payToPlay",p1:"subscriber",p1gift:"p1gift",business:"business"}[b.ctx];if(c){var d=-1!=["subscriber","business"].indexOf(c)?this.CG():"#PaymentTmpl";$("#mainContent").children().hide();this.fc=new JA({model:this.model,showPleaseWait:r(this,this.ha),hidePleaseWait:r(this,this.H)});b=this.fc.render(b,
d,c,!0,!0,this.w,r(this,function(){this.fc=null;this.Lc&&this.Lc()})).el;$(this.el).empty().append(b).show();(b=this.model.get("currentUser"))&&b.Mr?($("#paypal_form",this.el).hide(),$("#paypal_select_container",this.el).hide(),$("#credit_select",this.el).prop("checked",!0),$("#creditcard_form",this.el).show()):"payToPlay"==c&&($("#credit_select").prop("checked",!0),$("#paypal_form",this.el).hide(),$("#creditcard_form",this.el).show())}else k.error("Unknown payment context: ",b.ctx)}},gq:function(){if(-1!=
$.inArray(My(),["/payment","/payment/business","/payment/99"]))return this.Fd({ctx:"p1"}),(new X({message:cb()})).render(),!1},CG:function(){var b="#PaymentTmpl",c=this.model.get("currentUser");if(c&&!c.re){var d=c.s,e=d==m.u.Bc()||d==m.u.fg();if(d==m.u.un()||e&&30>=c.yc)b="#RenewalTmpl"}return b},ha:function(){this.S||($(window).scrollTop(0),this.S=new NA({model:this.model,message:hd()}),$("#main").append(this.S.render().el))},H:function(){this.S&&(this.S.trigger("close"),this.S=null)},Ti:function(b){if("/account/billing"!=
My()&&this.fc){this.model.set({capped:!1,blueBarMessage:null});z.b($h);var c=null;if(b.lastGiftCode)V("/showgift/"+b.lastGiftCode+"."+b.lastGiftHash,!1,!1);else{T(qu);var d=b.listenerState;if("PAY_TO_PLAY"==d)c=kd();else if("SUBSCRIBER"==d){if(d=this.model.get("currentUser"))c=$.trim($("#period_amount",this.el).text()),d=ql.encrypt(d.t),np("https://4177752.fls.doubleclick.net/activityi;src=4177752;type=purch024;cat=purch865;qty=1;;ord=;cost="+c+";u1="+d,function(){},function(){});c=id();z.b(gg)}else"BUSINESS"==
d&&(c=jd(),z.b(hg),setTimeout(function(){T(Qu)},0))}this.fc.Ti(b,c);$(this.fc.el).remove();this.fc=null}},events:{"click #paypal_select":"paypalSelect","click #credit_select":"creditCardSelect"},paypalSelect:function(){s("payment_paypal_select",{vendor_id:t},this.model.get("currentUser"));$("#creditcard_form",this.el).hide();$("#paypal_form",this.el).show()},creditCardSelect:function(){s("payment_creditcard_select",{vendor_id:t},this.model.get("currentUser"));$("#paypal_form",this.el).hide();$("#creditcard_form",
this.el).show()}});function PA(){}
PA=Backbone.View.extend({initialize:function(){this.Wi=this.options.hashTag;z.c(rh,r(this,this.bI));Uy("/norenew");this.bind("close",r(this,this.close))},className:"expired_account_container clearfix",render:function(){var b=this.model.get("currentUser"),b={payment_method:b.Lr,monthlyPrice:Sx(Zn(b)),isUserAUNZ:b.Va};$(this.el).append($("#expiration-"+this.Wi+"Tmpl").tmpl(b));$(window).scrollTop(0);$("#footer .browseGenres").hide();"subscribe"==this.Wi&&(b=this.model.get("currentUser"),s("subexp_viewed",
{isTrial:"true"},b));return this},close:function(){$(this.el).remove();this.el=null;$("#footer .browseGenres").show();z.ma(this)},bI:function(){},events:{"click .confirm":"confirmClick","click .nothanks":"noThanksClick","click .continue":"continueClick","click .noaction":"noactionClick"},confirmClick:function(){var b=this.model.get("currentUser"),c=r(this,function(){V("/"+this.Wi,!0,!0)});ao(b)?T(Su,{cancelCallback:c}):T(Nu,{billingFrequency:b.Ta(),cancelCallback:c});"subscribe"==this.Wi&&s("subexp_sub_clicked",
{isTrial:"true"},b);return!1},noThanksClick:function(){this.model.set({blueBarMessage:null});$(this.el).fadeOut(200,r(this,function(){$(this.el).empty().append($("#renewalNoThanksTmpl").tmpl()).fadeIn()}));if("subscribe"==this.Wi){var b=this.model.get("currentUser");s("subexp_cancel_clicked",{isTrial:"true"},b)}V("/norenew",!1,!0);return!1},continueClick:function(){var b=this.model.get("currentUser");b&&b.rb==m.pa.Ln()?(z.b($k),b.rb=null,z.b(Mf,b),s("coderot_check",{coderot_id:"a6877ffc-a4a3-11e3-be40-425861b86ab6"},
b)):b&&!b.dt&&z.b(Cj);return!0},noactionClick:function(){T(qu);return!0}});function QA(){}
QA=Backbone.View.extend({initialize:function(){this.Sb=!1;this.w="MONTHLY";this.Xa={};U(rv,r(this,this.My));U(Xw,r(this,this.ah));z.c(Be,r(this,this.zf));z.c(Ae,r(this,this.Ua));z.c(Mg,r(this,this.lb));z.c(dh,r(this,this.YH));z.c(Bf,r(this,this.Fd));z.c(Tf,r(this,this.vI));z.c(qh,r(this,this.XH));z.c(Uh,r(this,this.WH));z.c(wk,r(this,this.BJ));z.c(Vh,r(this,this.xx))},el:$("#mainContent .redemption"),render:function(b){b&&(this.Db=b);this.yd()},yd:function(){$("#mainContent").children().hide();this.model.set({modalPanel:au});
var b=this.model.get("currentUser");if(b.p())if(this.model.get("hasStations")){var c=this.model.get("stationList").pluck("stationName");c.shift();b=$("#hasStationsTmpl").tmpl({stations:c});$("#mainContent .redemption").empty().append(b).show();$("#noBtn").click(r(this,function(){this.O="newUser";z.b(si)}));$("#yesBtn").bind("click",this,this.Ly)}else b=$("#redeemChoicesTmpl").tmpl({stations:c}),$("#mainContent .redemption").empty().append(b).show(),$("#existingUserBtn").click(r(this,this.Dp)),$("#newUserBtn").click(r(this,
this.Ly));else b=$("#redeemSignedInTmpl").tmpl({username:b.La}),$("#mainContent .redemption").empty().append(b).show(),$("#redeemSignedInBtn").click(r(this,this.gP)),$("#notMeLink").click(r(this,this.pr))},Xi:function(){$("#mainContent .redemption").empty()},jf:function(){this.render();return!1},ha:function(){this.S||($(window).scrollTop(0),this.S=new NA({model:this.model,message:hd()}),$("#main").append(this.S.render().el))},H:function(){this.S&&(this.S.trigger("close"),this.S=null)},zf:function(){"redeem"==
this.O?(setTimeout(r(this,function(){z.b(Rj,this.Db)}),500),this.O=null,this.jr=!0):this.Xi()},Ua:function(){if(!this.O)this.Xi();else if("logout"==this.O)this.O=null,setTimeout(r(this,function(){z.b(pi,this.ai);this.ai=null;this.O="redeem"}),300);else if("newUser"==this.O||"existingUser"==this.O)this.O=null,setTimeout(r(this,function(){this.yd()}),300)},YH:function(b){this.O&&(k.info("reg failed: "+b),this.O=null,(new X({message:Lb()+b})).render(),this.yd())},gP:function(){if(this.Db)z.b(Rj,this.Db);
else{var b={},c=this.model.get("currentUser");if(c&&Mn(c)){b.vendorBilledTmpl="#vendorBilledTmpl";var d="Third Party Vendor";c.Qj&&(d=c.Qj);b.vendor=d}$("#mainContent").find(".redemption").empty().append($("#redeemNowTmpl").tmpl(b));$(".redeem_field").click(this.vg);$("#redeemNowBtn").click(r(this,function(){this.Db=$("#giftcode").val().trim();mx(this.Db)?z.b(Rj,this.Db):$(".error").text(ib()).fadeIn()}));$("#goBackBtn").click(r(this,function(){this.jf()}))}return!1},pr:function(){RA("/giftredeem");
z.b(oi);return!1},Bi:function(){var b=$("#giftcode").val().trim(),c=$("#email").val(),d=$("#password").val(),e=$("#birthyear").val(),h=$("#zipcode").val(),l=$("input[name=gender]:checked").val(),p=$("input[name=optin]").is(":checked"),q=$("input[name=terms]").is(":checked"),u=$("input[name=remember]").is(":checked"),y=!1;mx(b)||($("#codeError").text(ib()).fadeIn(),y=!0);ax(c)||($("#emailError").text(jb()).fadeIn(),y=!0);bx(d)||($("#passwordError").text(lb()).fadeIn(),y=!0);cx(e)?dx(e)||($("#birthyearError").text(oa()).fadeIn(),
y=!0):($("#birthyearError").text(oa()).fadeIn(),y=!0);ex(To(),h)||($("#zipcodeError").text(Uo()).fadeIn(),y=!0);fx(l)||($("#genderError").text(ua()).fadeIn(),y=!0);q||($("#termsError").text(ta()).fadeIn(),y=!0);y||(this.Db=b,b={username:c,password:d,birthYear:Number(e),zipCode:h,emailOptIn:p,gender:l,keepLoggedIn:u},"logout"==this.O?(this.ai=b,z.b(oi)):(this.model.set({modalPanel:"REDEMPTION_PANEL"}),z.b(pi,b)));return!1},Ly:function(){$("#mainContent .redemption").empty().append($("#redeemRegisterTmpl").tmpl({giftcode:this.Db}));
$("#redeemNowBtn").click(r(this,function(){this.O="redeem";this.Bi()}));$("#goBackBtn").click(r(this,function(){this.O=null;this.jf()}));$(".redeem_field").click(r(this,this.vg));return!1},My:function(){$("#mainContent .redemption").empty().append($("#redeemRegisterTmpl").tmpl({giftcode:this.Db}));$(".redeem_field").click(this.vg);$("#redeemNowBtn").click(r(this,function(){this.O="logout";this.Bi()}));$("#goBackBtn").click(r(this,function(){this.O=null;this.jf()}));return!1},Dp:function(){this.O=
"existingUser";T(jv,{giftRedemptionMode:!0,allowWhenLoggedIn:!0,onSuccessRedirect:My()});return!1},Fd:function(b){if("/gift"==My()){var c=this.model.get("currentUser");b=b.cdata;for(var d={years:[],months:[]},e=(new Date).getFullYear(),h=0;12>h;h++)d.years.push(e+h),9>h?d.months.push("0"+(h+1)):d.months.push(h+1);null==b?(d.zipcode="",ex(To(),c.tb())?d.zipcode=c.tb():d.zipcode=""):(d.customerName=b.customerName,d.zipcode=b.zipcode,d.displayableCardNumber=b.displayableCardNumber,d[b.cardCompany.toLowerCase()]=
"checked",d.expirationMonth=b.expirationMonth,d.expirationYear=b.expirationYear);d.billingFrequency=this.w?this.w:"MONTHLY";d.offerAnnualSub=c.te;d.trialDuration=c.Zy.toString();d.monthlyPrice=Sx(Zn(c));d.annualPrice=Sx(c.be.toString());d.isUserAUNZ=c.Va;d.isV2="V2"===c.Rj;b=$("#GiftPaymentTmpl").tmpl(d);$(this.el).empty().append(b);c.Mr&&($("#paypal_form",this.el).hide(),$("#paypal_select_container",this.el).hide());$(this.el).show()}},XH:function(b){var c=b.code;b=new X({message:Kb()+b.message});
c==m.d.fB()?z.b(uj,"PaymentBackedGift"):(this.jr?(this.jr=!1,b.render(),c!=m.d.xn()&&c!=m.d.yn()||this.yd()):b.render(),this.Db=null);return!1},vI:function(){var b=hb(),c;c=this.model.get("currentUser").yc;365<c&&(b=new Date,b.setDate(b.getDate()+c),b=gb([b.toDateString()]));this.H&&this.H();(new X({message:b})).render();this.jr?this.model.set({modalPanel:"REGISTERED_PANEL"}):(this.model.set({modalPanel:au}),T(qu));this.Db=null;return!1},BJ:function(b){(b=b.redirectUrl)?window.location.href=b:this.xx()},
WH:function(b){(new X({message:b})).render();this.H&&this.H()},xx:function(){var b=oc();(new X({message:b})).render();this.H&&this.H()},events:{"click .bill_freq_input":"billingFrequencySelect","click #paypal_select":"paypalSelect","click #credit_select":"creditCardSelect","click #redeem_gift_pp":"redeemGiftPP","click #redeem_gift_cc":"redeemGiftCC","focusout #zip":"zipcodeFocus","keyup #zip":"zipcodeFocus","blur #zip":"zipcodeFocus","change #zip":"zipcodeFocus","focus .payment_field_validated":"clearErrors",
"keyup .payment_field input":"inputModified","change .payment_field select":"inputModified","change .subscription_selection input":"inputModified"},billingFrequencySelect:function(b){this.w=b.target.value},paypalSelect:function(){$("#creditcard_form",this.el).hide();$("#paypal_form",this.el).show()},creditCardSelect:function(){$("#paypal_form",this.el).hide();$("#creditcard_form",this.el).show()},inputModified:function(b){if(!this.Sb)return this.Sb=!0,this.enableSubmit(b)},zipcodeFocus:function(){this.bc("ANNUAL",
"ANNUAL");this.bc("MONTHLY","MONTHLY");return!0},enableSubmit:function(b){!this.Sb||this.ne()||$(b&&b.target).hasClass("zipcode")||$(".pay_now",this.el).removeAttr("disabled");return!1},clearErrors:function(b){$(b.target).siblings(".paymentFieldError").hide();$(b.target).siblings(".formFieldError").hide()},redeemGiftPP:function(){1==$("input[name='agreePP']:checked",this.el).length!=!0?$(".agreePPFieldError",this.el).text(ad()).fadeIn():(this.ha&&this.ha(),$(window).scrollTop(0),z.b(vk,[this.Db,this.w,
Ro()]));return!1},redeemGiftCC:function(){this.model.get("currentUser");var b=$.trim($("input[name='name']",this.el).val()),c=$("input[name='cardnumber']",this.el).val(),d=kx(c),e=$("select[name='expirationdate_month'] option:selected",this.el).val(),h=$("select[name='expirationdate_year'] option:selected",this.el).val(),l=$("input[name='securitycode']",this.el).val(),p=$("input[name='zipcode']",this.el).val(),q=1==$("input[name='agreeCC']:checked",this.el).length,u=Ro(),y=this.ke(b,d,p,l,c,e,h);
!0!=q&&($(".agreeCCFieldError",this.el).text(ad()).fadeIn(),y.push(ad()));0==y.length?(this.ha&&this.ha(),z.b(uk,[this.Db,this.w,d,b,c,Number(e),Number(h),l,p,u])):(new X({message:y.join("<br>")})).render();return!1},Bg:function(){$("#redeem_gift_cc",this.el).attr("disabled","disabled")},ke:function(b,c,d,e,h,l,p){$(".paymentFieldError",this.el).hide();$(".formFieldError",this.el).hide();var q=[];if(null==b||0==b.length)$(".nameFieldError",this.el).text(fd()).fadeIn(),q.push(fd());ex(To(),d)||($(".zipcodeFieldError",
this.el).text(Uo()).fadeIn(),q.push(Uo()));gx(e)||($(".securitycodeFieldError",this.el).text(bd()).fadeIn(),q.push(bd()));hx(h)&&jx(c)||($(".cardNumberFieldError",this.el).text(dd()).fadeIn(),q.push(dd()));lx(l,p)||($(".expriationFieldError",this.el).text(ed()).fadeIn(),q.push(ed()));return q},ne:function(){return this.Xa&&0<Object.keys(this.Xa).length},bc:function(b,c){if(b&&b.length){$("#salestax_amount."+c,this.el).html("");var d=$("input[name='zipcode']",this.el).val(),e=this.model.get("currentUser");
if(d&&d.length==(e.Va?4:5)){if(c in this.Xa)return;this.Xa[c]=!0;T(Ww,new Dy(d,b,c,!1))}this.Bg()}},ah:function(b){if("/gift"==My()){var c=b.tax,d=b.token;b=b.amount;try{c&&b&&($("#salestax_amount."+d,this.el).html(Sx(c)),this.yj[d]=c)}catch(e){}finally{delete this.Xa[d],this.ne()||this.enableSubmit(null)}}},lb:function(){this.H&&this.H()}});function FA(){}
FA=Backbone.View.extend({initialize:function(){this.referrer=this.options.referrer;this.ud=this.options.cancelHash},render:function(){s("account_upgrade_page_hit",{vendor_id:t},this.model.get("currentUser"));T(Pw);var b=this.model.get("currentUser");$(this.el).append($("#upgradeTmpl").tmpl({isUserAUNZ:b.Va,monthlyPrice:Sx(Zn(b)),showTrial:b.qh,showBusinessOffer:b.Tb}))},events:{"click #start_trial":"startTrialClick","click #upgrade_now":"upgradeNowClick","click #learn":"learnMoreClick"},startTrialClick:function(){V("/one/trial/start",
!0,!0)},upgradeNowClick:function(){var b=this.model.get("currentUser");if(null==b||b.p())return T(jv,{onSuccessRedirect:"/payment"}),!1;T(Nu,{cancelCallback:r(this,function(){V(this.ud,!0,!0)})});return!1},learnMoreClick:function(){T(Cw);return!0}});function JA(){}
JA=Backbone.View.extend({initialize:function(){this.vp=!0;this.Pq=!1;this.ha=this.options.showPleaseWait;this.H=this.options.hidePleaseWait;this.Xa={};this.yj={};this.I=this.Vo=this.Sb=this.U2=!1;z.c(fk,r(this,this.DJ));z.c(Oh,r(this,this.Pi));z.c(sh,r(this,this.hq));z.c(yh,r(this,this.hq));z.c(uh,r(this,this.hq));z.c(Mg,r(this,this.lb));U(Xw,r(this,this.ah))},render:function(b,c,d,e,h,l,p){b=b.cdata;this.I="business"==d;this.vp=e;this.Pq=h;this.Lc=p;var q=this.model.get("currentUser");this.w="#PaymentTmpl"===
c||"#RenewalTmpl"===c?l:q.Ta();""==this.w&&q.Xl&&(this.w="ANNUAL");e={years:[],months:[]};h=(new Date).getFullYear();for(l=0;12>l;l++)e.years.push(h+l),9>l?e.months.push("0"+(l+1)):e.months.push(l+1);e.mode=d;e.payText="#RenewalTmpl"===c?"Renew Now":"Pay Now";e.showTerms="#PaymentTmpl"===c;e.showCancelButton=null!=this.Lc;e.showPayButton="#BillingTmpl"!=c;e.monthlyPrice=Sx(Zn(q));e.annualPrice=Sx(q.be.toString());e.businessMonthlyPrice=Sx(q.Uk.toString());e.businessAnnualPrice=Sx(q.Tk.toString());
e.renewal_amount=Sx(Tx(q,this.w));e.renewal_period=Ux(this.w);e.isUserAUNZ=q.Va;e.offerAnnualSub=q.te||q.I();e.expirationDate=(new Date((new Date).getTime()+864E5*parseInt(q.yc,10))).format("m/d/yy");e.expiredSubscriber="EXPIRED_SUBSCRIBER"==q.s;e.showPaypalOrderConfirmScreen=Io();e.username=q.La;e.billingFrequency=this.w;e.isV2="V2"===q.Rj;e.subscriptionTitle=this.I?"Pandora for Business":"Pandora One";e.subscriptionTitleWithTagline=this.I?"Pandora for Business":"Pandora One - Ad Free, More Skips, and Fewer Timeouts";
e.showBusinessOffer=!this.I&&q.Tb;e.showBusinessLink=!this.I&&q.Tb;d=!1;(this.yq=null!=b)?(d=b.autoRenew,e.customerName=b.customerName,e.zipcode=b.zipcode,e.displayableCardNumber=b.displayableCardNumber,e[b.cardCompany.toLowerCase()]="checked",e.expirationMonth=b.expirationMonth,e.expirationYear=b.expirationYear,b=$(c).tmpl(e),$("#delete_card",b).show(),$("#delete_card",b).click(r(this,function(){confirm("Are you sure?")&&z.b(Vj,null);return!1}))):(e.zipcode="",ex(To(),q.tb())?e.zipcode=q.tb():e.zipcode=
"",b=$(c).tmpl(e));Vx(b,d);"#BillingTmpl"!=c&&"END_OF_MONTH"==this.w&&$("#end_of_month_select",b).hide();this.el&&$(this.el).empty();$(this.el).append(b);$(".payment_summary",this.el).hide();$(".payment_summary."+this.w,this.el).show();this.bc(this.w,"renewal_summary");this.zipcodeFocus(null);var u=this.el,y=this.I;$(window).on("unload",function(){var b=$("input[name='cardnumber']",u).val();s(y?"business_abandon_cart":"p1_abandon_cart",{vendor_id:t,card_name_empty:!$.trim($("input[name='name']",u).val()),
card_empty:!b,cvv_empty:!$("input[name='securitycode']",u).val(),zip_empty:!$("input[name='zipcode']",u).val(),payment_type:$("#paypal_select:checked").val()?"paypal":kx(b)},q);tp(null)});return this},tO:function(){$(".payment_form")},DJ:function(b){(b=b.redirectUrl)?window.location.href=b:(b=jc(),(new X({message:b})).render(),this.H&&this.H())},Pi:function(b){var c=jc();b&&b.code==m.d.mk()&&(c=Pb());(new X({message:c})).render();this.H&&this.H()},lb:function(){this.H&&this.H()},hq:function(b){this.H&&
this.H();var c=Mb();b&&(b.code==m.d.ZA()?c=Nb():b.code==m.d.YA()?c=gd():b.code==m.d.LB()?c=Ob():b.code==m.d.Je()?c=ja():b.code==m.d.mk()&&(c=Pb()));(new X({message:c})).render();z.b(uj,this.I?"business":"p1")},Ti:function(b,c){this.yq=!0;this.Vo=this.Sb=!1;this.Bg();var d=jQuery.trim($(".settings_rCol .payment_form input[name='cardnumber']").val());if(4<d.length){for(var e="",h=0;h<d.length-8;h++)e+="*";$(".settings_rCol .payment_form input[name='cardnumber']").val(d.substring(0,4)+e+d.substring(d.length-
4))}$(".settings_rCol .payment_form input[name='securitycode']").val("");(new X({message:c?c:eb()})).render();$("#delete_card",this.el).fadeIn();$("#delete_card",this.el).click(r(this,function(){confirm("Are you sure?")&&z.b(Vj,null)}));$("input[name='securitycode']",this.el).prop("disabled",!1);$("input[name='agree']",this.el).prop("disabled",!1);d=this.model.get("currentUser");Vx(this.el,d&&d.ff);this.w=d.Ta();$("#amount.renewal_summary",this.el).text(Sx(Tx(d,this.w)));$("#period.renewal_summary",
this.el).text(Ux(this.w));this.bc(this.w,"renewal_summary");this.zipcodeFocus("");this.H&&this.H()},Xo:function(){$(".paymentFieldError",this.el).hide();$(".formFieldError",this.el).hide()},bc:function(b,c){if(b&&b.length){$("#salestax_amount."+c,this.el).html("");var d=$("input[name='zipcode']",this.el).val(),e=this.model.get("currentUser");if(d&&d.length==(e.Va?4:5)){if(c in this.Xa)return;this.Xa[c]=!0;T(Ww,new Dy(d,b,c,this.I))}this.Bg()}},ah:function(b){var c=b.tax,d=b.token;b=b.amount;try{c&&
b&&($("#salestax_amount."+d,this.el).html(Sx(c)),this.yj[d]=c)}catch(e){}finally{k.info("executing finally"),delete this.Xa[d],this.ne()||this.enableSubmit(null)}},ne:function(){return this.Xa&&0<Object.keys(this.Xa).length},Bg:function(){$(".pay_now",this.el).attr("disabled","disabled")},events:{"click #paypal_continue":"paypalContinueClick","click .p1_submit":"payP1Click","click #p99_pay_now":"pay99Click","click .cancel":"cancelClick","click #cancel_sub_btn":"cancelSubscriptionClick","click .see_details":"seeDetailsClick",
"click #paypal_agree":"clearErrors","click #cc_agree":"clearErrors","click .bill_freq_input":"billingFrequencyClick","focus .payment_field_validated input":"clearErrors","focus .payment_field_validated select":"clearErrors","focusout #pzip":"zipcodeFocus","keyup #pzip":"zipcodeFocus","blur #pzip":"zipcodeFocus","change #pzip":"zipcodeFocus","change #paypal_agree":"inputModified","keyup .payment_field input":"inputModified","change .payment_field select":"inputModified","change .subscription_selection input":"inputModified",
"click #are_you_a_business_link":"businessLinkClick"},inputModified:function(b){$(b.currentTarget).is(".subscription_selection input")||(this.Vo=!0);if(!this.Sb)return this.Sb=!0,this.enableSubmit(b)},enableSubmit:function(b){!this.Sb||this.ne()||$(b&&b.target).hasClass("zipcode")||$(".pay_now",this.el).removeAttr("disabled");return!1},seeDetailsClick:function(){$(".details",this.el).fadeIn();$(".see_details",this.el).hide();return!1},cancelSubscriptionClick:function(b){var c=new dA({model:this.model});
c.bind("submit",r(this,function(){this.payP1Click(b)}));c.render()},billingFrequencyClick:function(b){this.w=b.target.value;$(".payment_summary",this.el).hide();$(".payment_summary."+this.w,this.el).show()},zipcodeFocus:function(){this.bc("ANNUAL","ANNUAL");this.bc("MONTHLY","MONTHLY");this.bc("END_OF_MONTH","END_OF_MONTH");return!0},paypalContinueClick:function(){$(window).scrollTop(0);var b=this.model.get("currentUser");this.I&&s("business_payment_page_click",{vendor_id:t,action:"business_"+this.w.toLowerCase(),
payment_type:"paypal"},b);Io()||1==$("input[name='agree']:checked",this.el).length?(this.ha&&this.ha(),z.b(ek,b&&b.re?[this.w,Ro(),this.I]:[this.w,Ro(),this.I,this.vp])):($(".agreeFieldError",this.el).text(ad()).fadeIn(),(new X({message:ad()})).render());return!1},payP1Click:function(b){if($(b&&b.target).hasClass("disabled"))return!1;var c=this.model.get("currentUser");if(!c)return!1;var d=!(b&&"cancel_sub_btn"==b.target.id),e=this.yj[this.w],h=$.trim($("input[name='name']",this.el).val()),l=$("input[name='cardnumber']",
this.el).val(),p=kx(l),q=$("select[name='expirationdate_month'] option:selected",this.el).val(),u=$("select[name='expirationdate_year'] option:selected",this.el).val(),y=$("input[name='securitycode']",this.el).val(),E=$("input[name='zipcode']",this.el).val();b=!$("input#cc_agree",this.el).is(":visible")||$("input#cc_agree",this.el).is(":checked");var L=this.vp,M=Ro(),Q=this.ke(this.w,h,p,E,y,l,q,u,this.Vo);!0!=b&&($(".agreeFieldError",this.el).text(ad()).fadeIn(),Q.push(ad()));this.I&&s("business_payment_page_click",
{vendor_id:t,action:"business_"+this.w.toLowerCase(),payment_type:"creditcard"},this.model.get("currentUser"));0==Q.length?this.yq?(c=new bA,c.bind("submit",r(this,function(b){this.ha&&this.ha();this.Pq?this.vj(this.w,p,h,l,q,u,y,E,d,L,e,M,this.I,b):this.Xj(this.w,p,h,l,q,u,y,E,d,L,e,M,b)})),c.bind("cancel",r(this,function(){(new X({message:db()})).render()})),c.render()):!c.Oa()&&this.Pq?this.vj(this.w,p,h,l,q,u,y,E,d,L,e,M,this.I,""):this.Xj(this.w,p,h,l,q,u,y,E,d,L,e,M,""):(new X({message:Q.join("<br>")})).render();
return!1},clearErrors:function(b){$(b.target).siblings(".paymentFieldError").hide();$(b.target).siblings(".formFieldError").hide()},pay99Click:function(b){if($(b.target).hasClass("disabled"))return!1;b=$("input[name='name']",this.el).val();var c=$("input[name='cardnumber']",this.el).val(),d=kx(c),e=$("select[name='expirationdate_month']",this.el).val(),h=$("select[name='expirationdate_year']",this.el).val(),l=$("input[name='securitycode']",this.el).val(),p=$("input[name='zipcode']",this.el).val(),
q=this.yj.END_OF_MONTH,u=Ro(),y=this.ke("END_OF_MONTH",b,d,p,l,c,e,h,!0);0==y.length?(this.ha&&this.ha(),this.vj(this.w,d,b,c,e,h,l,p,!1,!1,q,u,"",!1,"")):(new X({message:y.join("<br>")})).render();return!1},businessLinkClick:function(){var b=this.model.get("currentUser");s("business_payment_form_upsell",{vendor_id:t,source:0==My().indexOf("/payment")?"payment":"billing"},b);b.s==m.u.Bc()?T(Ou):T(Vu,{source:"payment"});return!1},ke:function(b,c,d,e,h,l,p,q,u){this.Xo();var y=[];if(null==c||0==c.length)$(".nameFieldError",
this.el).text(fd()).fadeIn(),y.push(fd());ex(To(),e)||($(".zipcodeFieldError",this.el).text(Uo()).fadeIn(),y.push(Uo()));ix(b)||($(".billingFieldError",this.el).text(cd()).fadeIn(),y.push(cd()));u&&!gx(h)&&($(".securitycodeFieldError",this.el).text(bd()).fadeIn(),y.push(bd()));hx(l)&&jx(d)||($(".cardNumberFieldError",this.el).text(dd()).fadeIn(),y.push(dd()));lx(p,q)||($(".expriationFieldError",this.el).text(ed()).fadeIn(),y.push(ed()));return y},cancelClick:function(){this.Lc&&this.Lc();return!1},
vj:function(b,c,d,e,h,l,p,q,u,y,E,L,M,Q){var ka=this.model.get("currentUser");ka&&ka.re?(k.info("Using new web payment apis (purchaseSubscription)"),z.b(Bj,[b,c,d,e,Number(h),Number(l),p,q,Number(E),L,M,Q])):z.b(vj,[b,c,d,e,Number(h),Number(l),p,q,Boolean(u),y,Number(E),L,Q])},Xj:function(b,c,d,e,h,l,p,q,u,y,E,L,M){var Q=this.model.get("currentUser");Q&&Q.re?(k.info("Using new web payment apis (updateBillingInformation)"),z.b(xj,[b,c,d,e,Number(h),Number(l),p,q,Boolean(u),L,M])):z.b(vj,[b,c,d,e,Number(h),
Number(l),p,q,Boolean(u),y,Number(E),L,M])}});function IA(){}
IA=Backbone.View.extend({initialize:function(){this.$r=null},render:function(b,c){this.$r=b;-1!=b.typeOfService.indexOf("Business")?b.logo="business":-1!=b.typeOfService.indexOf("One")?b.logo="one":b.logo="";var d=$(c).tmpl(b);this.el&&$(this.el).empty();$(this.el).append(d);return this},events:{"click .print":"handlePrintClicked"},handlePrintClicked:function(){var b=window.open();s("business_view_receipt",{vendor_id:t,action:"print_save",transaction_id:this.$r.transactionId,transaction_date:this.$r.date},this.model.get("currentUser"));
var c=$("#print-area").clone(!0);c.find(".paging").remove();b.document.write(c.html());b.print();b.close();return!1}});function SA(){}
SA=Backbone.View.extend({initialize:function(){z.c(Qf,r(this,this.rq));z.c(Sf,r(this,this.Ex));U(ew,r(this,this.Ex))},className:"still_listening_container clearfix",render:function(){var b=this.model.get("currentUser");b.G()&&z.b(Kj);var c=b.Tj,d=b.Ih;if(!b.jh&&!b.I()&&b.lA&&b.Tb&&0==(jm(gm)||0)%b.lA)return $(this.el).append($("#pandoraForBusinessTimeoutUpsellTmpl").tmpl({Y2:b.s==m.u.Bc()})),$m(),this;$(this.el).append($("#stillListeningTmpl").tmpl({isSponsoredListening:d==m.Ud.Jn(),creditHours:c+
" hour"+(1<c?"s":""),showUpgrade:!b.Oa()&&!Mn(b),shouldSeeAds:b.G(),isStreamLimited:b.jh,isUserAUNZ:b.Va,offerAnnualSub:b.te,isBusiness:b.I(),monthlyPrice:Sx(Zn(b))}));c=b.s;b.jh&&s("listening_session_display",{action:"display",listener_state:c,vendor_id:t,device_id:pe},b);$m();return this},rq:function(b){var c=C.wa(this.model.get("currentStation"));null!=b&&!1==c?($("#still_listening_ignore").text("Return to my station"),$(".svnOffer",this.el).show(),$("#upgradeOffer").hide(),b=this.model.get("currentUser"),
s("truex_tracking",{for_action:"offer",benefit:b.Ih,benefit_amount:b.Tj,detail:this.model.get("halt_id"),vendor_id:t,device_id:pe},b)):($(".svnOffer",this.el).hide(),$("#still_listening_ignore").text("I'm still listening"),$("#upgradeOffer").show())},Ex:function(){this.stillListeningClick()},events:{"click #still_listening_upgrade":"upgradeClick","click #p4b_upgrade":"businessUpgradeClick","click .still_listening":"stillListeningClick","click .continue_abuse":"continueAbuseClick","click .learn_more_abuse":"learnAbuseClick",
"click .eliminate_timeout":"eliminateTimeoutClick","click #learn":"learnMoreClick"},upgradeClick:function(){this.Am("upgrade");T(Nu,{cancelCallback:r(this,function(){V("/account/upgrade",!0,!0)})});return!1},businessUpgradeClick:function(){this.Am("business_upsell");T(Su,{source:"timeout"});return!1},learnMoreClick:function(){this.Am("upgrade");T(Cw);return!0},eliminateTimeoutClick:function(){var b=this.model.get("halt_id"),c=this.model.get("currentUser"),d=c.s;s("listener_idle",{action:"value_exchange",
active:"true",halt_id:b,inactive_time:Math.floor((sd()-b)/1E3),listener_state:d,vendor_id:t,device_id:pe},c);s("truex_tracking",{for_action:"offer_accepted",benefit:c.Ih,benefit_amount:c.Tj,detail:b,vendor_id:t,device_id:pe},c);this.model.set({modalPanel:"SVN_AD_PANEL"});return!1},stillListeningClick:function(){z.b(yk,r(this,function(){this.Am("none");this.remove();this.el=null;T(qu)}));return!1},continueAbuseClick:function(){var b=this.model.get("currentUser");s("listening_session_display",{action:"dismiss",
listener_state:b.s,vendor_id:t,device_id:pe},b);this.model.set({inactive:!1});this.remove();this.el=null;T(qu)},learnAbuseClick:function(){var b=this.model.get("currentUser");s("listening_session_display",{action:"learn",listener_state:b.s,vendor_id:t,device_id:pe},b);window.open("http://help.pandora.com/customer/portal/articles/1392219?un="+b.La,"_blank");return!1},Am:function(b){var c=this.model.get("halt_id"),d=this.model.get("currentUser"),e=d.s;s("listener_idle",{action:b,active:"true",business_upsell:d&&
d.I()&&"upgrade"==b,halt_id:c,inactive_time:Math.floor((sd()-c)/1E3),listener_state:e,vendor_id:t,device_id:pe},d);T(rw);this.model.set({inactive:!1})}});function TA(){}
TA=Backbone.View.extend({initialize:function(){this.jb=this.options.detail_url},render:function(){Jz(this.jb,{},r(this,this.gM),function(){z.b(Hh)},!0);return this},close:function(){Ez(this)},events:{"click .listeners_menuItem":"menuItemClick","click .more":"moreClick"},gM:function(b){$(this.el).append(b);Zx(new Wx(this.model.get("currentUser")),!1)},menuItemClick:function(b){b=b.target.id;$(".listeners_content_title").text(b);$(".listeners_menuItem").toggleClass("selected",!1);$(".listeners_menuItem[id='"+b+
"']").toggleClass("selected",!0);return!1},moreClick:function(b){$(b.currentTarget).fadeOut();var c=$(b.currentTarget).attr("data-currentoffset"),d=$(b.currentTarget).attr("data-nextoffset");c&&d?Jz(this.jb,{countRowsOnBrowser:c,countRowsNeeded:d},r(this,function(b){$(".sections",this.el).append(b)})):$(b.currentTarget).closest(".section_page").next().fadeIn();return!1}});function UA(){}
UA=Backbone.View.extend({initialize:function(){this.referrer=this.options.referrer;this.ud=this.options.cancelHash},el:$("#mainContent .pandoraOneInfo"),render:function(){function b(c,d,l){setTimeout(function(){$("#icons_wrapper img.active").removeClass("active");setTimeout(function(){l=(l+1)%3;$("#icons_wrapper .icon_img").eq(l).addClass("active");b(c,d,l)},d)},c)}T(Zw);var c=this.model.get("currentUser"),d={isUserAUNZ:c.Va,offerAnnualSub:c.te,monthlyPrice:Sx(Zn(c)),annualPrice:Sx(c.be.toString()),isGrandfathered:c.ny()};
$(this.el).empty().append($("#pandoraOneTmpl").tmpl(d)).show();d=!1;null==c||c.p()?($(".trial",this.el).hide(),$(".upgrade",this.el).hide(),$(".start",this.el).show()):(c.qh?(d=!0,$(".trial",this.el).show(),$(".upgrade",this.el).hide()):($(".trial",this.el).hide(),$(".upgrade",this.el).show()),$(".start",this.el).hide());$(".btn_placeholder",this.el).hide();c&&c.Tb?($(".p4b_stuff").show(),$(".dmx_stuff").hide()):($(".p4b_stuff").hide(),$(".dmx_stuff").show());s("pandoraone_page_hit",{vendor_id:t,
istrial:d},this.model.get("currentUser"));c?($("#p1_subhead_line1_content",this.el).show(),$("#p1_subhead_line1_placeholder",this.el).hide(),$("#p1_subhead_line2_content",this.el).show(),$("#p1_subhead_line2_placeholder",this.el).hide()):($("#p1_subhead_line1_content",this.el).hide(),$("#p1_subhead_line1_placeholder",this.el).show(),$("#p1_subhead_line2_content",this.el).hide(),$("#p1_subhead_line2_placeholder",this.el).show());$("#p1_page",this.el).show();setInterval(function(){$("#bg1").toggleClass("active")},
3E3);setInterval(function(){$("#bg2").toggleClass("active")},2800);setInterval(function(){$("#bg3").toggleClass("active")},4E3);b(1500,750,0);return this},events:{"click .trial":"startTrialClick","click .upgrade":"upgradeNowClick","click .start":"startNowClick","click #dmx_learn_more":"dmxLearnMoreClick","click #p4b_learn_more":"p4bLearnMoreClick","click #p4b_upgrade":"p4bUpgradeClick"},startTrialClick:function(){V("/one/trial/start",!0,!0);s("pandoraone_submit_click",{vendor_id:t,action:"trial"},
this.model.get("currentUser"))},upgradeNowClick:function(){T(Nu,{cancelCallback:r(this,function(){V(this.ud,!0,!0)})});s("pandoraone_submit_click",{vendor_id:t,action:"upgrade"},this.model.get("currentUser"));return!1},startNowClick:function(){T(jv,{onSuccessRedirect:"/_one"});s("pandoraone_submit_click",{vendor_id:t,action:"startnow"},this.model.get("currentUser"));return!1},dmxLearnMoreClick:function(){V("/everywhere/business",!0,!0);s("pandoraone_submit_click",{vendor_id:t,action:"business"},this.model.get("currentUser"))},
p4bLearnMoreClick:function(){s("pandoraone_submit_click",{vendor_id:t,action:"business_learn"},this.model.get("currentUser"));T(Vu,{source:"one"});return!1},p4bUpgradeClick:function(){var b=this.model.get("currentUser");s("pandoraone_submit_click",{vendor_id:t,action:"business_upgrade"},this.model.get("currentUser"));!b||b.p()?T(jv,{onSuccessCallback:function(){T(Su,{cancelCallback:function(){V("/one",!0,!1)}})}}):T(Su,{cancelCallback:function(){V("/one",!0,!1)}});return!1}});function VA(){}
VA=Backbone.View.extend({initialize:function(){this.bd="intro";this.zd=[];for(var b=0;b<window.giftChoiceList.length;b++)window.giftChoiceList[b].enabled&&(this.zd.push(window.giftChoiceList[b]),this.zd[this.zd.length-1].index=this.zd.length-1);this.qs=this.zd[0]},close:function(){Ez(this)},el:$("#mainContent .giftInfo"),render:function(){var b=this.model.get("currentUser");switch(this.bd){case "intro":$(this.el).empty().append($("#giftIntroTmpl").tmpl({isUserLoggedIn:!b.p()})).show();break;case "form":$(this.el).empty().append($("#giftEnterInfoTmpl").tmpl({username:b.La,
fullname:b.sl})).show();$("#theme_bg .scrollable_content",this.el).css("width",180*this.zd.length);for(b=0;b<this.zd.length;b++)$("#theme_bg .scrollable_content",this.el).append($("#giftThemeTmpl").tmpl(this.zd[b]));this.Yz();Dx($("#theme_bg",this.el));break;case "payment":T(pv,r(this,function(){$(".payment").empty().hide();this.cancelClick()}));break;default:throw Error("Unknown gift state: "+this.state);}return this},Yz:function(){$("#currentSelection",this.el).empty().append($("#selectedThemeTmpl").tmpl(this.qs));
$("#card_choice",this.el).val(this.qs.name)},events:{"click .signOutLink":"signOutClick","click .cancel":"cancelClick","click .next":"nextClick","click .login":"loginClick","click .register":"registerClick","click .sample_buttons .example":"exampleClick","click .sample_buttons .select":"selectClick","keyup #message":"messageKeyup"},loginClick:function(){RA("/buygift");V("/account/sign-in",!0,!1);return!1},registerClick:function(){RA("/buygift");V("/account/register",!0,!1);return!1},messageKeyup:function(){if(300<=
$("#message",this.el).val().length)return $("#message",this.el).val($("#message",this.el).val().substr(0,300)),$("#messageError",this.el).fadeIn(),!1;$("#messageError",this.el).fadeOut();return!0},exampleClick:function(b){b=$(b.target).closest(".sample_container").tmplItem().data;var c=Hx("giftExamplePopup",$("#giftExampleHeaderTmpl").tmpl(b),$("#giftExampleContentTmpl").tmpl(b),$("#giftExampleFooterTmpl").tmpl(b));c.bind("closed",r(this,function(){$(".select",c).unbind("click");c.remove()}));$(".select",
c).bind("click",r(this,function(b){this.Lz($(b.target).tmplItem().data);c.fadeTo(400,0,function(){c.remove()})}));$(this.el).append(c);return!1},selectClick:function(b){this.Lz($(b.target).closest(".sample_container").tmplItem().data);return!1},Lz:function(b){this.qs=this.zd[b.index];this.Yz();return!1},cancelClick:function(){switch(this.bd){case "form":this.bd="intro";break;case "payment":this.bd="form";break;default:throw Error("don't know how to cancel state: "+this.bd);}this.render();return!1},
nextClick:function(){if("form"==this.bd&&!this.xQ())return!1;switch(this.bd){case "intro":this.bd="form";break;case "form":this.bd="payment";break;default:throw Error("don't know how to go to next state: "+this.bd);}this.render();return!1},xQ:function(){ge($("#sender_name",this.el).val())?$("#sender_name_error",this.el).fadeIn():$("#sender_name_error",this.el).fadeOut();ge($("#recipient_name",this.el).val())?$("#recipient_name_error",this.el).fadeIn():$("#recipient_name_error",this.el).fadeOut();
var b="email"==$("input[name='gift_delivery']:checked",this.el).val(),c=$("#recipient_email",this.el).val();!b&&ge(c)||ax(c)?$("#recipient_email_error",this.el).fadeOut():$("#recipient_email_error",this.el).fadeIn();$("#recipient_email",this.el).val()!=$("#recipient_email2",this.el).val()?$("#recipient_email2_error",this.el).fadeIn():$("#recipient_email2_error",this.el).fadeOut();return 0==$(".giftError:visible",this.el).length},signOutClick:function(){z.b(oi);return!1}});function WA(){}
WA=Backbone.View.extend({initialize:function(){this.Oi=this.options.gift;z.c(lg,r(this,this.giftEmailed));this.jA=window.giftChoiceList[0];for(var b=0;b<window.giftChoiceList.length;b++)if(window.giftChoiceList[b].name==this.Oi.skin){this.jA=window.giftChoiceList[b];break}},el:$("#mainContent .giftInfo"),render:function(){var b=this.model.get("currentUser");$(this.el).empty().append($("#giftShowTmpl").tmpl({username:b.La,noads:!b.G(),gift:this.Oi,theme:this.jA})).show();return this},events:{"click .print":"printClicked",
"click .email":"emailClicked"},printClicked:function(){window.print();return!1},emailClicked:function(){$(".email",this.el).hasClass("disabled")||($(".email",this.el).addClass("disabled"),z.b(ck,[this.Oi.giftCode,this.Oi.giftHash]));return!1},giftEmailed:function(){this.Oi.type="EMAIL";this.render()},close:function(){z.ma(this)}});function XA(){}
XA=Backbone.View.extend({initialize:function(){z.c(Ae,r(this,this.Ua));z.c(Be,r(this,this.zf));z.c(Zg,r(this,this.II));z.c(dh,r(this,this.cJ))},render:function(b){this.Gh=b;this.yd()},yd:function(){T(Uw,{sponsor:this.Gh});$("#mainContent").children().hide();this.model.set({modalPanel:au});var b=$("#sponsoredTrial img")[0],c=this.model.get("currentUser");c.p()?this.model.get("hasStations")?(c=this.model.get("stationList").pluck("_stationName"),c.shift(),b=$("#sponsoredTrialHasStationsTmpl").tmpl({stations:c,logo:b}),
$("#mainContent").children().hide(),$("#mainContent .sponsoredTrial").empty().append(b).show(),$("#noBtn").bind("click",this,r(this,function(){this.O="newUser";z.b(si)})),$("#yesBtn").bind("click",this,this.Ky)):(b=$("#sponsoredTrialChoicesTmpl").tmpl({sponsor:this.Gh}),$("#mainContent .sponsoredTrial").empty().append(b).show(),$("#existingUserBtn").bind("click",this,this.Dp),$("#newUserBtn").bind("click",this,this.Ky)):(b=$("#sponsoredTrialSignedInTmpl").tmpl({username:c.La,logo:b}),$("#mainContent .sponsoredTrial").empty().append(b).show(),
$("#startNowBtn").bind("click",r(this,function(){T(Vw,{path:"/ignored/ignored/"+this.Gh})})),$("#notMeLink").bind("click",this,this.pr))},Xi:function(){$("#mainContent .sponsoredTrial").fadeOut(r(this,function(){$("#mainContent .sponsoredTrial").empty()}))},jf:function(){this.yd();return!1},cJ:function(b){this.O&&(this.debug("registration failed"),(new X({message:b})).render(),this.yd());return!1},II:function(){this.debug("login failed");this.O&&(this.O=null,(new X({message:"Sorry, I don't recognize your email and password."})).render())},
Ua:function(){this.O?"newUser"==this.O?(this.O=null,setTimeout(r(this,function(){this.yd()}),300)):"startTrial"==this.O?(this.O=null,T(Vw,{path:"/ignored/ignored/"+this.Gh})):"logout"==this.O&&(this.O=null,setTimeout(r(this,function(){z.b(pi,this.ai);this.ai=null;this.O="startTrial"}),300)):this.Xi()},zf:function(){"startTrial"==this.O&&(this.O=null,T(Vw,{path:"/ignored/ignored/"+this.Gh}))},pr:function(){RA(My());z.b(oi);return!1},yP:function(b){var c=$("#email",this.el).val(),d=$("#password",this.el).val(),
e=$("input[name=remember]",this.el).is(":checked"),h=!1;bx(d)||(h=!0,$("#passError",this.el).text(lb()).fadeIn());ax(c)||(h=!0,$("#emailError",this.el).text(jb()).fadeIn());h||(h=b.data.model.get("currentUser"),c==h.La?T(Vw,{path:"/ignored/ignored/"+b.data.Gh}):(b.data.O="startTrial",z.b(ni,{username:c,password:d,keepLoggedIn:e})));return!1},Bi:function(b){var c=$("#email").val(),d=$("#password").val(),e=$("#birthyear").val(),h=$("#zipcode").val(),l=$("input[name=gender]:checked").val(),p=$("input[name=optin]").is(":checked"),
q=$("input[name=terms]").is(":checked"),u=$("input[name=remember]").is(":checked"),y=!1;ax(c)||($("#emailError").text(jb()).fadeIn(),y=!0);bx(d)||($("#passwordError").text(lb()).fadeIn(),y=!0);cx(e)?dx(e)||($("#birthyearError").text(oa()).fadeIn(),y=!0):($("#birthyearError").text(oa()).fadeIn(),y=!0);ex(To(),h)||($("#zipcodeError").text(Uo()).fadeIn(),y=!0);fx(l)||($("#genderError").text(ua()).fadeIn(),y=!0);q||($("#termsError").text(ta()).fadeIn(),y=!0);y||(c={username:c,password:d,birthYear:Number(e),
zipCode:h,emailOptIn:p,gender:l,keepLoggedIn:u},"logout"==b.data.O?(b.data.ai=c,z.b(oi)):z.b(pi,c));return!1},Ky:function(b){var c=$("#sponsoredTrial img")[0];$("#mainContent .sponsoredTrial").empty().append($("#sponsoredTrialRegisterTmpl").tmpl({logo:c}));$("#startNowBtn").click(function(){b.data.O="startTrial";b.data.Bi(b)});$("#goBackBtn").click(function(){b.data.O=!1;b.data.jf()});$(".redeem_field").click(b.data.vg);return!1},My:function(b){var c=$("#sponsoredTrial img")[0];$("#mainContent .sponsoredTrial").empty().append($("#sponsoredTrialRegisterTmpl").tmpl({logo:c}));
$(".redeem_field").click(b.data.vg);$("#startNowBtn").click(function(){b.data.O="logout";b.data.Bi(b)});$("#goBackBtn").click(function(){b.data.O=!1;b.data.jf()});return!1},Dp:function(b){var c=$("#sponsoredTrial img")[0];$("#mainContent .sponsoredTrial").empty().append($("#sponsoredTrialLoginTmpl").tmpl({logo:c}));$("#startNowBtn").bind("click",b.data,b.data.yP);$("#goBackBtn").click(function(){b.data.jf()});$(".redeem_field").click(b.data.vg);return!1},vg:function(b){(new $(b.target)).parent().siblings(".error").empty()},
debug:function(b){k.debug("SponsoredTrialView : ",arguments)}});function YA(){}
YA=Backbone.View.extend({initialize:function(){this.referrer=this.options.referrer;this.ud=this.options.cancelHash;this.I=this.options.isBusiness;z.c(hk,r(this,this.IH));z.c(jk,r(this,this.tI));z.c(Qh,r(this,this.Pi));z.c(Ph,r(this,this.Pi));z.c(Mg,r(this,this.lb))},el:$("#mainContent .paymentConfirm"),render:function(){this.Wf=Wo("token");this.Kr=Wo("PayerID");ge(this.Wf)||ge(this.Kr)?setTimeout(function(){V(this.ud,!1,!1)},100):z.b(ik,[this.Wf])},tI:function(b){var c=b.tax,d=b.amount,e=b.paypalEmail,
h=b.description,l=b.currencyCode;ge(d)||ge(c)||ge(l)||ge(e)||ge(h)?this.Pi():Io()?(h=this.IG(b),b={},b.email=e,b.p2p="99"==d,b.isBusiness=this.I,b.tax=Sx(c),b.amount=Sx(d),b.duration=h.duration,b.summary_duration=h.ft,b.summary_period=h.Or,b.payment_total=Sx((parseInt(c,10)+parseInt(d,10)).toString()),c=this.model.get("currentUser"),b.username=c.La,$(this.el).empty().append($("#paypalConfirmTmpl").tmpl(b)).show(),null==c||c.p()?($(".upgrade_now",this.el).hide(),$(".duration_container",this.el).hide()):
$(".start_now",this.el).hide(),$("#buttons",this.el).show()):(this.bA(),z.b(gk,[this.Wf,this.Kr,Ro(),this.I]))},IG:function(b){var c={};b=b.description;return c=-1!==b.indexOf("Monthly payment")?{Or:"Monthly",duration:"month",ft:"Monthly Subscription"}:-1!==b.indexOf("Annual payment")?{Or:"Annual",duration:"year",ft:"Annual Subscription"}:{Or:"",duration:"",ft:"Price"}},IH:function(b){this.Iq();var c=b.listenerState;b=null;if("PAY_TO_PLAY"==c)b=new X({message:kd()});else if("SUBSCRIBER"==c){if(b=
new X({message:id()}),z.b(gg),c=this.model.get("currentUser"))c=ql.encrypt(c.t),c="https://4177752.fls.doubleclick.net/activityi;src=4177752;type=purch024;cat=purch865;qty=1;;ord=;cost="+$.trim($("#period_amount",this.el).text())+";u1="+c,np(c,function(){},function(){})}else if("BUSINESS"==c){b=new X({message:jd()});z.b(hg);setTimeout(function(){T(Qu)},0);return}b&&b.render();T(qu)},Pi:function(b){this.Iq();var c;switch(b.code){case "PAYPAL_PAYMENT_DECLINED":c=kc();break;default:c=jc()}"PAYPAL_PAYMENT_ALREADY_PAID"!=
b.code&&(new X({message:c})).render();T(Nu)},lb:function(){this.Iq()},bA:function(){this.S||($(window).scrollTop(0),this.S=new NA({model:this.model,message:hd()}),$("#main").append(this.S.render().el))},Iq:function(){this.S&&(this.S.trigger("close"),this.S=null)},events:{"click #paypal_buy":"paypalCompletePurchase","click #paypal_cancel":"paypalCancelPurchase","click #paypal_agree":"clearErrors"},paypalCompletePurchase:function(){if(1==$("input[name='paypal_agree']",this.el).length&&1==$("input[name='paypal_agree']:checked",
this.el).length!=!0){$(".agreeFieldError",this.el).text(ad()).fadeIn();var b=ad()}null==b?(this.bA(),z.b(gk,[this.Wf,this.Kr,Ro(),this.I])):(new X({message:b})).render();return!1},paypalCancelPurchase:function(){V("/payment",!0,!0);return!1},clearErrors:function(b){$(b.target).siblings(".paymentFieldError").empty()}});function ZA(){}
ZA=Backbone.View.extend({$f:null,xB:"payment_landing",vB:"pandora_one",wB:"pandora_one_thankyou",Yt:"sign_up",yB:"sign_in",uB:"home",initialize:function(){z.c(ig,r(this,this.KN));z.c(fg,r(this,this.MN));z.c(gg,r(this,this.NN));z.c(wg,r(this,this.LN));z.c(Ae,r(this,this.Mf));z.c(Be,r(this,this.Mf));U(Yv,r(this,this.YM));U(Zv,r(this,this.$L));U($v,r(this,this.sM));U(wv,r(this,this.wL));U(Zw,r(this,this.km));U(Tu,r(this,this.UL));U(aw,r(this,this.tM));z.c(ig,r(this,this.xh));z.c(fg,r(this,this.xh));
z.c(gg,r(this,this.xh));U(Yv,r(this,this.xh));U(Tu,r(this,this.xh));U(Zw,r(this,this.xh))},xh:function(){var b=this.model.get("currentUser");null!=b&&(b=b.QK)&&((new Image).src="//beacon.krxd.net/usermatch.gif?partner=pandora&partner_uid="+b)},KN:function(){$(this.el).append($A("existing",aB(this)));$(this.el).append(bB("existing",aB(this)));$(this.el).append(cB("existing",aB(this)));$(this.el).append("<iframe id='sem-conversion' src='/static/counters/existingListenerConversion.html' style='border:none;height:0;width:0;'></iframe>");
dB(this,this.yB)},MN:function(){$(this.el).append($A("new",aB(this)));$(this.el).append(bB("new",aB(this)));$(this.el).append(cB("new",aB(this)));$(this.el).append("<iframe id='sem-conversion' src='/static/counters/registrationConversion.html' style='border:none;height:0;width:0;'></iframe>");dB(this,this.Yt)},es:function(){$(this.el).append("<iframe id='sem-conversion' src='/static/counters/googleSEM.html' style='border:none;height:0;width:0;'></iframe>")},NN:function(){$(this.el).append(cB("subscribe",
aB(this)));this.es();dB(this,this.wB)},LN:function(){$(this.el).append(cB("trial_start",aB(this)))},Mf:function(b){this.$f=b},Bm:function(b){$(this.el).append(b==ZA.Pt||b==ZA.Rt||b==ZA.Qt||b==ZA.gk?b==ZA.gk?eB(this):fB(gB(b)):"")},UL:function(){this.es();dB(this,this.xB)},km:function(){this.es();dB(this,this.vB)},tM:function(){dB(this,this.Yt)},YM:function(){this.$f&&this.$f.p()&&this.Bm(ZA.Pt);dB(this,this.uB)},$L:function(){this.$f&&!Kn(this.$f)&&this.Bm(ZA.Rt)},sM:function(){this.Bm(ZA.Qt)},wL:function(){this.$f&&
Kn(this.$f)&&this.Bm(ZA.gk)}});ZA.Pt="anon";ZA.Rt="unreg";ZA.Qt="signed_out";ZA.gk="active";function $A(b,c){return fB("http://4177752.fls.doubleclick.net/activityi;src=4177752;type="+("existing"==b?"exist425":"sign-244")+";cat="+("existing"==b?"exist769":"sign-094")+";u1="+c+";ord="+c)}function bB(b,c){return"existing"==b?fB("http://sact.atdmt.com/action/PandoraReEngage/v3/ato."+c):fB("http://sact.atdmt.com/action/PandoraSignUp/v3/ato."+c)}
function cB(b,c){var d="http://1204.xg4ken.com/media/redir.php?track=1&token=1d097f49-7c07-4166-9aa3-ce55c88dedc9&val=0.0&orderId=&valueCurrency=USD&GCID=&kw=&product=&promoCode="+c+"&type=";"new"==b?d+="newusersignup":"existing"==b?d+="reengagement":"subscribe"==b?d+="Sale":"trial_start"==b&&(d+="trial");return"<img height='1' width='1' style='display:none' src='"+d+"'></img>"}function aB(b){b=b.model.get("currentUser");return null==b?"":ql.encrypt(b.t)}
function fB(b){return"<iframe height='1' width='1' frameborder='0' style='display:none' src='"+b+"'></iframe>"}function gB(b){return"/static/counters/retarget-"+b+".html"}function hB(b,c){b+="?";for(var d in c)b+=d+"="+c[d]+"&";return b.slice(0,-1)}function eB(b){var c=b.model.get("currentUser").s;b=aB(b);c=hB(gB(ZA.gk),{listener_state:c,encrypted_listener_id:b});return fB(c)}
function dB(b,c){var d=b.model.get("currentUser"),d={encrypted_listener_id:aB(b),page_name:c,listener_state:d.s};$(b.el).append(fB(hB("/static/counters/atlasTracking.html",d)))};function iB(){}
iB=Backbone.View.extend({mu:1E3,Mb:500,OA:-1*Math.PI/180,uw:null,Ai:null,Po:null,Bw:null,$y:0,Ov:null,Vk:null,Wx:!1,sf:null,ck:!1,initialize:function(){$("#sponsoredListeningStatus").slideUp();(this.ck=te())||$("#slTimer").html('<svg style="height: 100%; width: 100%"><circle cx="10" cy="10" r="8" fill-opacity="0.0"" stroke="#ffffff" stroke-width="2"/><path id="slTimerDrain" fill="#ffffff" transform="translate(10, 10)"/></svg>')},el:$("#sponsoredListeningStatus").get(0),events:{"click #slButton":"sponsorButtonClick"},Xs:function(b,
c,d,e,h,l,p,q){this.Po=b;this.uw=c;this.Ai=d;this.Bw=l;this.Ov=e?e:"More";this.Vk=h;this.Wx=q;this.$y=p;null!=this.sf&&(clearTimeout(this.sf),this.sf=null);$("#sponsoredListeningStatus").is(":visible")?this.Xx(r(this,this.sw)):(this.sw(),$("#sponsoredListeningStatus").slideDown(this.mu,r(this,function(){this.Qw(0)})))},cF:function(){this.sf&&clearTimeout(this.sf);var b=this.Mb+this.Mb+1E4;this.sf=setTimeout(r(this,function(){$("#sponsoredListeningStatus").slideUp(this.mu);this.sf=null}),b);$("#slText").is(":visible")&&
this.Xx(r(this,function(){$("#slText").html(this.Bw);$("#slText").fadeIn(this.Mb)}))},Qw:function(b){this.ck||(b+=0.015,b>=this.$y||(this.zt(b),setTimeout(r(this,function(){this.Qw(b)}),30)))},Wy:function(b){return 10>b?"0"+b:b},rQ:function(b,c){if(this.ck){var d=Math.floor((b+60)/3600),e=Math.floor((b+60)%3600/60);$("#slTimerNumerical").text(this.Wy(d)+":"+this.Wy(e))}else this.zt(b/c)},zt:function(b){b*=360;var c=b*this.OA;b="M 0 0 v -8 A 8 8 1 "+(180<b?1:0)+" 0 "+8*Math.sin(c)+" "+-8*Math.cos(c)+
" z";$("#slTimerDrain").attr("d",b);$("#slTimerDrain").hide().show(0)},Xz:function(){this.Po?this.Jx(this.uw+" <strong>"+this.Po+"</strong>"):this.Cq()},Cq:function(){this.Jx(this.Ai)},Jx:function(b){var c=$("#slText"),d=r(this,function(){c.html(b);c.fadeIn(this.Mb)});c.is(":visible")?c.fadeOut(this.Mb,d):d()},sw:function(){this.Wx?this.Cq():this.Xz();this.Vk?($("#slButton").text(this.Ov),$("#slButton").fadeIn(this.Mb)):$("#slButton").fadeOut(this.Mb);this.ck?($("#slTimerSvg").hide(),$("#slTimerNumerical").show()):
($("#slTimerNumerical").hide(),this.zt(0),$("#slTimer").fadeIn(this.Mb))},Xx:function(b){$("#slButton").fadeOut(this.Mb);$("#slTimer").fadeOut(this.Mb);$("#slTimerNumerical").fadeOut(this.Mb);$("#slText").fadeOut(this.Mb,b)},sponsorButtonClick:function(){this.Vk&&window.open(this.Vk);var b=this.model.get("currentVxReward");b&&s("value_exchange",{action:"vx_status_bar_cta_clicked",line_id:b.Th,creative_id:b.pd,offer_name:b.xk,truex_instance_id:b.zo,vendor_id:t,device_id:pe},this.model.get("currentUser"))}});function jB(){}
jB=Backbone.View.extend({initialize:function(){this.Sb=!1;this.w="MONTHLY";this.Xa={};U(xv,r(this,this.vJ));U(Xw,r(this,this.ah));z.c(Bf,r(this,this.Fd));z.c(nk,r(this,this.CJ));z.c(lk,r(this,this.H));U(Xw,r(this,this.ah));z.c(Sh,r(this,this.zx));z.c(Rh,r(this,this.$H));z.c(Mg,r(this,this.lb))},el:$("#mainContent .payment"),vJ:function(){var b=this.model.get("currentUser");null!=b&&b.qh?z.b(uj,"PaymentBackedTrial"):setTimeout(function(){V("/one",!1,!1)},100)},Fd:function(b){if("/one/trial/start"==My()){s("pbwt_payment_page_hit",
{vendor_id:t},this.model.get("currentUser"));b=b.cdata;for(var c=this.model.get("currentUser"),d={years:[],months:[]},e=(new Date).getFullYear(),h=0;12>h;h++)d.years.push(e+h),9>h?d.months.push("0"+(h+1)):d.months.push(h+1);null==b?(d.zipcode="",ex(To(),c.tb())?d.zipcode=c.tb():d.zipcode=""):(d.customerName=b.customerName,d.zipcode=b.zipcode,d.displayableCardNumber=b.displayableCardNumber,d[b.cardCompany.toLowerCase()]="checked",d.expirationMonth=b.expirationMonth,d.expirationYear=b.expirationYear);
d.billingFrequency=this.w;d.offerAnnualSub=c.te;d.trialDuration=c.Zy.toString();d.monthlyPrice=Sx(Zn(c));d.annualPrice=Sx(c.be.toString());d.isUserAUNZ=c.Va;d.isV2="V2"===c.Rj;d.showPaypalOrderConfirmScreen=Io();$("#mainContent").children().hide();e=$("#PaymentBackedTrialTmpl").tmpl(d);b&&($("#delete_card",e).show(),$("#delete_card",e).click(r(this,function(){confirm("Are you sure?")&&z.b(Vj,null);return!1})));$(this.el).empty().append(e);$(this.el).show();c.Mr&&($("#paypal_form",this.el).hide(),
$("#paypal_select_container",this.el).hide());null!=d.zipcode&&0<d.zipcode.length&&this.zipcodeFocus(null)}},CJ:function(b){(b=b.redirectUrl)?window.location.href=b:this.zx()},zx:function(b){var c=ic();b&&b.code==m.d.mk()&&(c=Pb());(new X({message:c})).render();this.H&&this.H()},$H:function(b){var c=Mb();b&&b.code==m.d.mk()&&(c=Pb());(new X({message:c})).render();this.H&&this.H()},lb:function(){this.H&&this.H()},ha:function(){this.S||($(window).scrollTop(0),this.S=new NA({model:this.model,message:hd()}),
$("#main").append(this.S.render().el))},H:function(){this.S&&(this.S.trigger("close"),this.S=null)},Xo:function(){$(".paymentFieldError",this.el).hide();$(".formFieldError",this.el).hide()},Bg:function(){$(".save_btn",this.el).attr("disabled","disabled")},events:{"click .bill_freq_input":"billingFrequencyClick","click #start_trial_pp":"startTrialPP","click #start_trial_cc":"startTrailCC","click #paypal_select":"paypalSelect","click #credit_select":"creditCardSelect","focus .payment_field_validated":"clearErrors",
"focusout #zip":"zipcodeFocus","keyup #zip":"zipcodeFocus","blur #zip":"zipcodeFocus","change #zip":"zipcodeFocus","keyup .payment_field input":"inputModified","change .subscription_selection input":"inputModified","change .payment_field select":"inputModified"},billingFrequencyClick:function(b){this.w=b.target.value},inputModified:function(b){if(!this.Sb)return this.Sb=!0,this.enableSubmit(b)},enableSubmit:function(b){!this.Sb||this.ne()||$(b&&b.target).hasClass("zipcode")||$(".pay_now",this.el).removeAttr("disabled");
return!1},zipcodeFocus:function(){this.bc("ANNUAL","ANNUAL");this.bc("MONTHLY","MONTHLY");return!0},startTrialPP:function(){1==$("input[name='agreePP']:checked",this.el).length!=!0?$(".agreePPFieldError",this.el).text(ad()).fadeIn():($(window).scrollTop(0),this.ha(),z.b(mk,[this.w,Ro()]));return!1},startTrailCC:function(){this.model.get("currentUser");var b=$.trim($("input[name='name']",this.el).val()),c=$("input[name='cardnumber']",this.el).val(),d=kx(c),e=$("select[name='expirationdate_month'] option:selected",
this.el).val(),h=$("select[name='expirationdate_year'] option:selected",this.el).val(),l=$("input[name='securitycode']",this.el).val(),p=$("input[name='zipcode']",this.el).val(),q=1==$("input[name='agreeCC']:checked",this.el).length,u=Ro(),y=this.ke(b,d,p,l,c,e,h);!0!=q&&($(".agreeCCFieldError",this.el).text(ad()).fadeIn(),y.push(ad()));0==y.length?(this.ha&&this.ha(),z.b(kk,[this.w,d,b,c,Number(e),Number(h),l,p,u])):(new X({message:y.join("<br>")})).render();return!1},ke:function(b,c,d,e,h,l,p){this.Xo();
var q=[];if(null==b||0==b.length)$(".nameFieldError",this.el).text(fd()).fadeIn(),q.push(fd());ex(To(),d)||($(".zipcodeFieldError",this.el).text(Uo()).fadeIn(),q.push(Uo()));gx(e)||($(".securitycodeFieldError",this.el).text(bd()).fadeIn(),q.push(bd()));hx(h)&&jx(c)||($(".cardNumberFieldError",this.el).text(dd()).fadeIn(),q.push(dd()));lx(l,p)||($(".expriationFieldError",this.el).text(ed()).fadeIn(),q.push(ed()));return q},bc:function(b,c){if(b&&b.length){$("#salestax_amount."+c,this.el).html("");
var d=$("input[name='zipcode']",this.el).val(),e=this.model.get("currentUser");if(d&&d.length==(e.Va?4:5)){if(c in this.Xa)return;this.Xa[c]=!0;T(Ww,new Dy(d,b,c,!1))}this.Bg()}},ah:function(b){var c=b.tax,d=b.token;b=b.amount;try{c&&b&&($("#salestax_amount."+d,this.el).html(Sx(c)),this.yj[d]=c)}catch(e){}finally{delete this.Xa[d],this.ne()||this.enableSubmit(null)}},ne:function(){return this.Xa&&0<Object.keys(this.Xa).length},clearErrors:function(b){$(b.target).siblings(".paymentFieldError").hide();
$(b.target).siblings(".formFieldError").hide()},paypalSelect:function(){s("payment_paypal_select",{vendor_id:t},this.model.get("currentUser"));$("#creditcard_form",this.el).hide();$("#paypal_form",this.el).show()},creditCardSelect:function(){s("payment_creditcard_select",{vendor_id:t},this.model.get("currentUser"));$("#paypal_form",this.el).hide();$("#creditcard_form",this.el).show()}});function kB(){}
kB=Backbone.View.extend({initialize:function(){U(Ou,r(this,this.zI));U(Pu,r(this,this.qJ));z.c(Hf,r(this,this.LI));z.c(xh,r(this,this.UH));z.c(Mg,r(this,this.lb))},el:$("#mainContent .businessMigration"),events:{"click #p1_business_convert":"businessConvertClick","click #business_convert_agree":"businessConvertAgreeChanged","focus .payment_field_validated input":"clearErrors"},render:function(){var b=this.model.get("currentUser"),b={mode:"business",businessMonthlyPrice:Sx(b.Uk.toString()),businessAnnualPrice:Sx(b.Tk.toString()),
billingFrequency:b.Ta()};$(this.el).empty();$(this.el).append($("#BusinessMigrationTmpl").tmpl(b)).show();s("business_migration_page_hit",{vendor_id:t},this.model.get("currentUser"));return this},zI:function(){V("/business/join",!0,!0)},qJ:function(){var b=this.model.get("currentUser");"/business/join"!=My()||b.s!=m.u.Bc()||b.Va?setTimeout(function(){T(qu)},50):this.render()},lb:function(){this.H()},UH:function(b){this.H();var c=ld();b&&(b.code==m.d.bu()?c=md():b.code==m.d.zB()?c=nd():b.code==m.d.Je()&&
(c=ja()));(new X({message:c})).render()},LI:function(){this.H();setTimeout(function(){T(Qu,{isMigration:!0})},10)},businessConvertAgreeChanged:function(){this.clearErrors();$("input#business_convert_agree",this.el).is(":checked")?$(".p1_submit",this.el).removeAttr("disabled"):$(".p1_submit",this.el).attr("disabled","disabled")},businessConvertClick:function(b){if($(b&&b.target).hasClass("disabled")||!this.model.get("currentUser"))return!1;var c=$.trim($("input[name=bill_freq_input]:checked",this.el).val());
b=$("input#business_convert_agree",this.el).is(":checked");b=this.ke(c,b);if(0!=b.length)return(new X({message:b.join("<br>")})).render(),!1;s("business_migration_page_click",{vendor_id:t},this.model.get("currentUser"));b=new bA;b.bind("submit",r(this,function(b){this.ha();z.b(Aj,[c,b])}));b.bind("cancel",r(this,function(){(new X({message:fb.u2()})).render()}));b.render();return!1},clearErrors:function(b){b=b?b.target:this.el;$(b).siblings(".paymentFieldError").hide();$(b).siblings(".formFieldError").hide()},
ke:function(b,c){this.clearErrors();var d=[];ix(b)||($(".billingFieldError",this.el).text(cd()).fadeIn(),d.push(cd()));!0!=c&&($(".agreeFieldError",this.el).text(ad()).fadeIn(),d.push(ad()));return d},ha:function(){this.S||($(window).scrollTop(0),this.S=new NA({model:this.model,message:hd()}),$("#main").append(this.S.render().el))},H:function(){this.S&&(this.S.trigger("close"),this.S=null)}});function lB(){}
lB=Backbone.View.extend({initialize:function(){U(Qu,r(this,this.xI));U(Ru,r(this,this.oJ));z.c(Gf,r(this,this.Ox));z.c(wh,r(this,this.cI));z.c(Mg,r(this,this.lb))},el:$("#mainContent .businessConfirmation"),events:{"click #submit_business_info":"handleUpdateBusinessInfoClick"},render:function(){var b=this.model.get("currentUser"),c={showReceiptLink:!this.JK};$(this.el).empty();$(this.el).append($("#BusinessConfirmationTmpl").tmpl(c)).show();s("business_confirmation_page_hit",{vendor_id:t},b);return this},
xI:function(b){this.JK=b&&b.isMigration;V("/business/welcome",!0,!1,!1)},oJ:function(){this.model.get("currentUser").I()?this.render():setTimeout(function(){T(qu)},50)},handleUpdateBusinessInfoClick:function(){var b=this.model.get("currentUser");if(!b)return!1;var c=$.trim($("input[name=company_name]",this.el).val()),d=$.trim($("select[name=industry] option:selected",this.el).val());s("business_confirmation_page_click",{vendor_id:t,name_empty:!!c,industry_empty:!!d},b);c||d?(this.ha(),this.fA=!0,
z.b(zj,[c,d])):this.Ox()},cI:function(b){this.H();(new X({message:b.cg})).render()},Ox:function(){this.fA&&(this.fA=!1,this.H(),z.b($h),setTimeout(function(){T(qu)},10))},ha:function(){this.S||($(window).scrollTop(0),this.S=new NA({model:this.model,message:hd()}),$("#main").append(this.S.render().el))},H:function(){this.S&&(this.S.trigger("close"),this.S=null)},lb:function(){this.H()}});function mB(){}
mB=Backbone.View.extend({initialize:function(){U(Vu,r(this,this.yI));U(Wu,r(this,this.pJ));Uy("/business");this.source=null},el:$("#mainContent .p4bInfo"),yI:function(b){this.source=b&&b.source?b.source:"unknown";V("/business",!0,!0,!0)},pJ:function(){var b=this.source||"url",c=this.model.get("currentUser");c&&c.Tb?(s("business_learnmore_page_hit",{vendor_id:t,source:b},this.model.get("currentUser")),this.render(),this.source=null):(oe.set({postLoginPath:"/business"}),setTimeout(function(){T(qu)},0))},
render:function(){T($w);var b=this.model.get("currentUser"),b={isUserAUNZ:b.Va,monthlyPrice:Sx(b.Uk.toString()),annualPrice:Sx(b.Tk.toString())};$("#mainContent").children().hide();$(".contentnav").css("border-bottom","none");$(this.el).empty().append($("#pandoraForBusinessTmpl").tmpl(b)).show();return this},events:{"click #p4b_upgrade":"p4bUpgradeClick"},p4bUpgradeClick:function(){var b=this.model.get("currentUser");!b||b.p()?T(jv,{onSuccessCallback:function(){T(Su,{cancelCallback:function(){T(Vu)}})}}):
T(Su,{cancelCallback:function(){T(Vu)}});s("business_learnmore_page_click",{vendor_id:t,action:"upgrade"},this.model.get("currentUser"))}});var Z;
(function(b){var c={skip:"tunervideo","return":"tunervideo",station:"tuner",shuffle:"tuner"},d=dp.SLOT_SIZE_AUTOPLAY_VIDEO,e=dp.SLOT_SIZE_USER_INITIATED_VIDEO;Z=function(b){this.model=b;this.$d=new Backbone.Model({creativeId:"",lineId:""});this.qa=new Y({model:this.model,adIdentifier:this.$d});this.yk=_.bind(this.yk,this);this.qa.bind(Y.ig.VIDEO_EVENT,this.yk);this.wk=_.bind(this.wk,this);this.qa.bind(Y.ig.LOG_TIME_TO_PLAYER,this.wk);this.bL="VideoAdController : ";this.Py();this.startTime=Cd();this.bm=
this.gj=this.pe=this.pc=0;this.yi=this.Hf=!1;this.Fk=1;Z.cp=null;Z.Mj=0;Z.Cw=0;Z.nN="ooyala";Z.oN="standard";Z.Nu=dp.AUDIO_AD_SIZE;z.c(Sf,r(this,function(){this.bm=Cd()}));z.c(xe,r(this,this.Py));z.c(Ae,r(this,this.Mf));z.c(Ek,r(this,this.HQ));z.c(Oe,r(this,this.GQ));z.c(Pk,r(this,this.KA));z.c(Qk,r(this,this.KA));z.c(Rk,r(this,this.Ze));z.c(Sk,r(this,this.oD));z.c(Qk,Z.so);z.c(Ok,Z.SM);z.c(Wk,r(this,this.PL));z.c(Xk,r(this,this.YL));z.c(Yk,r(this,this.VL));z.c(Vk,r(this,this.EL));z.c(Uk,r(this,this.jD));
this.lo()&&z.c(Uk,r(this,this.lD))};Z.prototype.destroy=function(){this.qa.unbind(Y.ig.VIDEO_EVENT,this.yk);this.qa.unbind(Y.ig.LOG_TIME_TO_PLAYER,this.wk);this.Il&&(clearTimeout(this.Il),this.Il=null);z.ma(this)};Z.prototype.lD=function(b){b.size?Z.Nu=b.size:k.debug("Ignoring Audio Ad Size Change to value: "+b.size)};Z.prototype.wk=function(){if(!(0>=Z.Mj)){if(11==this.model.get("currentUser").t%100){Z.Cw=Dd();var b=Z.Cw-Z.Mj;Z.Mj=0;var c="",c=this.qa.FA?Z.nN:Z.oN;s("time_to_player_web",{ua:navigator.userAgent,
site_version:window._pandoraVersion,browser:le(),player_type:c,time_to_player_msec:b})}Z.Mj=0}};Z.prototype.Yp=function(b){return c[b]||"tuner"};Z.prototype.MK=function(){return null!=Lo()||"true"===No()||"true"===A._data.videoAdTestMode};Z.prototype.Py=function(){this.debug("AppInit event - reinitializing config variables");this.enabled=!0==A._data.apvEnabled;this.MK()?(this.du=6,this.uu=this.ru=10,this.tu=2):(this.du=zo(A._data.timeToStartVideoAds,180),this.tu=zo(A._data.timeBetweenDisplayAndVideoAd,
5),this.ru=zo(A._data.timeBetweenAudioAndVideoAd,60),this.uu=zo(A._data.timeBetweenVideoAds,900));this.bC=120};Z.prototype.Mf=function(){this.debug("USER-CHANGE event - reinitializing time & indexes");this.startTime=Cd();this.bm=this.gj=this.pe=this.pc=0;this.Fk=1};Z.prototype.debug=function(b){k.debug(this.bL+Cd()+" : ",arguments)};Z.prototype.HQ=function(){this.gj=Cd()};Z.prototype.KA=function(b){b&&!1===b.cb()&&(this.pc=Cd())};Z.prototype.GQ=function(b){b instanceof lo&&(this.pe=Cd())};Z.prototype.G=
function(b,c){var d=this.model.get("currentUser"),e=this.model.get("currentStation");if(d){var u=this.model.get("hasStations"),y=c?!0:Px(),E=!d.p(),e=e&&C.wa(e);return d.G()&&u&&y&&E&&!e}return!1};Z.prototype.Yr=function(){var b=Cd(),c=!1;this.enabled&&!this.yi&&b-this.bm>this.bC&&b-this.startTime>this.du&&b-this.pe>this.ru&&b-this.pc>this.uu&&b-this.gj>this.tu&&(c=!0);this.debug("Ready for Video ad? : enabled : "+this.enabled+" : disabled for current station : "+this.yi+" : now : "+b+" : since start : "+
(b-this.startTime)+" : since sv : "+(b-this.bm)+" : since lv : "+(b-this.pc)+" : since la : "+(b-this.pe)+" : since ld : "+(b-this.gj)+" : ready : "+c);return c};Z.prototype.KP=function(){var b=this.model.get("currentStation"),b=null!==b&&!C.wa(b),c=this.model.get("currentUser"),c=null!==c&&!c.p();return b&&c};Z.prototype.QC=function(b,c){if(!this.lo())return!1;if("move"===b)this.kg("move",!1,c);else if("thumbsdown"===b)this.kg("thumbsdown",!1,c);else if("tired"===b)this.kg("tired",!1,c);else return!1;
return!0};Z.prototype.oD=function(b){var c=b?b.interaction:"";b=b?b.currentTrack:null;"skip"===c?this.kg("skip",!1,b):"station"===c?this.mD(b):"return"===c?this.kg("return",!0,b):this.QC(c,b)||z.b(Ok,{})};Z.prototype.mD=function(b){this.yi=!1;var c=this.model.get("currentStation"),d=null,d=c&&c.B()?"shuffle":"station";c&&!sn(c)?this.kg(d,!1,b):z.b(Ok,{interaction:d})};Z.prototype.PL=function(b){this.Nw(b.key,b.value,!0)};Z.prototype.YL=function(b){b.callback&&(Z.Ra=b.callback);this.Nw(b.key,b.value,
!1)};Z.prototype.VL=function(b){this.mN(b.url,b)};Z.prototype.kD=function(b){this.Hf&&(this.debug("Got no ad in time ... bailing out"),this.Hf=!1,this.nt=!0,z.b(Ok,{interaction:b}),z.b($h,{userInitiated:!1}))};Z.prototype.LC=function(b,c,e,q){C.Qf(B.Ki(),b,c,d,!1,r(this,function(c,l){Z.Mj=Dd();var E=this.Vr(c,l,b,d);e&&(E&&k.info("Received a video ad while in value exchange. Suppressing the video ad."),E=null,this.pc=Cd());z.b(Ok,{ad:E,interaction:q});this.uc(E,q)}),r(this,function(){this.pl();z.b(Ok,
{interaction:q})}))};Z.prototype.KC=function(b,c,e){var q=this;c=c.split(":");var u=cn()+"util/dartCreative.jsp?ad="+c[0]+"&c="+c[1];this.debug("Get test ad : "+u);gp(u,function(c){c=q.Vr(c,u,b,d);z.b(Ok,{ad:c,interaction:e});q.uc(c,e)},function(){q.pl();z.b(Ok,{interaction:e})})};Z.prototype.SC=function(b,c,d){if(!C.ya()||"return"===b)return!1;if(!this.enabled||this.yi)return this.debug("video ads are not configured for current station."),d(!1),!0;if(!c||c.ly())return this.debug("There is not music track for the current Chronos flow...not attempting to get ad from service."),
d(!1),!0;b=c.v().k;var e=c.n.yo,u=this.model.get("stationList").models,y={};C.Yf(y,b,u);C.Ge(y);u=this.Yp(null);d=_.bind(function(b,c){if(_.isString(c))return b(!1),!0;c=c||[];var d=_.filter(c,function(b){return"VIDEO_AD"===b.response.adType});this.debug("Number of Ads fetched :"+c.length);this.debug("Number of Video Ads fetched :"+d.length);d.length!==c.length&&this.debug("We got mixed types of ads!");b(0<d.length?d:!1);return 0<d.length},this,d);d=ae(d,8E3,"REQUESTFAILED");var E=Z.Nu,L=E===dp.AUDIO_IN_STATION_AD_SIZE;
k.debug("Sending chronos (video) ad request");C.Dz({currentStationData:b,options:y,adToken:"none",callback:d,forcedAudioAd:Ko()||!1,lastDisplayAdTime:this.gj,requestType:B.Ki(),subZone:u,currentSize:E,isInStationAd:L,currentStationTrack:c,currentStationTrackType:e,isUserInitiated:!0,handlerType:"VIDEO"});return!0};Z.prototype.xD=function(b,c,d,e){this.Hf?e(!1):this.G(!1,c)?this.SC(b,d,e)||e(this.Yr(b)):e(!1)};Z.prototype.NC=function(){var b={};this.KP()&&(b.index=this.Fk);var c=this.model.get("currentStation"),
d=this.model.get("stationList").models;C.Yf(b,c,d);C.Ge(b);b.vx=this.model.get("currentVxReward")?"1":"";b[B.hg]=!0;return b};Z.prototype.yD=function(){var b=this.model.get("currentVxReward");return b&&b.Fm()};Z.prototype.JC=function(b){this.Hf=!0;var c=this.Yp(b);this.debug("Ready to fetch Video Ad for "+b+" : from zone : "+c);this.nt=!1;var d=this.NC(),e=this.yD(),u=Lo();!_.isNull(u)&&!_.isUndefined(u)&&0<u.length?this.KC(c,u,b):this.LC(c,d,e,b);this.Il=_.delay(r(this,this.kD),1E4,b)};Z.prototype.kg=
function(b,c,d){z.b(Nk,b);this.xD(b,c,d,_.bind(function(c){c?this.JC(b):z.b(Ok,{interaction:b})},this))};Z.prototype.uc=function(b){this.debug("Ready to show the current video ad : "+JSON.stringify(b)+" : tooLate? : "+this.nt);!this.nt&&b&&(clearTimeout(this.Il),this.qa.render(b))};Z.prototype.pl=function(){this.Hf=!1};Z.prototype.Vr=function(b,c,e,q){var u,y=null;u=null;null!==b?(u=this.tN(b),b=$.trim(b),y=new uy(C.qj(b,e,q)),null!==u&&2==u.length?(y.pd=u[1],y.no=u[0],this.$d.set({lineId:u[0],creativeId:u[1]})):
this.$d.set({lineId:"",creativeId:""}),c=y.C(),this.debug("Got video ad for : subZone - "+e+" : slotSize - "+q+" : type - "+y.C()),"VIDEOAD"==c||"HOUSE"==c?this.debug("Got valid video ad! path = "+By(y)):"ANIMATEDOVERLAY"==c?this.debug("Got Animated overlay",y):(u="Invalid ad type ? "+c+" : for subzone : "+e,this.debug(u),fp(b,d,u,e),y=null)):(u="Empty ad for subzone : "+e,this.debug(u),fp(c,q,u,e));this.pl();return y};Z.prototype.Nw=function(b,c,d){this.debug("Ready to fetch user initiated Video Ad for key : "+
b+" : val : "+c);if(b&&c){this.Hf=!0;var q=this.Yp(null),u={};u[B.hg]=!0;var y={};y[b]=c;b=this.model.get("currentStation");c=this.model.get("stationList").models;C.Yf(u,b,c);C.Ge(u);var E=this,L=A._data.useTestAds;C.RN(q,u,y,e,function(b,c){!0===L&&(b="<methodResponse><params><param><value><struct><member><name>type</name><value><string>VIDEOAD</string></value></member><member><name>uif</name><value><string>vasttag</string></value></member><member><name>impression</name><value><string>http://www.pandora.com/impression</string></value></member><member><name>logoimage</name><value><string>/static/ads/video_overlay_logos/http://test.logo.url</string></value></member><member><name>clickthrough_logo</name><value><string><![CDATA[http://www.not/]]\x3e</string></value></member><member><name>clickthrough_videoPlayer</name><value><string><![CDATA[http://www.not/]]\x3e</string></value></member><member><name>image</name><value><string>/radio/static/ads/in_tuner_tile/http://test.tile.url</string></value></member><member><name>dimmed</name><value><string>/radio/static/ads/in_tuner_tile/http://test.tile.url</string></value></member><member><name>clickthrough_songSlide</name><value><string><![CDATA[http://www.not/]]\x3e</string></value></member><member><name>companion</name><value><string>companionValue</string></value></member></struct></value></param></params></methodResponse>");
var h=E.Vr(b,c,q,e);h.Ej(d);h.xs(!1);E.uc(h,"userInitiated")},function(){E.pl()})}};Z.prototype.mN=function(b,c){this.debug("Ready to play movie: "+b+", skip at: "+c.skipDelaySeconds+", show scrubber: "+c.showScrubber);this.Hf=!0;var d=this.model.get("currentStation");c.type="VIDEOAD";c.movie=b;c.onAdvertiserStation=d&&C.wa(d);d=new uy(c);d.xs(!1);d.Ej(!1);d.ej=!0;c.creativeId&&(d.pd=c.creativeId);c.adId&&(d.no=c.adId);this.uc(d,"playMovie")};Z.prototype.Ze=function(c){c&&(clearTimeout(Z.cp),Z.cp=
setTimeout(function(){k.info("Pinging Comscore for video ad playback");b.COMSCORE&&b.COMSCORE.beacon({c1:1,c2:"6036333",c3:"",c4:"",c5:"09",c6:"",c10:""})},3E3),c.cb()||void 0!=c.ej&&!0==c.ej||(this.Fk++,this.model.set({currentTrack:c})))};Z.prototype.tN=function(b){var c=/\x3c!-- *([0-9]+) *: *([0-9]+) *--\x3e/.exec(JSON.stringify(b));b=null;return c&&3==c.length&&(b=[c[1],c[2]],c=b[1],"undefined"!==typeof c&&"%ecid!"!==c)?b:null};Z.prototype.EL=function(){this.yi=!0};Z.Ra=null;Z.SM=function(b){b&&
b.ad||!Z.Ra||(Z.Ra(),Z.Ra=null)};Z.so=function(){clearTimeout(Z.cp);Z.Ra&&(Z.Ra(),Z.Ra=null)};Z.VK=function(b,c){z.b(Wk,{key:b,value:c,isUserInitiated:!0})};Z.prototype.lo=function(){var b=this.model.get("currentUser");return b&&b.xq};Z.prototype.yk=function(b){if(this.lo())switch(b.event_type){case "start":k.info("Chronos - we've got a video start event - time to register the impression");var c=b.creative_id,d=Number(Math.round(b.duration));b=!!b.is_pandora_link;Z.OP&&(Z.Et||(Z.Et=0),Z.Et+=1);C.cs(c,
-1,d,b,function(){k.info("Chronos - VideoAdImpression registered successfully")},function(){k.info("Chronos - ERROR REGISTERING VIDEO AD IMPRESSION")})}};Z.prototype.jD=function(b){b.adIdentifiers&&b.adIdentifiers.creativeId&&b.adIdentifiers.lineId&&this.$d.set({lineId:b.adIdentifiers.lineId,creativeId:b.adIdentifiers.creativeId})};b.launchVideoAd=Z.VK;b.VideoAdController=Z})(this);function nB(b){this.model=b;this.qa=new Qz({model:this.model});$.address.bind("change",r(this,this.vr));W("/land",!0,!0,!0,r(this,this.RK));U(ow,r(this,this.oM));U(pw,r(this,this.nM));U(qw,r(this,this.lm));U(ov,r(this,this.xL));U(Gu,r(this,this.jM));U(Tw,r(this,this.iM));U(rw,r(this,this.GM));U(sw,r(this,this.TL));U(vw,r(this,this.lj));U(uw,r(this,this.NL));U(xw,r(this,this.fM));U(yw,r(this,this.cM));U(zw,r(this,this.dM));U(Aw,r(this,this.eM));U(tw,r(this,this.lj));U(ww,r(this,this.lj));U(Cw,r(this,
this.lj));U(Bw,r(this,this.bM));U(Dw,r(this,this.qL));U(Ew,r(this,this.pL));U(Qw,r(this,this.ue));U(Gw,r(this,this.FM));U(Hw,r(this,this.BM));U(Iw,r(this,this.CM));U(Mw,r(this,this.hM));U(Rw,r(this,this.DM));U(Kw,r(this,this.IL));U(Lw,r(this,this.SL));U(Du,r(this,this.Oy));U(Eu,r(this,this.Oy));U(Nw,r(this,this.ue));U(Pw,r(this,this.ue));U(Zw,r(this,this.km));U($w,r(this,this.km));U(iw,r(this,this.mM));U(jw,r(this,this.eN));U(Ow,r(this,this.qM));U(Wv,r(this,this.ue));U(Xv,r(this,this.ue));U(Uw,r(this,
this.yM));U(sv,r(this,this.lM));U(tv,r(this,this.kM));U(uv,r(this,this.pM));z.c(Vi,r(this,this.ZM));z.c(Ui,r(this,this.JM));z.c(bi,r(this,this.LM));z.c($h,r(this,this.MM));z.c(di,r(this,this.IM));z.c(ei,r(this,this.HM));z.c(fi,r(this,this.CL));z.c(gi,r(this,this.BL));z.c(pj,r(this,this.QL));z.c(qj,r(this,this.PM));z.c(ki,r(this,this.rM));z.c(Ki,r(this,this.WL));z.c(Ej,r(this,this.KL));z.c(Fj,r(this,this.QM));z.c(We,r(this,this.Ty));z.c(ih,r(this,this.Qy));z.c(hh,r(this,this.Qy));z.c(Ce,r(this,this.ZL));
z.c(fj,r(this,this.ue));z.c(Gj,r(this,this.ue));z.c(Hj,r(this,this.ue));z.c(Be,r(this,this.Mf));z.c(Ke,r(this,this.zM));z.eb(Le,r(this,this.EM));z.c(xe,r(this,this.init));z.c(jl,r(this,this.AL));this.model.bind("change:modalPanel",r(this,this.PE));this.model.bind("change:currentUser",r(this,this.Mf));this.model.bind("change:currentStation",r(this,this.AM));this.model.bind("change:currentTrack",r(this,this.ui));this.model.bind("change:stationSortOrderAlpha",r(this,this.xM));this.model.bind("change:displayingCompanion",
r(this,this.MF));this.model.bind("change:currentVxReward",r(this,this.XM));z.wh(Oe,r(this,this.KM));z.c(Qk,r(this,this.so));z.c(Pk,r(this,this.pD));z.c(Rk,r(this,this.Ze));$("#ad_controls .skipLink").click(r(this,this.Ty));this.aC=zo(A._data.timeBetweenAudioAndDisplayAd,5);this.cC=zo(A._data.timeBetweenVideoAndDisplayAd,5);this.su=zo(A._data.timeBetweenDisplayAds,5);this.WA="2000x2";this.bB="2000x2,300x250,300x600";this.Wd="radio";this.eg="backstage";this.ok="themedstation";this.hk="createstation";
this.Lt="addvariety";this.lu="share";this.Kn="trial";this.VB=[this.hk,this.ok,this.Lt,this.lu,this.Kn];this.gC="play|share|buy|lyrics|volume|likeUp|likeDown|rateUp|rateDown|pause|skip|playSample";this.Nn="/radioAdEmbedGPT.html";this.Mn="/radioAdEmbedAsyncGPT.html";this.Bu="/radioAdEmbedVx.html";this.om=this.le=this.oe=0;this.rl=Co();this.dl=this.Jd=this.oc=!1;this.vv=null;this.Sa=this.Wd;this.pc=this.pe=0;this.Pg=A._data.displayAd;oB=null;this.Gt=pB=!1;this.fl=this.mp=0;this.Vw=this.lp=!1;this.pu=
"246976901:44334262 215333213:33803897 246976901:44334262 210400547:43579993 246976901:44334262 246983691:44307832 215333213:33803897 246983691:44307832 210400547:43579993 246983691:44307832 246976901:44334262 215333213:33803897 210400547:43579993 215333213:33803897".split(" ");qB=this}var oB,pB,qB,rB,sB;f=nB.prototype;f.init=function(){this.vv="2000x2,300x250";this.model.get("hasStations")||(this.rl=!0)};
f.uc=function(b){var c=this.model.get("currentVxReward");c&&c.Fm()?(gp(C.Hi(),function(){},function(){}),C.$w()):this.qa.render(b)};f.Mf=function(){var b=this.model.get("currentUser");(this.j=b)&&(b.G()||this.qa.gb(!0))};f.Tc=function(){var b=this.model.get("currentUser");return b&&b.Df()&&!this.Vw?this.Mn:this.Nn};f.km=function(){this.qa.gb(!0,!0)};f.EM=function(){this.model.get("hasStations")||this.qa.il()};
f.AL=function(b){if(!this.lp){var c=parseInt(b.delaySeconds,10);this.fl=isNaN(c)||c>Mo()?Mo():c;this.mp=Cd();this.lp=!0;var c=this.model.get("currentUser"),d=null,e=null;null!=b.currentLineIdCreativeId&&(b=b.currentLineIdCreativeId.split(":"),2==b.length&&(d=b[0],e=b[1]));s("delay_ad_refresh",{line_id:d,creative_id:e,delay_duration:this.fl,listener_id:c.t,vendor_id:t,device_id:pe,accessory_id:null,device_os:le(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},c)}};
f.ui=function(){var b=this.model.get("currentTrack");this.model.set({audioAdPlaying:b&&(b instanceof lo||b.Ec||b.ao&&!(b instanceof oo))});b&&b instanceof lo&&(this.om=1);if(b instanceof yn){var c=b.mf,d=b.Yk;if(!c&&!d){var c="defaultaudiocompanion",e=this.model.get("currentStation");if(e&&e.Ga()||!(b instanceof lo))c=null}if(c||d)d?-1==d.indexOf("{{startvastcompanion}}")&&(this.model.set({displayingCompanion:!0}),tB(this,{adContent:d}),this.uc(this.Tc())):(this.debug("requesting companion"),c={companion:c},
b instanceof lo&&(c.mad="audio"),this.model.set({displayingCompanion:!0}),uB(this,c),vB(this,this.Wd),this.Qf(c,!0))}else null!=b&&(this.model.set({displayingCompanion:!1}),this.Sa==this.Wd&&this.Jd&&vB(this,this.eg))};f.mM=function(b){var c=b.companion;c&&(this.Vw=void 0!=b.forceSyncGPT&&!0==b.forceSyncGPT?!0:!1,this.Qf({companion:c},!0),b.isCompanionAd&&this.model.set({displayingCompanion:!0}))};
f.eN=function(b){var c=null,d=b.width,e=b.height,h=b.creativeType,l=b.resourceType,p=b.url,q=b.htmlCode,u=b.clickThroughUrl;b=b.pandoraContainer;if(d&&e){var y=this.qa.lN(d,e);l?"HTML"==l?(b=b.split("{{startvastcompanion}}")[0]+q,b=b.replace("{{format}}",y)):"static"==l?(b=b.replace("{{startvastcompanion}}"," "),b=b.replace("{{format}}",y),b=b.replace("{{imageurl}}",p),b=b.replace("{{clickthrough}}",u),-1<h.indexOf("swf")||-1<h.indexOf("flash")?b='<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js">\x3c/script>'+
b+"<script>swfobject.embedSWF('"+p+"', 'vcPayload',"+d+","+e+", '8', null, {'allowscriptaccess': 'always'}, {'wmode': 'opaque'}, {'id':'vastCompanionSWF'});\x3c/script>":-1<h.indexOf("jpg")||-1<h.indexOf("jpeg")||-1<h.indexOf("png")||-1<h.indexOf("gif")||(c="resource type is static, but creativeType isn't flash or static image")):c="unrecognized type; must be html / flash / or gif:png:jpg image":c="resourceType is required"}else c="width and height are required attributes";c?fp("Ooyala VAST Companion",
"2000x2","AdController.parseVastCompanion - "+c,"radio"):(this.model.set({displayingCompanion:!0}),tB(this,{adContent:b}),this.uc(this.Tc()))};f.G=function(){var b=this.model.get("currentUser"),c=My();return c&&c.match("^/(payment|one|business)")?!1:b?(c=(c=this.model.get("modalPanel"))&&c!=au?!1:!0,b.G()&&c):!1};f.NL=function(){this.Jd&&(this.oc=!0);wB(this,"",!0)};f.lj=function(b){this.Jd&&(this.oc=!0,b&&b.target&&(b=$(b.target),b.attr("href")&&!b.attr("target")&&(this.oc=!1)));wB(this,"",!1)};
f.xM=function(){xB(this,"sort",!1)};f.rM=function(){this.model.get("currentStationViewIsShuffle")&&xB(this,"shuffle",!1)};f.TL=function(){xB(this,"nowPlaying",!0)};
f.AM=function(){var b=this.model.get("currentStation"),c=null,d=this.model.get("currentVxReward");d&&(!this.G()||b&&C.wa(b)?this.qa.Rl():d.Vg()?(this.Gt||(C.Oz(d.Vg()),this.qa.render(this.Bu),this.Gt=!0),this.qa.fP()):this.qa.Rl());if(this.Gs){this.Gs=!1;if(oB){var e=oB;oB=null}vB(this,this.Wd);d=qn(b);if(this.G()&&!C.wa(b)&&d&&("artist"==d.type||"song"==d.type)){b={csfo:1};e&&(b.companion=e);uB(this,b);this.Qf(b,!0);this.oe=Cd();return}}Px()&&vB(this,this.Wd);this.oe=Cd();Yd(this,function(){var b=
this.model.get("currentStation");C.wa(b)?(wB(this,null,!0),this.dl=!1):this.dl?this.dl=!1:this.Sa==this.ok||this.oc&&yB(this,this.eg)||yB(this,this.Wd)||(c=b&&b.B()?"shuffle":"station",xB(this,c,!0))},300)};f.qL=function(){var b=this.model.get("currentUser");null==b||b.p()?xB(this,"addVariety",!0):AB(this,"addVariety",this.Lt,function(b){return[B.vc(b,{tile:2,sz:"2000x23"}),B.vc(b,{tile:3,sz:"155x60"})]},{})};
window.setAddVarietyLogo=function(b,c){$("#addVarietySponsorship a").attr("href",c).html('<img border="0" src="'+b+'">');$("#addVarietySponsorship").show()};f=nB.prototype;f.pL=function(){xB(this,"",!1)};f.FM=function(){xB(this,"rename",!0)};f.BM=function(){xB(this,"delete",!0)};f.CM=function(){2==this.model.get("stationList").length&&xB(this,"",!0)};f.WL=function(){BB(this,"playSample")};f.KL=function(){BB(this,"follow")};f.QM=function(){BB(this,"unfollow")};
f.ZL=function(){var b=My();(!b||"/feed"!==b.substring(0,5)&&"/connect"!==b.substring(0,8))&&BB(this,"profile",!0)};f.IL=function(){BB(this,"others",!0)};f.hM=function(){BB(this,"",!0)};f.ue=function(){BB(this,"")};f.Oy=function(){this.Jd&&(this.oc=!0);BB(this,"")};
f.DM=function(b){var c=this.model.get("stationList"),d=b.e(),c=c.detect(function(b){return b.Ji()==d});if(C.wa(c||b))this.model.set({shareFirstImp:!1}),BB(this,"stationDetails",!0);else if(this.rl||0<this.le)yB(this,this.eg)||BB(this,"stationDetails",!0)};f.Ty=function(b){b instanceof lo||CB(this,"skip");return!1};f.Qy=function(){CB(this,"outOfSkips")};f.LM=function(b){void 0!=b&&!0!=b||CB(this,"pause")};f.JM=function(){CB(this,"tired")};f.ZM=function(){CB(this,"whyTrack",!0)};
f.IM=function(){CB(this,"rateUp")};f.HM=function(){CB(this,"rateDown")};f.CL=function(){CB(this,"rateDown")};f.BL=function(){CB(this,"rateUp")};f.QL=function(){CB(this,"likeUp")};f.PM=function(){CB(this,"likeDown")};f.lm=function(){CB(this,"volume")};f.oM=function(){wB(this,"lyrics",!0)};f.nM=function(){wB(this,"lyrics",!0)};f.xL=function(){CB(this,"buy",!0)};f.MM=function(b){!0==(b?b.userInitiated:!1)&&CB(this,"play")};f.SL=function(){CB(this,"moveTrack",!0)};
f.bM=function(b){var c="";"station_list"==b&&(c="stationScroll");CB(this,c)};function CB(b,c,d){setTimeout(r(b,function(){wB(this,c,d)}),10)}f.GM=function(){setTimeout(r(this,function(){this.oe=0;this.Sa="radio";wB(this,"return",!1)}),500)};f.MF=function(){this.model.get("displayingCompanion")&&(null!=this.Kd&&(this.Sa=this.Kd,this.Kd=null),DB(this))};
function DB(b){b.debug("hiding sponsorships");$("#addVarietySponsorship a").attr("href","#").empty();$("#addVarietySponsorship").hide();$("#themeSponsorship a").attr("href","#").empty();$("#themeSponsorship").hide();$("#shareSponsorship a").attr("href","#").empty();$("#ShareSponsorship").hide();$(".createStationSponsorship a").attr("href","#").empty();$(".createStationSponsorship").hide();b.Gs=!1;rB=oB=null;$("#sponsoredTrial a").attr("href","#").empty();$("#sponsoredTrial").hide()}
function xB(b,c,d){!b.oc||"station"!=c&&"shuffle"!=c?vB(b,b.Wd):vB(b,b.eg);wB(b,c,d)}function BB(b,c,d){vB(b,b.eg);wB(b,c,d)}f.zM=function(b){var c=this.model.get("currentStation");c&&c.e()==b.e()&&(yB(this,this.Wd)||xB(this,"",!0))};f.RK=function(b){(b=b.queryString)&&-1<b.indexOf("shareImp")&&this.model.set({shareFirstImp:!0})};f.lM=function(){EB(this,"artist")};f.kM=function(){EB(this,"")};f.pM=function(){this.Jd||(this.oc=!0);EB(this,"song")};
function EB(b,c){(0<b.le||b.rl)&&!yB(b,b.eg)&&BB(b,c,!1)}function yB(b,c){var d=!1;b.model.get("shareFirstImp")&&GB(b)&&(d={shareimp:"1"},vB(b,c),uB(b,d),tB(b,d),b.uc(b.Tc()),b.rl=!0,d=b.dl=!0);b.model.set({shareFirstImp:!1});return d}function GB(b){var c=b.model.get("currentStation");return c&&C.wa(c)?!1:(c=b.model.get("currentUser"))&&c.p()||b.model.get("displayingCompanion")?!1:b.G()}
f.vr=function(b){b=b.path;var c=null,d=this.model.get("currentUser");d&&d.p()&&b.match("/account/|/payment")?this.qa.gb():0==this.le&&(b.match("^/music/song")||b.match("^/land/song"))?this.oc=!0:(b.match("^/feed|^/connect")?c="feed":b.match("/payment|/go/")&&(c=""),null!=c&&(b.match("/volume/*|/stations/share/|/inactive|/song/(move|sleep)")||(b.match("^/{1}$|/stations/(play|rename|variety|delete)/*")?vB(this,"radio"):vB(this,"backstage")),wB(this,c,!0)))};
f.PE=function(){if($("#mainContentContainer").is(":visible"))return!0;this.qa.gb();return!1};function uB(b,c){var d=b.model.get("currentStation"),e=b.model.get("stationList").models;C.Yf(c,d,e);C.Ge(c)}
f.Yr=function(){var b=Cd(),c=!1;b-this.pe>this.aC&&b-this.pc>this.cC&&b-this.oe>this.su&&b-this.mp>this.fl&&(c=!0);this.debug(+b+" : since last audio ad: "+(b-this.pe)+" : since last video ad: "+(b-this.pc)+" : since last display ad: "+(b-this.oe)+" : interval : "+this.su+" : delay ad refresh timestamp: "+this.mp+" : delay ad refresh duration: "+this.fl+" : ready?: "+c);return c};
function AB(b,c,d,e,h){b.G()?b.model.get("displayingCompanion")||C.wa(b.model.get("currentStation"))||b.model.get("currentVxReward")||(b.Kd=b.Sa,vB(b,d),HB(),b.le++,h.index=b.le,h.tile=1,c&&""!=c&&(h.interaction=c),uB(b,h),b.debug("Requesting Sponsorship Ad for Interaction: "+c),tB(b,h),null!=e&&C.Hi()&&C.oO(e(C.Hi())),b.uc(b.Tc())):b.qa.gb()}
function wB(b,c,d){if(null!=b.vv)if(b.G()){if(!(!d&&!1==b.Yr()&&"skipAd"!=c||b.model.get("displayingCompanion")||"pause"==c&&window.ignorePauseInteractions))if(HB(),b.Sa==b.ok&&b.Rp)IB(b,c);else if(b.Sa!=b.hk&&b.Sa!=b.Kn){var e={tile:1},h=!0;C.wa(b.model.get("currentStation"))&&(h=!1);h&&(b.le++,e.index=b.le,0<b.om&&(e.p1n=b.om++));if((h=My())&&"/profile"===h.substring(0,8))(h=b.model.get("currentProfileInfo"))&&h.isAdvertiser&&(e.webname=h.webName);else if("stationDetails"===c){var l=$(".stationCreator a"),
h=l.attr("data-advertiser"),l=l.attr("data-webname");"true"==h&&l&&(e.webname=l)}c&&""!=c&&(e.interaction=c);uB(b,e);b.debug("Requesting Ad for Interaction: "+c);b.Qf(e,d)}}else b.qa.gb()}
f.Qf=function(b,c){!c&&1>=Cd()-this.oe?this.debug("Within one second"):(tB(this,b),ie(A._data.testAdSequence)&&(A._data.companionAd="246977428:44308599",this.Pg=this.pu[(this.le-1)%this.pu.length]),this.Pg?(2!=this.Pg.split(":",2).length?this.debug("displayAd tunerVar form is: ?displayAd=AdId:CreativeId"):this.uc(this.Tc()+"?displayAd="+this.Pg),-1!=document.location.search.indexOf("onlyFirstForced")&&(this.Pg=null)):this.uc(this.Tc()))};
function tB(b,c){b.oe=Cd();b.lp=!1;c.vx=b.model.get("currentVxReward")?"1":"";b.model.get("displayingCompanion")?c.sz=b.WA:c.sz=b.bB;if(b.oc||b.Jd&&c.interaction&&"undefined"!=c.interaction&&-1<b.gC.indexOf(c.interaction)){b.Jd=!0;var d=b.model.get("currentStation");d&&C.wa(d)||$.extend(c,{pg:"song"})}else b.model.get("displayingCompanion")||(b.Jd=!1);b.oc=!1;b.Pg||((d=c.adContent)?C.us(d):(C.us(null),C.Iz(b.Sa,c,c.sz)))}
function vB(b,c){c!=b.Sa?(b.debug("subZone changing from: "+b.Sa+" to "+c),_.contains(b.VB,b.Sa)?DB(b):b.oe=0,b.Sa=c):b.debug("subZone is:"+b.Sa)}f.debug=function(b){k.debug("AdController : ",b)};f.KM=function(b){b instanceof lo&&(this.pe=Cd())};f.pD=function(b){b&&!1==b.cb()&&(this.pc=Cd());this.model.set({videoAdPlaying:b})};f.Ze=function(b){b&&!1==b.cb()&&(this.pc=Cd())};f.so=function(b){b&&!1==b.cb()&&(this.pc=Cd());this.model.set({videoAdPlaying:null});this.om=1};
function HB(){window.ignorePauseInteractions=!1}window.setIgnorePauseInteractions=function(b){window.ignorePauseInteractions=b};nB.prototype.qM=function(b){var c=this.model.get("currentUser");null==c||c.p()?BB(this,""):(this.Rp=b.gcat)&&IB(this,"")};function IB(b,c){var d=b.model.get("currentUser");null==d||d.p()?BB(b,c):AB(b,c,b.ok,function(b){return[B.vc(b,{tile:2,sz:"2000x23"}),B.vc(b,{tile:3,sz:"155x60"})]},{gcat:b.Rp})}
window.setThemedStationLogo=function(b,c){$("#themeSponsorship a").attr("href",c).html('<img border="0" src="'+b+'">');$("#themeSponsorship").show()};nB.prototype.fM=function(){DB(this);var b=this.model.get("currentUser");null==b||b.p()?this.lj(null):(this.Jd&&(this.oc=!0),AB(this,"",this.hk,r(this,function(b){return[B.vc(b,{tile:2,sz:"2000x23"}),B.vc(b,{tile:3,sz:"155x60"})]}),{}))};nB.prototype.cM=function(){null!=this.Kd&&(this.Sa=this.Kd,this.Kd=null)};
nB.prototype.dM=function(){rB?(this.Sa=this.hk,$(".createStationSponsorship a").attr("href",sB).html('<img border="0" height="100%" src="'+rB+'">'),$(".createStationSponsorship").show()):wB(this,"",!0)};nB.prototype.eM=function(){this.Gs=!0};window.setStationCreationLogo=function(b,c){rB=b;sB=c;$(".createStationSponsorship a").attr("href",c).html('<img border="0" height="100%" src="'+b+'">');$(".createStationSponsorship").show()};window.setStationCreationFollowOnURL=function(b){oB=b};
nB.prototype.jM=function(){DB(this);this.model.get("currentUser");GB(this)?AB(this,"",this.lu,r(this,function(b){return[B.vc(b,{tile:2,sz:"2000x23"}),B.vc(b,{tile:3,sz:"155x60"})]}),{interaction:"share"}):CB(this,"share")};nB.prototype.iM=function(){null!=this.Kd&&(this.Sa=this.Kd,this.Kd=null)};
nB.prototype.XM=function(){var b=this.model.get("currentVxReward");if(b){pB=b.Fm();var c=this.model.get("currentUser"),d=this.model.get("currentStation");c.G()&&d&&!C.wa(d)?(b.Vg()?(C.Oz(b.Vg()),this.qa.render(this.Bu)):this.qa.Rl(),this.Gt=!0):this.qa.Rl()}else pB=!1};window.setShareLogo=function(b,c){$("#shareSponsorship a").attr("href",c).html('<img border="0" height="100%" src="'+b+'">');$("#shareSponsorship").show()};
nB.prototype.yM=function(b){DB(this);AB(this,"",this.Kn,r(this,function(b){return[B.vc(b,{tile:2,sz:"2000x23"}),B.vc(b,{tile:3,sz:"155x60"})]}),b)};window.setSponsoredTrialLogo=function(b,c){$("#sponsoredTrial a").attr("href",c).html('<img border="0" height="100%" src="'+b+'">');$("#sponsoredTrial").show()};
window.showGoogleAdWords=function(){pB||($("#google_adwords").show().css("visibility","visible"),$("#google_adwords_frame").attr("src","/static/ads/google-adwords/google.html?r="+(new Date).getTime()),JB())};window.loadBottomAd=function(){if(!pB){var b=$("#advertisement_bottom");b.show().css({visibility:"visible",opacity:1});var c={};C.Ge(c);C.Iz("radio",c,"2000x19");var c="ad"+(new Date).getTime(),d=qB.Tc()+"?cb="+de();b.html('<IFRAME id="'+c+'" src="'+d+'" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" allowtransparency="true" width="100%" height="100%"></IFRAME>')}};
window.showAdControls=function(){pB||$("#ad_controls").show().css("visibility","visible")};function JB(){pB||$("#ad_your_ad_here").show().css("visibility","visible")}window.showYourAdHere=JB;window.loadAdBriteTicker=function(){};var oe,My,V,Ty,Uy,W,$y,RA,KB,LB,MB,NB,OB,PB,QB,RB,SB,TB,UB,VB,WB,XB,YB,ZB,$B,aC;KB=[];LB=[];OB=NB=MB=!1;RB=QB=PB=null;SB=!1;
TB=function(b){oe=b;$.address.tracker(null);$.address.change(UB);z.c(Ng,function(){if(VB()||qo())OB=!0});z.c(Og,function(){OB&&(OB=!1,setTimeout(function(){var b=VB();if(b){WB();var d;d=b||"";var e=$.address.queryString();if(e&&_.isString(e)&&!_.isEmpty(e)){var h=d.split("#"),l=h.slice(1,h.length).join("#"),p=h[0],q=d.split("?"),u=q.slice(1,q.length).join("?");d=1==h.length&&1==q.length?d+"?"+e:1<q.length?[p,"?",u,"&",e,_.isEmpty(l)?"":"#",l].join(""):[p,"?",e,_.isEmpty(l)?"":"#",l].join("")}else d=
d||"";V(d,!1,!1)}else vo();d=oe.get("modalPanel");$("#mainContentContainer").is(":visible")||null!=d&&d!=au||"/account/reset-password"==b||T(qu)},1))});z.c(xe,function(){$.cookie("_query",null);NB=!0;if(PB){if(Ry(oe)){var b=PB.path;if(0==b.indexOf("/station/play")||0==b.indexOf("/land/station")||0==b.indexOf("/station/start"))return}UB(PB);PB=null}})};XB=function(){return null!=VB()};
UB=function(b){var c=b.path,d="";1<c.split("/").length&&(d=c.split("/")[1]);var e=_.contains(bC,d);if("/_=_"!=c&&(!OB||e))if(NB)if(oe.get("siteLocked")&&0!=c.indexOf("/account/")&&0!=c.indexOf("/payment")&&0!=c.indexOf("/one")&&"inactive"!=d&&!e)k.info("site is locked, ignoring hash update for "+c);else if(e=oe.get("currentUser"),qo()||null!=e&&!e.p()||0!=c.indexOf("/payment")&&0!=c.indexOf("/account/info")&&0!=c.indexOf("/account/privacy")&&0!=c.indexOf("/account/notices")&&0!=c.indexOf("/account/upgrade")&&
0!=c.indexOf("/account/billing")&&0!=c.indexOf("/account/receipts")&&0!=c.indexOf("/account/audioQuality")&&0!=c.indexOf("/account/desktopApp")&&0!=c.indexOf("/account/startTrial")&&0!=c.indexOf("/subscriptionInfo"))if(e&&(e.Oa()&&e.jj||Mn(e))&&(0==c.indexOf("/payment")||0==c.indexOf("/account/upgrade")||0==c.indexOf("/account/startTrial")||0==c.indexOf("/pandoraOneInfo")||0==c.indexOf("/one")||0==c.indexOf("/_one")||0==c.indexOf("/business")||0==c.indexOf("/payment/99")))setTimeout(function(){T(qu)},
50);else{if(e&&(e.re&&e.Oa()||e.I())&&(0==c.indexOf("/payment")||0==c.indexOf("/subscriptionInfo"))){var h=!0;e.s!=m.u.gg()&&e.s!=m.u.Bc()||0!=c.indexOf("/payment/business")||(h=!1);if(h){V("/account/billing",!0,!0);return}}if(e&&e.I()){if("payment"==d&&-1==c.indexOf("/payment/business")){setTimeout(function(){T(Su)},0);return}if(0==c.indexOf("/account/upgrade")||0==c.indexOf("/account/startTrial")||0==c.indexOf("/pandoraOneInfo")||0==c.indexOf("/one")||0==c.indexOf("/_one")){setTimeout(function(){T(qu)},
0);return}}Ty();if(!MB){MB=!0;for(var d=h=!1,l=0;l<KB.length;l++){var p=KB[l];if(p.Zu?c==p.Wh||0==c.indexOf(p.Wh+"/"):p.Wh==c)if(d=!0,!p.fw(c)||h||cC(c)||(h=!0,Sy()),p=p.yC){var q=!1;YB&&(q=YB.cb());p(b,q)}}ZB(e);null==dC&&(cC(c)||Sy());if(!d)for(b=0;b<LB.length;b++)if(0==c.indexOf(LB[b])){d=!0;break}b=MB=!1;d||(d=!0,e=ce(c),1==e.length?(T(sv,c),zp(["artist_page_hit","music_page_hit","backstage_page_hit"]),b=!0):2==e.length?"fans"==e[1]?T(vv,c):(T(tv,c),zp(["album_page_hit","music_page_hit","backstage_page_hit"]),
b=!0):3==e.length?(T(uv,c),zp(["song_page_hit","music_page_hit","backstage_page_hit"]),b=!0):(z.b(Hh,c),d=!1),d&&Sy());b||$B(c);0==c.indexOf("/everywhere")&&T(ww)}}else oe.set({modalPanel:au},{silent:!0}),oe.set({modalPanel:du}),"/account/billing"==c?oe.set({postLoginPath:"/account/billing"}):0==c.indexOf("/payment")&&oe.set({postLoginPath:c});else(null==PB||"/"==PB.path&&"/"!=b.path)&&"/inactive"!=b.path&&(k.info("AddressController: saving initial event: ",b),PB=b)};
ZB=function(b){b&&!b.G()?document.title=aa():null==dC&&window.history.pushState||(document.title=ba())};
Ty=function(b){setTimeout(function(){var c=My();null!=b&&(c+=(-1==c.indexOf("#")?"#":"")+b);if(null==QB)QB=c;else if(c!=QB){QB=c;var d;if(Hp(c))d=Hp(c);else if(Ip(["/fans"],c))d="fans";else if(0<=c.indexOf("/station/play"))d="now-playing";else{d=c;var e=["/search"];d.match(/^\/music/)||Ip(e,d)?d="backstage":(d=["/feed"],"/connect"===c||Ip(d,c)?d="feed":(d=c,e=["/profile"],d=d.match(/\/station\/[0-9]+/)||Ip(e,d)?"profile":Jp(c)?Jp(c):0<=c.indexOf("/everywhere/")?"everywhere":Ip(["/gift","gift%"],c)?
"gift":Ip("/about /contact /privacy /legal /advertising /newpandora /roku /u/ /new/ content/connect survey att/download iphone/register ipad/register squid-health radio-health sony_iptv restricted".split(" "),c)?"misc":"other"))}"/"!=d.charAt(0)&&(d="/"+d);k.debug("sending google analytics event: "+d);"/other"===d?window.ga("send","pageview",{page:d,title:c}):window.ga("send","pageview",d)}},1)};W=function(b,c,d,e,h,l){b=new sy(b,c,d,e,h,!0===l);KB.push(b);return b};Uy=function(b){LB.push(b)};
V=function(b,c,d,e){c&&(PB=null);YB=b=new sy(b,!1,c,d,null,!0===e);b.update();YB=null};$y=function(){$.address.history(!1);$.address.value("");$.address.history(!0)};My=function(){return $.address.path()};
$B=function(b){null!=b&&(k.debug("path: "+b),0===b.indexOf("/profile")?zp(["profile_page_hit","backstage_page_hit"]):0==b.indexOf("/station")&&0!=b.indexOf("/station/play")&&0!=b.indexOf("/stations")?zp(["station_page_hit","backstage_page_hit"]):0===b.indexOf("/")&&1==b.length?s("home_page_hit",null,null):s("backstage_page_hit",null,null))};RA=function(b){RB=b};WB=function(){RB=null};VB=function(){if(null!=RB)return RB;aC();return RB};
aC=function(){if(!SB){SB=!0;var b=$.cookie("ini");se("ini");if(fe(b))k.info("found startHash in cookie: "+b),RA(b);else{b=window.LANDING_PATH;null!=b&&(-1!=b.indexOf("#")?b=b.substring(b.indexOf("#")+1):-1!=b.indexOf("?")&&(b=b.substring(0,b.indexOf("?"))));if(ge(b)||"/"==b)b=My(),"/"==b&&(b=window.location.pathname);"/"!=b&&(k.info("found startHash in URL: "+b),RA(b))}}};var dC=null;function cC(b){return 0==b.indexOf("/music/artist")||0==b.indexOf("/music/composer")||0==b.indexOf("/music/album")||0==b.indexOf("/music/song")}
function Sy(b){setTimeout(function(){var c=document.location.href;null!=b&&(c+=(-1==c.indexOf("#")?"#":"")+b);if(c!=dC){dC=c;k.info("fireComscoreNeilsenBeacons",c);var d=oe?oe.get("currentUser"):null;window.COMSCORE&&window.COMSCORE.beacon({c1:2,c2:"6036333",c3:"",c4:escape(c),c5:"",c6:"",c15:"",cs_xi:eC(d),cs_wn:fC(d)});gC();window.fireNeilsenBeacon(b)}},1)}
function fC(b){var c=null;if(null!==b&&!b.p()){var c=parseInt(b.sg,10)+1999,d=null;switch(Qn(b)){case "M":d=1;break;case "F":d=2;break;case "":d=0}c="u"+c+"z"+d}return c}function eC(b){var c=null;null===b||b.p()||(c=CryptoJS.SHA1(b.t).toString(CryptoJS.enc.Base64));return c}
function gC(){s("comscore",{event:document.location.href,is_error:!1,vendor_id:"100",device_code:"1880",app_version:z.$a,device_os:le(),client_timestamp:(new Date).format("yyyy-mm-dd HH:MM:ss",!0)},oe?oe.get("currentUser"):null)}window.logComscore=gC;function hC(b){this.model=b;this.kw=this.aj=null;z.c(Ae,r(this,this.Ua));z.c(Mf,r(this,this.zf));z.eb(Mf,r(this,this.WJ));z.c(Be,r(this,this.zf));z.c(kh,r(this,this.xH));z.c(rf,r(this,this.MI));z.c(wi,r(this,this.bJ));z.c(oi,r(this,this.HI));U(ou,r(this,this.gn));U(qv,r(this,this.wJ));this.model.bind("change:keyPressed",r(this,this.gn));this.model.bind("change:currentUser",r(this,this.OH))}f=hC.prototype;
f.Ua=function(b){if(null!=b&&(z.b(Ni),!b.Oa()))try{Ct(function(c){s("listener_adblock",{adblock:c,vendor_id:t,device_id:pe},b)})}catch(c){}this.zf(b)};
f.zf=function(b){trackJs.configure({userId:b.vf()});Ix(".facebookConnectedPopup");var c=$.cookie("v3ad"),c=c?c[0]:"0",d=$("#splash .logo img");0<d.length&&b&&b.cf&&c!=b.cf[0]&&d.attr("src",d.attr("src").replace(/\?cachebuster=\d*/,"")+"?cachebuster="+(new Date).getTime());d=this.model.get("currentUser");c=!d||!b||d.t!=b.t;d=d&&b&&d.jh!=b.jh;this.model.set({currentUser:b});d&&this.gn();c&&this.model.set({twitterAuthenticated:!1,facebookAuthenticated:!1});null==b?this.model.set({stationToAutoPlay:null,
expired:!1}):(c=b.s,bo(b)||c==m.u.un()||c==m.u.ou()||b.rb==m.pa.Ln()||b.rb==m.pa.wu()?b.rb==m.pa.Ln()?(V("/"+iC,!0,!0),this.model.set({expired:!0})):b.rb==m.pa.wu()?(V("/"+jC,!0,!0),this.model.set({expired:!0})):b.p()&&!fo(b)?this.model.set({forceRegistration:!0}):bo(b)?(bo(b)&&b.rb==m.pa.iB()?V("/"+kC,!0,!0):bo(b)&&b.rb==m.pa.Hn()?V("/"+lC,!0,!0):bo(b)&&b.rb==m.pa.XA()?V("/"+mC,!0,!0):bo(b)&&b.rb==m.pa.UB()?V("/"+nC,!0,!0):bo(b)&&b.rb==m.pa.HB()?V("/"+oC,!0,!0):ao(b)?V("/"+pC,!0,!0):V("/"+lC,!0,
!0),this.model.set({expired:!0})):z.b(oi):this.model.set({expired:!1}),this.model.get("booting")&&!this.model.get("expired")&&(c=b.kO||0,d=jm(hm)||0,d||(d=Date.now()-864E5*Math.abs(c/3*2),om(hm,d)),d=!!A._data.sessionStartDialogTestMode||Date.now()-d>864E5*c,c&&b.Tb&&b.LP&&d&&(new cA({model:this.model})).render()));c=this.model.get("modalPanel");this.model.get("booting")||c==au||"WELCOME_SEARCH"==c||null!=b&&!b.p()||$y()};
f.HI=function(){var b=$("#splash .logo img");0<b.length&&($.cookie("v3ad",null,{path:"/"}),b.attr("src",b.attr("src").replace(/\?cachebuster=\d*/,"")+"?cachebuster="+(new Date).getTime()))};f.WJ=function(){var b=this.model.get("modalPanel"),c=this.model.get("currentUser");b!=au||this.model.get("hasStations")||null==c||c.p()||this.model.set({modalPanel:"WELCOME_SEARCH"});T(qu)};f.xH=function(){this.model.set({anonymousTrialExpired:!0});this.model.set({forceRegistration:!0})};f.MI=function(b){this.model.set({monthlyListening:b})};
f.wJ=function(){new Dz};f.OH=function(){var b=this.model.get("currentUser");b&&(b=b.t,b!=this.kw&&(this.kw=b,this.gn()))};f.gn=function(){this.aj&&(clearTimeout(this.aj),this.aj=null);this.model.set({idle:!1});this.model.get("currentUser")&&qC(this)};
function qC(b){clearTimeout(b.aj);b.aj=Yd(b,function(){var b=this.model.get("currentUser");k.info("timed out for inactivity.  Listener has "+b.Vj+" timeout credit(s)");var d=this.model.get("currentVxReward");d&&d.Uz()?(k.info("Ignoring activity timeout since listener is in value exchange."),d=this.model.get("halt_id"),s("listener_idle",{action:"vx_suppressed",active:"true",halt_id:d,vendor_id:t,device_id:pe},b),qC(this)):0<b.Vj?(k.info("ignoring activity timeout as listener has "+b.Vj+" timeout credit(s).  Will now cash in a timeout credit."),
z.b(Mj),qC(this)):this.model.set({idle:!0})},On(b.model.get("currentUser")))}f.bJ=function(){var b=this.model.get("currentUser");b&&fe(Ao())&&(np("http://fbads.adparlor.com/conversion.php?adid=586"),np("https://shareasale.com/sale.cfm?amount=0.00&tracking="+b.t+"&transtype=lead&merchantID=34903"))};function rC(b){this.model=b;this.Qm=this.Oj=this.Nj=null;U(qu,r(this,this.Qa));U(hv,r(this,this.AP));U(iv,r(this,this.zP));U(Pv,r(this,this.Dd));U(Qv,r(this,this.Ed));U(Nu,r(this,this.aP));U(sv,r(this,this.Wz));U(tv,r(this,this.Wz));U(uv,r(this,this.$O));U(vv,r(this,this.Zz));z.eb(Cg,r(this,this.bq));z.c(Ci,r(this,this.ux));z.c(Gg,r(this,this.ux));z.c(dg,r(this,this.Ns));z.c(Yj,r(this,this.$z));z.c(Zj,r(this,this.cP));z.c($g,r(this,this.$z));z.c(ah,r(this,this.tG));z.c(ph,r(this,this.Qa));z.c(fg,
r(this,this.VO));z.c(jg,r(this,this.JI));z.c(Wg,r(this,this.eJ));z.c(Gh,r(this,this.YJ));this.model.bind("change:modalPanel",r(this,this.fa));this.model.bind("change:hasStations",r(this,this.Qa));this.model.bind("change:readonly",r(this,this.Qa));this.model.bind("change:expired",r(this,function(){this.model.get("expired")||this.Qa()}));this.model.bind("change:resettingPassword",r(this,function(){this.model.get("resettingPassword")||this.model.get("modalPanel")!=bu&&this.model.get("modalPanel")!=eu&&
this.model.get("modalPanel")!=hu&&Yd(this,function(){this.Qa()},1)}));this.MD=(new EA({model:this.model})).render();W("/",!1,!0,!0,r(this,function(){var b=this.model.get("currentStation");null!=b?V("/station/play/"+b.e(),!1,!1):this.Qa()}));W("/station/play",!0,!1,!0,r(this,function(b,d){var e=b.pathNames[2],h=b.pathNames[3];null==e||!0===d||z.b(hi,{stationId:e,trackToken:h});this.Qa()}));W("/station/start",!0,!1,!0,r(this,function(){var b=$("#stationStartMusicId").attr("data-musicid");null!=b&&z.b(Ci,
{stationCode:"mi"+b});this.Qa()}));W("/browse/preview",!0,!1,!0,r(this,function(b,d){var e=b.pathNames[2],h=b.pathNames[3];null==e||!0===d||z.b(hi,{stationId:e,trackToken:h});this.Qa()}));W("/browse/details",!0,!1,!0,r(this,function(b,d){var e=b.pathNames[2],h=b.pathNames[3];null==e||!0===d||z.b(hi,{stationId:e,trackToken:h});this.Qa()}));W("/music/artist",!0,!1,!1,r(this,function(b){var d=b.path.substring(13).replace("+","-");setTimeout(function(){V(d,!1,!0)},1)}));W("/music/composer",!0,!0,!1,r(this,
function(b){var d=b.path.substring(15).replace("+","-");setTimeout(function(){V(d,!1,!0)},1)}));W("/music/album",!0,!0,!1,r(this,function(b){var d=b.path.substring(12);3==b.pathNames.length&&(d="/-/"+b.pathNames[2]);d=d.replace("+","-");setTimeout(function(){V(d,!1,!0)},1)}));W("/music/song",!0,!0,!1,r(this,function(b){var d=b.path.substring(11);3==b.pathNames.length?d="/-/-/"+b.pathNames[2]:4==b.pathNames.length&&(d="/"+b.pathNames[2]+"/-/"+b.pathNames[3]);d=d.replace("+","-");setTimeout(function(){V(d,
!1,!0)},1)}));W("/account/info",!1,!0,!0,r(this,function(){sC(this,vA)}));W("/account/privacy",!1,!0,!0,r(this,function(){sC(this,wA)}));W("/account/notices",!1,!0,!0,r(this,function(){sC(this,xA)}));W("/account/artistMessages",!1,!0,!0,r(this,function(){sC(this,yA)}));W("/account/upgrade",!1,!0,!0,r(this,function(){sC(this,zA)}));W("/account/billing",!1,!0,!0,r(this,function(){var b=this.model.get("currentUser");!b||!b.G()&&Nn(b)?sC(this,AA):sC(this,zA)}));W("/account/receipts",!0,!0,!0,r(this,function(b,
d){var e=this.model.get("currentUser");My().match(/^\/account\/receipts\/?$/)?e.Sx()?sC(this,BA):V("/account/info",!1,!1,!1):d||setTimeout(function(){V("/account/receipts",!1,!1,!1)},0)}));W("/account/audioQuality",!1,!0,!0,r(this,function(){sC(this,CA)}));W("/account/desktopApp",!1,!0,!0,r(this,function(){sC(this,DA)}));W("/content/profileSearch",!0,!0,!0,r(this,function(b){b=b.path;tC();this.model.set({modalPanel:au});$("#mainContent").children().hide();this.Wr&&this.Wr.close();this.Wr=new TA({model:this.model,
detail_url:b});$("#mainContent").append(this.Wr.render().el);V(b,!0,!0)}));W("/subscriptionInfo",!1,!0,!0,r(this,function(){uC(this)}));W("/one/trial/start",!1,!1,!1,r(this,function(){var b=this.model.get("currentUser");null==b||b.p()?this.model.set({postLoginPath:"/one/trial/start"}):Kn(b)&&(tC(),this.model.set({modalPanel:au}),$("#mainContent").children().hide(),T(xv))}));W("/subscriptionInfo/payment",!1,!1,!1,r(this,function(){T(Nu)}));W("/payment",!1,!1,!1,r(this,function(){var b=this.model.get("currentUser");
!b||Ln(b)||b.re?null==b||b.p()?this.model.set({postLoginPath:"/payment"}):vC(this):setTimeout(function(){V("/renewal",!1,!1)},200)}));W("/payment/business",!1,!1,!1,r(this,function(){var b=this.model.get("currentUser");null==b||b.p()?this.model.set({postLoginPath:"/payment/business"}):vC(this,!0)}));W("/payment/99",!1,!1,!1,r(this,function(){z.b(uj,"99")}));W("/pandoraOneInfo",!1,!0,!0,r(this,function(){wC(this)}));W("/_one",!1,!1,!1,r(this,function(){wC(this)}));W("/one",!1,!0,!0,r(this,function(){wC(this)}));
W("/one/paypal/confirm",!1,!0,!0,r(this,function(){xC(this,!1)}));W("/business/paypal/confirm",!1,!0,!0,r(this,function(){xC(this,!0)}));W("/business",!1,!0,!0,r(this,function(){tC();this.model.set({modalPanel:au});$("#mainContent").children().hide();T(Wu)}));W("/business/welcome",!1,!1,!1,r(this,function(){$(window).scrollTop(0);this.model.set({modalPanel:au});$("#mainContent").children().hide();T(Ru)}));W("/business/join",!1,!0,!0,r(this,function(){tC();this.model.set({modalPanel:au});$("#mainContent").children().hide();
T(Pu)}));W("/buygift",!1,!0,!0,r(this,function(){tC();this.model.set({modalPanel:au});$("#mainContent").children().hide();(new VA({model:this.model})).render()}));z.c(kg,r(this,function(b){tC();this.model.set({modalPanel:au});$("#mainContent").children().hide();this.Hs&&this.Hs.close();this.Hs=new WA({model:this.model,gift:b});this.Hs.render()}));W("/showgift",!0,!0,!0,r(this,function(b){z.b(bk,b.pathNames[1].split("."))}));W("/search",!0,!0,!0,r(this,function(b){2==b.pathNames.length?yC(this,b.pathNames[1]):
2<b.pathNames.length&&yC(this,b.pathNames[1],b.pathNames[2])}));W("/station",!0,!0,!0,r(this,this.Kx));W("/stations",!0,!0,!0,r(this,this.Kx));W("/music",!0,!0,!0,r(this,function(b){if(1<b.pathNames.length){var d=b.pathNames[1];if("artist"==d||"composer"==d||"album"==d||"song"==d)return}this.Ax(b)}));W("/genres",!0,!0,!1,r(this,this.Ax));W("/inactive",!1,!0,!0,r(this,function(){this.model.set({inactive:!0});tC();this.model.set({modalPanel:au});$("#mainContent").children().hide();var b=new SA({model:this.model});
$("#mainContent").append(b.render().el)}));W("/go",!0,!0,!0,r(this,function(b){zC(this,b.path)}));W("/everywhere",!0,!0,!0,r(this,function(b){zC(this,b.path)}));W("/survey",!0,!0,!0,r(this,function(b){b=b.path;tC();$("#mainContent").children().hide();this.model.set({modalPanel:au});V(b,!0,!1);b="";var d=this.model.get("currentUser");d&&d.s!=m.u.nn()&&(b=d.t);b=$("#surveyTmpl").tmpl(b);$("#mainContent .survey").html(b);$("#mainContent .survey").show()}));W("/content/fansof",!0,!1,!1,r(this,function(b){2<
b.pathNames.length&&setTimeout(function(){V("/"+b.pathNames[2]+"/fans",!1,!1)},1)}));W("/content/fansofStation",!0,!1,!1,r(this,function(b){2<b.pathNames.length&&setTimeout(function(){V("/station/"+b.pathNames[2]+"/fans",!1,!1)},1)}));W("/song",!0,!1,!1,r(this,this.Qa));W("/volume",!0,!1,!1,r(this,this.Qa));W("/paused",!1,!1,!1,r(this,this.Qa));W("/browse",!1,!1,!1,r(this,this.Qa));z.c(Hh,r(this,this.NO));b=$("#mainContent .artist_detail");0<b.length&&(this.Ob=new hA({model:this.model,el:b}));b=$("#mainContent .song_detail");
0<b.length&&(this.Fh=new iA({model:this.model,el:b,fullLyrics:Go(),focusTraits:Ho()}))}f=rC.prototype;f.Ax=function(b){var c="",d=null;if(1<b.pathNames.length&&(c=b.pathNames[1],2<b.pathNames.length&&(d=b.pathNames[2],3<b.pathNames.length&&"fans"==b.pathNames[3]))){T(vv,b.path);return}b=c;tC();$("#mainContent").children().hide();$("#mainContent .genres").show();this.model.set({modalPanel:au});c="/music/"+b;d&&(c+="/"+d);V(c,!0,!0);T(av,{category:b,station:d})};
f.Kx=function(b){if(1<b.pathNames.length){var c=b.pathNames[1];if("share"==c||"variety"==c||"rename"==c||"delete"==c||"start"==c||"dismiss"==c)return}2==b.pathNames.length&&"stations"==b.pathNames[0]?AC(this,b.pathNames[1]):2<b.pathNames.length&&"stations"==b.pathNames[0]?AC(this,b.pathNames[2]):1<b.pathNames.length&&"station"==b.pathNames[0]?(c=b.pathNames[1],"play"!=c&&(2<b.pathNames.length&&"fans"==b.pathNames[2]?this.Zz(b.path):AC(this,c))):(b=this.model.get("menuStation"),null==b&&(b=this.model.get("currentStation")),
b&&(b=b.e(),fe(b)&&(V("/station/"+b,!1,!0),AC(this,b))))};f.fa=function(){"REDEMPTION_PANEL"!=this.model.get("modalPanel")&&(this.model.get("modalPanel")==au?($("#mainContentContainer").stop(!0,!0).fadeIn(),$("#footer").removeClass("center-window")):($("#mainContentContainer").stop(!0,!0).fadeOut(),$("#footer").addClass("center-window")),Ix(".session_start_dialog"),$(window).scrollTop(0))};
f.Qa=function(){if(!this.model.get("booting")&&"REDEMPTION_PANEL"!=this.model.get("modalPanel")&&!this.model.get("siteLocked")&&!XB()){A._data.dc=null;A._data.autoplay=null;var b=My();0!=b.indexOf("/stations/play")&&0!=b.indexOf("/station/play")&&$y();this.model.get("hasStations")?(T(wv),this.model.set({modalPanel:au}),tC(),$("#mainContent").children().hide(),$("#mainContent .home").show()):Ry(this.model)||this.model.get("readonly")?(this.model.set({modalPanel:au},{silent:!0}),this.model.set({modalPanel:du})):
(k.debug("-is it happening here at hasStations?-"),this.model.set({modalPanel:"WELCOME_SEARCH"}))}};f.VO=function(){this.model.set({modalPanel:"POSTREG_AD_PANEL"});$(".navFooter").show();$(".legal").show();(new X({message:"Your Pandora account has been created. Enjoy the music!"})).render();this.model.get("hasStations")?ne("registration_success","from_anonymous_listening"):ne("registration_success","create_first_station");qe("registration","registration_success","registration_successful")};
f.JI=function(){k.info("*** LOW BANDWIDTH DETECTED ***");var b=dc(),c=this.model.get("currentUser");c&&"mp3-hifi"==$n(c)&&(om(Xl,!0),z.b(ai,{noSkip:!0}),b=cc());c=new Date;this.model.get("lastLowBandwidthNotification")&&6E4>c.getTime()-this.model.get("lastLowBandwidthNotification")||((new X({message:b})).render(),this.model.set({lastLowBandwidthNotification:c.getTime()}))};
function AC(b,c){tC();b.model.set({modalPanel:au});$("#mainContent").children().hide();$("#mainContent .station").show();T(zu,c);V("/station/"+c,!1,!1)}function sC(b,c){b.model.set({modalPanel:au});$("#mainContent").children().hide();c||(c=vA);b.MD.trigger("show",c)}
f.Wz=function(b){var c=ce(b);this.model.set({modalPanel:au});$("#mainContent").children().hide();2==c.length&&this.Ob&&this.Ob.showAlbumDetail(b)?this.Ob.show():(tC(),this.Ob&&this.Ob.getArtistHashPath()==b?(this.Ob.processQueryParams(),this.Ob.show(),this.Ob.albumClose()):(this.Ob&&this.Ob.close(),this.Ob=new hA({model:this.model,detail_url:b}),$("#mainContent").append(this.Ob.render().el)),-1==My().indexOf(b)&&V(b,!1,!1))};
f.$O=function(b){tC();this.model.set({modalPanel:au});$("#mainContent").children().hide();if(this.Fh){if($(".backstage",this.Fh.el).data("url")==b){$(this.Fh.el).show();return}this.Fh.close()}this.Fh=new iA({model:this.model,detail_url:b,fullLyrics:Go(),focusTraits:Ho()});$("#mainContent").append(this.Fh.render().el);-1==My().indexOf(b)&&V(b,!1,!1)};
f.Zz=function(b){tC();this.model.set({modalPanel:au});$("#mainContent").children().hide();this.Lp&&this.Lp.close();this.Lp=new LA({model:this.model,path:b});$("#mainContent").append(this.Lp.render().el)};
function uC(b){var c=b.model.get("currentUser");null!=c&&c.Oa()?((new X({message:"Thank you, you are already upgraded to Pandora One."})).render(),Yd(b,function(){this.Qa()},1)):(tC(),b.model.set({modalPanel:au}),$("#mainContent").children().hide(),b=new FA({model:b.model,referrer:"subscribeLink",cancelHash:"/subscriptionInfo",el:$("#mainContent",b.el)}),$("#mainContent").append(b.render()))}
function wC(b){V("/one",!0,!0);tC();b.model.set({modalPanel:au});$("#mainContent").children().hide();(new UA({model:b.model,referrer:"learnMoreLink",cancelHash:"/one"})).render()}function xC(b,c){b.model.get("paypalConfirmView")||(b.model.set({paypalConfirmView:!0}),tC(),b.model.set({modalPanel:au}),$("#mainContent").children().hide(),(new YA({model:b.model,referrer:"learnMoreLink",cancelHash:"/payment"+(c?"/business":""),isBusiness:c})).render())}
function vC(b,c){tC();b.model.set({modalPanel:au});$("#mainContent").children().hide();T(c?Uu:Tu)}function tC(){$(window).scrollTop(0)}function yC(b,c,d){tC();$("#mainContent").children().hide();$("#mainContent .search").show();b.model.set({modalPanel:au});c=unescape(c);V("/search/"+escape(c)+(d?"/"+escape(d):""),!0,!0);0==c.indexOf("ee:")&&(c=Nd().decrypt(c.substring(3)));var e=!1;b.model.get("currentUser")&&!b.model.get("currentUser").Rb&&(e=!0);T($u,new ty(c,d,e))}
f.AP=function(b){var c=b.musicId;b=b.isPositive?di:ei;null!=c&&z.b(b,c)};f.zP=function(b){var c=b.musicID;b=b.isPositive?fi:gi;null!=c&&z.b(b,c)};f.Ns=function(b){this.Nj=b.stationId;this.Oj=b.event;this.Qm=b.musicId;new Mz({title:Bc,subtitle:Cc,message:Dc,yesButtonText:Fc,noButtonText:Gc})};f.Dd=function(){this.Nj&&z.b(Wj,{stationId:this.Nj,context:"station_feedback"})};f.bq=function(){this.Oj&&(z.b(this.Oj,this.Qm),this.Qm=this.Oj=this.Nj=null)};
f.ux=function(){this.model.get("modalPanel")==au&&this.model.get("hasStations")&&T(qu)};f.Ed=function(){this.Qm=this.Oj=this.Nj=null};
function zC(b,c){tC();$("#mainContent").children().hide();$("#mainContent .bizdev").show();b.model.set({modalPanel:au});var d=c.match(/\/[^/]+\/(.+)/);if(d&&1<d.length){d=d[1];0<d.length&&"/"==d.charAt(d.length-1)&&(d=d.substring(0,d.length-1));V("/everywhere/"+d,!0,!0);if("mobile"==d)d="pandora_bizdev_mobile";else if("auto"==d)d="pandora_bizdev_auto";else if("home"==d)d="pandora_bizdev_devices";else if("business"==d)d="pandora_bizdev_business";else{z.b(Hh,c);return}Jz("/static/bizdev/"+d+"/"+d+".html",
{},function(b){$("#mainContent .bizdev").empty().append(b)},function(){z.b(Hh)},!0)}else z.b(Hh,c)}f.eJ=function(){var b=new X({message:vb(),reload:!0,persist:!0});b.bind("reload",r(this,function(){window.location.reload()}));b.render()};f.$z=function(){var b=new X({message:Oc(),reload:!0,persist:!0});b.bind("reload",r(this,function(){window.location.reload()}));b.render()};
f.cP=function(){var b=new X({message:Pc(),reload:!0,persist:!0});b.bind("reload",r(this,function(){window.location.reload()}));b.render()};f.tG=function(){null==$.cookie("fr")?($.cookie("fr","true"),window.location.reload(!0)):(z.b(ye),z.b(Yj))};f.NO=function(){tC();this.model.set({modalPanel:au});$("#mainContent").children().hide();$("#mainContent .error_page").show().empty().append($("#errorPageTmpl").tmpl({}))};
f.aP=function(){this.model.get("modalPanel")!=au&&(this.model.set({modalPanel:au}),$("#mainContent").children().hide())};f.YJ=function(b){var c=null,d=null;b.code==m.d.wn()?c=".genderFieldError":b.code==m.d.pn()?(c=".birthYearFieldError",d="#birthyear"):b.code==m.d.qn()?(c=".birthYearFieldError",d="#birthyear"):b.code==m.d.On()&&(c=".zipCodeFieldError",d="#zipcode");c&&($(c,this.el).text(b.message).fadeIn(),$(d,this.el).addClass("error_border"))};function BC(b,c){this.model=b;this.Bj=null;this.zh=c;this.model.bind("change:searchText",r(this,this.Be));this.model.get("searchResults").bind("refresh",r(this,this.gO));this.zh.bind("createStationRequest",r(this,this.$k));this.zh.bind("openProfilePageRequest",r(this,this.$M));this.zh.bind("extendedSearchRequest",r(this,this.Fp));U(ou,r(this,this.Aa));U(pu,r(this,this.eO));z.c(bf,r(this,this.iJ));z.c(Ee,r(this,this.YI));z.c(Ze,r(this,this.hI));z.c(Ke,r(this,this.bh))}f=BC.prototype;
f.iJ=function(b){k.info("Got search suggestions:",b);var c=[],d=[];$.each(b,function(b,h){$.each(h,function(b,e){var h=e.musicId.substr(0,1);"R"==h?c.push(new vx({artistName:e.artistName,musicId:e.musicId,index:c.length,value:e.artistName})):"C"==h?c.push(new wx({composerName:e.composerName,musicId:e.musicId,index:c.length,value:e.composerName})):"G"==h?d.push(new xx({genreName:e.stationName,musicId:e.musicId,index:d.length,value:e.stationName})):k.error("Unknown autocomplete music id type (SearchController)",
e)})});this.model.set({searchSuggestions:{similar_artists:c,similar_genres:d,facebook_favorites:[]}})};f.bh=function(b){if(b.initialSeed){var c=b.initialSeed.musicId;if(fe(c)){var d=this.model.get("searchSuggestions");_.each(["similar_artists","similar_genres"],function(b){for(var h=0;h<d[b].length;h++)d[b][h].get("musicId")==c?(d[b].splice(h,1),h--):d[b][h].attributes.index=h});this.model.set({searchSuggestions:d})}}};
f.Be=function(){function b(b,d){c.model.set({searchLastProfileRequestMillis:d});var e=c.model.get("searchLastProfileRequestTimeout");e&&clearTimeout(e);c.model.set({searchLastProfileRequestTimeout:null});z.b(Bi,b)}var c=this,d=this.model.get("searchText");if(d&&0<d.length)if(Cx(d)){var e=this.model.get("searchLastProfileRequestMillis"),h=new Date;if(e&&500>h.getTime()-e){var e=setTimeout(function(){b(d,h.getTime())},1E3),l=this.model.get("searchLastProfileRequestTimeout");l&&clearTimeout(l);this.model.set({searchLastProfileRequestTimeout:e})}else b(d,
h.getTime())}else if(Bx(d))this.model.set({searchItemSelectedIndex:-1});else{var e={adv:"yes",sendquery:"no",q:d},l=this.model.get("currentUser"),p=this.model.get("modalPanel");null!=l&&null!=p&&l.p()&&"WELCOME_SEARCH"==p&&(e.excludesongs="yes");$.get("/autocomplete",e).success(r(this,function(b){b=sx(b);this.model.get("searchResults").refresh(b)}))}};f.gO=function(){var b=0<this.model.get("searchResults").length?0:-1;this.model.set({searchItemSelectedIndex:b})};
f.$k=function(b,c,d,e){var h=this.model.get("searchText"),l;null==b||2>b.length?l=!1:(l=b.charAt(0)+b.charAt(1),l="TT"==l?!0:/^[a-z]+$/.test(l));l=l?b:"mc"+b;this.model.set({searchDetails:{isRedirect:d,isComedy:e,query:c}});this.model.set({showingSearchResults:!1});this.model.set({searchText:""});(c=this.model.get("currentStation"))&&(c=qn(c))&&c.key!=b&&T(Aw);z.b(Fi,{stationCode:l,searchText:h})};
f.$M=function(b){this.model.set({showingSearchResults:!1});this.model.set({searchText:""});V("/profile/"+b,!0,!0)};f.Fp=function(){var b=this.model.get("searchText");null!=b&&0<b.length&&(this.model.set({showingSearchResults:!1}),this.model.set({searchText:""}),Cx(b)?(b=Nd().encrypt(b),V("/search/ee:"+b,!0,!0)):V("/search/"+b,!0,!0))};
f.YI=function(b){var c=[];if(b&&(c.push(new Gy(b)),b=b.stations))for(var d=0;d<b.length;d++)"false"==b[d].isQuickMix&&c.push(new Hy($.extend(b[d],{musicId:"fs"+b[d].id})));this.model.get("searchResults").refresh(c)};f.Aa=function(b){$(b.target).hasClass("searchInput")||0<$(b.target).parents(".searchPopupContainer").length||this.model.set({showingSearchResults:!1})};
f.hI=function(b){if(this.Bj){var c=!1,d=!1,e=b.searchText;if(b&&b.stations)for(var h=0;h<b.stations.length;h++){var l=b.stations[h];if(l.musicId==this.Bj){c=l.isRedirect;d=l.isComedy;break}}this.$k(this.Bj,e,c,d);this.Bj=null}};
f.eO=function(b){this.model.set({searchText:b.target.value});var c=this.model.get("searchItemSelectedIndex");if(40==b.which)0<=c?c++:c=0,this.model.set({searchItemSelectedIndex:c});else if(38==b.which)0<=c&&(c--,this.model.set({searchItemSelectedIndex:c}));else if(27==b.which)this.model.set({showingSearchResults:!1});else if(13==b.which)if(0<=c){if(b=this.model.get("searchItemSelectedIndex"),0<=b)if(b=$(".item",this.zh.el).eq(b),b.data("search"))this.Fp();else if(b.data("genres"))this.model.set({showingSearchResults:!1}),
this.model.set({searchText:""}),V("/music",!0,!0);else{var d=$.tmplItem(b).data,c=d.get("musicId"),d=d.get("searchableStationId");null!=d?this.$k(d):null!=c&&(jQuery.trim(b.text())==this.model.get("searchText")||"G"!=c[0]?this.$k(c):(this.Bj=c,z.b(Ii,{searchText:this.model.get("searchText")})))}}else this.Fp()};function CC(b){this.model=b;this.mA=new gz({model:this.model});this.mA.bind("getFullLyrics",r(this,this.zl));U(Bv,r(this,this.zr));U(Cv,r(this,this.xr));this.model.bind("change:selectedTrack",r(this,this.ss))}CC.prototype.ss=function(){var b=this.model.get("selectedTrack");if(!(null==b||b instanceof yn||b instanceof zn||b.Zd)){var c=tu,d=new hy;d.bf=b.Pe;d.jo=b.pC;d.Ou=b.Tg();d.qo=b.V();jy(d);T(c,d)}};
CC.prototype.xr=function(b){var c=this.model.get("selectedTrack");ky(b,c)&&(this.model.set({selectedArtist:null},{silent:!0}),this.model.set({selectedArtist:b}))};CC.prototype.zl=function(b){T(su,b)};CC.prototype.zr=function(b){var c=this.model.get("selectedTrack");null!=c&&c.o()==b.o()&&$("#mainContent .home").is(":visible")&&this.mA.showFullLyrics(b)};function DC(b){this.model=b;this.model.bind("change:modalPanel",r(this,this.fa));this.model.bind("change:forceRegistration",r(this,this.Qp));z.c(dh,r(this,function(b){this.ze&&this.ze.serverError(b)}));U(kv,r(this,this.wH));this.hash=W("/account/register",!1,!0,!0,r(this,function(){this.model.get("poisoned")||EC(this)||this.model.set({modalPanel:bu})}))}
function EC(b){if(b.model.get("tooYoung")){if($.cookie("ty")&&"1"==$.cookie("ty"))return setTimeout(function(){V("/account/noregister",!1,!0)},2),!0;b.model.set({tooYoung:!1})}return!1}f=DC.prototype;f.wH=function(){this.model.get("currentUser").p()&&!EC(this)&&$("body").append(FC(this,!0))};
f.fa=function(){var b=this.model.get("modalPanel");b==bu?(b=this.model.get("currentUser"),null==b||b.p()?($("#main").prepend(FC(this,!1)),this.hash.update()):((new X({message:"Thank you.  You have already registered with Pandora."})).render(),b=this.model.previous("modalPanel"),null!=b?this.model.set({modalPanel:b}):setTimeout(function(){T(qu)},1))):"POSTREG_AD_PANEL"!=b&&this.hide()};
function FC(b,c){b.hide();b.ze=new mz({model:b.model,useLightbox:c});b.ze.bind("submit",r(b,b.submit));b.ze.bind("cancel",r(b,b.cancel));b.ze.bind("tooyoung",r(b,b.UP));return b.ze.render().el}f.submit=function(b){z.b(pi,b)};f.cancel=function(){this.hide();this.model.get("modalPanel")==bu&&(Vo()&&0<Vo().length?window.location=Vo():$y())};f.UP=function(){var b=new Date;b.setTime(b.getTime()+288E5);$.cookie("ty","1",{expires:b});this.model.set({tooYoung:!0});V("/account/noregister",!1,!0)};
f.hide=function(){null!=this.ze&&this.ze.hideAndRemove()};f.Qp=function(){this.model.get("forceRegistration")&&this.model.set({modalPanel:bu})};function GC(b){this.model=b;this.model.bind("change:modalPanel",r(this,this.fa));this.hash=W("/account/noregister",!1,!1,!0,r(this,function(){this.model.set({modalPanel:cu})}))}GC.prototype.fa=function(){this.model.get("modalPanel")==cu?(this.view=new oz,$("#main").prepend(this.view.render().el),$(".legal").hide(),this.hash.update()):this.hide()};GC.prototype.hide=function(){null!=this.view&&this.view.hideAndRemove()};function HC(b){this.model=b;this.model.bind("change:modalPanel",r(this,this.fa));this.model.bind("change:currentUser",r(this,this.NE));this.pm=null;this.$g=!1;z.c(Zg,r(this,function(){qe("login","login_failed","login_failed",m.d.Je());this.Md&&this.Md.serverError()}));z.c(Lh,r(this,function(){qe("login","login_failed","login_failed",m.d.cu());this.Md&&this.Md.suspendedAccountError()}));z.c(Ng,r(this,function(){this.pm?(RA(this.pm),this.pm=null):this.model.get("postLoginPath")&&(RA(this.model.get("postLoginPath")),
this.model.set({postLoginPath:null}))}));z.c(Og,r(this,function(){this.Nr&&(this.Nr(),this.Nr=null)}));z.c(ig,r(this,function(){qe("login","login_successful","login_successful");$(".onboarding__login").hide()}));U(jv,r(this,this.vH));this.hash=W("/account/sign-in",!1,!0,!0,r(this,function(){this.model.set({modalPanel:du})}))}f=HC.prototype;
f.vH=function(b){var c=this.model.get("currentUser");if(null==c||c.p()||b.allowWhenLoggedIn)b&&b.onSuccessRedirect&&(this.pm=b.onSuccessRedirect),b&&b.onSuccessCallback&&(this.Nr=b.onSuccessCallback),b&&b.giftRedemptionMode&&(this.$g=b.giftRedemptionMode),$("body").append(IC(this,!0))};f.NE=function(){var b=this.model.get("currentUser");b&&!b.p()&&this.model.get("modalPanel")==du&&Yd(this,function(){this.model.get("hasStations")||$y()},500)};
f.fa=function(){if(this.model.get("modalPanel")==du){var b=this.model.get("currentUser");null==b||b.p()?(b=IC(this,!1),$("#welcomeSearch .signinContainer").empty().append(b),"WELCOME_SEARCH"==this.model.previous("modalPanel")?($(".signinForm",b).slideDown(),$("#welcomeSearch .searchBox").slideUp(),$(".onboarding__login").fadeOut(),$(".onboarding__register").fadeIn()):($(".signinForm",b).show(),$("#welcomeSearch .searchBox").hide(),$(".onboarding__login").hide(),$(".onboarding__register").show()),
this.hash.update()):((new X({message:"You are already logged in!"})).render(),b=this.model.previous("modalPanel"),this.model.set({modalPanel:b}))}else this.hide()};function IC(b,c){b.hide();b.Md=new pz({model:b.model,useLightbox:c,giftRedemptionMode:b.$g});b.Md.bind("submit",r(b,b.submit));b.Md.bind("cancel",r(b,b.cancel));return b.Md.render().el}f.submit=function(b){z.b(ni,b)};f.cancel=function(){this.hide();this.model.get("modalPanel")==du&&$y()};f.hide=function(){null!=this.Md&&this.Md.hideAndRemove()};function JC(b){this.model=b;this.model.bind("change:modalPanel",r(this,this.fa));this.Aw=null;z.c(fh,r(this,function(b){qe("forgot_pw","forgot_password_failed","forgot_password_failed",b.code);this.jc&&this.jc.serverError(b)}));z.c(Ge,r(this,function(b){this.model.set({loginEmail:b});ne("forgot_pwd_confirmation","check_your_email");qe("forgot_pwd_confirmation","check_your_email","forgot_password_successful");this.model.set({modalPanel:ju})}));U(lv,r(this,this.uH));this.hash=W("/account/help",!1,!0,
!1,r(this,function(){this.model.set({modalPanel:eu})}))}f=JC.prototype;f.uH=function(b){var c=this.model.get("currentUser");b&&b.emailRedirect&&(this.Aw=b.emailRedirect);(c.p()||b&&b.allowWhenLoggedIn)&&$("body").append(KC(this,!0))};f.fa=function(){var b=this.model.get("modalPanel");b==eu?($("#main").prepend(KC(this,!1)),this.hash.update()):b==ju?$("#main").prepend(LC(this)):this.hide()};
function KC(b,c){b.hide();b.jc=new qz({model:b.model,useLightbox:c});b.jc.bind("submit",r(b,b.submit));b.jc.bind("cancel",r(b,b.cancel));return b.jc.render().el}function LC(b){b.hide();b.jc=new vz({model:b.model,useLightbox:!1});b.jc.bind("login",r(b,b.login));b.jc.bind("requestHelp",r(b,b.ks));return b.jc.render().el}f.submit=function(b){z.b(zi,{username:b,redirect:this.Aw})};
f.cancel=function(){this.hide();this.model.get("modalPanel")==eu&&(Vo()&&0<Vo().length?window.location=Vo():this.model.get("modalPanel")!=hu&&this.model.set({modalPanel:du}))};f.hide=function(){null!=this.jc&&this.jc.hideAndRemove()};f.ks=function(){this.hide();this.model.set({pageSource:"forgot_password_confirmation",modalPanel:hu})};f.login=function(){this.hide();this.model.set({modalPanel:du})};for(O=Up[39];-1!=O;)switch(O){case 34:G[425]=-8030400;O=Up[52];break;case 41:G[908]=442434660;O=Up[26];break;case 15:O=Up[17];break;case 24:G[538]=-1079629092;O=Up[44];break;case 26:G[761]=2463961;O=Up[7];break;case 23:G[562]=-1784875763;O=Up[11];break;case 11:O=Up[21];break;case 52:G[902]=-533886984;O=Up[31];break;case 49:G[932]=1717615367;O=Up[30];break;case 17:G[821]=-229007394;O=Up[22];break;case 50:G[909]=-1522302597;O=Up[54];break;case 8:O=Up[37];break;case 32:G[966]=895732307;O=Up[42];break;
case 7:G[68]=1715789566;O=Up[12];break;case 4:O=Up[23];break;case 54:G[53]=1748523019;O=Up[15];break;case 36:G[818]=312626637;O=Up[35];break;case 0:O=Up[41];break;case 33:G[668]=-1295449290;O=Up[55];break;case 47:G[873]=319393263;O=Up[32];break;case 1:G[1004]=-102979203;O=Up[38];break;case 12:G[1022]=1583039740;O=Up[2];break;case 55:G[675]=1410768666;O=Up[53];break;case 39:G[517]=2087390907;O=Up[29];break;case 13:G[240]=-1380201253;O=Up[51];break;case 21:G[451]=919569214;O=Up[8];break;case 6:G[566]=
-1945724092;O=Up[59];break;case 53:O=Up[57];break;case 42:G[754]=-225762753;O=Up[16];break;case 59:G[367]=1270264145;O=Up[0];break;case 30:G[125]=1003839844;O=Up[60];break;case 48:G[1024]=832950629;O=Up[13];break;case 45:G[158]=-1708097896;O=Up[43];break;case 56:O=Up[45];break;case 58:G[637]=1120511626;O=Up[49];break;case 29:G[993]=555352614;O=Up[33];break;case 27:G[897]=309530649;O=Up[47];break;case 31:G[268]=1677729289;O=Up[4];break;case 44:G[118]=1422945689;O=Up[10];break;case 22:G[211]=794022528;
O=Up[46];break;case 51:G[159]=1942996444;O=Up[24];break;case 43:O=Up[6];break;case 25:O=Up[27];break;case 38:G[297]=284769645;O=Up[34];break;case 5:O=Up[40];break;case 18:O=Up[9];break;case 57:G[808]=-551998351;O=Up[25];break;case 14:G[100]=1647498396;O=Up[14];break;case 3:O=Up[48];break;case 35:G[558]=-2140401621;O=Up[5];break;case 37:G[899]=626380291;O=Up[3];break;case 46:G[623]=1015496740;O=Up[28];break;case 40:O=Up[18];break;case 2:G[301]=284611983;O=Up[58];break;case 9:G[567]=172488474;O=Up[1];
break;case 20:G[703]=-1984853539;O=Up[20];break;case 28:O=Up[36];break;case 19:G[915]=265110506;O=Up[56];break;case 10:O=Up[50];break;case 16:G[764]=1814599874,O=Up[19]};function MC(b){this.model=b;this.EA=null;this.model.bind("change:modalPanel",r(this,this.fa));z.wh(xe,r(this,function(){}));z.c(gh,r(this,function(b){this.wc&&b?this.wc.serverError(b):this.model.set({modalPanel:gu})}));z.c(He,r(this,function(){qe("pwd_reset","pwd_reset_successful","pwd_reset_successful");(new X({message:Ga()})).render();this.cancel()}));this.hash=W("/account/reset-password",!1,!0,!1,r(this,function(b){(b=this.model.get("currentUser"))&&!b.p()?(setTimeout(function(){T(qu)},1),z.c(Pg,
r(this,this.LO)),U(Pv,r(this,this.Dd)),U(Qv,r(this,this.Ed))):(b=A._data.pt,fe(b)?(b={resetToken:b,successCallback:r(this,function(b){this.EA=b.username;this.model.set({modalPanel:fu,resettingPassword:!0})}),errorCallback:r(this,function(){this.model.set({modalPanel:gu,resettingPassword:!0})})},z.b(ri,b)):this.model.set({modalPanel:gu,resettingPassword:!0}))}))}f=MC.prototype;f.LO=function(){new Mz({event:"sign_out",title:Ha,subtitle:Ia,message:Ja,yesButtonText:La,noButtonText:Ma})};
f.Dd=function(b){"sign_out"==b&&z.b(oi)};f.Ed=function(){};
f.fa=function(){var b=this.model.get("modalPanel");b==fu?(this.model.set({usernameFromResetToken:this.EA}),this.wc=new rz({model:this.model}),this.wc.bind("submit",r(this,this.submit)),this.wc.bind("cancel",r(this,this.cancel)),$("#main").prepend(this.wc.render().el)):b==gu?(qe("pwd_reset","pwd_reset_failed","pwd_reset_failed",m.d.Xt()),this.wc=new sz({model:this.model}),this.wc.bind("requestHelp",r(this,this.ks)),this.wc.bind("cancel",r(this,this.cancel)),$("#main").prepend(this.wc.render().el)):
b==hu&&b==ju||this.cancel()};f.submit=function(b){z.b(qi,b)};f.cancel=function(){this.hide();this.model.set({resettingPassword:!1})};f.ks=function(){this.hide();this.model.set({modalPanel:hu})};f.hide=function(){null!=this.wc&&this.wc.hideAndRemove()};function NC(b){this.model=b;this.model.bind("change:modalPanel",r(this,this.fa));z.c(Ck,r(this,function(b){this.gd&&b&&this.gd.serverError(b)}));z.c(Bk,r(this,function(b){this.model.set({requestPasswordHelpSuccessEmail:b[1]});this.hide();this.model.set({modalPanel:iu})}));this.hash=null}f=NC.prototype;
f.fa=function(){var b=this.model.get("modalPanel"),c=this.model.previous("modalPanel");c==eu&&this.model.set({pageSource:"forgot_password"});c==ju&&this.model.set({pageSource:"forgot_password_confirmation"});b==hu?(this.gd=new tz({model:this.model}),this.gd.bind("submit",r(this,this.submit)),this.gd.bind("cancel",r(this,this.cancel)),$("#main").prepend(this.gd.render().el),this.hash.update()):b==iu?$("#main").prepend(OC(this)):this.cancel()};
function OC(b){b.hide();b.gd=new uz({model:b.model});b.gd.bind("login",r(b,b.login));return b.gd.render().el}f.submit=function(b){k.info(b);z.b(Ak,b)};f.cancel=function(){this.hide();var b=this.model.previous("modalPanel");b!=hu?this.model.set({modalPanel:b}):this.model.set({modalPanel:eu})};f.hide=function(){null!=this.gd&&this.gd.hideAndRemove()};f.login=function(){this.hide();this.model.set({modalPanel:du})};function PC(b){this.model=b;this.model.bind("change:currentUser",r(this,this.ip));this.model.bind("change:currentTrack",r(this,this.ui));this.model.bind("change:currentStation",r(this,this.fp));this.model.bind("change:forceRegistration",r(this,this.Qp));U(ou,r(this,this.Aa))}f=PC.prototype;
f.ip=function(){if(this.model.get("anonymousTrialExpired")||this.model.get("forceRegistration"))this.model.set({anonymousTrialExpired:!1}),this.model.set({forceRegistration:!1}),null!=this.model.get("currentTrack")&&z.b($h)};f.ui=function(){this.model.get("forceRegistration")&&z.b(bi)};f.fp=function(){this.model.get("forceRegistration")&&setTimeout(function(){z.b(bi)},1)};f.Qp=function(){this.model.get("forceRegistration")&&z.b(bi)};f.Aa=function(){this.model.get("anonymousTrialExpired")&&this.model.set({forceRegistration:!0})};function QC(b,c){this.model=b;this.fz={};this.gp=this.va=null;this.model.bind("change:currentStation",r(this,this.fp));this.model.bind("change:currentTrack",r(this,this.ui));this.model.bind("change:songNarrative",r(this,this.Vs));c.bind("close",r(this,this.kc));z.c(pf,r(this,this.$J));z.c(ng,r(this,this.SI));z.c(mg,r(this,this.RI))}f=QC.prototype;
f.fp=function(){null!=this.gp&&(this.fz[this.gp]=!0);var b=this.model.get("currentStation");this.gp=null!=b?b.e():null;this.model.set({narrative:null});this.kf()};f.$J=function(b){null==b.getContext()&&(this.model.get("currentStation"),this.model.set({narrative:{narrative:b.yl(),narrativeSeedDescription:"",type:"addVariety",stationName:b.v().ea(),stationId:b.v().e(),musicid:b.o(),isFirstTrack:!1}}),this.va=setTimeout(r(this,function(){this.kc()}),3E4))};
f.ui=function(){this.kf();var b=this.model.get("currentStation"),c=this.model.get("currentTrack");if(null!=b&&!(c instanceof yn)){var d=b.e();if(!this.fz[d]&&null!=c){var e=!1,h=this.model.get("searchDetails");null!=c.ev?(this.model.set({narrative:{narrative:c.ev,narrativeSeedDescription:c.fv,isFirstTrack:0==c.Yd,stationName:b.ea(),stationId:d}}),e=!0):null!=h&&h.isComedy&&h.isRedirect&&(this.model.set({narrative:{narrative:"Unfortunately we don't have content from \""+h.query+"\". We're working on it! Instead we're playing a track that has similar qualities to \""+
h.query+'".',narrativeSeedDescription:null,isFirstTrack:0==c.Yd,stationName:b.ea(),stationId:d}}),e=!0,this.model.set({searchDetails:null}));if(e){this.va=setTimeout(r(this,function(){this.kc()}),3E4);return}}}this.model.set({narrative:null})};
f.SI=function(){this.kf();var b=this.model.get("currentStation");b&&this.model.set({narrative:{narrative:"The tracks on this station were included as part of a special advertising campaign, and are no longer available for on-demand listening. Please choose another station, or try creating a new one.",hideClose:!0,type:"expiredOnDemand",stationName:b.ea()}})};
f.RI=function(){this.kf();var b=this.model.get("currentStation");b&&(this.model.set({narrative:{narrative:"For a limited time only, the tracks on this exclusive station are available as part of special promotion.  You may select to play this station again or select another station.",type:"endOnDemand",stationName:b.ea()}}),this.va=setTimeout(r(this,function(){this.kc()}),3E4))};f.Vs=function(){null!=this.model.get("songNarrative")&&this.kc()};f.kc=function(){this.model.set({narrative:null});this.kf()};
f.kf=function(){null!=this.va&&(clearTimeout(this.va),this.va=null)};function RC(b,c){this.model=b;this.va=null;z.c(lf,r(this,this.xJ));this.model.bind("change:currentStation",r(this,this.kc));this.model.bind("change:currentTrack",r(this,this.kc));this.model.bind("change:narrative",r(this,this.fm));c.bind("close",r(this,this.kc))}RC.prototype.xJ=function(b){this.model.set({songNarrative:b});null!=b&&(this.va=setTimeout(r(this,function(){this.kc()}),3E4))};RC.prototype.fm=function(){null!=this.model.get("narrative")&&this.kc()};
RC.prototype.kc=function(){this.model.set({songNarrative:null});this.kf()};RC.prototype.kf=function(){null!=this.va&&(clearTimeout(this.va),this.va=null)};function SC(b){this.model=b;U(zv,r(this,this.hP));z.c(oi,r(this,this.RL));z.c(Ie,r(this,this.Ua))}SC.prototype.Ua=function(){var b=this.model.get("currentUser");b&&b.vi&&""!=b.vi?b=b.vi:rl?(b=jm(Ul),b=null==b||ge(""+b)||"null"==b?null:""+b):b=null;TC(this,b,!1)};SC.prototype.RL=function(){TC(this,null,!1)};SC.prototype.hP=function(b){TC(this,b,!0)};
function TC(b,c,d){var e=b.model.get("currentUser");null!=e&&e.G()?(b.model.set({currentSkinPath:null}),pm(Ul)):(d&&e.vi!=c&&z.b(dk,c),b.model.set({currentSkinPath:c}),c&&(null==c?pm(Ul):om(Ul,c)))};function UC(b){this.model=b;this.jt=this.Uj=-1;this.dp=this.ep=0;b=[];for(var c=0;c<VC.length;c++){var d=VC[c];null!=d.Cf&&(b=_.union(b,d.Cf));null!=d.zi&&(b=_.union(b,d.zi))}for(c=0;c<b.length;c++)z.c(b[c],r(this,this.EI));z.c(Oe,r(this,this.sq));z.c(Ae,r(this,this.Ua));z.c(Hi,r(this,this.pI));z.c(xe,function(){0<Pn(A._data.tipTestMode)&&(WC=2E3,XC=1E3*Pn(A._data.tipTestMode),YC=ZC=1E3)});W("/tip",!0,!0,!0,r(this,function(b){(b=VC[parseInt(b.pathNames[1],10)])&&$C(this,b)}));U(ou,r(this,this.wI));
U(Au,r(this,this.AI));U(Iv,r(this,this.Uc));U(Fv,r(this,this.Uc));U(Uv,r(this,this.AJ));U(Vv,r(this,this.qH));U(Dw,r(this,this.Uc));z.c(Pk,r(this,function(){this.Fo=!0;this.Uc()}));z.c(Qk,r(this,function(){this.Fo=!1}));$(window).resize(r(this,this.Uc));$(window).scroll(r(this,this.Uc))}
var aD,WC=6E4,XC=18E5,ZC=2,YC=4,bD=0,VC=[new cD("thumbs","Thumbs","Remember to rate tracks you hear in order to customize your station.",' Clicking "thumbs-up" tells Pandora "you like this track" and helps to bring in more tracks like it to your station. Clicking "thumbs down" tells us not to play this track.',".thumbUpButton:first",null,null,null,[di,ei],function(b){b=b.get("currentStation");return!(b&&b.je()==m.Cc.Me())}),new cD("shuffle","Shuffle","You can mix your stations together for greater variety.",
"Click the Shuffle button to shuffle through all your stations. Click the menu arrow on the right of the button to specify which stations to include in the shuffle. You can check and uncheck stations to customize your station shuffle","#shuffleIcon",null,null,null,[ki],function(b){return 2<b.get("stationList").select(function(b){return!b.get("isQuickMix")}).length}),new cD("album_art_resize","Album Art","You can adjust the size of the album art in the Pandora Player.","Drag this button (click and hold down your mouse and drag) to adjust the size of the album art in the player. Another way to customize your pandora experience!",
".slideDragContainer",null,null,null,[],null),new cD("tired_song","Tired of this Track","Tired of a track? Put it to sleep!",'You can click "I\'m tired of this track" and we will stop playing this track for a while.',"#track_menu_dd .tiredOfSong",[ci],1,1,[Ui],null),new cD("buy","Buy","You can buy this track or album.","Click the buy button. Select Amazon or iTunes",".buyButton",[di],2,null,[],null),new cD("thumb_up","Create Station","You can create a new station from any artist or track you hear.",
'Select "New Station" and then click "from Song" or "from Artist" to create the new station.',".newStationFromArtist:last",[di],3,3,[],function(b){return 10>b.get("stationList").select(function(b){return!b.get("isQuickMix")})}),new cD("share","Share","You can share any of your stations with your friends.","Click the share button. You can facebook post, twitter tweet, or email stations or tracks to your friends",".shareButton",[di],4,null,[jj,ij],null),new cD("add_variety","Add Variety","Learn how to add more variety to your stations.",
"Click on add variety. In the next panel, enter an artist or track, and we'll add music like that to your station",".addVariety",[ci,ei],6,null,[Zi],function(b){if(b.get("currentStationViewIsShuffle")&&this.Pa==bD)return!1}),new cD("like","My Profile","See a complete list of all your likes on your profile",'Click "my profile" to edit your profile information, look at all your Pandora activity, see a list of all your likes, and more.',".myprofile_icon",[pj],1,null,null,null,!0)];f=UC.prototype;
f.pI=function(b){this.lt=b};f.EI=function(b,c){clearTimeout(aD);setTimeout(r(this,function(){var b=Mm(),e=ol(c);null==b[e]?b[e]=1:b[e]++;om(Sl,b);if(dD(this)){b=[];for(e=0;e<VC.length;e++){var h=VC[e];if(null!=h.Cf&&ee(h.Cf,c)&&h.Rv(this.model)){for(var l=0,p=0;p<h.Cf.length;p++)l+=Nm(h.Cf[p]);l>=h.BK&&b.push(h)}}0<b.length&&$C(this,b[0])}}),2E3)};
f.wI=function(){this.Uc();clearTimeout(aD);aD=setTimeout(r(this,function(){if(dD(this)&&!((new Date).getTime()-this.jt<XC)){for(var b={},c=Pm(),d=0;d<c.length;d++){var e=c[d];null==b[e]&&(b[e]=0);b[e]++}b=[];for(c=0;c<VC.length;c++)d=VC[c],null==d.Cf&&d.Rv(this.model)&&b.push(d);0<b.length&&$C(this,b[0])}}),2250)};
function $C(b,c){clearTimeout(aD);b.jt=(new Date).getTime();b.ep++;Om(c.id);2==c.Pa?T(Lv):c.Pa==bD?T(Mv):1==c.Pa?T(Kv):3==c.Pa&&T(Nv);setTimeout(r(b,function(){this.model.set({currentContextualTip:{initialText:c.xK,title:c.title,moreText:c.jL,anchorElementPath:c.$D}})}),250)}f.AI=function(){this.dp++;this.Uc()};f.qH=function(){this.uv=!1;this.Uc()};f.AJ=function(){this.uv=!0;this.Uc()};f.Uc=function(){clearTimeout(aD);this.model.set({currentContextualTip:null})};
function dD(b){var c=b.model.get("currentUser");return null==c||c.p()||0!=$(document.body).scrollLeft()||0!=$(document.body).scrollTop()||0!=$(".lightbox:visible").length||b.uv||b.Fo||0>b.Uj||null!=b.model.get("currentContextualTip")||(new Date).getTime()-b.Uj<WC||b.ep>=YC||b.dp>=ZC?!1:!0}f.Ua=function(){this.dp=this.ep=0;this.jt=this.Uj=-1};
f.sq=function(b){this.Fo=b&&b instanceof yn;0>this.Uj&&(this.Uj=(new Date).getTime());if(!(0>this.lt)){var c=VC[this.lt];c&&setTimeout(r(this,function(){$C(this,c)}),2E3);this.lt=-1}};
function cD(b,c,d,e,h,l,p,q,u,y,E){this.id=b;this.title=c;this.xK=d;this.jL=e;this.$D=h;this.Pa=q;this.BK=p;this.Cf=l;this.zi=u;this.ZD=E;null==y&&(y=function(){return!0});this.Rv=r(this,function(b){if(ee(Pm(),this.id)||b.get("currentStationViewIsShuffle")&&this.Pa==bD)return!1;if(null!=this.zi)for(var c=0;c<this.zi.length;c++)if(0<Nm(this.zi[c]))return!1;return 0<$(".backstage:visible").length&&!this.ZD?!1:y(b)})};function eD(b){this.model=b;U(Cu,r(this,this.BH))}eD.prototype.BH=function(b){om(Xl,b.low);z.b(ai,{noSkip:!0})};function fD(b){this.model=b;this.br=null;U(yu,r(this,this.ZI));z.c(Ce,r(this,this.WI));z.c(De,r(this,this.XI));W("/profile",!0,!0,!0,r(this,function(b){var d=b.pathNames;if(2!=d.length||_.contains(_.values(nu),d[1])){var e=this.model.get("currentUser");(b=d[2])||null==e||(b=e.Z);ge(b)&&(null==e||e.p())?($y(),T(jv)):(this.wp=!1,d=d[1],"edit"==d&&(d=null,this.wp=!0),this.Xy=!1,d&&d!=lu&&d!=mu||(d=ku,this.Xy=!0),this.model.set({profilePanelType:d}),gD(this,b))}else this.wp=!1,this.model.set({profilePanelType:ku}),
gD(this,d[1])})).fw=function(b){return"/profile"!=b&&"/profile/activity"!=b&&-1==b.indexOf("/profile/feed")};W("/feed",!0,!0,!0,r(this,function(){var b=this.model.get("currentUser");null==b||b.p()?($y(),T(jv)):(this.model.set({profilePanelType:lu}),gD(this,b.Z))}));W("/connect",!0,!0,!0,r(this,function(){var b=this.model.get("currentUser");null==b||b.p()?($y(),T(jv)):(this.model.set({profilePanelType:mu}),gD(this,b.Z))}))}function gD(b,c){b.br=c;z.b(Ai,c)}
fD.prototype.WI=function(b){if(b.webName==this.br){this.br=null;hD(this,b);b=this.model.get("currentProfileInfo").webName;var c=this.model.get("profilePanelType"),d;d=c==lu?"/feed":c==mu?"/connect":c!=ku?"/profile/"+c+"/"+b:"/profile/"+b;My()!=d&&V(d,!this.Xy,!0);T(ru,{panelType:c,webname:b,edit:this.wp})}};
fD.prototype.XI=function(b){var c=this.model.get("currentProfileInfo");if(null!=c&&c.webName==b.webName){hD(this,b);if(c=this.model.get("currentUser"))b.privateProfile!=c.ih&&(c.ih=b.privateProfile),c.sl=b.fullNameRaw;T(Yu)}};function hD(b,c){var d=b.model.get("currentUser");if(null!=d){var e={},h=c.webName==d.Z;(e.is_owner=h)&&(e.fbId=d.za);e.hasExplicitContentFilterEnabled=d.Rb;e.allowExplicitContentManagement=d.Bv;b.model.set({currentProfileInfo:$.extend(e,c)},{silent:!0})}}
fD.prototype.ZI=function(b){var c=this.model.get("currentProfileInfo").webName,d=this.model.get("currentUser");c==d.Z?"G"==b[0]?z.b(Ci,{stationCode:b}):z.b(ii,{stationId:b,userInitiated:!0}):z.b(Ci,{stationCode:"fs"+b})};function iD(b){this.model=b;z.c(Nh,r(this,this.handleError));z.c(hh,r(this,this.HJ));z.c(Eh,r(this,this.HH));z.c(Fh,r(this,this.GH));z.c(ih,r(this,this.PH));z.c(jh,r(this,this.LJ));z.c(Yg,r(this,this.FH));z.c(zh,r(this,this.VH));z.c(ph,r(this,this.JH));z.c(Gh,r(this,this.XJ));z.c(nh,r(this,this.kI));z.c(Ih,r(this,this.UI));z.c(Jh,r(this,this.VI));z.c(Kh,r(this,this.tq));z.c(dl,r(this,this.EJ));z.c(Xh,r(this,this.tH));z.c(Yh,r(this,this.QI))}f=iD.prototype;
f.handleError=function(b){var c;if(b.error instanceof zd&&b.Lq)c=new X({message:b.message,persist:!0,retry:!0}),c.bind("retry",r(this,function(){z.b(b.Lq,b.AK)})),c.bind("close",r(this,function(){b.ll&&z.b(b.ll,b.Gg?b.Gg:b.error.message)}));else{if(b.ll){b.Gg&&(b.Gg.intentEvent=b.Lq);z.b(b.ll,b.Gg?b.Gg:b.error.message);return}c=fe(b.message)?new X({message:b.message}):new X({message:Zb()})}c.render()};
f.HJ=function(){var b=this.model.get("currentUser"),c=new X({message:wb()});b&&b.I()&&(c=new X({message:zb()}));c.render()};f.HH=function(){(new X({message:Xb()})).render()};f.GH=function(){(new X({message:Yb()})).render()};f.PH=function(){var b=this.model.get("currentUser"),c=new X({message:Ab()});b&&b.I()&&(c=new X({message:Bb()}));c.render()};f.LJ=function(){(new X({message:Cb()})).render()};f.FH=function(){(new X({message:Db()})).render()};f.VH=function(){(new X({message:Jb()})).render()};
f.VI=function(){(new X({message:gc()})).render()};f.UI=function(b){if(b.isOnDemand)if(b.stationStart){var c=new X({message:ac()});z.b(ng,b)}else c=new X({message:bc(),play:!0,persist:!0}),c.bind("play",r(this,function(){z.b(og,b.stationId)})),z.b(mg,b);else c=new X({message:$b()});c.render()};
f.kI=function(b){this.model.get("currentUser").Bd=!0;var c=Zb();b.code==m.d.pB()&&(c=b.message,z.b(lj));fe(c)&&"This facebook account is bound to a different Pandora account"==c?(new X({message:hc})).render():(new X({message:c})).render()};f.XJ=function(b){var c=ca();if(b.code==m.d.$t())c=ea();else if(b.code==m.d.au())c=da();else if(b.code==m.d.Fn())c=ia();else{if(b.code==m.d.wn()||b.code==m.d.pn()||b.code==m.d.On()||b.code==m.d.qn())return;b.code==m.d.Gn()?c=ha():b.code==m.d.Je()&&(c=ja())}(new X({message:c})).render()};
f.JH=function(b){var c=this.model.get("currentUser");if(b instanceof Bd)switch(b.code){case m.d.XB():case m.d.YB():k.error("Cannot create station: Invalid station code");break;case m.d.ZB():(new X({message:Ub})).render();break;case m.d.Ot():(new X({message:ac()})).render();break;case m.d.jk():if(-1<b.message.indexOf("station limit")){null==c||c.p()?(new X({message:Sb()})).render():(new X({message:Tb()})).render();break}default:(new X({message:Vb()})).render(),s("create_station_unhandled_error",{B2:b.code,
C2:b.message},c)}else this.model.get("readonly")?(new X({message:ec()})).render():Ry(this.model)?null!=b&&null!=b.retry_method?z.c(Og,r(this,function(){z.ma(this,Og);b.retry_method(b)})):(new X({message:fc()})).render():k.error("Cannot create station: unhandled error",b)};f.tq=function(){(new X({message:lc()})).render()};f.EJ=function(){(new X({message:nc()})).render()};f.tH=function(){(new X({message:qc()})).render()};f.QI=function(){(new X({message:rc()})).render()};function jD(b,c){this.model=b;this.Kq=!1;z.c(Me,r(this,this.Ix));z.c(of,r(this,this.hJ));z.eb(xe,r(this,this.Jl));z.c(uf,r(this,this.dJ));z.eb(Cg,r(this,this.bq));z.c(Mg,r(this,this.lb));z.eb(Ke,r(this,this.Lx));z.eb(Le,r(this,this.Lx));z.c(Kh,r(this,this.tq));U(Gu,r(this,this.jJ));U(Iu,r(this,this.qx));U(wv,r(this,this.Ok));U(Sv,r(this,this.sH));U(Ku,r(this,this.KI));U(Pv,r(this,this.Dd));U(Qv,r(this,this.Ed));c.bind("addvariety",r(this,this.qx));this.model.bind("change:currentShuffleType",r(this,
this.nF));this.model.bind("change:currentStation",r(this,this.pF));this.model.bind("change:currentTrack",r(this,this.qF));this.model.bind("change:safeToAutoPlayStation",r(this,this.Ok));this.model.bind("change:expired",r(this,this.WF));this.model.bind("change:siteLocked",r(this,this.pq));this.zv=W("/stations/variety",!0,!1,!0,r(this,function(b){(b=b.pathNames[2])?kD(this,b):kD(this)}));this.HN=W("/stations/rename",!0,!1,!0,r(this,function(b){b=b.pathNames[2];null==b&&null!=this.model.get("menuStation")&&
(b=this.model.get("menuStation").e());b?lD(this,b):lD(this)}));W("/stations/play",!0,!1,!0,r(this,function(b){var c=b.pathNames[2];null!=c&&setTimeout(function(){V("/station/play/"+c,!1,!0)},1)}));this.Rz=W("/stations/share",!0,!1,!0,r(this,this.Fr));this.IO=W("/albums/share",!0,!1,!0,r(this,this.Fr));this.KO=W("/songs/share",!0,!1,!0,r(this,this.Fr));mD();$(window).bind("beforeunload",this,function(b){if(nD()){var c=[];b=b.data.model.get("stationList");for(var h=0;h<b.length&&20>c.length;h++){var l=
b.models[h];c.push({stationId:l.e(),stationName:l.ea()})}try{var p=window.external;p.msSiteModeCreateJumpList("Pandora Stations");for(h=0;h<c.length;h++)l=c[h],p.msSiteModeAddJumpListItem(l.stationName,"http://"+window.location.host+"/#/station/play/"+l.stationId,"http://"+window.location.host+"/radio/ie_app/pinned.ico");p.msSiteModeShowJumplist();window.setTimeout(function(){mD()},1E3)}catch(q){trackJs.track(q)}}})}function nD(){try{window.external.msIsSiteMode()}catch(b){return!1}return!0}
function mD(){nD()&&(window.external.msSiteModeCreateJumpList("Pandora Stations"),window.external.msSiteModeClearJumpList())}f=jD.prototype;f.Jl=function(){this.Kq=!0;this.Ok()};f.Ns=function(){new Mz({event:"station_rename",title:Bc,subtitle:Cc,message:Ec,yesButtonText:Fc,noButtonText:Gc})};f.Dd=function(b){"station_rename"==b&&z.b(Wj,{stationId:this.Ym.e(),context:"station_rename"})};f.Ed=function(){};f.bq=function(b){"station_rename"==b.context&&new Nz({station:this.Ym})};
f.Fr=function(){var b=this.ob;this.ob=null;T(Hu,b)};f.Ok=function(){if(!this.model.get("siteLocked")&&this.model.get("safeToAutoPlayStation")&&null==this.model.get("currentStation")){var b=this.model.get("stationToAutoPlay");b&&!Co()&&z.b(ii,{stationId:b,userInitiated:!1})}};f.pq=function(){this.model.get("siteLocked")||this.Ok()};f.WF=function(){var b=this.model.get("expired");this.model.set({safeToAutoPlayStation:!b})};
f.Lx=function(){if(!this.model.get("booting")&&"all"==this.model.get("currentShuffleType")){for(var b=[],c=this.model.get("stationList").models,d=0;d<c.length;d++){var e=c[d];e.X()&&e.B()||e.Na()||e.Cb()||e.Pb()||e.mc()||!rn(e)||b.push(c[d].e())}0<b.length&&z.b(ki,{stationIdArray:b,isExplicitSave:!1,shuffleType:this.model.get("currentShuffleType")})}};
f.Ix=function(b){var c=this.model.get("stationList").select(function(b){return b.B()&&b.X()})[0];c.Dm(b.quickMixStationIds);c._quickMixType=b.quickMixType;T(Bu);oD(this,!0)};f.qx=function(b){(b=b?this.model.get("stationList").Oc(b):this.model.get("currentStation"))&&this.zv.update(b.e())};function kD(b,c){var d=b.v(c);null!=d&&(b.ci=new Bz({model:b.model,station:d}),b.zv.update(d.e()))}f.sH=function(b){null==b.getContext()&&z.b(Zi,b)};f.qF=function(){oD(this,!1)};
function oD(b,c){var d=b.model.get("currentStation"),e=b.model.get("currentTrack");e instanceof yn||null!=d&&d.B()&&d.X()&&null!=e&&(ee(d.he(),e.e())||z.b(ci,{appSkip:!c}))}f.hJ=function(b){this.ci&&this.ci.handleSearchResults(b)};
f.pF=function(b,c,d){d=d||{};this.ci&&(this.ci.cancelClick(),this.ci=null);this.model.set({relatedArtists:null,selectedArtist:null,selectedTrack:null});b=this.model.get("currentStation");null!=b&&(c=this.model.get("modalPanel"),XB()||c==au&&!Px()&&!sn(b)||V("/station/play/"+b.e(),!1,!0,!0===d.userInitiated))};
f.dJ=function(b){var c=_.map(b,function(b){return b.artistName}).join(", ")+"...",d=this.model.get("currentStation");this.ob&&this.ob.station&&b.stationId==this.ob.station.e()?(this.ob=$.extend({relatedArtists:c},this.ob),this.Rz.update(this.ob.station.e())):b.stationId==d.e()&&this.model.set({relatedArtists:c})};f.nF=function(){var b=this.model.get("currentShuffleType");null!=b&&"all"!=b&&(b="my");om(Yl,b)};
f.jJ=function(b){var c=My();c&&c.indexOf&&-1<c.indexOf("/stations/variety")&&(c="");this.ob=$.extend({returnHash:c},b);this.ob.station?(b=this.ob.station,b.Bb()||!b.ra()?(b=b.e(),c=this.model.get("currentStation"),null!=c&&c.e()==b&&(this.ob.returnHash="/station/play/"+b),this.Rz.update(b)):z.b(bj,b.e())):this.ob.album?this.IO.update(this.ob.album.musicId):this.ob.track&&this.KO.update(this.ob.track.o())};
function lD(b,c){var d=b.v(c);null!=d&&(d.X()?(new Nz({station:d}),b.HN.update(d.e())):(b.Ym=d,b.Ns()),T(Gw))}f.lb=function(){if(this.fj){for(var b=this.model.get("stationList"),c=0;c<this.fj.length;c++)b.add(this.fj[c],{silent:!0});b.trigger("refresh");this.fj=null}};f.v=function(b){var c=this.model.get("currentStation");b&&0<b.length&&(c=this.model.get("stationList").detect(function(c){return c.e()==b}));return c};
f.KI=function(b){var c=this.model.get("currentStation"),d=b==c.e();T(Hw);if((c=this.model.get("currentUser"))&&c.CK)z.b(Xh,b);else{var e=this.model.get("stationList"),c=e.Oc(b);b=e.indexOf(c);var h=[c];e.remove(c,{silent:!0});if(1==e.length){var l=e.at(0);h.push(l);e.remove(l,{silent:!0})}e.trigger("refresh");this.fj=h;var p=new X({message:yc([c.ea()]),undo:!0,context:h});p.bind("undo",r(this,function(){for(var b=p.getContext(),c=0;c<b.length;c++)e.add(b[c],{silent:!0});e.trigger("refresh");T(Iw);
this.fj=null;this.model.get("videoAdPlaying")?z.c(Qk,r(this,function(){z.ma(this,Qk);d&&z.b(ii,{stationId:b[0].e()})})):d&&z.b(ii,{stationId:b[0].e()})}));p.bind("close",r(this,function(){var b=p.getContext();z.b(Gi,b[0].e())}));p.render();d&&(0<e.length?(c=b,b>=e.length&&(c=e.length-1),b=e.at(c),z.b(ii,{stationId:b.e()})):z.b(Xj,null))}};f.tq=function(b){V("/station/play/"+b,!1,!1)};function pD(b,c){this.model=b;this.qt=!1;this.tg=c;this.py=0;z.c(sf,r(this,this.NI));z.c(Sj,r(this,this.Dr));this.model.bind("change:currentUser",r(this,this.fq))}pD.prototype.Dr=function(){this.qt=!0};
pD.prototype.fq=function(){var b=this.model.get("currentUser");null==b&&(this.qt=!1);if(b&&b.Oa()&&!b.ff){if(b.jj)return;if(!b.ff)if(8>=b.yc){if(!0!=jm(Wl)){if(b.eh){var c=b.yc;1!=c&&!0==jm(Wl)==!0||this.model.set({blueBarMessage:new qy(5,"",c,!1,"","")})}else c=b.yc,b=b.Xl,null==this.model.get("blueBarMessage")&&(1!=c&&!0==jm(Wl)==!0||this.model.set({blueBarMessage:new qy(0,"",c,b,"","")}));return}}else om(Wl,!1)}else if(b&&b.s==m.u.gg()&&5>=b.yc&&!this.qt&&!b.eh){c=b.yc;null==this.model.get("blueBarMessage")&&
this.model.set({blueBarMessage:new qy(4,"",c,!1,"","")});return}b&&null!=b.Ao&&""!=b.Ao?this.Ds(b.Ao):this.model.set({blueBarMessage:null})};pD.prototype.NI=function(b){b>this.py&&(this.model.set({blueBarMessage:new qy(3,"",b,!1,"","")}),this.py=b)};pD.prototype.Ds=function(b){null==this.model.get("blueBarMessage")&&this.model.set({blueBarMessage:new qy(2,b,-1,!1,"","")})};function qD(b,c){this.AB=3E4;this.ln="2000x15";this.mn="tuner";this.model=b;this.uh=c;this.model.bind("change:modalPanel",r(this,this.lq));z.eb(wi,r(this,this.kj));z.eb(xi,r(this,this.rL));z.eb(yi,r(this,this.FL));z.c(oi,r(this,this.abort));W("/forcepostreg",!0,!1,!1,r(this,this.uG));rD=this}var rD;function sD(){var b=rD;clearTimeout(b.pN);C.Wa(b.xe,function(b){k.info("postreg "+b+" ping success")},function(b,d){k.info("postreg "+d+" ping failure: "+b)})}
function tD(b){fp(b.UK,b.ln,"failed to load postreg ad",b.mn);rD.nq()}f=qD.prototype;f.lq=function(){var b=this.model.get("modalPanel");"REGISTERED_PANEL"==b?uD(this,null):"POSTREG_AD_PANEL"==b&&(b=this.model.get("currentUser"),null==this.xe||null==this.xe.cpa_swf_url||null!=b&&!b.G()?this.kj():(this.pN=setTimeout(r(this,function(){tD(this)}),this.AB),this.uh.render(this.xe.cpa_swf_url)))};
function uD(b,c){b.xe=null;var d={pandoraAdType:"postreg"},e=b.model.get("currentStation"),h=b.model.get("stationList").models;C.Yf(d,e,h);C.Ge(d);C.Qf(B.Ki(),b.mn,d,b.ln,!1,r(b,function(b){this.UK=b;A._data.useTestAds&&(b="<methodResponse><params><param><value><struct><member><name>type</name><value><string>CPA_PROVIDER</string></value></member><member><name>cpa_swf_url</name><value><string>/postregAdProxy/testswf/webreg.swf</string></value></member><member><name>tracker</name><value><string></string></value></member><member><name>clickthrough</name><value><string></string></value></member><member><name>impression</name><value><string></string></value></member></struct></value></param></params></methodResponse>");
try{this.xe=C.qj(b,this.mn,this.ln)}catch(d){trackJs.track(d),this.xe=null}c&&c()}),r(b,r(b,function(){this.xe=null})))}f.uG=function(){uD(this,r(this,function(){this.model.set({modalPanel:"POSTREG_AD_PANEL"})}))};f.nq=function(){this.uh.closeWindow()};f.abort=function(){this.uh.abort()};f.kj=function(){this.xe=null;z.b(Og);XB()||setTimeout(function(){T(qu)},500)};
function vD(b,c,d){k.info("PostregAdController.onPostregAdPrompt: "+[b,c,d].join(", "));var e=d.split(",");d=rD;ge(b)&&(b="This advertiser");for(var h=d.model.get("currentUser"),l="",p="",q=0;q<e.length;q++){var u=e[q];0<p.length&&(2<e.length&&(p+=","),p+=" ",q==e.length-1&&(p+="and "));0<l.length&&(l+=",");var p="dma"==u?p+"city":p+u,y;"email"==u?y=h.La:"zip"==u?y=h.cf.split(":")[3]:"age"==u?y=String.valueOf(h.cf.split(":")[1]):"gender"==u?y=h.cf.split(":")[2]:"dma"==u&&(y=h.cf.split(":")[9]);l+=
y}y=""+b+" would like to use your";y=y+" "+p;y=y+" "+c;y+=".";y+="  Is this OK?";d.bz=l;d.uh.eF(y)}f.FL=function(){this.tapToRegCallback&&this.tapToRegCallback(!1,null)};f.rL=function(){this.tapToRegCallback?this.tapToRegCallback(!0,this.bz):0<$("#postregProxy").length&&$("#postregProxy")[0].postregAdPrompt_callback(this.bz);setTimeout(r(this,this.nq),1500)};window.onPostregAdComplete=function(){k.info("PostregAdController.onPostregAdComplete");rD.nq()};window.onPostregAdPrompt=vD;
window.askListenerForInfo=function(b,c,d,e){k.info("PostregAdController.askListenerForInfo: "+[b,c,d].join(", "));rD.tapToRegCallback=e;vD(b,c,d)};window.onPostregAdLoad=function(){k.info("PostregAdController.onPostregAdLoad");sD()};window.onPostregAdError=function(){k.info("PostregAdController.onPostregAdError");tD(rD)};function wD(b,c){this.model=b;this.Tm=c;this.model.bind("change:modalPanel",r(this,this.lq));z.c(Qf,r(this,this.rq));z.c(Sf,r(this,this.gJ));z.c(Rf,r(this,this.MJ));U(ew,r(this,this.JJ));U(fw,r(this,this.fJ));z.c(Ae,function(){})}var xD={brandName:"",lineId:"",creativeId:"",offerButtonLabel:"",offerButtonUrl:"",leadInBannerUrl:"",signature:"",vxOffer:""};f=wD.prototype;
f.rq=function(b){this.xb=b;(b=this.model.get("currentUser").Ih)&&b!=m.Ud.qu()&&this.xb&&this.xb.svnActivityUrl&&(this.xb.svnActivityUrl+=(-1==this.xb.svnActivityUrl.indexOf("?")?"?":"&")+"disable_audio_cue=true")};
f.lq=function(){var b=this.model.get("modalPanel"),c=this.model.get("currentUser");"SVN_AD_PANEL"==b&&(this.xb?(T(nw),z.b(bi),this.Tm.render(this.xb.svnActivityUrl,this.xb.svnWindowHeight,this.xb.svnWindowWidth),s("svn_activity_start",{listener_id:c.t,activity:this.xb.svnName,instance_id:this.model.get("halt_id"),source:"stillListening"},this.model.get("currentUser"))):T(ew))};function yD(b){b.xb=null;T(mw);z.b($h);b.Tm.VE()}f.JJ=function(b){null!=this.xb&&(zD(this,!1,b),yD(this))};
f.fJ=function(b){null!=this.xb&&(zD(this,!0,b),yD(this))};function zD(b,c,d){var e=b.model.get("currentUser"),h=e.Tj,e=e.Ih;z.b(Nj,{svnName:b.xb.svnName,activityBenefit:e,hoursEarned:e==m.Ud.qu()?h-1:h,probablyCompleted:c,context:d})}f.MJ=function(b){k.info("awarding "+b+" for completing SVN activity");this.model.get("currentUser").Vj=b};
f.gJ=function(b){var c=b.success;k.info("Server reported that the listener "+(c?" did ":" did not ")+" complete svn activity");var d=this.model.get("currentUser");if(c)AD(this,b.activity.activityBenefit,b.activity.hoursEarned,d),s("svn_activity_completed",{listener_id:d.t,instance_id:this.model.get("halt_id")},d);else{var e=c=null,h=!1,l=b.activity.context;l&&(l.source&&(c=l.source),l.elapsedTime&&(e=l.elapsedTime),l.didReachThreshold&&(h=l.didReachThreshold));h&&AD(this,b.activity.activityBenefit,
b.activity.hoursEarned,d);s("svn_activity_cancelled",{listener_id:d.t,instance_id:this.model.get("halt_id"),activity:b.activity.svnName,probablycompleted:b.activity.probablyCompleted,source:c,interaction_time:e,threshold_reached:h},d)}};
function AD(b,c,d,e){c==m.Ud.Jn()?(xD.offerName=4==d?"uninterrupted4":"uninterrupted1",xD.leadInAudioUrl=4==d?"http://pandora.com/static/creatives/valueExchange/intro-4hr.mp3":"http://pandora.com/static/creatives/valueExchange/intro-1hr.mp3",xD.truexInstanceId=b.model.get("halt_id"),z.b(cl,xD)):e.Vj=d};function BD(b){this.model=b;new MA({model:this.model});this.model.bind("change:currentUser",r(this,this.ip));z.c(tf,r(this,this.mq))}BD.prototype.mq=function(){this.model.set({capped:!0});this.model.set({blueBarMessage:null});T(Mu);setTimeout(r(this,function(){z.b(bi)}),800)};BD.prototype.ip=function(){this.model.set({capped:!1})};function CD(b){this.model=b;this.model.bind("change:modalPanel",r(this,this.fa));this.oz=new QA({model:this.model});this.hash=W("/gift",!0,!0,!0,r(this,this.Bx));W("/giftredeem",!0,!1,!1,r(this,this.Bx))}CD.prototype.Bx=function(b){this.model.get("hasStations")||this.model.set({modalPanel:"REDEMPTION_PANEL"});b=b.parameters.code;null==b&&(b=A._data.code,A._data.code=null);this.oz.render(b);this.hash.update()};CD.prototype.fa=function(){"REDEMPTION_PANEL"!=this.model.get("modalPanel")&&this.oz.Xi()};function DD(b){function c(b){var c={};_.isString(b)&&_.each(b.split("&"),function(b){b=b.split("=");c[decodeURIComponent(b[0])]=decodeURIComponent(b[1]||"")});return c}this.model=b;this.Tx=!1;W("/land",!0,!0,!0,r(this,function(b){if(!this.Tx){this.Tx=!0;var e=this.model.get("smartLaunchPath");if(null==e||0==b.path.indexOf("/land/song"))e=b.path;this.model.set({smartLaunchPath:null});if(null!=e)if(0==e.indexOf("/land/")){var h=e.substring(6).split("/");if(1<h.length)if("station"==h[0]){var l="fs";
"TT0"===h[1]?l="":null!=h[2]&&(l=h[2]);b=c(b.queryString);z.b(Ci,{stationCode:l+h[1],stationName:b.W2||"",source:b.Ss||""})}else if("artist"==h[0])setTimeout(function(){V(h[1],!1,!1)},300);else if("song"==h[0]){var p;2==h.length?p="/-/-/"+h[1]:3==h.length?p="/"+h[1]+"/-/"+h[2]:4==h.length&&(p="/"+h[1]+"/"+h[2]+"/"+h[3]);setTimeout(function(){V(p,!1,!1)},300)}}else 0==e.indexOf("/search/")&&setTimeout(function(){V(e,!1,!1)},300)}}))};var iC="expired-phone",jC="subscribe-phone",kC="subscription",mC="subscribe",lC="expired",nC="sponsorshipExpired",oC="subscribe-mdp",pC="expired-business",bC={KS:iC,L_:jC,M_:kC,p_:"renewal",CZ:"notneeded",J_:mC,IS:lC,D_:nC,K_:oC,JS:pC};function ED(b){this.model=b;z.c(Mf,r(this,this.VJ));for(var c in bC)(function(b,c){W("/"+c,!1,!0,!0,r(b,function(){FD(this,c)}))})(this,bC[c])}
function FD(b,c){var d=b.model.get("currentUser");if(null==d||d.p())b.model.set({postLoginPath:"/"+c});else{d&&d.dt&&z.b(Zk);b.model.set({modalPanel:au});$("#mainContent").children().hide();if("renewal"==c){if(d&&d.Oa()&&d.jj){setTimeout(function(){T(qu)},100);return}if(d&&!Ln(d))c="notneeded";else{if(d&&(Kn(d)||d.s==m.u.gg())){setTimeout(function(){V("/subscriptionInfo",!1,!1)},100);return}if(d&&d.rb!=m.pa.Hn()){T(Nu);return}}}b.ml=new PA({model:b.model,hashTag:c});$("#mainContent").append(b.ml.render().el)}}
ED.prototype.VJ=function(){this.ml&&(this.ml.trigger("close"),this.ml=null)};function GD(b){this.model=b;this.id=(new Date).getTime();this.ar=[];this.yg=null;z.c(eg,r(this,this.iI));z.c(Fk,r(this,this.QH));this.model.bind("change:currentTrack",r(this,this.NH));this.model.bind("change:currentStation",r(this,this.LH));this.model.bind("change:musicPlaying",r(this,this.OI))}f=GD.prototype;
f.iI=function(b){if(null!=b&&0!=b.length)if(this.model&&this.model.get("siteLocked")&&"ext_sv_panel_close"!=b[0]&&"ext_saaos"!=b[0]&&"ext_saaof"!=b[0]&&"ext_sv_min_activity_completed"!=b[0])k.info("cannot exceute "+b[0]+" while site is locked");else{var c=b[0];this[c]&&this[c].apply(this,b.slice(1))}};f.QH=function(b){(b=$(b))&&0!=b.length&&(b=ue()?b[0].contentDocument:b[0].contentWindow.document)&&(b=b.getElementById("adContainer"))&&(this.yg=(b=/\d+:\d+/g.exec(b.innerHTML))&&0<b.length?b[0]:null)};
f.NH=function(){null!=this.ur&&(HD(this,"songEnded",this.ur),this.ur=null);var b=this.model.get("currentTrack");null!=b&&(b=ID(this,b),HD(this,"songPlayed",b),this.ur=b)};f.LH=function(){var b=this.model.get("currentStation");null!=this.tr&&(HD(this,"stationEnded",this.tr),this.tr=null);null!=b&&(b=JD(b),HD(this,"stationPlayed",b),this.tr=b)};
f.OI=function(){var b=this.model.get("currentTrack");if(null!=b){var c=this.model.get("musicPlaying"),b=ID(this,b);c?HD(this,"songPlayed",b):HD(this,"songPaused",b)}};function ID(b,c){var d=null;if(null!=c&&(d={songName:c.Da,artistName:c.V(),albumName:c.hb,albumArtUrl:c.sb(),musicToken:c.bb()?c.bb():c.dv+":"+c.lC,stationToken:c.e(),songURL:cn()+c.Yg(),artURL:c.sb()},null!=d)){var e=b.model.get("currentUser");$.extend(d,{allowExplicit:e?!e.Rb:!0})}return d}
function HD(b,c,d){for(var e=0;e<b.ar.length;e++)ap(b.ar[e],c,d)}function JD(b){return{stationName:b.ea(),stationId:b.e(),isShared:!b.X(),isQuickMix:b.B()}}GD.prototype.ext_ping=function(b){ap(b,"pong",this.id)};GD.prototype.ext_registerEventListener=function(b){this.ar.push(b);ap(b,"tunerId",this.id);var c=this.model.get("currentStation");null!=c&&ap(b,"stationPlayed",JD(c));c=this.model.get("currentTrack");null!=c&&ap(b,"songPlayed",ID(this,c))};GD.prototype.ext_play=function(){z.b($h)};
GD.prototype.ext_pause=function(){z.b(bi)};GD.prototype.ext_pause_for_ad=function(){window.setIgnorePauseInteractions(!0);z.b(bi)};GD.prototype.ext_lsfi=function(b){isNaN(parseInt(b.substr(0,2),10))||(b="sh"+b);z.b(Ei,{stationCode:b,source:this.yg})};GD.prototype.ext_lsfmi=function(b){"TT0"!==b&&0!=b.indexOf("m")&&(b="mi"+b);z.b(Ci,{stationCode:b})};GD.prototype.ext_lcswti=function(b){var c;c=b.split("|");2==c.length&&(b=c[0],c=c[1],z.b(hi,{stationId:b,trackToken:c,source:this.yg}))};
GD.prototype.ext_lsfst=function(b){fe(b)&&V("/search/"+escape(b),!0,!0)};GD.prototype.ext_lqmfi=function(b){var c=this.model.get("currentUser");if(null!=c&&c.t==b){var c=this.model.get("stationList"),d=c.detect(function(c){return c.get("isQuickMix")&&c.get("originalCreatorId")==b});if(null!=d){c.trigger("select",d);return}}z.b(Ci,{stationCode:"qm"+b})};GD.prototype.ext_reg=function(){V("/account/register",!0,!0)};GD.prototype.ext_sub=function(){V("/subscriptionInfo",!0,!0)};
GD.prototype.ext_renew=function(){V("/renewal",!0,!0)};GD.prototype.ext_no_renew=function(){z.b(Cj)};GD.prototype.ext_acct_msg=function(b){this.model.set({blueBarMessage:null});z.b(Tj,b)};GD.prototype.ext_saaos=function(){T(kw)};GD.prototype.ext_saaof=function(){T(lw)};GD.prototype.ext_demog_ad=function(){var b=this.model.get("currentUser");null!=b&&window.ad_demog_callback(b.Z,b.tb())};GD.prototype.ext_sub_state=function(){var b=this.model.get("currentUser");null!=b&&(window.listener_state=b.s)};
GD.prototype.ext_vid=function(b){b=b.split("=");z.b(Wk,{key:b[0],value:b[1],isUserInitiated:!0})};GD.prototype.ext_fvid=function(){k.info("Not yet implemented: ext_fvid")};
GD.prototype.ext_movie=function(b,c){var d=Dd(),e=null,h={url:b,skipDelaySeconds:15,showScrubber:!1},l=b.match("&?skipDelaySeconds=([0-9]+)");if(l){h.url=b.replace(l[0],"");try{h.skipDelaySeconds=Math.max(0,parseInt(l[1],10))}catch(p){trackJs.track(p)}}if(l=b.match("&?showScrubber=(true|false)"))h.url=b.replace(l[0],""),h.showScrubber="true"==l[1];for(var l=["startUrl","firstQuartileUrl","secondQuartileUrl","thirdQuartileUrl","completeUrl"],q=0;q<l.length;q++){var u=l[q],y=b.match("&?"+u+"=([^&]+)");
y?(h.url=b.replace(y[0],""),h[u]=decodeURIComponent(y[1])):h[u]=null}if(q=h.startUrl)l=q.match("cid::([0-9]+)"),q=q.match("aid::([0-9]+)"),l&&q?(q=q[1],h.creativeId=l[1],h.adId=q):(h.creativeId=null,h.adId=null);z.c(Qk,r(this,function(){e=Dd();"function"==typeof c&&c({epochAtLaunch:d.toString(),epochAtDismiss:e.toString(),viewingDuration:(e-d).toString()});z.ma(this,Qk)}));d=Dd().toString();h.url="file="+h.url;z.b(Yk,h)};GD.prototype.ext_dis_video_ads=function(){z.b(Vk)};
GD.prototype.ext_lss=function(){setTimeout(r(this,function(){T(Gu,{mode:"station_and_song",station:this.model.get("currentStation"),track:this.model.get("currentTrack")})}),1)};GD.prototype.ext_nss=function(){z.b($h)};GD.prototype.ext_add_vrty=function(b){setTimeout(function(){T(Iu,b)},1)};GD.prototype.ext_share=function(){setTimeout(r(this,function(){T(Gu,{mode:"station_and_song",station:this.model.get("currentStation"),track:this.model.get("currentTrack")})}),1)};
GD.prototype.ext_share_station=function(b){setTimeout(r(this,function(){var c=this.model.get("currentStation"),d=this.model.get("currentTrack");if(b)for(var e=this.model.get("stationList").models,h=0;h<e.length;h++)e[h].e()==b&&(c=e[h]);T(Gu,{station:c,track:d})}),1)};
GD.prototype.ext_share_track=function(b){setTimeout(r(this,function(){var c=this.model.get("currentStation"),d=this.model.get("currentTrack");if(b)for(var e=this.model.get("stationList").models,h=0;h<e.length;h++)if(e[h].Bb())for(var l=e[h].k._tracks,p=0;p<l.length;p++)l[p].o()==b&&(d=l[p]);T(Gu,{station:c,track:d})}),1)};GD.prototype.ext_rst=function(){k.info("Not yet implemented: ext_rst")};GD.prototype.ext_friends=function(){V("/feed",!0,!0)};
GD.prototype.ext_genre=function(b,c){var d="/music";fe(b)&&(d+="/"+encodeURI(b.toLowerCase()));fe(c)&&(d+="/"+encodeURI(c.toLowerCase()));V(d,!0,!0)};GD.prototype.ext_play_sample=function(b){function c(){z.b(Ki,{url:b[d].url,gain:b[d].gain});d++;d<b.length&&z.ma(this,af)}var d=0;z.c(af,r(this,function(b){b.reachedEnd&&setTimeout(r(this,c),100)}));c()};GD.prototype.ext_stop_sample=function(){z.b(Li)};GD.prototype.ext_sh_sc=function(){k.info("Not yet implemented: ext_sh_sc")};
GD.prototype.ext_sv_panel_close=function(){T(hw)};GD.prototype.ext_sv_min_activity_completed=function(){T(gw)};GD.prototype.ext_sv_panel_cancel=function(){T(ew,{source:"truex_creative_cancel"})};GD.prototype.ext_event=function(b){var c;if("string"===typeof b||b instanceof String)try{c=JSON.parse(""+b)}catch(d){trackJs.track(d);k.error('error parsing json from sendEvent: "'+b+'"',d);return}else if("object"===typeof b)c=b;else{k.error('invalid sendEvent parameter: "'+b+'"');return}z.b(Uk,c)};
GD.prototype.ext_log_tap=function(b,c){var d={station_id:this.model.get("currentStation").e(),event:b,metadata:c};s("tap_ad_template",d,this.model.get("currentUser"))};
GD.prototype.ext_vx=function(b,c){var d=b.offerName;if(d){var e=b.rewardProperties;if(e){var h=e.lineId,l=e.creativeId;if((null==h||null==l)&&this.yg){var p=this.yg.split(":");2==p.length&&(h=p[0],l=p[1])}z.c(dl,r(this,function(){setTimeout(function(){try{c&&"function"==typeof c&&c({success:"false"})}catch(b){trackJs.track(b)}},1);z.ma(this,dl);z.ma(this,el)}));z.c(el,r(this,function(){setTimeout(function(){try{c&&"function"==typeof c&&c({success:"true"})}catch(b){trackJs.track(b)}},1);z.ma(this,
dl);z.ma(this,el)}));z.b(cl,{offerName:d,brandName:e.brandName,lineId:h,creativeId:l,offerButtonLabel:e.offerButtonLabel,offerButtonUrl:e.offerButtonUrl,leadInBannerUrl:e.leadInBannerUrl,leadInAudioUrl:e.leadInAudioUrl,signature:e.signature,vxOffer:e.vxOffer})}else c&&"function"==typeof c&&c({success:"false",reason:"Reward properties not specified."})}else c&&"function"==typeof c&&c({success:"false",reason:"Offer name not specified."})};
GD.prototype.ext_delay_ad_refresh=function(b){z.b(jl,{delaySeconds:b,currentLineIdCreativeId:this.yg})};function KD(b){this.model=b;this.model.bind("change:capped",r(this,this.Ri));this.model.bind("change:expired",r(this,this.Ri));this.model.bind("change:inactive",r(this,this.CI));this.model.bind("change:forceRegistration",r(this,this.Ri));this.model.bind("change:resettingPassword",r(this,this.Ri));this.model.bind("change:siteLocked",r(this,this.pq));z.c(Se,r(this,this.$I));this.CA=!0}KD.prototype.CI=function(){z.b(Dk,!this.model.get("inactive"));this.Ri()};
KD.prototype.Ri=function(){var b=this.model.get("capped")||this.model.get("expired")||this.model.get("inactive")||this.model.get("forceRegistration")||this.model.get("resettingPassword");this.model.set({siteLocked:b})};KD.prototype.pq=function(){this.model.get("siteLocked")||!this.kL&&!this.CA||setTimeout(function(){z.b($h)},500);this.model.get("siteLocked")&&(this.kL=this.model.get("musicPlaying")||this.model.get("resettingPassword"),setTimeout(function(){z.b(bi)},1E3))};
KD.prototype.$I=function(b){var c=!1;if(this.model.get("idle")&&b&&!1==b.userInitiated){c=!0;this.CA=!1;this.model.set({inactive:!0});z.b(bi);V("/inactive",!0,!0);this.model.set({halt_id:sd()});b=this.model.get("currentUser");var d=b.s;s("listener_idle",{active:"false",halt_id:sd(),listener_state:d,vendor_id:t,device_id:pe},b)}z.b(Te,{siteLocked:c})};function LD(b){this.model=b;this.zc=null;this.ij=new Xz({model:this.model});W("/account/startTrial",!0,!1,!1,r(this,this.Uy));U(Vw,r(this,this.Uy));z.c(Uf,r(this,this.Dr));z.c(Ae,r(this,this.Ua));W("/"+nC,!1,!1,!1,r(this,this.OM));U(Av,r(this,this.uM))}f=LD.prototype;f.debug=function(b){k.debug("ComplimentaryTrialController : ",arguments)};
f.Uy=function(b){this.debug("Start trial request",b);var c=(b.path?b.path.split("/"):null)[3];this.debug("Complimentary trial for ",c);c&&(setTimeout(r(this,function(){C.Pw(c,!0,r(this,function(b){this.zc=b}),r(this,function(){}))}),1),z.b(Sj,{sponsor:c,referrer:this.referrer}))};f.Ua=function(b){this.debug("Listener data : ",b);if(b){b=b.Zk;var c=this.model.get("expired");b&&!0!==c&&MD(this,b,!1)}};f.Dr=function(b){if(b=b.sponsor)T(qu),MD(this,b,!0)};
function MD(b,c,d){0==c.toLowerCase().indexOf("pandora")?(b.debug("Looks like a pandora trial",c),ND(b,{},d)):b.zc&&b.zc.sponsor==c?ND(b,b.zc,d):C.Pw(c,d,r(b,function(b){ND(this,b,d)}),r(b,function(){}))}
function ND(b,c,d){function e(b){void 0==b.initialSkin&&T(qv)}b.zc=c;b.debug("Got trial data",b.zc);var h=1;d&&(b.zc.prerollValue?(z.b(Xk,{key:"advertiser",value:b.zc.prerollValue,isUserInitiated:!1,callback:function(){e(c)}}),h=200):e(c));var l=c.skinClickThroughUrl;l?(b.debug("Loading click through url "+l),b.ij.render(l)):b.ij.gb();z.b(Vf,b.zc);l=b.model.get("currentUser");!d&&(null!=b.model.get("currentSkinPath")||l&&l.vi)||setTimeout(function(){T(zv,"/skins/"+c.initialSkin)},h)}
f.uM=function(b){b&&(!0===b.sponsored?this.ij.hc():this.ij.gb())};f.OM=function(){C.pO();this.ij.gb();z.b(Wf,this.zc)};function OD(b){this.model=b;this.zc=null;this.ZP=new XA({model:this.model});this.hash=W("/trial",!0,!0,!1,r(this,this.Cr))}OD.prototype.Cr=function(b){this.debug("Start trial request",b);b=(b.path?b.path.split("/"):null)[2];this.debug("Sponsored trial for ",b);b&&(this.ZP.render(b),this.hash.update(b))};OD.prototype.debug=function(b){k.debug("SponsoredTrialController : ",arguments)};function PD(b){this.model=b;this.view=new iB({model:this.model});this.XK=this.Wb=null;z.c(hl,r(this,this.zJ));z.c(il,r(this,this.yJ));this.model.bind("change:currentStation",r(this,this.qq));this.model.bind("change:currentTrack",r(this,this.sq))}f=PD.prototype;f.zJ=function(b){b instanceof Fp?this.Xs(b):k.info("Can't start sponsored listening mode with an invalid reward:",b)};f.yJ=function(){QD(this)};
f.qq=function(){if(null!=this.Wb){var b=this.model.get("currentUser"),c=this.model.get("currentStation");!b.G()||c&&C.wa(c)?this.view.Cq():this.view.Xz()}};f.sq=function(){null!=this.Wb&&this.model.get("audioAdPlaying")&&z.b(ci,{appSkip:!0})};
f.Xs=function(b){this.model.get("audioAdPlaying")&&z.b(ci,{appSkip:!0});this.Wb&&(clearInterval(this.Wb),this.Wb=null);this.XK=b.Vg();var c=b.tD,d=b.uD,e=this.model.get("currentUser"),h=this.model.get("currentStation"),l=h&&C.wa(h);this.view.Xs(b.wC,b.GC,b.FC,b.hD,b.iD,Gp(b),c/d,!e.G()||!h||l);this.$c("vx_status_bar_shown",b,e);var p=Math.max(1,d/360),h=1E3*p,q=c;this.Wb=setInterval(r(this,function(){q-=p;this.view.rQ(q,d);0>=q&&(QD(this),clearInterval(this.Wb),this.Wb=null,z.b(il),this.$c("value_exchange_end",
b,e))}),h)};function QD(b){null!=b.Wb&&(b.view.cF(),null!=b.Wb&&(clearInterval(b.Wb),b.Wb=null))}f.$c=function(b,c,d){s("value_exchange",{action:b,line_id:c.Th,creative_id:c.pd,offer_name:c.xk,truex_instance_id:c.zo,vendor_id:t,device_id:pe},d)};function RD(b){this.model=b;z.c(pk,r(this,this.kj));z.c(lk,r(this,this.kj));z.c(Th,r(this,this.zL));z.c(Rh,r(this,this.yL));this.hash=W("/one/paypal/trial",!0,!0,!1,r(this,this.Cr))}f=RD.prototype;f.Cr=function(){this.Wf=Wo("token");if(this.Vq||ge(this.Wf))setTimeout(function(){V("/",!1,!1)},100);else{var b=this.model.get("currentUser");b&&(this.zj=b.s,b.s="COMPLIMENTARY");this.Vq=!0;z.b(ok,[this.Wf,Ro()])}};f.kj=function(){var b=mb();(new X({message:b})).render();z.b(wg);T(qu)};f.zL=function(){this.jm()};
f.yL=function(){this.jm()};f.jm=function(){var b=this.model.get("currentUser");b&&this.zj&&(b.s=this.zj);T(qu)};function SD(b){this.model=b;z.c(Wh,r(this,this.HL));this.hash=W("/one/paypal/gift",!0,!0,!1,r(this,this.ML))}SD.prototype.ML=function(){var b=Wo("token"),c=Wo("code");if(this.Vq||ge(b))setTimeout(function(){V("/",!1,!1)},100);else{var d=this.model.get("currentUser");d&&(this.zj=d.s,d.s="COMPLIMENTARY");this.Vq=!0;z.b(xk,[b,c])}};SD.prototype.HL=function(){(new X({message:oc()})).render();var b=this.model.get("currentUser");b&&this.zj&&(b.s=this.zj);T(qu)};function TD(b){this.model=b;U(Ju,r(this,this.DF));U(Du,r(this,this.RD));U(Eu,r(this,this.yF));U(Fu,r(this,this.ON));U(cv,r(this,this.wF));U(dv,r(this,this.CF))}f=TD.prototype;f.DF=function(b){var c=b.musicID,d=b.stationID;b=b.isPositive;null!=c&&0!=c.length&&null!=d&&null!=b&&this.execute({method:"bookmark.deleteFeedback",isPositive:b,musicID:c,stationID:d},r(this,function(){T(Rv,null)}),"Could not delete feedbacks",!0)};
f.RD=function(b){null!=b.xo&&""!=b.xo&&this.execute({method:"comment.addComment",commentMode:"add",commentTargetID:b.mv,commentType:b.C(),commentText:b.xo,isprivate:b.$C},r(this,function(c){c=c.result;c.targetId=b.mv;var d=this.model.get("currentUser");null!=d&&(c.webName=d.Z,d.za&&(b.fbid=d.za),c.clientCommentType=b.C());T(Ov,c)}),"Could not add comment",!0)};f.yF=function(b){this.execute({method:"comment.deleteComment",commentID:b},r(this,function(){}),"Could not delete comment",!0)};
f.ON=function(b){this.execute({method:"comment.reportComment",commentID:b},r(this,function(){var c=$(".notes .comment_box[data-noteid="+b+"]");c.addClass("reported_comment");c.wrapInner('<div class="reported_comment_content"></div>');c.append('<div class="reported_comment_overlay"><div class="reported_comment_message"><div class="thanks">Thank you</div> <div>This comment has been marked as inappropriate.</div></div></div>');setTimeout(function(){c.slideUp()},2E3)}),"Could not report comment",!0)};
f.wF=function(b){var c=b.section;this.execute({method:"bookmark.deleteArtistBookmark",bookmarkID:b.bookmarkId},r(this,function(){T(Wv,c)}),"Could not delete bookmark",!0)};f.CF=function(b){var c=b.section;this.execute({method:"bookmark.deleteSongBookmark",bookmarkID:b.bookmarkId},r(this,function(){T(Xv,c)}),"Could not delete bookmark",!0)};
f.execute=function(b,c,d,e){z.b(Xf,b);var h=this.model.get("currentUser");return null!=h?(b.at=h.dg,$.ajax({url:"/services/ajax/",dataType:"json",traditional:!0,data:b,success:r(this,function(h){z.b(Yf,b);"ok"==h.stat?c(h):1013==h.code?z.b(Mg):1010<=h.code&&1012>=h.code?z.b(Eh):1020==h.code?z.b(Fh):UD("Bad response: "+h.stat,r(this,function(){this.execute(b,c,d,e)}),function(){k.error(d)})}),error:function(h,p,q){UD(q,r(this,function(){this.execute(b,c,d,e)}),function(){k.error(d)})}})):null};
function sA(b,c,d,e){z.b(Xf,b);var h=(new Date).getTime();TD.latestCallId=h;$.post(b,c).success(function(l,p){z.b(Yf,b);if(TD.latestCallId!=h)k.info("cancelling ajax call: "+b+" ["+h+"]");else if("success"==p)d(l,p);else{var q="Bad status="+p;UD(q,function(){sA(b,c,d,e)},function(){VD(p,q,d,e)})}}).error(function(l,p,q){if(TD.latestCallId!=h)k.info("cancelling ajax call: "+b+" ["+h+"]"),z.b(Yf,b);else{var u=q.replace(/\+/g," ");UD(u,function(){sA(b,c,d,e)},function(){VD(p,u,d,e)})}})}
function Jz(b,c,d,e,h){z.b(Xf,b);var l=(new Date).getTime();TD.latestCallId=l;$.get(b,c).success(function(p,q){z.b(Yf,b);if(TD.latestCallId!=l)k.info("cancelling ajax call: "+b+" ["+l+"]");else if("success"==q)d(p,q);else{var u="Bad status="+q;h?(z.b(Yf,b),VD(q,u,d,e)):UD(u,function(){Jz(b,c,d,e)},function(){VD(q,u,d,e)})}}).error(function(p,q,u){var y=String(u).replace(/\+/g," ");h?(z.b(Yf,b),VD(q,y,d,e)):UD(y,function(){TD.latestCallId!=l?(k.info("cancelling ajax call: "+b+" ["+l+"]"),z.b(Yf,b)):
Jz(b,c,d,e)},function(){VD(q,y,d,e)})})}function VD(b,c,d,e){e?e(b,c):d('<div class="ajax_error_message">'+c+"</div>","success")}function UD(b,c,d){z.b(Yf,"error handler");b=new X({message:Qb([b]),persist:!0,retry:!0});b.bind("retry",function(){c()});b.bind("close",function(){d()});b.render()};function WD(b){this.model=b;this.yb={};U(su,r(this,this.zl));U(Bv,r(this,this.jq));z.c(Ae,r(this,this.Ua))}
WD.prototype.zl=function(b){var c=this.yb[b.o()];if(null!=c)T(Bv,c);else{var d=(c=this.model.get("currentUser"))&&c.Rb,d={url:"/services/ajax/",dataType:"text",context:b.o(),data:{method:"lyrics.getLyrics",trackUid:b.o(),lyricId:d?b.bv:b.Uh,check:d?b.Ju:b.Tp(),nonExplicit:d},success:this.zr,error:function(c,d,l){UD(l,r(this,function(){this.zl(b)}),function(){k.info("error",c,d,l)})}};c&&c.dg&&$.extend(d.data,{at:c.dg});$.ajax(d)}};
WD.prototype.zr=function(b){b=eval("var tmp = "+b+"; tmp;");"ok"==b.stat&&function(b,d){var e=window.a;window.a=String.fromCharCode;var h=b.x(b.lyrics);T(Bv,new oy(h,b.credits,d));window.a=e}(b,this)};WD.prototype.jq=function(b){this.yb[b.o()]=b};WD.prototype.Ua=function(){this.yb={}};function XD(b){this.model=b;this.yb={};U(tu,r(this,this.AG))}XD.prototype.AG=function(b){var c=this.yb[b.bf];if(c)T(Cv,c);else{var c=b.jo,d=this.model.get("currentUser");d&&d.Rb&&c.indexOf("explicit=");$.get(b.jo,{},r(this,this.uL))}};XD.prototype.uL=function(b){b=b.artistExplorer||b.composerExplorer;null!=b&&(b=iy(b),this.yb[b.bf]=b,T(Cv,b))};Cn.nm=g([G.slice(0,18),G.slice(18,274),G.slice(274,530),G.slice(530,786),G.slice(786,1042)]);function YD(b){this.model=b;z.c(aj,r(this,this.NF))}
YD.prototype.NF=function(b){var c=null,d=!1,e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState)if(clearTimeout(c),200!=e.status)z.b(oh,"bad url shortener response status: "+e.status);else if(!d){var b=e.responseText;ge(b)||0!=b.indexOf("http")?z.b(oh,"weird url shortener response text: "+b):z.b(zg,b)}};var c=setTimeout(function(){z.b(oh,"bitly call has timed out");d=!0},1E4),h=b.songToken,l=b.stationToken,p=b.shareName,q=b.webname;b=b.shareServiceName||null;var u=A._data.proxyPort,
y="http://"+A._data.proxyHost;80!=u&&(y+=":"+u);y+="/short";y=(null!=h?y+"/song":y+"/station")+("?webname="+encodeURIComponent(q));y+="&station="+encodeURIComponent(l);null!=p&&""!=p&&(y+="&shareName="+encodeURIComponent(p));y+="&song="+encodeURIComponent(h);b&&(y+="&site="+encodeURIComponent(b));k.info("bit.ly request: "+y);e.open("GET",y,!0);e.send(null)};function ZD(b){this.model=b;z.c(Ae,r(this,this.Wc));z.c(ij,r(this,this.Fj));z.c(jj,r(this,this.Fj));z.c(zg,r(this,this.Px));z.c(oh,r(this,this.dI));z.c(xg,r(this,this.SJ));z.c(yg,r(this,this.TJ));z.c(mh,r(this,this.aI));U(bv,r(this,this.UJ))}f=ZD.prototype;f.Wc=function(b){this.model.set({twitterAuthenticated:null!=b&&!ge(b.Sd)})};f.UJ=function(){this.oo=!0;$D(this)};
f.Fj=function(b){b.doTwitter&&!this.$P&&(this.Np=0,this.Ak=b,b.shortenedUrl?this.Px(b.shortenedUrl):z.b(aj,{songToken:b.isSongShare?b.songDetailToken:null,stationToken:b.stationToken,webname:b.webname,shareServiceName:"twitter",shareName:b.shareName}))};f.Px=function(b){this.wD=b;b=this.model.get("currentUser");ge(b.Sd)?$D(this):aE(this)};f.dI=function(b){z.b(lh,"failed to shorten url. "+b)};
function $D(b){b.Np++;if(3<b.Np)z.b(lh,"unable to authenticate with twitter.  failed authentication "+b.Np+" times"),b.$P=!0;else{var c=b.model.get("currentUser"),c=bE(b).sign({path:"https://api.twitter.com/oauth/request_token",parameters:{oauth_callback:cn()+"twitter/oauthAuthorizationCallback.jsp"},signatures:{consumer_key:c.Zm,shared_secret:c.$m}}),d=window.open("about:blank","oauth");cE(b,"/oauth/"+c.signed_url.substring(c.signed_url.indexOf("request_token")),function(b){null==b||0!=b.indexOf("oauth_token")?
z.b(lh,"unable to authenticate with twitter"):null==d?z.b(lh,"twitter authentication blocked by popup blocker"):(d.location.href="https://api.twitter.com/oauth/authorize?"+b,d.focus())})}}
function cE(b,c,d,e){var h=!1,l=setTimeout(function(){h=!0;z.b(lh,"twitter communication timed out")},1E4);$.ajax({type:"POST",url:"/twitter"+c,data:e?e:null,success:r(b,function(b){clearTimeout(l);h||d(b)}),error:r(b,function(b){clearTimeout(l);z.b(dj,{});z.b(lh,"twitter responded with error: "+b)}),dataType:"html"})}
f.SJ=function(b){var c=b.token;b=b.verifier;if(ge(c))z.b(lh,"Unable to authenticate with twitter - twitter failed to return a request token");else if(ge(b))z.b(lh,"Unable to authenticate with twitter - twitter failed to return a verifier");else{var d=this.model.get("currentUser"),c=bE(this).sign({path:"https://api.twitter.com/oauth/access_token",parameters:{oauth_token:c},signatures:{consumer_key:d.Zm,shared_secret:d.$m}});cE(this,"/oauth/"+c.signed_url.substring(c.signed_url.indexOf("access_token")),
function(b){if(ge(b))z.b(lh,"Unable to authenticate with twitter - unable to fetch access tokens ["+b+"]");else{var c=b.split("&");b=(""+c[0]).split("=")[1];c=(""+c[1]).split("=")[1];ge(b)||ge(c)?(z.b(dj,{}),z.b(lh,"Unable to authenticate with twitter - authorization denied")):z.b(dj,{twitterShareUserKey:b,twitterShareUserSecret:c})}},{oauth_verifier:b})}};
function aE(b){var c=b.model.get("currentUser"),d=bE(b),e=0==b.Ak.userMessage.length?b.Ak.defaultTwitterMessage:b.Ak.userMessage,h=" "+b.wD+(e.match(/#pandora/i)?"":" #pandora");140<(e+h).length&&(h="..."+h,e=e.substr(0,140-h.length));c=d.sign({path:"https://api.twitter.com/1.1/statuses/update.json",parameters:{status:e+h},signatures:{consumer_key:c.Zm,shared_secret:c.$m,oauth_token:c.Sd,oauth_secret:c.Lh}});cE(b,"/statuses/"+c.signed_url.substring(c.signed_url.indexOf("update")),r(b,function(b){ge(b)?
z.b(lh,"Unable to post to twitter - twitter failed to respond"):(b=eval("("+b+")"),null!=b.error?-1!=b.error.toLowerCase().indexOf("authenticate")?(z.b(dj,{}),$D(this)):z.b(lh,"Unable to post to twitter: "+b.error):z.b(Ag,{twitter:!0,twitterHandle:b.user&&b.user.screen_name?b.user.screen_name:""}))}))}
f.TJ=function(b){var c=this.model.get("currentUser");null==b?(c.Sd=null,c.Lh=null,this.oo=!1,this.model.set({twitterAuthenticated:!1})):(c.Sd=b.twitterShareUserKey,c.Lh=b.twitterShareUserSecret,this.oo?(this.oo=!1,this.model.set({twitterAuthenticated:!0})):null==this.Ak?z.b(lh,"Unable to post to twitter - no tweet text"):ge(b.twitterShareUserKey)?z.b(lh,"Unable to post to twitter"):(this.model.set({twitterAuthenticated:!0}),aE(this)))};
f.aI=function(b){z.b(lh,"Unable to save twitter credentials: "+b)};function bE(b){b=b.model.get("currentUser");b=new OAuthSimple(b.Zm,b.$m);b.setAction("POST");return b}window.onOAuthCallBack=function(b,c){z.b(xg,{token:b,verifier:c})};function dE(b){this.model=b;eE=A._data.facebookConnectPermissions.split(",");this.model.bind("change:currentUser",r(this,this.wm));this.model.bind("change:facebookAuthenticated",r(this,this.Yo));z.c(Ae,r(this,this.Wc));z.c(kj,r(this,this.ew));z.c(ij,r(this,this.As));z.c(jj,r(this,this.zs));z.c(mj,r(this,this.gG));z.c(nj,r(this,this.CH));z.c(ug,r(this,this.disconnect));z.c(tg,r(this,this.mI));z.c(fg,r(this,this.aJ));z.c(vg,r(this,this.tK));U(Zu,r(this,this.hG));this.Xv()}
var fE,gE,hE,iE,eE=[],jE=["publish_actions"],kE=[];function lE(b){k.info("FacebookService.authResponseChange",b);fE=b;gE||(gE=!0,FB.api("/me/permissions",function(b){k.info("FacebookService.authResponseChange got permissions",b);hE=b;gE=!1}))}window.fbAsyncInit=function(){FB.Event.subscribe("auth.authResponseChange",lE);FB.Event.subscribe("auth.statusChange",lE);FB.init({appId:Do(),version:"v2.2",status:!0,cookie:!0,xfbml:!1,channelUrl:cn()+"fb_channel.html"});iE=!0;if(kE)for(;0<kE.length;)kE.shift()()};
f=dE.prototype;f.tK=function(b){var c=this.model.get("currentUser");null!=c&&(Gn(c,b),this.wm(),this.Wc())};
f.Wc=function(){var b=this.model.get("currentUser");k.info("FacebookService.initUser: ",b);if(null!=b&&!b.p())if(iE)if(b.Lw)k.info("initUser: server needs access token re-auth"),b.Lw=!1,mE(this,r(this,function(c){k.info("initUser: re-auth - logged in and connected");var d=c.authResponse.accessToken,l=c.authResponse.userID,p=b.za;if(null==p||p==l)k.info("initUser: user matches connected, updating short-lived access token"),Sn(b,l),Tn(b,d,c.authResponse.expiresIn);this.Wc()}),r(this,function(){k.info("initUser: re-auth - not logged in and/or not connected");
this.Wc()}));else{var c=b.Nc;if(!c&&null==b.za){var d=this.model.get("facebookLoginInfo");d&&(c=d.access_token,Tn(b,c,d.expires_in),Sn(b,d.id),Vn(b,d.name),Rn(b,!1))}c&&0<c.length?(k.info("User already has an access token, validate that it's good: ",c),FB.api("/me/permissions",{access_token:c},r(this,function(c){k.info("initUser permissions response: ",c);(c=c.data)&&0<c.length?(k.info("Access token is valid"),nE(this,c[0])):(k.info("Access token is not valid"),Tn(b,null),oE(this))}))):oE(this)}else k.info("FacebookService.initialized == false, setting FacebookService.postInitCallback"),
kE.push(r(this,this.Wc))};
function oE(b){k.info("FacebookService.initUserNoAccessToken");mE(b,r(b,function(b){k.info("initUserNoAccessToken: Logged in and connected");var d=this.model.get("currentUser"),e=b.authResponse.accessToken;d.za!=b.authResponse.userID||d.Mg?(k.info("initUserNoAccessToken: different user!"),Rn(d,!0),this.model.set({facebookAuthenticated:!1})):(k.info("initUserNoAccessToken: Same user, updating access token"),Tn(d,e,b.authResponse.expiresIn));FB.api("/me/permissions",r(this,function(b){k.info("initUserNoAccessToken permissions response: ",
b);(b=b.data)&&0<b.length&&nE(this,b[0])}))}),r(b,function(){k.info("initUserNoAccessToken: Not logged in and/or not connected");this.model.set({facebookAuthenticated:!1});this.Yo()}))}function nE(b,c){var d=b.model.get("currentUser");null!=d&&(Un(d,c),d.Mg?(k.info("initUserPermissionsCallback: isFbDisconnected = true"),b.model.set({facebookAuthenticated:!1}),b.Yo()):(k.info("initUserPermissionsCallback: isFbDisconnected = false"),pE(b)))}
function mE(b,c,d){iE&&FB.getLoginStatus(r(b,function(b){b.authResponse&&"connected"==b.status?c&&c(b):d&&d(b)}))}
function pE(b,c){var d=b.model.get("currentUser");if(null!=d){var e=r(b,function(){this.model.set({facebookAuthenticated:!d.Mg});c&&c()}),h=r(b,function(){k.info("saveFbInfo: doesFacebookNeedSave() = ",d.Bd);if(d.Bd){d.Bd=!1;var b={id:d.za,name:d.ic||"",accessToken:d.Nc,accessTokenExpiration:d.bG||"",callback:e};k.info("saveFbInfo: saving",b);z.b(Uj,b)}else e()}),l=d.ic;null==l||""==l?(k.info("Don't have a full name for the listener, get it from Facebook"),b.Up(r(b,function(b){b&&Vn(d,b);h()}))):
(k.info("We already have their Facebook name"),h())}}f.Up=function(b){var c=this.model.get("currentUser");if(null!=c&&null!=c.za){var d={fields:"name"};c.Nc&&(d.access_token=c.Nc);FB.api("/"+c.za,d,function(c){b(c.name)})}else b(null)};
function qE(b,c,d,e){k.info("doAction");var h=b.model.get("currentUser");if(null!=h)if(h.p())T(jv,{onSuccessCallback:r(b,function(){qE(this,c,d,e)})});else if(null!=h.za&&rE(b,c))k.info("doAction: User already has permissions, execute callback immediately"),Rn(h,!1),pE(b,d);else{k.info("doAction: User does not have permissions yet");if(b.model.get("facebookAuthenticated"))k.info("doAction: Already connected, we just need to ask for extra permissions");else if(k.info("doAction: Not connected in the Pandora backend, possibly still connected in Facebook API"),
iE&&fE&&fE.authResponse&&"connected"==fE.status){k.info("doAction: Logged in and connected in Facebook API, using cached permissions",hE);Sn(h,fE.authResponse.userID);Tn(h,fE.authResponse.accessToken,fE.authResponse.expiresIn);var l=hE?hE.data:null;if(l&&0<l.length&&(Un(h,l[0]),rE(b,c))){Rn(h,!1);pE(b,d);return}}else k.info("doAction: Not logged in and/or not connected in Facebook API");b.login(d,e)}}
function rE(b,c){k.info("hasRequiredPermissions: requiredPermissions=",c);var d=b.model.get("currentUser");if(null!=d&&(d=d.Ng,k.info("hasRequiredPermissions: fbPermissions = ",d),null!=d)){for(var e=0;e<c.length;e++){var h=c[e];k.info("hasRequiredPermissions: checking for ",h);if(!d[h])return k.info("hasRequiredPermissions: don't have permission, returning false",h),!1}k.info("hasRequiredPermissions: has ALL permissions, returning true");return!0}k.info("hasRequiredPermissions: returning false");
return!1}
f.login=function(b,c){k.info("FacebookService.login");var d=this.model.get("currentUser");null!=d&&FB.login(r(this,function(e){k.info("FacebookService.login returned: ",e);if("connected"==e.status){var h=e.authResponse;FB.api("/me/permissions",r(this,function(e){k.info("FacebookService.login permissions response: ",e);if((e=e.data)&&0<e.length){var p={};if(e&&e.length)for(var q=0;q<e.length;q++){var u=e[q];"granted"===u.status&&(p[u.permission]=1)}Un(d,p);if(rE(this,eE)){k.info("FacebookService.login user has required permissions, saving");Sn(d,
h.userID);Tn(d,h.accessToken,h.expiresIn);Rn(d,!1);pE(this,b);return}}k.info("FacebookService.login user does NOT have required permissions, fail");Sn(d,null);z.b(rg);c()}))}else Sn(d,null),z.b(rg),this.model.set({facebookAuthenticated:!1}),c()}),{scope:eE.join(",")})};f.ew=function(b){qE(this,eE,r(this,function(){k.info("FacebookService.connect: success");b&&b(!0)}),r(this,function(){k.info("FacebookService.connect: failure");b&&b(!1)}))};
f.gG=function(){if(this.model.get("facebookAuthenticated")){var b=this.model.get("currentUser");Xn(b,[]);k.info("FacebookService.fetchFriends: calling /friends");FB.api("/me/friends",{access_token:b.Nc},function(c){k.info("friends callback: ",c);Xn(b,c.data);z.b(vf,c.data)})}};f.hG=function(b){var c=b.fbCallback;b="SELECT id,name FROM profile WHERE id in ("+b.fbids.join(",")+")";k.info("FacebookService.fetchNames: executing FQL: ",b);iE&&FB.api({method:"fql.query",query:b},c)};
f.disconnect=function(){var b=this.model.get("currentUser");b&&Sn(b,null);this.model.set({facebookAuthenticated:!1})};
f.zs=function(b){if(b.doFacebook){var c=this.model.get("currentUser"),d=b.artUrl,e;e=-1!=d.indexOf("no_album_art.png")?cn()+"static/images/share_facebook/generic_cover_art_preview.gif":d;e=0!=e.indexOf("http://")?"http://www.pandora.com/art/"+e:e;d=-1==d.indexOf("no_album_art")?d:cn()+d;c=Eo()+"static/fb-share.swf?Song="+encodeURIComponent(b.songName)+"&Artist="+encodeURIComponent(b.artistName)+"&Station="+encodeURIComponent(b.stationName||"")+"&AlbumArt="+encodeURIComponent(d)+"&SampleTrack="+encodeURIComponent(Eo()+
"favorites/getSample.jsp?token="+b.songToken+"&allowExplicit="+!c.Rb)+"&StationLink="+encodeURIComponent(b.stationLandingUrl||b.landingUrl);(d=b.facebookCaption)||(d=" by "+b.artistName);var h=b.facebookDescription;h||(h=" on "+b.albumName);this.Fj(b.userMessage,b.songName,d,h,b.directUrl,b.landingUrl,e,c)}};
f.As=function(b){if(b.doFacebook){var c=b.stationName,d=b.facebookDescription,e=b.artUrl;-1<c.indexOf("Thumbprint Radio")&&(c="Check out "+c+" on Pandora",d="Inspired by thumbs across all of my stations.",e=b.fbShareArt);this.Fj(b.userMessage,c,"Listen at Pandora",d,b.directUrl,b.landingUrl,e,null)}};
f.Fj=function(b,c,d,e,h,l,p,q){var u={message:b,name:c,caption:d,description:e,actions:[{name:"Listen at Pandora",link:h}],link:l,picture:p,source:q};b=this.model.get("currentUser");null!=b&&null!=b.Nc&&(u.access_token=b.Nc);qE(this,jE,r(this,function(){k.info("FacebookService.share: success");FB.api("/me/feed","post",u,r(this,function(b){k.info("FacebookService.share: post response = ",b);!b||b.error?"OAuthException"==b.error.type?(z.b(lh,"Could not share to Facebook, you may need to try again."),
Sn(this.model.get("currentUser"),null),this.Wc()):z.b(lh,null!=b.error?"facebook responded with an error: "+b.error.message:"unknown error posting to facebook"):z.b(Ag,{facebook:!0})}))}),r(this,function(){k.info("FacebookService.share: failure")}))};
f.CH=function(){var b=this.model.get("currentUser");b&&!b.ih?qE(this,jE,r(this,function(){var c=b.Lg||b.Kg||b.Jg;z.b(vi,{autoShareEnabled:!0,autoShareTrackPlay:c?b.Lg:!0,autoShareLikes:c?b.Kg:!0,autoShareFollows:c?b.Jg:!0,userInitiated:!0})}),r(this,function(){})):(new X({message:"You cannot enable auto-share when your profile is set to 'private'"})).render()};
f.mI=function(b){var c=this.model.get("currentUser");c.Mw=b.facebookSettingChecksum;c.ol=b.autoShareEnabled;c.Lg=b.autoShareTrackPlay;c.Kg=b.autoShareLikes;c.Jg=b.autoShareFollows;this.wm()};f.Yo=function(){if(!this.model.get("facebookAuthenticated")){om(bm,!1);var b=this.model.get("currentUser");b.ol=!1;b.Lg=!1;b.Kg=!1;b.Jg=!1;this.wm()}};
f.wm=function(){var b=this.model.get("currentUser"),c=this.model.get("autoShare"),b=b&&b.ol&&!b.ih;this.model.set({autoShare:b});k.info("FacebookService.refreshAutoShareModel",c,b,!0===jm(bm));!1===c&&b&&!0!==jm(bm)&&(new eA,om(bm,!0))};
f.Xv=function(){var b=$.cookie("_fbat");k.info("checkAccessTokenCookie: fbat=",b);if(b)if(iE){$.cookie("_fbat",null);var c=/access_token=([^&]+)/,c=b.match(c);k.info("checkAccessTokenCookie: match=",c);if(c&&1<c.length){var d=c[1],e=null,c=/expires_in=([^&]+)/;(c=b.match(c))&&1<c.length&&(e=c[1],k.info("expires_in: ",e));FB.api("/me",{access_token:d},r(this,function(b){k.info("checkAccessTokenCookie: response=",b);null==b.error&&null!=b.id&&(b.access_token=d,b.expires_in=e,this.model.set({facebookLoginInfo:b}))}))}}else kE.unshift(r(this,
this.Xv))};
f.aJ=function(){k.info("FacebookService.handleRegistrationComplete");var b=this.model.get("currentUser"),c=A._data.fb_ref;if(c&&0<c.length){var d={listener_id:b.t,social_network_id:"facebook"},e=c.split("_");3<=e.length&&(d.shared_listener_token=e[2]);0==c.indexOf("trackplay__")&&4==e.length&&(d.shared_station_id=e[3]);s("social_autoshare_new_registration",d,b)}(c=this.model.get("facebookLoginInfo"))&&b&&(Sn(b,c.id),Tn(b,c.access_token,c.expires_in),Vn(b,c.name),k.info("FacebookService.handleRegistrationComplete: attempting to auto-connect"),this.ew())};function sE(b){this.model=b;z.c(xe,r(this,this.Jl));z.c(wi,r(this,this.Jl))}function gA(){var b=1==parseInt($.cookie("_sl_ssc"),10);se("_sl_ssc");return b}sE.prototype.Jl=function(){var b=$.cookie("_sl_toast"),c=$.cookie("_sl_share_imp"),d=$.cookie("_sl_path");se("_sl_toast");se("_sl_share_imp");se("_sl_path");(A._data.shareImp||"true"==c)&&this.model.set({shareFirstImp:!0});fe(b)&&(new X({message:b})).render();fe(d)&&this.model.set({smartLaunchPath:d})};function tE(b){this.model=b;this.yb={};U(nv,r(this,this.Vp));z.c(Af,r(this,this.sI));z.c(wf,r(this,this.GI));z.c(yf,r(this,this.Kl));z.c(xf,r(this,this.Kl));z.c(Ae,r(this,this.Ua))}f=tE.prototype;f.Vp=function(b){var c=this.yb[b.Ye+":"+b.Fc];null!=c?T(Dv,c):z.b(rj,b)};f.sI=function(b){this.yb[b.Ye+":"+b.Fc]=b;T(Dv,b)};f.GI=function(b){b=ko(b);this.yb[b.Ye+":"+b.Fc]=b;T(Dv,b)};f.Kl=function(b){b=ko(b);b.Ue=null;this.yb[b.Ye+":"+b.Fc]=b;T(Dv,b)};f.Ua=function(){this.yb={}};function cz(){uE()}var dz={};function uE(){$.ajax({url:"/static/videohub/manifest.xml?cb="+de(),dataType:"xml",success:function(b){dz={};$.each($("video_page",b),function(b,d){var e=new Cy(d),h=e.tC;null!=h&&""!=h&&(dz[h]=e)});setTimeout(uE,9E5)},error:function(b,c){k.error("Could not load videohub manifest",c);setTimeout(uE,9E5)}})};function vE(b){this.model=b;z.c(Ke,r(this,this.bh));z.c(oi,r(this,this.DI));W("/genre_hint",!0,!0,!1,r(this,this.rI));this.Eb=""}vE.prototype.bh=function(b){var c=b.wf();if(null!=c&&""!=this.Eb){for(var d=0;d<c.length;d++)if(null!=c[d]&&c[d].toLowerCase()==this.Eb.toLowerCase()){s("create_station_from_hint",{hint_genre:this.Eb,station_id:b.e()},this.model.get("currentUser"));break}this.Eb=""}};vE.prototype.DI=function(){this.Eb=""};
vE.prototype.rI=function(b){Yd(this,function(){var c=b.pathNames;this.Eb=c[1];V("/music/"+c[1],!0,!0);s("hint_genre_clicked",{hint_genre:this.Eb},this.model.get("currentUser"))},100)};function wE(b){this.model=b;z.c(Pe,r(this,this.OJ));z.c(Qe,r(this,this.PJ));z.c(Re,r(this,this.NJ));z.c(Mh,r(this,this.QJ))}wE.prototype.OJ=function(b){this.model.get("currentUser")&&go(this.model.get("currentUser"))&&s("track_end",{reason:b.reason,elapsed_seconds:b.elapsed_seconds,remaining_seconds:b.remaining_seconds,audio_token:b.audio_token,vendor_id:t,device_code:pe,device_id:Wm()},this.model.get("currentUser"))};
wE.prototype.PJ=function(b){this.model.get("currentUser")&&go(this.model.get("currentUser"))&&s("track_fetch",{is_prefetch:b.is_prefetch,audio_token:b.audio_token,vendor_id:t,device_code:pe,device_id:Wm()},this.model.get("currentUser"))};wE.prototype.NJ=function(b){this.model.get("currentUser")&&go(this.model.get("currentUser"))&&s("track_buffered",{audio_token:b.audio_token,vendor_id:t,device_code:pe,device_id:Wm()},this.model.get("currentUser"))};
wE.prototype.QJ=function(b){try{if(!b.url||""==b.url)throw Error("TrackMonitoringService.handleTrackNotPlayed called with a blank audio receipt URL");$.ajax({type:"GET",crossDomain:!0,dataType:"jsonp",url:b.url,success:function(){},error:function(b,c,h){k.info("Error sending audio receipt url: "+c+": "+h)}})}catch(c){trackJs.track(c),k.info("Exception on ajax call for audio receipt url: ",c)}};function xE(b){this.model=b;this.yb={};U(Ww,r(this,this.dH))}xE.prototype.dH=function(b){var c=this.model.get("currentUser");b={url:"/services/ajax/",dataType:"text",data:{method:"commerce.getSalesTax",zipcode:b.tb(),billing_frequency:b.Ta(),is_business:b.I(),token:b.AD},success:this.aM,error:function(b,c,h){k.info("error",b,c,h);T(Xw,0)}};c&&c.dg&&$.extend(b.data,{at:c.dg});$.ajax(b)};xE.prototype.aM=function(b){b=eval("var tmp = "+b+"; tmp;");T(Xw,{tax:b.sales_tax,amount:b.amount,token:b.token})};function jn(){this.init();TB(this.data)}var Cz=1E3;
jn.prototype.init=function(){k.info("UserInterface initializing");fn("ui-start");yE(this);this.data=new Backbone.Model({booting:!0,readonly:!1,stationList:new Fy,hasStations:!1,currentStation:null,menuStation:null,currentStationViewIsShuffle:!1,stationSortOrderAlpha:!0,stationToAutoPlay:null,safeToAutoPlayStation:!0,currentTrack:null,selectedTrack:null,trackProgress:null,musicPlaying:!1,playerBarEnabled:!0,currentUser:null,autoShare:!1,currentProfileInfo:null,facebookLoginInfo:null,currentContextualTip:null,
currentShuffleType:Rm(),anonymousTrialExpired:!1,facebookAuthenticated:!1,twitterAuthenticated:!1,relatedArtists:null,monthlyListening:"0",idle:!1,keyPressed:null,poisoned:!1,sequenceNumber:1,siteLocked:!1,capped:!1,expired:!1,inactive:!1,forceRegistration:!1,resettingPassword:!1,usernameFromResetToken:null,audioAdPlaying:!1,videoAdPlaying:null,displayingCompanion:!1,shareFirstImp:!1,currentVxReward:null,searchText:"",searchItemSelectedIndex:-1,showingSearchResults:!1,searchResults:new Iy,modalPanel:null,
profilePanelType:null,lastLowBandwidthNotification:null,blueBarMessage:null,pageShifting:!1,currentSkinPath:null,smartLaunchPath:null,postLoginPath:null,narrative:null,songNarrative:null,selectedArtist:null,searchDetails:null,searchSuggestions:{similar_artists:[],similar_genres:[],facebook_favorites:[]}});fn("ui-views");this.zh=new Wy({model:this.data});new Jy({model:this.data});new Ky({model:this.data});new Ny({model:this.data});new Vy({model:this.data});new Xy({model:this.data});this.dA=new Az(this.data);
this.BP=new Yy({model:this.data,station_menu:this.dA});new az({model:this.data});new bz({model:this.data});new ez({model:this.data});new hz({model:this.data});this.lL=new wz({model:this.data});this.oP=new xz({model:this.data});this.tg=new Gz({model:this.data});new OA({model:this.data});new nA({model:this.data});new oA({model:this.data});new pA({model:this.data});new Oz({model:this.data});new rA({model:this.data});new Hz({model:this.data});new Iz({model:this.data});new fA({model:this.data});new Fz({model:this.data});
new KA({model:this.data});new Pz({model:this.data});new Yz({model:this.data});new Zz({model:this.data});this.Tm=new aA({model:this.data});this.uh=new $z({model:this.data});new ZA({model:this.data,el:$("body")});new jB({model:this.data});new kB({model:this.data});new lB({model:this.data});new mB({model:this.data});fn("ui-controllers");new hC(this.data);new rC(this.data);new GD(this.data);new KD(this.data);new BC(this.data,this.zh);new CC(this.data);new DC(this.data);new GC(this.data);new HC(this.data);
new JC(this.data);new MC(this.data);new PC(this.data);new QC(this.data,this.lL);new RC(this.data,this.oP);new iD(this.data);new jD(this.data,this.BP);new pD(this.data,this.tg);new qD(this.data,this.uh);new wD(this.data,this.Tm);new SC(this.data);new eD(this.data);new UC(this.data);new fD(this.data);new BD(this.data);new CD(this.data);new DD(this.data);new ED(this.data);new Z(this.data);new nB(this.data);new LD(this.data);new OD(this.data);new PD(this.data);new RD(this.data);new SD(this.data);new NC(this.data);
fn("ui-services");new TD(this.data);new WD(this.data);new xE(this.data);new dE(this.data);new ZD(this.data);new YD(this.data);new XD(this.data);new tE(this.data);new sE(this.data);new vE(this.data);new wE(this.data);var b=this;"US"==Ro()&&$("body").addClass("is-us");fn("ui-events");this.data.get("stationList").bind("select",function(c,d){d=!0===d;var l=c.B()&&c.X(),p=b.data.get("currentStation");null!=p&&p.e()==c.e()||b.data.set({currentStation:c,currentStationViewIsShuffle:l},{userInitiated:d})});
this.data.get("stationList").bind("remove",function(c){var d=b.data.get("currentStation");null!=d&&d.e()==c.e()&&(b.data.set({currentStation:null}),c=b.data.get("stationList").at(0),null!=c&&(c.B()&&c.X()||z.b(ii,{stationId:c.e()})))});this.data.get("stationList").bind("all",function(){"REGISTERED_PANEL"!=b.data.get("modalPanel")&&z.b(Og);b.data.set({hasStations:0<this.length})});this.data.bind("change:stationSortOrderAlpha",function(){var c=b.data.get("stationSortOrderAlpha");om(Kl,c);b.data.get("stationList").sort()});
this.data.bind("change:currentUser",r(this,function(){this.data.get("currentUser")?this.data.set({currentShuffleType:Rm()}):this.data.set({searchSuggestions:{similar_artists:[],similar_genres:[],facebook_favorites:[]}})}));z.c(Ng,r(this,function(){this.data.set({booting:!0})}));z.c(Og,r(this,function(){this.data.set({booting:!1});this.data.set({tooYoung:$.cookie("ty")&&"1"==$.cookie("ty")})}));z.c(Kg,r(this,function(b){var c=this.data.get("stationList");(b=c.Oc(b.stationId))&&nn(b.k)&&(c.remove(b,
{silent:!0}),c.trigger("refresh"))}));z.c(Lg,r(this,function(){var b=this.data.get("stationList");b.each(function(c){c.Pb()&&b.remove(c,{silent:!0})});b.trigger("refresh")}));z.c(Fg,r(this,function(b){var c=this.data.get("stationList");if(0!=c.models.length){var d={silent:!0};c.each(function(b){(b.Cb()||b.Pb())&&c.remove(b,{silent:!0})});$.each(b,function(){c._add(this.k,d)});c.trigger("refresh")}}));z.c(Ie,r(this,function(b){var c=this.data.get("currentUser");if(b&&c)for(var d=0;d<b.length;d++){var p=
b[d].k;if(p.B()&&p.X()){var q=c.ic;if(null==q||0==q.length)q=c.sl;null!=q&&0<q.length&&p.Em(q+"'s Shuffle")}}if(te()&&b&&0<b.length){var u=this.data.get("stationList"),y={silent:!0};u._reset(y);for(var E=0,d=0;d<b.length;d++)setTimeout(r(this,function(){var c=b[E++];u._add(c.k,y);E>=b.length&&u.trigger("refresh")}),1);setTimeout(r(this,function(){var c=this.data.get("currentStation");null==c||_.any(b,function(b){return b.e()==c.e()})||this.data.set({currentStation:null});z.b(Je,b)}),1E3)}else{u=this.data.get("stationList");
y={silent:!0};u._reset(y);$.each(b,function(){u._add(this.k,y)});u.trigger("refresh");var L=this.data.get("currentStation");null==L||_.any(b,function(b){return b.e()==L.e()})||this.data.set({currentStation:null})}}));z.c(Ke,r(this,function(b){var c=this.data.get("stationList");null!=c.detect(function(c){return c.e()==b.e()})?z.b(ii,{stationId:b.e()}):c.add(b)}));z.c(Ne,r(this,function(b){var c=this.data.get("stationList"),d=b.stationId,c=c.detect(function(b){return b.e()==d});null!=c&&(c.Em(_.escape(b.stationName)),
c.attributes._stationName=b.stationName,T(Tv,c))}));z.c(Rg,r(this,function(b){var c=this.data.get("stationList");b=b.stationList;for(var d=0;d<b.length;d++){var p=b[d],q=c.detect(function(b){return b.e()==p.stationId});null!=q&&void 0!=p.enableArtistAudioMessages&&(q._enableArtistAudioMessages=p.enableArtistAudioMessages)}}));z.c(Cg,r(this,function(b){var c=b.station;b=b.oldStationId;for(var d=this.data.get("stationList").models,p=0;p<d.length;p++)if(d[p].e()==b){_.map(c,function(b,c){d[p]["_"+c]=
b});d[p].set(new ln(c));break}this.data.get("stationList").refresh(d)}));z.c(Dg,r(this,function(b){for(var c=b.e(),d=this.data.get("stationList").models,p=0;p<d.length;p++)if(d[p].e()==c){d[p]=b;break}this.data.get("stationList").refresh(d);(d=this.data.get("currentStation"))&&d.e()==c&&this.data.set({currentStation:b},{silent:!0})}));var c=r(this,function(b){var c=!0===b.userInitiated,d=b.stationId;b=this.data.get("stationList");var p=b.detect(function(b){return b.e()==d});null!=p&&b.trigger("select",
p,c);this.data.set({safeToAutoPlayStation:!0})}),d=r(this,function(b){c(b)});z.c(ii,c);z.c(ji,d);z.c(Ei,r(this,function(){this.data.set({safeToAutoPlayStation:!1})}));z.c(ph,r(this,function(){this.data.set({safeToAutoPlayStation:!0})}));z.c(ze,r(this,function(b){this.data.set({stationToAutoPlay:b})}));z.c(Xj,r(this,function(){this.data.set({currentTrack:null,musicPlaying:!1,currentStation:null})}));z.c(oi,r(this,function(){this.data.set({currentTrack:null,musicPlaying:!1,currentStation:null,hasStations:!1,
selectedTrack:null})}));z.c(Oe,r(this,function(b){this.data.set({currentTrack:b,musicPlaying:!0});window.currentTrackMusicId=b.o();"function"==typeof window.handleTrackChanged&&window.handleTrackChanged(b.o())}));z.c(Ye,r(this,function(b){this.data.set({trackProgress:b})}));z.c($h,r(this,function(){this.data.set({musicPlaying:!0})}));z.c(bi,r(this,function(){this.data.set({musicPlaying:!1})}));z.c(ei,r(this,function(b){b="/song/thumbs-down/"+b;Sy(b);Ty(b)}));z.c(Pf,r(this,function(b){this.data.set({poisoned:b})}));
z.c(Mg,r(this,function(){this.data.set({readonly:!0})}));z.c(hl,r(this,function(b){this.data.set({currentVxReward:b})}));z.c(il,r(this,function(){this.data.set({currentVxReward:null})}));Uy("/song/move/");Uy("/browse");U(Mv,r(this,function(){this.dA.open()}));$(document).keydown(function(c){var d=b.data.get("keyPressed"),l=-1!=navigator.userAgent.indexOf("Firefox");if(!("INPUT"==c.target.tagName||"TEXTAREA"==c.target.tagName||null!=d&&d.which==c.which||(b.data.set({keyPressed:c}),b.data.get("siteLocked")||
c.ctrlKey||c.metaKey)))if("32"==c.keyCode){if(c.preventDefault(),b.data.get("playerBarEnabled")||b.data.get("audioAdPlaying"))b.data.get("musicPlaying")?z.b(bi):z.b($h)}else if("39"==c.keyCode){if(c.preventDefault(),c=b.data.get("currentTrack"),null!=c&&b.data.get("playerBarEnabled"))return z.b(ci),!1}else!c.shiftKey||"187"!=c.keyCode&&"61"!=c.keyCode?"189"==c.keyCode||l&&"173"==c.keyCode?(c.preventDefault(),c=b.data.get("currentTrack"),null!=c&&b.data.get("playerBarEnabled")&&($(".thumbDownButton.indicator").length?
z.b(gi,c.o()):z.b(ei,c.o()))):c.shiftKey&&"38"==c.keyCode?(c.preventDefault(),b.data.get("musicPlaying")&&b.data.get("playerBarEnabled")&&z.b(li,100)):c.shiftKey&&"40"==c.keyCode?(c.preventDefault(),b.data.get("musicPlaying")&&b.data.get("playerBarEnabled")&&z.b(li,0)):c.altKey&&"38"==c.keyCode?(c.preventDefault(),b.data.get("musicPlaying")&&b.data.get("playerBarEnabled")&&(c=Em()?0:Dm(),z.b(li,c+10))):c.altKey&&"40"==c.keyCode&&(c.preventDefault(),b.data.get("musicPlaying")&&b.data.get("playerBarEnabled")&&
(c=Em()?0:Dm(),z.b(li,c-10))):(c.preventDefault(),c=b.data.get("currentTrack"),null!=c&&b.data.get("playerBarEnabled")&&($(".thumbUpButton.indicator").length?z.b(fi,c.o()):z.b(di,c.o())))});$(document).keyup(function(){b.data.set({keyPressed:null})});fn("ui-done")};
function yE(b){var c=/^(\w+)\s*(.*)$/,d=Backbone.View.prototype.delegateEvents;Backbone.View.prototype.delegateEvents=function(b){d.apply(this,arguments);b=b||this.events;for(var h in b){var l=h.match(c),p=l[1],l=l[2];"click"==p&&$(this.el).delegate(l,p,function(b){jn.globalClickPaused||T(ou,b)})}};$(document).click(r(b,function(b){jn.globalClickPaused||T(ou,b)}))}var zE={};
function U(b,c){var d=zE[b]||[];d.push(c);zE[b]=d;d=c._caller;if(null!=d){var e=d._eventTypes||[];e.push(b);d._eventTypes=e}}function Ez(b,c){if(void 0!==c){var d=zE[c];if(d)for(var e=0;e<d.length;e++)d[e]._caller==b&&d.splice(e--,1)}else for(d=b._eventTypes,e=0;d&&e<d.length;e++)Ez(b,d[e])}function T(b,c){var d=_.clone(zE[b]);if(d)for(var e=0;e<d.length;e++)try{d[e](c,b)}catch(h){trackJs.track(h),je(h)}}
function qA(){jn.globalClickPaused=!0;clearTimeout(jn.globalClickPauseTimeout);jn.globalClickPauseTimeout=setTimeout(function(){jn.globalClickPaused=!1},1E3)}function Ry(b){b=b.get("currentUser");return!0===jm(yl)&&(!b||b.p())}; })();
